UPHSKhazTestBusinessClass is a BusinessClass
    prefix is cfg

    Ontology
        symbolic key is UPHSKhazTestBusinessClass

    Persistent Fields
        //Add leading zeroes
        Test is Numeric size 8

        //MilestoneDate format to MM/DD/YYYY
        MilestoneDate is Date
        UPHSMilestoneDateMonth is Alpha size 20 //field for the Month.
        UPHSMilestoneDateDay is Alpha size 20 //field for the Day.
        UPHSMilestoneDateYear is Alpha size 20 //field for the Year.
        UPHSMilestoneDateFormatted is Alpha size 50 //field for the complete formatted date.

        //MilestoneName Get Year and Entity
        MilestoneName is Alpha size 60
        UPHSMilestoneNameYear is Alpha size 60
        UPHSMilestoneNameEntity is Alpha size 60
		
	Field Rules
	
		PrmVendor
            if (PrmFromCompanyLocation.FromLocation matches "^[E-Z].*")
                required
                    "Field_VendorIsRequired"

    Derived Fields
        //Add leading zeroes
        TestWithLeadingZeroes is a DerivedField
            type is Alpha size 8
            if (Test < 10)
                return ("0000000" + Test)
            if (Test < 100)
                return ("000000" + Test)
            if (Test < 1000)
                return ("00000" + Test)
            if (Test < 10000)
                return ("0000" + Test)
            if (Test < 100000)
                return ("000" + Test)
            if (Test < 1000000)
                return ("00" + Test)
            if (Test < 10000000)
                return ("0" + Test)
            else
                return (Test)

        //MilestoneDate format to MM/DD/YYYY
        UPHSMilestoneDateGetMonth is a StringField //removes the first 4 digits from the source date.
		    type is Alpha size 100
		    "^.{0,4}"
		
	    UPHSMilestoneDateGetMonth2 is a StringField //removes the last 2 digits from the source date.
            type is Alpha size 100
            ".{0,2}$"
			
	    UPHSMilestoneDateGetDay is a StringField //removes the first 6 digits from the source date.
            type is Alpha size 100
            "^.{0,6}"
			
	    UPHSMilestoneDateGetYear is a StringField //removes the last 4 digits from the source date.
            type is Alpha size 100
            ".{0,4}$"
			
	    UPHSMilestoneDateRemoveZero is a StringField //removes leading zero.
            type is Alpha size 100
            "^.*"
            "\Q"
            "0"
            "\E"

        //MilestoneName Get Year and Entity
        UPHSMilestoneNameRemoveAllNonNumeric is a StringField
            type is Alpha size 100
            "[^0-9]"
        
        UPHSMilestoneNameGetLastElement is a StringField
            type is Alpha size 100
            "^.*"
            "\Q"
            " "
            "\E"

    Actions
        Create is a Create Action
            Exit Rules
                //Milestone Date format to MM/DD/YYYY
                UPHSMilestoneDateMonth = MilestoneDate
                UPHSMilestoneDateMonth -= UPHSMilestoneDateGetMonth
                UPHSMilestoneDateMonth -= UPHSMilestoneDateGetMonth2
                if (UPHSMilestoneDateMonth < 10)
                    UPHSMilestoneDateMonth -= UPHSMilestoneDateRemoveZero

                UPHSMilestoneDateDay = MilestoneDate
                UPHSMilestoneDateDay -= UPHSMilestoneDateGetDay
                if (UPHSMilestoneDateDay < 10)
                    UPHSMilestoneDateDay -= UPHSMilestoneDateRemoveZero

                UPHSMilestoneDateYear = MilestoneDate
                UPHSMilestoneDateYear -= UPHSMilestoneDateGetYear

                UPHSMilestoneDateFormatted = UPHSMilestoneDateMonth + "/" + UPHSMilestoneDateDay + "/" + UPHSMilestoneDateYear

                //Milestone Name Get Year and Entity
                UPHSMilestoneNameYear = MilestoneName
                UPHSMilestoneNameYear -= UPHSMilestoneNameRemoveAllNonNumeric

                UPHSMilestoneNameEntity = MilestoneName
                UPHSMilestoneNameEntity -= UPHSMilestoneNameGetLastElement

        Update is an Update Action
            Exit Rules
                //Milestone Date format to MM/DD/YYYY
                UPHSMilestoneDateMonth = MilestoneDate
                UPHSMilestoneDateMonth -= UPHSMilestoneDateGetMonth
                UPHSMilestoneDateMonth -= UPHSMilestoneDateGetMonth2
                if (UPHSMilestoneDateMonth < 10)
                    UPHSMilestoneDateMonth -= UPHSMilestoneDateRemoveZero

                UPHSMilestoneDateDay = MilestoneDate
                UPHSMilestoneDateDay -= UPHSMilestoneDateGetDay
                if (UPHSMilestoneDateDay < 10)
                    UPHSMilestoneDateDay -= UPHSMilestoneDateRemoveZero

                UPHSMilestoneDateYear = MilestoneDate
                UPHSMilestoneDateYear -= UPHSMilestoneDateGetYear

                UPHSMilestoneDateFormatted = UPHSMilestoneDateMonth + "/" + UPHSMilestoneDateDay + "/" + UPHSMilestoneDateYear

                //Milestone Name Get Year and Entity
                UPHSMilestoneNameYear = MilestoneName
                UPHSMilestoneNameYear -= UPHSMilestoneNameRemoveAllNonNumeric

                UPHSMilestoneNameEntity = MilestoneName
                UPHSMilestoneNameEntity -= UPHSMilestoneNameGetLastElement
                
        Delete is a Purge Action