LeaseImport is a BusinessClass
    owned by lm
    prefix is CNV
    classic name is LMLEASECNV

    Ontology
        symbolic key is LeaseImport
            classic set name is CNVSET1
            classic name for LeaseImport.SequenceNumber is SEQ-NUMBER

    Patterns
        implements StaticJava
        disable AuditIndex
		disable Auditing 
       	disable EffectiveDated
        implements Archivable

    Persistent Fields

        Lease						is like Lease
       	Status                     	is Numeric size 1
        Description
        LeaseClassification
            classic name is LEASE-CLASS
        LeaseType
        Currency
            classic name is CURRENCY-CODE
        CurrencyNumberOfDecimals
            classic name is CURR-ND
        BaseCurrency
        BaseCurrencyRate
            classic name is BASE-CURR-RATE
        BaseNumberOfDecimals
            classic name is BASE-ND
        Simulated                  is Boolean
        BeginDate                  is Date
        EndDate                    is Date
        Ownership		           is Boolean
        OwnershipFlag	           is Boolean  
        GuaranteedAmount           is an InternationalAmount
            classic name is GUARANTEED-AMT
        UnguaranteedAmount         is an InternationalAmount
            classic name is UNGUARANTD-AMT
        BargainPurchaseAmount      is an InternationalAmount
            classic name is BARG-PURCH-AMT
        NetPresentValue            is an InternationalAmount
            classic name is NET-PRES-VALUE
        FairMarketValue            is an InternationalAmount
            classic name is FAIR-MKT-VALUE
        LeaseObligation            is an InternationalAmount
            classic name is LEASE-OBLIG

        LandOnlyLease              is Boolean  
            classic name is LAND-ONLY-FLAG
        LandAndBuildingLease       is Boolean  
            classic name is LAND-BLDG-FLAG

		LandAndBuilding				is Numeric 1 
			States
				LandOnly				value is 1	
				LandAndBuildingLease	value is 2
				Neither					value is 0
        LandValue                  is an InternationalAmount
        BuildingValue              is an InternationalAmount
            classic name is BLDG-VALUE
        TaxCreditAmount            is an InternationalAmount
            classic name is TAX-CREDIT-AMT
        TotalLife                  is a Life
        RemainingLife              is a Life
        Lessor                     is a Vendor
        Term
        PaymentsPerYear
            classic name is PMTS-PER-YEAR
        PaymentTiming
            classic name is PMT-TIMING
        InterestRate
        ImplicitInterestRate
            classic name is IMPLICIT-RATE
        FirstPaymentDate           is Date
            classic name is FIRST-PMT-DATE
        LastPaymentDate            is Date
            classic name is LAST-PMT-DATE
        LastPaymentAmount          is an InternationalAmount
            classic name is LAST-PMT-AMT
        SegmentFlag
        BaseGuaranteedAmount       is an InternationalAmount
            classic name is BASE-GUAR-AMT
        BaseUnguaranteedAmount     is an InternationalAmount
            classic name is BASE-UNGAR-AMT
        BaseBargainAmount          is an InternationalAmount
            classic name is BASE-BARG-AMT
        BaseNetValue               is an InternationalAmount
        BaseMarketValue            is an InternationalAmount
            classic name is BASE-MKT-VALUE
        BaseLeaseObligation        is an InternationalAmount
            classic name is BASE-LSE-OBLIG
        BaseLandValue              is an InternationalAmount
            classic name is BASE-LAND-VAL
        BaseBuildingValue          is an InternationalAmount
            classic name is BASE-BLDG-VAL
        BaseTaxCredit              is an InternationalAmount
            classic name is BASE-TX-CREDIT
        ExecutoryCostCode1         is an ExecutoryCostCode
            classic name is EXEC-CODE-1
        ExecutoryCostCode2         is an ExecutoryCostCode
            classic name is EXEC-CODE-2
        ExecutoryCostCode3         is an ExecutoryCostCode
            classic name is EXEC-CODE-3
        ExecutoryCostCode4         is an ExecutoryCostCode
            classic name is EXEC-CODE-4
        ExecutoryCostCode5         is an ExecutoryCostCode
            classic name is EXEC-CODE-5
        DeferredRentAccount        is a FinanceCodeBlockFull
            classic name for DeferredRentAccount.ToAccountingEntity is DEF-COMPANY
            classic name for DeferredRentAccount.AccountingUnit is DEF-ACCT-UNIT
            classic name for DeferredRentAccount.GeneralLedgerChartAccount is DEF-ACCOUNT
        DeferredRentBalance        is an InternationalAmount
            classic name is DEF-RENT-BAL
        LeaseAllocationCode
            classic name is ALLOC-CD
        OperatingLeaseAllocationCode is a LeaseAllocationCode
        LeaseAllocationCodeType
            classic name is ALLOC-CD-TYPE
        LeaseAllocationCode1       is a LeaseAllocationCode
            classic name is ALLOC-CD-1
        LeaseAllocationCode2       is a LeaseAllocationCode
            classic name is ALLOC-CD-2
        LeaseAllocationCode3       is a LeaseAllocationCode
            classic name is ALLOC-CD-3
        LeaseAllocationCode4       is a LeaseAllocationCode
            classic name is ALLOC-CD-4
        LeaseAllocationCode5       is a LeaseAllocationCode
            classic name is ALLOC-CD-5
        AccruedAccount             is a FinanceCodeBlock
            classic name for AccruedAccount.ToAccountingEntity is ACC-COMPANY
            classic name for AccruedAccount.AccountingUnit is ACC-ACCT-UNIT
            classic name for AccruedAccount.GeneralLedgerChartAccount is ACC-ACCOUNT

        DownPayment                is an InternationalAmount
        BaseDownPayment            is an InternationalAmount
            classic name is BASE-DOWN-PMNT
        SecurityDeposit            is an InternationalAmount
            classic name is SEC-DEPOSIT
        BaseSecurityDeposit        is an InternationalAmount
            classic name is BASE-SEC-DEPST
        LeaseInvoicePrefix
            classic name is INV-PREFIX
        DebtAccount                is a FinanceCodeBlockFull
            classic name for DebtAccount.ToAccountingEntity is DEBT-COMPANY
            classic name for DebtAccount.AccountingUnit is DEBT-ACCT-UNIT
            classic name for DebtAccount.GeneralLedgerChartAccount is DEBT-ACCOUNT
            classic name for DebtAccount.Project is DEBT-ACTIVITY
        InterestAccount            is a FinanceCodeBlockFull
            classic name for InterestAccount.ToAccountingEntity is INT-COMPANY
            classic name for InterestAccount.AccountingUnit is INT-ACCT-UNIT
            classic name for InterestAccount.GeneralLedgerChartAccount is INT-ACCOUNT
            classic name for InterestAccount.Project is INT-ACTIVITY
        LeaseImportAccount1        is a FinanceCodeBlockFull
            classic name for LeaseImportAccount1.ToAccountingEntity is COMPANY-1
            classic name for LeaseImportAccount1.AccountingUnit is AU-1
            classic name for LeaseImportAccount1.GeneralLedgerChartAccount is ACCT-1
            classic name for LeaseImportAccount1.Project is ACTIVITY-1
        LeaseImportAccount2        is a FinanceCodeBlockFull
            classic name for LeaseImportAccount2.ToAccountingEntity is COMPANY-2
            classic name for LeaseImportAccount2.AccountingUnit is AU-2
            classic name for LeaseImportAccount2.GeneralLedgerChartAccount is ACCT-2
            classic name for LeaseImportAccount2.Project is ACTIVITY-2
        LeaseImportAccount3        is a FinanceCodeBlockFull
            classic name for LeaseImportAccount3.ToAccountingEntity is COMPANY-3
            classic name for LeaseImportAccount3.AccountingUnit is AU-3
            classic name for LeaseImportAccount3.GeneralLedgerChartAccount is ACCT-3
            classic name for LeaseImportAccount3.Project is ACTIVITY-3
        LeaseImportAccount4        is a FinanceCodeBlockFull
            classic name for LeaseImportAccount4.ToAccountingEntity is COMPANY-4
            classic name for LeaseImportAccount4.AccountingUnit is AU-4
            classic name for LeaseImportAccount4.GeneralLedgerChartAccount is ACCT-4
            classic name for LeaseImportAccount4.Project is ACTIVITY-4
        LeaseImportAccount5        is a FinanceCodeBlockFull
            classic name for LeaseImportAccount5.ToAccountingEntity is COMPANY-5
            classic name for LeaseImportAccount5.AccountingUnit is AU-5
            classic name for LeaseImportAccount5.GeneralLedgerChartAccount is ACCT-5
            classic name for LeaseImportAccount5.Project is ACTIVITY-5
        DefaultDistributionAccount is a FinanceCodeBlockNoAccount
            classic name for DefaultDistributionAccount.Project is ACTIVITY

		SpecializedAsset				is Boolean
		LastDateReviewed				is Date
		InitialDirectCost				is an InternationalAmount
		InitialDirectCostVendor			is a Vendor
		ExercisePurchase				is Boolean
		TerminationOption				is Boolean
		ExerciseTermination				is Boolean
		TerminationFee					is an InternationalAmount
		ExtensionOption					is Boolean
		ExerciseExtension				is Boolean
		ExtensionOptionDate				is Date
		LengthOfExtension				is Numeric 5
		IncentiveAmount					is an InternationalAmount
		RelatedPartyLease				is Boolean
		Acquired						is Boolean
		EarlyTerminationDate			is Date
		LongTermOperatingLeaseExpense	is a FinanceCodeBlockFull
            default label is "OperatingLeaseExpense"
		LeaseROUAssetAmount				is an InternationalAmount
		DeferredRentsAtAdoption			is an InternationalAmount
		Compounding						is Boolean
		TerminationNonLeaseComponent	is an ExecutoryCostCode
		TerminationGainLossAccount		is a FinanceCodeBlockFull

        LeaseObligationAtAdoption       is an InternationalAmount
		LeaseROUAmountAtAdoption		is an InternationalAmount
        BaseLeaseObligationAtAdoption   is an InternationalAmount
		BaseLeaseROUAmountAtAdoption	is an InternationalAmount
		EquityAccount	                is a FinanceCodeBlockFull

        LeaseTerm						is a Term










	Conditions
		IsValidForActorContext
			restricted
			when (Company.FinanceEnterpriseGroup = actor.context.FinanceEnterpriseGroup)	
		
		RecordExists
			restricted
			when (LeaseImport exists)
	
	Derived Fields
		LandOrLandandbuilding					is a DerivedField
			type is AlphaUpper size 1
			if (BuildingValue entered)
				return "N"
			else
				if (LandValue entered)
					return "Y"
				else
					return blank
		DerivedFormTitle		is a DerivedField
			type is MessageField
			restricted
			if (RecordExists)
				return LeaseImportDisplay
			else
				return CreateMessage
				
		CreateMessage			is a LabelField
			restricted
			"Create_NewLeaseInterfaceAdjustment"
		
		LeaseImportDisplay	is a LabelField
			"LeaseInterfaceAdjustment"
			
		LeaseImportRepresentativeText is a StringField
			type is Text
			default label is "Lease"
			Lease " - " Description
		
		CompanyRepresentativeText is a StringField
			type is Text
			default label is "Company"
			Company " - " Company.Name

        LeaseInterface is a DerivedField
            type is Alpha size 2083
            return base url(webapp is LeaseSpecialist) +"/LeaseSpecialist/form/LeaseInterface.LeaseInterface?action=LeaseInterface"

    Sets

        Set2
            indexed
            Sort Order
                LeaseImport.RunGroup
                Company
                Lease
                LeaseImport.SequenceNumber

        Set3
            indexed
            Sort Order
                LeaseImport.RunGroup
                Company
                LeaseImport.SequenceNumber descending

    Field Rules

        BeginDate
            required

        Company
            required

        Description
            required

        EndDate
            required

        Lease
            required

        Lessor
            required

		DebtAccount
			if (!LeaseAllocationCodeType.DebtOrExpense)
				required                                                                 	
					"DebtOrExpenseAccountRequired"
			




				


			




				



	Actions
		Create is a Create Action
			Entrance Rules
        		Compounding = true
					
			Action Rules
				if (LandAndBuilding.LandOnly)
					BuildingValue 		= 0
				else
					if (!LandAndBuilding.LandAndBuildingLease)
						LandValue 		= 0
						BuildingValue 	= 0
				
		Update is an Update Action
			Entrance Rules
					
			Action Rules
				if (LandAndBuilding.LandOnly)
					BuildingValue 		= 0
				else
					if (!LandAndBuilding.LandAndBuildingLease)
						LandValue 		= 0
						BuildingValue 	= 0						

		Delete is a Delete Action

		Purge is a Purge Action
			restricted		
