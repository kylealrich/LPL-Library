AssetItemTransferFund is a BusinessClass
	owned by am
	
	prefix is AITrF
	
	Ontology
		symbolic key is AssetItemTransferFund
		
	
	Patterns
		implements StaticJava
		
	Persistent Fields
		AccountingEntity				
		AccountingUnit					
		Fund 							is an AssetFundField	
		Project 								
		FinanceDimension1									
		FinanceDimension2					
		FinanceDimension3					
		FinanceDimension4			
		FinanceDimension5					
		FinanceDimension6					
		FinanceDimension7					
		FinanceDimension8			
		FinanceDimension9					
		FinanceDimension10
		PercentContribution				is Percent size 9.6
		TransactionAmount				is an InternationalAmount
        	default label is "Amount"

	Transient Fields
		PercentAllocated				is Percent size 9.6
			derive value from ThisInstanceRel.TotalItemAllocationPercent	
		LocalCurrency					is a FromCurrency
			derive value from Asset.Currency	
		TestCodeBlock 					is a FinanceCodeBlockNoAccountFull
		TransientAccountingEntity		is an AccountingEntity	
			derive value from AssetItemTransferFund.AccountingEntity		
		TransientAccountingUnit			is an AccountingUnit		
			derive value from AssetItemTransferFund.AccountingUnit
			context of TransientAccountingEntity
		TransientProject 				is a Project				
			derive value from AssetItemTransferFund.Project
		TransientFinanceDimension1		is a FinanceDimension1							
			derive value from AssetItemTransferFund.FinanceDimension1
		TransientFinanceDimension2		is a FinanceDimension2					
			derive value from AssetItemTransferFund.FinanceDimension2
		TransientFinanceDimension3		is a FinanceDimension3					
			derive value from AssetItemTransferFund.FinanceDimension3
		TransientFinanceDimension4		is a FinanceDimension4			
			derive value from AssetItemTransferFund.FinanceDimension4
		TransientFinanceDimension5		is a FinanceDimension5					
			derive value from AssetItemTransferFund.FinanceDimension5
		TransientFinanceDimension6		is a FinanceDimension6					
			derive value from AssetItemTransferFund.FinanceDimension6
		TransientFinanceDimension7		is a FinanceDimension7					
			derive value from AssetItemTransferFund.FinanceDimension7
		TransientFinanceDimension8		is a FinanceDimension8			
			derive value from AssetItemTransferFund.FinanceDimension8
		TransientFinanceDimension9		is a FinanceDimension9					
			derive value from AssetItemTransferFund.FinanceDimension9
		TransientFinanceDimension10		is a FinanceDimension10		
			derive value from AssetItemTransferFund.FinanceDimension10
		TransientTransactionAmount		is an InternationalAmount
			derive value from AssetItemTransferFund.TransactionAmount
		TransientPercentContribution	is Percent size 9.6		
			derive value from AssetItemTransferFund.PercentContribution	
		CreateFromTransferCreate		is Boolean
	Local Fields
		AllocatedPercent		is Percent size 9.6
		AllocatedAmount			is an InternationalAmount
		LocalTransactionAmount	is an InternationalAmount
		FundTransactionAmount	is an InternationalAmount
		FundCount				is Numeric 3
		F1						is Numeric 3
		LocalPercentAllocated	is Percent size 9.6
		TempAllocatedAmount		is an InternationalAmount
		TempFundPercent			is Percent size 9.6
		TempToItemCost			is an InternationalAmount

	Derived Fields
		DerivedCodeBlock is a DerivedField
			type is Boolean	
			TestCodeBlock.ToAccountingEntity = TransientAccountingEntity			
			TestCodeBlock.AccountingUnit 	= TransientAccountingUnit	
			TestCodeBlock.Project			= TransientProject 						
			TestCodeBlock.FinanceDimension1	= TransientFinanceDimension1						
			TestCodeBlock.FinanceDimension2 = TransientFinanceDimension2				
			TestCodeBlock.FinanceDimension3 = TransientFinanceDimension3				
			TestCodeBlock.FinanceDimension4 = TransientFinanceDimension4	
			TestCodeBlock.FinanceDimension5 = TransientFinanceDimension5			
			TestCodeBlock.FinanceDimension6 = TransientFinanceDimension6			
			TestCodeBlock.FinanceDimension7 = TransientFinanceDimension7				
			TestCodeBlock.FinanceDimension8 = TransientFinanceDimension8		
			TestCodeBlock.FinanceDimension9 = TransientFinanceDimension9					
			TestCodeBlock.FinanceDimension10 = TransientFinanceDimension10
			DerivedCodeBlock = true
			return DerivedCodeBlock

		TotalItemAllocationPercent is a DerivedField
			type is Percent size 6.3
			return sum AssetItemTransferFundsRel.PercentContribution			

		DerivedItemFundTotal is a DerivedField
			type is like InternationalAmount
			return sum ItemTransferFundsRel.TransactionAmount
						
		DerivedItemCost is a DerivedField
			type is like InternationalAmount
			return AssetItem.TransactionItemCost
			
			
	Conditions	
		AssetTransferFundExists
			restricted
			when (AssetTransferFundRel exists)
		
		FundOverride
			restricted
			when (Asset.FundOverride)
	
		UpdateAllowed
			restricted
			when (Asset.IsEnteredOrPostActiveProcess
			and Asset.FundOverride = false)	
			
		Complete
			restricted
			when (AssetItem.FundAllocationComplete
			and !FundOverride)	

		AccountingUnitIsFundDimension
			restricted
			when (FinanceEnterpriseGroup.FundDimension = 1)
			
		NewAssetItemFund
			restricted
			when (AssetItemAdjustmentRel exists) 		
			
        AccountingUnitSelected
        	when (AssetFundControlRel.AccountingUnit)
        ProjectSelected
        	when (AssetFundControlRel.Project)      	
		FinanceDimension1Selected
        	when (AssetFundControlRel.FinanceDimension1)
		FinanceDimension2Selected
        	when (AssetFundControlRel.FinanceDimension2)
		FinanceDimension3Selected
        	when (AssetFundControlRel.FinanceDimension3)
		FinanceDimension4Selected
        	when (AssetFundControlRel.FinanceDimension4)
		FinanceDimension5Selected
        	when (AssetFundControlRel.FinanceDimension5)
		FinanceDimension6Selected
        	when (AssetFundControlRel.FinanceDimension6)
		FinanceDimension7Selected
        	when (AssetFundControlRel.FinanceDimension7)
		FinanceDimension8Selected
        	when (AssetFundControlRel.FinanceDimension8)
		FinanceDimension9Selected
        	when (AssetFundControlRel.FinanceDimension9)
		FinanceDimension10Selected
        	when (AssetFundControlRel.FinanceDimension10)
        	
	Relations
		AssetRel
			one-to-one relation to Asset
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.Asset = AssetItem.Asset
				
		AssetFundControlRel
			one-to-one relation to AssetFundControl
			Field Mapping uses symbolic key
				related.AssetFundControl		= FinanceEnterpriseGroup
				
		AssetItemRel
			one-to-one relation to AssetItem
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.Asset 					= Asset
				related.AssetItem 				= AssetItem
		
		AssetTransferFundRel 
			one-to-one relation to AssetTransferFund
			Field Mapping uses ByAssetTransferFund
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.Asset					= Asset
				related.AccountingEntity		= AccountingEntity
				related.AccountingUnit			= AccountingUnit				
				related.Project					= Project
				related.FinanceDimension1		= FinanceDimension1
				related.FinanceDimension2		= FinanceDimension2
				related.FinanceDimension3		= FinanceDimension3				
				related.FinanceDimension4		= FinanceDimension4
				related.FinanceDimension5		= FinanceDimension5
				related.FinanceDimension6		= FinanceDimension6		
				related.FinanceDimension7		= FinanceDimension7
				related.FinanceDimension8		= FinanceDimension8
				related.FinanceDimension9		= FinanceDimension9
				related.FinanceDimension10		= FinanceDimension10

		AssetTransferFundsRel 
			one-to-many relation to AssetTransferFund
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.Asset					= Asset
				related.AssetTransfer			= AssetTransfer

												
		ThisInstanceRel
			one-to-one relation to AssetItemTransferFund
			Field Mapping uses ByTransferFundItem
				related.Asset					= Asset 
				related.AccountingEntity		= AccountingEntity
				related.AccountingUnit			= AccountingUnit
				related.Project					= Project
				related.FinanceDimension1		= FinanceDimension1
				related.FinanceDimension2		= FinanceDimension2
				related.FinanceDimension3		= FinanceDimension3				
				related.FinanceDimension4		= FinanceDimension4
				related.FinanceDimension5		= FinanceDimension5
				related.FinanceDimension6		= FinanceDimension6		
				related.FinanceDimension7		= FinanceDimension7
				related.FinanceDimension8		= FinanceDimension8
				related.FinanceDimension9		= FinanceDimension9
				related.FinanceDimension10		= FinanceDimension10
				related.AssetItem 				= AssetItem			

		ItemTransferFundsRel				
			one-to-many relation to AssetItemTransferFund
			Field Mapping uses ByTransferFundItem
				related.Asset					= Asset 
				related.AccountingEntity		= AccountingEntity
				related.AccountingUnit			= AccountingUnit
				related.Project					= Project
				related.FinanceDimension1		= FinanceDimension1
				related.FinanceDimension2		= FinanceDimension2
				related.FinanceDimension3		= FinanceDimension3				
				related.FinanceDimension4		= FinanceDimension4
				related.FinanceDimension5		= FinanceDimension5
				related.FinanceDimension6		= FinanceDimension6		
				related.FinanceDimension7		= FinanceDimension7
				related.FinanceDimension8		= FinanceDimension8
				related.FinanceDimension9		= FinanceDimension9
				related.FinanceDimension10		= FinanceDimension10

		AssetItemTransferFundsRel 			
			one-to-many relation to AssetItemTransferFund
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.Asset					= Asset
				related.AssetTransfer			= AssetTransfer
				related.AssetItem				= AssetItem
				
		AssetItemAdjustmentRel
			one-to-one relation to AssetItemAdjustment
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.Asset					= Asset
				related.AssetAdjustment			= Asset.LastAssetSequence
				related.AssetItem				= AssetItem		
		
		AssetItemTransferRel
			one-to-one relation to AssetItemTransfer
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= Asset.FinanceEnterpriseGroup
				related.Asset 					= Asset
				related.AssetTransfer			= AssetTransfer	
				related.AssetItem				= AssetItem	

		ToAssetItemFundRel		
			one-to-one relation to AssetItemFund
			Field Mapping uses ByAssetFundItem
				related.Asset					= AssetTransfer.AssetTransferTo.ToAsset 
				related.RecordType				= 0 
				related.AccountingEntity		= AccountingEntity		
				related.AccountingUnit			= AccountingUnit
				related.Project					= Project
				related.FinanceDimension1		= FinanceDimension1
				related.FinanceDimension2		= FinanceDimension2
				related.FinanceDimension3		= FinanceDimension3				
				related.FinanceDimension4		= FinanceDimension4
				related.FinanceDimension5		= FinanceDimension5
				related.FinanceDimension6		= FinanceDimension6		
				related.FinanceDimension7		= FinanceDimension7
				related.FinanceDimension8		= FinanceDimension8
				related.FinanceDimension9		= FinanceDimension9
				related.FinanceDimension10		= FinanceDimension10				
				related.AssetItem				= AssetItem

		AssetItemFundRel		
			one-to-one relation to AssetItemFund
			Field Mapping uses ByAssetFundItem
				related.Asset					= Asset
				related.RecordType				= 0
				related.AccountingEntity		= AccountingEntity		
				related.AccountingUnit			= AccountingUnit
				related.Project					= Project
				related.FinanceDimension1		= FinanceDimension1
				related.FinanceDimension2		= FinanceDimension2
				related.FinanceDimension3		= FinanceDimension3				
				related.FinanceDimension4		= FinanceDimension4
				related.FinanceDimension5		= FinanceDimension5
				related.FinanceDimension6		= FinanceDimension6		
				related.FinanceDimension7		= FinanceDimension7
				related.FinanceDimension8		= FinanceDimension8
				related.FinanceDimension9		= FinanceDimension9
				related.FinanceDimension10		= FinanceDimension10				
				related.AssetItem				= AssetItem
		AllToToAssetItemFundsRel		
			one-to-many relation to AssetItemFund
			Field Mapping uses ByAssetItemFund
				related.Asset					= AssetTransfer.AssetTransferTo.ToAsset 
				related.AssetItem				= AssetItem	
				related.RecordType				= 0 

	Field Groups
		FundFieldGroup	
			FinanceEnterpriseGroup
			AssetTransfer
			Asset	
			AccountingEntity
			AccountingUnit
			Project
			FinanceDimension1
			FinanceDimension2
			FinanceDimension3				
			FinanceDimension4
			FinanceDimension5
			FinanceDimension6		
			FinanceDimension7
			FinanceDimension8
			FinanceDimension9
			FinanceDimension10

		ItemTransferFundFieldGroup	
			Asset
			AccountingEntity
			AccountingUnit
			Project
			FinanceDimension1
			FinanceDimension2
			FinanceDimension3				
			FinanceDimension4
			FinanceDimension5
			FinanceDimension6		
			FinanceDimension7
			FinanceDimension8
			FinanceDimension9
			FinanceDimension10	
					
	Field Rules


	Sets
		ByTransferFundItem
			Sort Order
				Asset
				AccountingEntity
				AccountingUnit
				Project			
				FinanceDimension1					
				FinanceDimension2
				FinanceDimension3
				FinanceDimension4
				FinanceDimension5
				FinanceDimension6
				FinanceDimension7
				FinanceDimension8
				FinanceDimension9
				FinanceDimension10
                AssetItem
                
		ByAssetItemTransferFund
            Sort Order
                Asset
                AssetItem                
                AccountingEntity
                AccountingUnit
				Project			
				FinanceDimension1				
				FinanceDimension2
				FinanceDimension3
				FinanceDimension4
				FinanceDimension5
				FinanceDimension6
				FinanceDimension7
				FinanceDimension8
				FinanceDimension9
				FinanceDimension10
                              
	Actions
		Create is an Action
			valid when (UpdateAllowed)
			
			Field Rules
				AssetTransfer
					constraint (AssetTransfer.TransferStatus.NotReleased)
						"AssetTransferMustBeUnreleased"

				
			Entrance Rules
				constraint (!ThisInstanceRel exists)
					"RecordAlreadyExistsForFundDimension"												
		

			Action Rules

				if (FinanceEnterpriseGroup.FundDimension.AccountingUnit)
					constraint (AccountingUnit entered)
						"FundDimensionIsRequired"
					Fund = AccountingUnit	
				else
					constraint (FinanceDimension1 entered)	
						"FundDimensionIsRequired"
					Fund = FinanceDimension1	
					
				if (!Asset.FundOverride)
					if (CreateFromTransferCreate)
						PercentContribution = AssetItemFundRel.PercentContribution
						TransactionAmount	= AssetItemFundRel.TransactionAmount
					else
						if (PercentContribution entered)
							TransactionAmount 	= (PercentContribution * AssetItemTransferRel.ToTransactionItemCost)	
						else
							constraint (TransactionAmount entered)
								"PercentOrAmountIsRequired"
							PercentContribution = (TransactionAmount / AssetItemTransferRel.ToTransactionItemCost)	
						if (sum AssetItemTransferFundsRel.PercentContribution > .95)
							invoke RefreshFunds AssetTransfer
								invoked.PrmAssetItem	= AssetItem

												
		NoEditUpdate is an Update Action
			restricted
			bypass field rules										
		
					
		CreateFromItem is a Create Action
			restricted
				
		
		ImportCreate is a Create Action
			restricted							
			Exit Rules
				invoke UpdateFundAllocation Asset
											
						
						
						
						
		Update is an Action
			valid when (UpdateAllowed)
			Field Rules

				AccountingEntity
					cannot be changed
						"CannotBeChanged"
				AccountingUnit
					cannot be changed
						"CannotBeChanged"
				Fund
					cannot be changed
						"CannotBeChanged"						
				Project
					cannot be changed
						"CannotBeChanged"	
				FinanceDimension1
					cannot be changed
						"CannotBeChanged"
				FinanceDimension2
					cannot be changed
						"CannotBeChanged"
				FinanceDimension3
					cannot be changed
						"CannotBeChanged"
				FinanceDimension4
					cannot be changed
						"CannotBeChanged"
				FinanceDimension5						
					cannot be changed
						"CannotBeChanged"
				FinanceDimension6						
					cannot be changed
						"CannotBeChanged"
				FinanceDimension7
					cannot be changed
						"CannotBeChanged"
				FinanceDimension8
					cannot be changed
						"CannotBeChanged"
				FinanceDimension9						
					cannot be changed
						"CannotBeChanged"
				FinanceDimension10						
					cannot be changed
						"CannotBeChanged"						

							
							
		
			Action Rules
				if (!Asset.FundOverride)
					if (PercentContribution changed)
						TransactionAmount 	= (PercentContribution * AssetItemTransferRel.ToTransactionItemCost)	
					else
						if (TransactionAmount changed)
							PercentContribution = (TransactionAmount / AssetItemTransferRel.ToTransactionItemCost)	



				LocalPercentAllocated = (sum AssetItemTransferFundsRel.PercentContribution)
			Exit Rules	
				if (Asset.FundOverride
				or AssetTransfer.FullOrPartial = "F")
					if (AssetTransferFundExists) 
						invoke RefreshFund AssetTransferFundRel
					else 
						if (Asset.FundOverride)
							invoke CreateFromItemTransferFund AssetTransferFund		
								fill in fields from this instance
					invoke RefreshFunds AssetTransfer	

								
		UpdateFromAssetTransferFund is an Update Action
			bypass field rules
			restricted
			Action Rules
				if (PercentContribution changed)
					TransactionAmount = (PercentContribution * AssetItemTransferRel.ToTransactionItemCost)	
			Exit Rules	
				if (!Asset.FundOverride
				and AssetTransfer.FullOrPartial = "P")
					invoke RefreshFromItemTransferFunds AssetTransfer							

		CreateFromAssetTransferFund is a Create Action
			restricted
				
		CreateUpdate is an Update Action
			restricted
			Field Rules
				Fund
					cannot be changed
						"FundCannotBeChanged"
			
			Action Rules
				if (TransactionAmount changed)
					PercentContribution = (TransactionAmount / AssetItemTransferRel.ToTransactionItemCost)
				else 
					if (PercentContribution changed)
						TransactionAmount = (PercentContribution * AssetItemTransferRel.ToTransactionItemCost)	
					if (AssetTransferFundRel exists)
						invoke RefreshFund AssetTransferFundRel




				

		UpdateTransferFund is an Instance Action
			Parameters
				PrmAccountingEntity		is an AccountingEntity		
				PrmAccountingUnit		is an AccountingUnit			
				PrmProject				is a Project
				PrmFinanceDimension1	is a FinanceDimension1
				PrmFinanceDimension2	is a FinanceDimension2
				PrmFinanceDimension3	is a FinanceDimension3
				PrmFinanceDimension4	is a FinanceDimension4
				PrmFinanceDimension5	is a FinanceDimension5
				PrmFinanceDimension6	is a FinanceDimension6
				PrmFinanceDimension7	is a FinanceDimension7
				PrmFinanceDimension8	is a FinanceDimension8
				PrmFinanceDimension9	is a FinanceDimension9
				PrmFinanceDimension10	is a FinanceDimension10
				PrmTransactionAmount	is an InternationalAmount
				PrmPercentContribution	is Percent size 9.6

			Parameter Rules	
				PrmAccountingEntity		
					initial value is TransientAccountingEntity		
				PrmAccountingUnit		
					initial value is TransientAccountingUnit			
				PrmProject				
					initial value is TransientProject
				PrmFinanceDimension1
					initial value is TransientFinanceDimension1
				PrmFinanceDimension2
					initial value is TransientFinanceDimension2
				PrmFinanceDimension3	
					initial value is TransientFinanceDimension3
				PrmFinanceDimension4
					initial value is TransientFinanceDimension4
				PrmFinanceDimension5
					initial value is TransientFinanceDimension5
				PrmFinanceDimension6
					initial value is TransientFinanceDimension6
				PrmFinanceDimension7
					initial value is TransientFinanceDimension7
				PrmFinanceDimension8
					initial value is TransientFinanceDimension8
				PrmFinanceDimension9
					initial value is TransientFinanceDimension9
				PrmFinanceDimension10
					initial value is TransientFinanceDimension10
				PrmTransactionAmount
					initial value is TransientTransactionAmount
				PrmPercentContribution
					initial value is TransientPercentContribution
					required
				

			Action Rules
				if (PrmAccountingEntity 	= AccountingEntity
				and PrmAccountingUnit 		= AccountingUnit	
				and PrmProject 				= Project				
				and PrmFinanceDimension1 	= FinanceDimension1 
				and PrmFinanceDimension2 	= FinanceDimension2
				and PrmFinanceDimension3 	= FinanceDimension3	
				and PrmFinanceDimension4 	= FinanceDimension4
				and PrmFinanceDimension5 	= FinanceDimension5 
				and PrmFinanceDimension6 	= FinanceDimension6 
				and PrmFinanceDimension7 	= FinanceDimension7
				and PrmFinanceDimension8 	= FinanceDimension8
				and PrmFinanceDimension9 	= FinanceDimension9 
				and PrmFinanceDimension10 	= FinanceDimension10)
					if (PrmPercentContribution != PercentContribution)
						PercentContribution = PrmPercentContribution
						if (AssetTransfer.FullOrPartial.Full)
							TransactionAmount 	= PrmPercentContribution * AssetItem.TransactionItemCost
						else 
							TransactionAmount	= PrmPercentContribution * AssetItemTransferRel.ToTransactionItemCost							
		
				else
					invoke CreateFromItem AssetItemTransferFund
						invoked.FinanceEnterpriseGroup 		= FinanceEnterpriseGroup	
						invoked.AssetItem					= AssetItem			
						if (PrmAccountingEntity entered)		
							invoked.AccountingEntity 		= PrmAccountingEntity
						else	
							invoked.AccountingEntity 		= AccountingEntity
						if (PrmAccountingUnit entered)
							invoked.AccountingUnit 			= PrmAccountingUnit			
						else	
							invoked.AccountingUnit 			= AccountingUnit		
						if (PrmProject entered)	
							invoked.Project					= PrmProject
						else	
							invoked.Project					= Project								
						if (FinanceEnterpriseGroup.FundDimension.AccountingUnit)
							if (PrmAccountingUnit entered)
								invoked.Fund 				= PrmAccountingUnit
							else	
								invoked.Fund 				= AccountingUnit							
						else 
							if (PrmFinanceDimension1 entered)
								invoked.Fund 				= PrmFinanceDimension1
							else	
								invoked.Fund 				= FinanceDimension1								
						if (PrmFinanceDimension1 entered)	
							invoked.FinanceDimension1		= PrmFinanceDimension1
						else	
							invoked.FinanceDimension1		= FinanceDimension1						
						if (PrmFinanceDimension2 entered)	
							invoked.FinanceDimension2		= PrmFinanceDimension2
						else	
							invoked.FinanceDimension2		= FinanceDimension2						
						if (PrmFinanceDimension3 entered)
							invoked.FinanceDimension3		= PrmFinanceDimension3
						else	
							invoked.FinanceDimension3		= FinanceDimension3						
						if (PrmFinanceDimension4 entered)
							invoked.FinanceDimension4		= PrmFinanceDimension4
						else	
							invoked.FinanceDimension4		= FinanceDimension4 					
						if (PrmFinanceDimension5 entered)
							invoked.FinanceDimension5		= PrmFinanceDimension5
						else	
							invoked.FinanceDimension5		= FinanceDimension5						
						if (PrmFinanceDimension6 entered)
							invoked.FinanceDimension6		= PrmFinanceDimension6
						else	
							invoked.FinanceDimension6		= FinanceDimension6						
						if (PrmFinanceDimension7 entered)
							invoked.FinanceDimension7		= PrmFinanceDimension7
						else	
							invoked.FinanceDimension7		= FinanceDimension7						
						if (PrmFinanceDimension8 entered)
							invoked.FinanceDimension8		= PrmFinanceDimension8
						else
							invoked.FinanceDimension8		= FinanceDimension8
						if (PrmFinanceDimension9 entered)
							invoked.FinanceDimension9		= PrmFinanceDimension9
						else	
							invoked.FinanceDimension9		= FinanceDimension9						
						if (PrmFinanceDimension10 entered)
							invoked.FinanceDimension10		= PrmFinanceDimension10
						else	
							invoked.FinanceDimension10		= FinanceDimension10
						invoked.PercentContribution			= PrmPercentContribution
						if (AssetTransfer.FullOrPartial.Full)
							invoked.TransactionAmount 		= PrmPercentContribution * AssetItem.TransactionItemCost
						else 
							invoked.TransactionAmount		= PrmPercentContribution * AssetItemTransferRel.ToTransactionItemCost								
						fill in fields from this instance

					if (AssetTransfer.FullOrPartial.Partial)
						invoke Delete ToAssetItemFundRel	
						invoke Create AssetItemFund
							invoked.FinanceEnterpriseGroup 		= FinanceEnterpriseGroup	
							invoked.Asset						= AssetTransfer.AssetTransferTo.ToAsset
							invoked.AssetItem					= AssetItem			
							if (PrmAccountingEntity entered)		
								invoked.AccountingEntity 		= PrmAccountingEntity
							else	
								invoked.AccountingEntity 		= AccountingEntity
							if (PrmAccountingUnit entered)
								invoked.AccountingUnit 			= PrmAccountingUnit			
							else	
								invoked.AccountingUnit 			= AccountingUnit		
							if (PrmProject entered)	
								invoked.Project					= PrmProject
							else	
								invoked.Project					= Project								
							if (FinanceEnterpriseGroup.FundDimension.AccountingUnit)
								if (PrmAccountingUnit entered)
									invoked.Fund 				= PrmAccountingUnit
								else	
									invoked.Fund 				= AccountingUnit							
							else 
								if (PrmFinanceDimension1 entered)
									invoked.Fund 				= PrmFinanceDimension1
								else	
									invoked.Fund 				= FinanceDimension1								
							if (PrmFinanceDimension1 entered)	
								invoked.FinanceDimension1		= PrmFinanceDimension1
							else	
								invoked.FinanceDimension1		= FinanceDimension1						
							if (PrmFinanceDimension2 entered)	
								invoked.FinanceDimension2		= PrmFinanceDimension2
							else	
								invoked.FinanceDimension2		= FinanceDimension2						
							if (PrmFinanceDimension3 entered)
								invoked.FinanceDimension3		= PrmFinanceDimension3
							else	
								invoked.FinanceDimension3		= FinanceDimension3						
							if (PrmFinanceDimension4 entered)
								invoked.FinanceDimension4		= PrmFinanceDimension4
							else	
								invoked.FinanceDimension4		= FinanceDimension4 					
							if (PrmFinanceDimension5 entered)
								invoked.FinanceDimension5		= PrmFinanceDimension5
							else	
								invoked.FinanceDimension5		= FinanceDimension5						
							if (PrmFinanceDimension6 entered)
								invoked.FinanceDimension6		= PrmFinanceDimension6
							else	
								invoked.FinanceDimension6		= FinanceDimension6						
							if (PrmFinanceDimension7 entered)
								invoked.FinanceDimension7		= PrmFinanceDimension7
							else	
								invoked.FinanceDimension7		= FinanceDimension7						
							if (PrmFinanceDimension8 entered)
								invoked.FinanceDimension8		= PrmFinanceDimension8
							else
								invoked.FinanceDimension8		= FinanceDimension8
							if (PrmFinanceDimension9 entered)
								invoked.FinanceDimension9		= PrmFinanceDimension9
							else	
								invoked.FinanceDimension9		= FinanceDimension9						
							if (PrmFinanceDimension10 entered)
								invoked.FinanceDimension10		= PrmFinanceDimension10
							else	
								invoked.FinanceDimension10		= FinanceDimension10
							invoked.PercentContribution			= PrmPercentContribution	
							if (AssetTransfer.FullOrPartial.Full)
								invoked.TransactionAmount 		= PrmPercentContribution * AssetItem.TransactionItemCost
							else 
								invoked.TransactionAmount		= PrmPercentContribution * AssetItemTransferRel.ToTransactionItemCost								

					invoke Delete	
			Exit Rules			
				invoke RefreshFunds AssetTransfer


		RefreshAssetItemTransferFunds is an Update Action
			restricted
			Action Rules
				if (Asset.FundOverrideSelected)
					PercentContribution = AssetTransferFundRel.PercentContribution
					TransactionAmount  	= (AssetItem.TransactionItemCost * AssetTransferFundRel.PercentContribution)
				else 	
					TransactionAmount  	= (PercentContribution * AssetItemTransferRel.ToTransactionItemCost)							
										
		Delete is an Action


				
		DeleteFromAsset is a Delete Action
			restricted
				              		
	              		
