TransferPricingSource is a BusinessClass
	owned by transpricing
	
	prefix is TPSRC
	
	Ontology
		symbolic key is TransferPricingSource
		
	
	Patterns
		
	
	Persistent Fields
		Description
		SourceEntity						is Numeric size 1
			States
				BillFromEntity			value is 1
				BillToEntity			value is 2
				SpecificEntity			value is 3
			
		SourceAddress						is a TransferPricingSourceAddress
		SourcePercentage					is a Percent
		SourceCompute						is a AllocationLine compute
		UseSourceCompute					is Boolean
		RechargeCalculationOption			is Numeric size 1
    		States
				Retain 						value is 1
				SplitUsingHeaderWeights		value is 2
				SplitUsingSourceWeights		value is 3
				SplitUsingTotals			value is 5
				SplitUsingCompute			value is 4
		
		AccountingEntityCompute				is a AccountingEntity compute
		IncludeAllWeight					is Boolean
		TreatBlankDimension1AsEmpty			is Boolean
		TreatBlankProjectAsEmpty			is Boolean
		
		AccountingUnitStructure
		FinanceDimension1Structure
		FinanceDimension2Structure
		FinanceDimension3Structure
		FinanceDimension4Structure
		FinanceDimension5Structure
		FinanceDimension6Structure
		FinanceDimension7Structure
		FinanceDimension8Structure
		FinanceDimension9Structure
		FinanceDimension10Structure
		ProjectStructure
		AccountStructure					is a ReportingChart
		
		TransferPricingSourceWeight
		
		LineNumber							is Numeric size 3
		
		ProcessPostingBalance				is Boolean
	
		ProcessAccountingUnitPostingBalance	is Boolean
			default label is "ProcessPostingBalances"
		ProcessAccountPostingBalance		is Boolean
			default label is "ProcessPostingBalances"
		ProcessProjectPostingBalance		is Boolean
			default label is "ProcessPostingBalances"
		ProcessDimension1PostingBalance		is Boolean
			default label is "ProcessPostingBalances"
		ProcessDimension2PostingBalance		is Boolean
			default label is "ProcessPostingBalances"
		ProcessDimension3PostingBalance		is Boolean
			default label is "ProcessPostingBalances"
		ProcessDimension4PostingBalance		is Boolean
			default label is "ProcessPostingBalances"
		ProcessDimension5PostingBalance		is Boolean
			default label is "ProcessPostingBalances"
		ProcessDimension6PostingBalance		is Boolean
			default label is "ProcessPostingBalances"
		ProcessDimension7PostingBalance		is Boolean
			default label is "ProcessPostingBalances"
		ProcessDimension8PostingBalance		is Boolean
			default label is "ProcessPostingBalances"
		ProcessDimension9PostingBalance		is Boolean
			default label is "ProcessPostingBalances"
		ProcessDimension10PostingBalance	is Boolean
			default label is "ProcessPostingBalances"
	
	Local Fields
		LocalAccountingEntity				is an AccountingEntity
		
	Transient Fields
		TransientAccountingUnitStructure		is a AccountingUnitStructure
			derive value from DerivedAccountingUnitStructure
		TransientFinanceDimension1Structure		is a FinanceDimension1Structure
			derive value from DerivedFinanceDimension1Structure
		TransientFinanceDimension2Structure		is a FinanceDimension2Structure
			derive value from DerivedFinanceDimension2Structure
		TransientFinanceDimension3Structure		is a FinanceDimension3Structure
			derive value from DerivedFinanceDimension3Structure
		TransientFinanceDimension4Structure		is a FinanceDimension4Structure
			derive value from DerivedFinanceDimension4Structure
		TransientFinanceDimension5Structure		is a FinanceDimension5Structure
			derive value from DerivedFinanceDimension5Structure
		TransientFinanceDimension6Structure		is a FinanceDimension6Structure
			derive value from DerivedFinanceDimension6Structure
		TransientFinanceDimension7Structure		is a FinanceDimension7Structure
			derive value from DerivedFinanceDimension7Structure
		TransientFinanceDimension8Structure		is a FinanceDimension8Structure
			derive value from DerivedFinanceDimension8Structure
		TransientFinanceDimension9Structure		is a FinanceDimension9Structure
			derive value from DerivedFinanceDimension9Structure
		TransientFinanceDimension10Structure	is a FinanceDimension10Structure
			derive value from DerivedFinanceDimension10Structure
		TransientProjectStructure				is a ProjectStructure
			derive value from DerivedProjectStructure
		TransientAccountStructure				is a ReportingChart
			derive value from DerivedAccountStructure
		
	Derived Fields
		DerivedAccountingUnitStructure is a DerivedField
			type is like AccountingUnitStructure
			
			if (AccountingUnitStructure entered)
				return AccountingUnitStructure
			else
				return TransferPricing.AccountingUnitStructure
				
		DerivedFinanceDimension1Structure is a DerivedField
			type is like FinanceDimension1Structure
			
			if (FinanceDimension1Structure entered)
				return FinanceDimension1Structure
			else
				return TransferPricing.FinanceDimension1Structure
				
		DerivedFinanceDimension2Structure is a DerivedField
			type is like FinanceDimension2Structure
			
			if (FinanceDimension2Structure entered)
				return FinanceDimension2Structure
			else
				return TransferPricing.FinanceDimension2Structure
				
		DerivedFinanceDimension3Structure is a DerivedField
			type is like FinanceDimension3Structure
			
			if (FinanceDimension3Structure entered)
				return FinanceDimension3Structure
			else
				return TransferPricing.FinanceDimension3Structure
				
		DerivedFinanceDimension4Structure is a DerivedField
			type is like FinanceDimension4Structure
			
			if (FinanceDimension4Structure entered)
				return FinanceDimension4Structure
			else
				return TransferPricing.FinanceDimension4Structure
				
		DerivedFinanceDimension5Structure is a DerivedField
			type is like FinanceDimension5Structure
			
			if (FinanceDimension5Structure entered)
				return FinanceDimension5Structure
			else
				return TransferPricing.FinanceDimension5Structure
				
		DerivedFinanceDimension6Structure is a DerivedField
			type is like FinanceDimension6Structure
			
			if (FinanceDimension6Structure entered)
				return FinanceDimension6Structure
			else
				return TransferPricing.FinanceDimension6Structure
				
		DerivedFinanceDimension7Structure is a DerivedField
			type is like FinanceDimension7Structure
			
			if (FinanceDimension7Structure entered)
				return FinanceDimension7Structure
			else
				return TransferPricing.FinanceDimension7Structure
				
		DerivedFinanceDimension8Structure is a DerivedField
			type is like FinanceDimension8Structure
			
			if (FinanceDimension8Structure entered)
				return FinanceDimension8Structure
			else
				return TransferPricing.FinanceDimension8Structure
				
		DerivedFinanceDimension9Structure is a DerivedField
			type is like FinanceDimension9Structure
			
			if (FinanceDimension9Structure entered)
				return FinanceDimension9Structure
			else
				return TransferPricing.FinanceDimension9Structure
				
		DerivedFinanceDimension10Structure is a DerivedField
			type is like FinanceDimension10Structure
			
			if (FinanceDimension10Structure entered)
				return FinanceDimension10Structure
			else
				return TransferPricing.FinanceDimension10Structure
				
		DerivedProjectStructure is a DerivedField
			type is like ProjectStructure
			
			if (ProjectStructure entered)
				return ProjectStructure
			else
				return TransferPricing.ProjectStructure
		
		DerivedAccountStructure is a DerivedField
			type is like ReportingChart
			
			if (AccountStructure entered)
				return AccountStructure
			else
				return TransferPricing.AccountStructure
		
		ProcessPostingPerformanceWarningForList is a MessageField
			"Warning:Source<LineNumber>,SelectingProcessPostingBalancesForABlankDimensionWithTreatBlankAsEmptyNotSelectedWillProcessAllPostingDetails;ThisCouldImpactPerformance."
		
		ProcessPostingPerformanceWarningForForm is a MessageField
			"Warning:SelectingProcessPostingBalancesForABlankDimensionWithTreatBlankAsEmptyNotSelectedWillProcessAllPostingDetails;ThisCouldImpactPerformance."
		
		TransferPricingDescription is a MessageField
			"<TransferPricing>_-_<TransferPricing.Description>"

		TransferPricingSourceDescription is a MessageField
			"<TransferPricingSource>_-_<TransferPricingSource.Description>"
		
		TransferPricingSourceText		is a MessageField
			restricted
			"Recharge_Source"

		TransferPricingSourceDescriptionTitle is a MessageField
			restricted
			"Recharge_Source<TransferPricingSourceDescription>"
	
		TransferPricingSourceTitle		is a DerivedField
			type is MessageField
			if (TransferPricingSource exists)
				return TransferPricingSourceDescriptionTitle
			else
				return TransferPricingSourceText
		
	Field Rules
		SourceCompute
			if (UseSourceCompute)
				required
				
		UseSourceCompute
			if (not UseSourceCompute)
				initialize SourceCompute
					
		Description
			required
			
		SourceEntity
			initial value is TransferPricingSource.SourceEntity.BillFromEntity
			required
			
		SourceAddress
			required
				"SourceAddressRequired"
			if (not SourceEntity.SpecificEntity)
				SourceAddress.AccountingEntity = TransferPricing.Company.AccountingEntity 



				
        	if (SourceAddress.AccountingUnit entered)
   		     	constraint (AccountingUnitInBasisRel exists)
        			"<FinanceEnterpriseGroup.AccountingUnitLabel>NotInScenarioBasisStructure"
        		if (SourceEntity.BillToEntity)
					for each TransferPricingEntityRel
						LocalAccountingEntity = each.AccountingEntity
						constraint (AccountingUnitInBillToEntitiesRel exists)
							"AccountingUnitDoesNotExist.FinanceEnterpriseGroup=<FinanceEnterpriseGroup>,AccountingEntity=<LocalAccountingEntity>,AccountingUnit=<SourceAddress.AccountingUnit>"
        	if (SourceAddress.Project entered)
   		     	constraint (ProjectInBasisRel exists)
        			"<FinanceEnterpriseGroup.ProjectLabel>NotInScenarioBasisStructure"
        		initialize TreatBlankProjectAsEmpty
        	if (SourceAddress.GeneralLedgerChartAccount entered)
   		     	constraint (AccountInBasisRel exists)
        			"<FinanceEnterpriseGroup.AccountLabel>NotInScenarioBasisStructure"
        	if (SourceAddress.FinanceDimension1 entered)
   		     	constraint (Dimension1InBasisRel exists)
        			"<FinanceEnterpriseGroup.FinanceDimension1Label>NotInScenarioBasisStructure"
        		initialize TreatBlankDimension1AsEmpty
        	if (SourceAddress.FinanceDimension2 entered)
   		     	constraint (Dimension2InBasisRel exists)
        			"<FinanceEnterpriseGroup.FinanceDimension2Label>NotInScenarioBasisStructure"
        	if (SourceAddress.FinanceDimension3 entered)
   		     	constraint (Dimension3InBasisRel exists)
        			"<FinanceEnterpriseGroup.FinanceDimension3Label>NotInScenarioBasisStructure"
        	if (SourceAddress.FinanceDimension4 entered)
   		     	constraint (Dimension4InBasisRel exists)
        			"<FinanceEnterpriseGroup.FinanceDimension4Label>NotInScenarioBasisStructure"
        	if (SourceAddress.FinanceDimension5 entered)
   		     	constraint (Dimension5InBasisRel exists)
        			"<FinanceEnterpriseGroup.FinanceDimension5Label>NotInScenarioBasisStructure"
        	if (SourceAddress.FinanceDimension6 entered)
   		     	constraint (Dimension6InBasisRel exists)
        			"<FinanceEnterpriseGroup.FinanceDimension6Label>NotInScenarioBasisStructure"
        	if (SourceAddress.FinanceDimension7 entered)
   		     	constraint (Dimension7InBasisRel exists)
        			"<FinanceEnterpriseGroup.FinanceDimension7Label>NotInScenarioBasisStructure"
        	if (SourceAddress.FinanceDimension8 entered)
   		     	constraint (Dimension8InBasisRel exists)
        			"<FinanceEnterpriseGroup.FinanceDimension8Label>NotInScenarioBasisStructure"
        	if (SourceAddress.FinanceDimension9 entered)
   		     	constraint (Dimension9InBasisRel exists)
        			"<FinanceEnterpriseGroup.FinanceDimension9Label>NotInScenarioBasisStructure"
        	if (SourceAddress.FinanceDimension10 entered)
   		     	constraint (Dimension10InBasisRel exists)
        			"<FinanceEnterpriseGroup.FinanceDimension10Label>NotInScenarioBasisStructure"
        
        SourcePercentage
			default to 100%
			
        RechargeCalculationOption
			required	
			if (RechargeCalculationOption changed)	
       			initialize IncludeAllWeight
       			
       			if (old RechargeCalculationOption = RechargeCalculationOption.SplitUsingSourceWeights)
					invoke Delete TransferPricingWeightRel
					
				if (old RechargeCalculationOption = RechargeCalculationOption.SplitUsingHeaderWeights
				and instance count of TransferPricingSourceSplitUsingHeaderRel < 2)
					invoke Delete DeleteAllTransferPricingWeightRel
       		
       		if (instance count of TransferPricingEntityRel > 1 and SourceEntity.BillFromEntity)
				constraint (not RechargeCalculationOption.Retain)
					"CannotSelectTheCalculationRetainIfMultipleBillToEntitiesAreSetupAndSourceEntityIsBillFromEntity."
			
			if (SourceEntity.BillToEntity)		
				constraint (not RechargeCalculationSplitOptionExists)
					"CannotSelectTheCalculation<RechargeCalculationOption>IfSourceEntityIsBillToEntity."
        
        AccountingEntityCompute
			if (not RechargeCalculationOption.SplitUsingCompute)
				initialize AccountingEntityCompute
						
		AccountingUnitStructure
			if (FinanceEnterpriseGroup.AccountingUnitSelected
			and TransferPricing.AccountingUnitStructure not entered)
				required
					"<FinanceEnterpriseGroup.AccountingUnitLabel>StructureMustBeSelected"
		FinanceDimension1Structure
			if (FinanceEnterpriseGroup.FinanceDimension1Entry
			and TransferPricing.FinanceDimension1Structure not entered)
				required
					"<FinanceEnterpriseGroup.FinanceDimension1Label>StructureMustBeSelected"
		FinanceDimension2Structure
			if (FinanceEnterpriseGroup.FinanceDimension2Entry
			and TransferPricing.FinanceDimension2Structure not entered)
				required
					"<FinanceEnterpriseGroup.FinanceDimension2Label>StructureMustBeSelected"
		FinanceDimension3Structure
			if (FinanceEnterpriseGroup.FinanceDimension3Entry
			and TransferPricing.FinanceDimension3Structure not entered)
				required
					"<FinanceEnterpriseGroup.FinanceDimension3Label>StructureMustBeSelected"
		FinanceDimension4Structure
			if (FinanceEnterpriseGroup.FinanceDimension4Entry
			and TransferPricing.FinanceDimension4Structure not entered)
				required
					"<FinanceEnterpriseGroup.FinanceDimension4Label>StructureMustBeSelected"
		FinanceDimension5Structure
			if (FinanceEnterpriseGroup.FinanceDimension5Entry
			and TransferPricing.FinanceDimension5Structure not entered)
				required
					"<FinanceEnterpriseGroup.FinanceDimension5Label>StructureMustBeSelected"
		FinanceDimension6Structure
			if (FinanceEnterpriseGroup.FinanceDimension6Entry
			and TransferPricing.FinanceDimension6Structure not entered)
				required
					"<FinanceEnterpriseGroup.FinanceDimension6Label>StructureMustBeSelected"
		FinanceDimension7Structure
			if (FinanceEnterpriseGroup.FinanceDimension7Entry
			and TransferPricing.FinanceDimension7Structure not entered)
				required
					"<FinanceEnterpriseGroup.FinanceDimension7Label>StructureMustBeSelected"
		FinanceDimension8Structure
			if (FinanceEnterpriseGroup.FinanceDimension8Entry
			and TransferPricing.FinanceDimension8Structure not entered)
				required
					"<FinanceEnterpriseGroup.FinanceDimension8Label>StructureMustBeSelected"
		FinanceDimension9Structure
			if (FinanceEnterpriseGroup.FinanceDimension9Entry
			and TransferPricing.FinanceDimension9Structure not entered)
				required
					"<FinanceEnterpriseGroup.FinanceDimension9Label>StructureMustBeSelected"
		FinanceDimension10Structure
			if (FinanceEnterpriseGroup.FinanceDimension10Entry
			and TransferPricing.FinanceDimension10Structure not entered)
				required
					"<FinanceEnterpriseGroup.FinanceDimension10Label>StructureMustBeSelected"
		ProjectStructure
			if (FinanceEnterpriseGroup.ProjectEntry
			and TransferPricing.ProjectStructure not entered)
				required
					"<FinanceEnterpriseGroup.ProjectLabel>StructureMustBeSelected"
		AccountStructure
			if (TransferPricing.AccountStructure not entered)
				required
					"<FinanceEnterpriseGroup.AccountLabel>StructureMustBeSelected"
					
		LineNumber
			default to last TransferPricingSourceRel.LineNumber + 1
						
	Conditions
		RechargeCalculationSplitOptionWithManualWeightExists
			restricted
			when (RechargeCalculationOption.SplitUsingSourceWeights 
			or	  RechargeCalculationOption.SplitUsingHeaderWeights)
			
		RechargeCalculationSplitOptionExists
			restricted
			when (not RechargeCalculationOption.Retain)
			
		RechargeSourceSplitExists
			restricted
			when (first TransferPricingSourceSplitRel exists)
			
		BlankProject
			restricted
			when (not SourceAddress.Project entered)
			
		BlankFinanceDimension1
			restricted
			when (not SourceAddress.FinanceDimension1 entered)
			
		SourceEntityBillFromEntityAndCalculationOptionRetainExists
			restricted
			when (SourceEntity.BillFromEntity and RechargeCalculationOption.Retain)
			
		ProcessPostingPerformanceImpact
			restricted
			when ((FinanceEnterpriseGroup.AccountingUnitSelected 
					and SourceAddress.AccountingUnit not entered 
					and ProcessAccountingUnitPostingBalance)
			or (FinanceEnterpriseGroup.AccountSelected 
				and SourceAddress.GeneralLedgerChartAccount not entered 
				and ProcessAccountPostingBalance)
			or (FinanceEnterpriseGroup.ProjectEntry 
				and SourceAddress.Project not entered 
				and not TreatBlankProjectAsEmpty
				and ProcessProjectPostingBalance)
			or (FinanceEnterpriseGroup.FinanceDimension1Entry 
				and SourceAddress.FinanceDimension1 not entered 
				and not TreatBlankDimension1AsEmpty
				and ProcessDimension1PostingBalance)
			or (FinanceEnterpriseGroup.FinanceDimension2Entry 
				and SourceAddress.FinanceDimension2 not entered 
				and ProcessDimension2PostingBalance)
			or (FinanceEnterpriseGroup.FinanceDimension3Entry 
				and SourceAddress.FinanceDimension3 not entered 
				and ProcessDimension3PostingBalance)
			or (FinanceEnterpriseGroup.FinanceDimension4Entry 
				and SourceAddress.FinanceDimension4 not entered 
				and ProcessDimension4PostingBalance)
			or (FinanceEnterpriseGroup.FinanceDimension5Entry 
				and SourceAddress.FinanceDimension5 not entered 
				and ProcessDimension5PostingBalance)
			or (FinanceEnterpriseGroup.FinanceDimension6Entry 
				and SourceAddress.FinanceDimension6 not entered 
				and ProcessDimension6PostingBalance)
			or (FinanceEnterpriseGroup.FinanceDimension7Entry 
				and SourceAddress.FinanceDimension7 not entered 
				and ProcessDimension7PostingBalance)
			or (FinanceEnterpriseGroup.FinanceDimension8Entry 
				and SourceAddress.FinanceDimension8 not entered 
				and ProcessDimension8PostingBalance)
			or (FinanceEnterpriseGroup.FinanceDimension9Entry 
				and SourceAddress.FinanceDimension9 not entered 
				and ProcessDimension9PostingBalance)
			or (FinanceEnterpriseGroup.FinanceDimension10Entry 
				and SourceAddress.FinanceDimension10 not entered 
				and ProcessDimension10PostingBalance))
				
	Relations	
		TransferPricingWeightRel is a TransferPricingEntityWeight set
		TransferPricingEntityRel
			one-to-many relation to TransferPricingEntity
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup				= FinanceEnterpriseGroup
				related.TransferPricing						= TransferPricing
		AccountingUnitInBillToEntitiesRel
			one-to-one relation to AccountingUnit
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 				= FinanceEnterpriseGroup
				related.AccountingEntity					= LocalAccountingEntity
				related.AccountingUnit		    			= SourceAddress.AccountingUnit
		TransferPricingSourceRel
			one-to-many relation to TransferPricingSource
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup				= FinanceEnterpriseGroup
				related.TransferPricing						= TransferPricing
		TransferPricingSourceSplitUsingHeaderRel
			one-to-many relation to TransferPricingSource
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup				= FinanceEnterpriseGroup
				related.TransferPricing						= TransferPricing
			Instance Selection
				where (related.RechargeCalculationOption	= RechargeCalculationOption.SplitUsingHeaderWeights) 
		TransferPricingSourceSplitRel
			one-to-many relation to TransferPricingSource
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup				= FinanceEnterpriseGroup
				related.TransferPricing						= TransferPricing
			Instance Selection
				where (related.RechargeCalculationOption	= RechargeCalculationOption.SplitUsingHeaderWeights
				or 	   related.RechargeCalculationOption	= RechargeCalculationOption.SplitUsingSourceWeights) 
		DeleteAllTransferPricingWeightRel
			one-to-many relation to TransferPricingEntityWeight
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup				= FinanceEnterpriseGroup
				related.TransferPricing						= TransferPricing
				related.TransferPricingSource				= blank	
		AccountingUnitInBasisRel
			one-to-one relation to AccountingUnitHierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 				= FinanceEnterpriseGroup
				related.AccountingUnitStructure 			= DerivedAccountingUnitStructure
				related.AccountingEntity					= SourceAddress.AccountingEntity
				related.AccountingUnit		    			= SourceAddress.AccountingUnit
		ProjectInBasisRel
			one-to-one relation to ProjectHierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 				= FinanceEnterpriseGroup
				related.ProjectStructure					= DerivedProjectStructure
				related.Project				   				= SourceAddress.Project
		AccountInBasisRel
			one-to-one relation to ReportingChartAccount
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 				= FinanceEnterpriseGroup
				related.ReportingChart						= DerivedAccountStructure
				related.GeneralLedgerChartAccount			= SourceAddress.GeneralLedgerChartAccount
		Dimension1InBasisRel
			one-to-one relation to FinanceDimension1Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 				= FinanceEnterpriseGroup
				related.FinanceDimension1Structure			= DerivedFinanceDimension1Structure
				related.FinanceDimension1					= SourceAddress.FinanceDimension1
		Dimension2InBasisRel
			one-to-one relation to FinanceDimension2Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 				= FinanceEnterpriseGroup
				related.FinanceDimension2Structure			= DerivedFinanceDimension2Structure
				related.FinanceDimension2					= SourceAddress.FinanceDimension2
		Dimension3InBasisRel
			one-to-one relation to FinanceDimension3Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 				= FinanceEnterpriseGroup
				related.FinanceDimension3Structure			= DerivedFinanceDimension3Structure
				related.FinanceDimension3					= SourceAddress.FinanceDimension3
		Dimension4InBasisRel
			one-to-one relation to FinanceDimension4Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 				= FinanceEnterpriseGroup
				related.FinanceDimension4Structure			= DerivedFinanceDimension4Structure
				related.FinanceDimension4					= SourceAddress.FinanceDimension4
		Dimension5InBasisRel
			one-to-one relation to FinanceDimension5Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 				= FinanceEnterpriseGroup
				related.FinanceDimension5Structure			= DerivedFinanceDimension5Structure
				related.FinanceDimension5					= SourceAddress.FinanceDimension5
		Dimension6InBasisRel
			one-to-one relation to FinanceDimension6Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 				= FinanceEnterpriseGroup
				related.FinanceDimension6Structure			= DerivedFinanceDimension6Structure
				related.FinanceDimension6					= SourceAddress.FinanceDimension6
		Dimension7InBasisRel
			one-to-one relation to FinanceDimension7Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 				= FinanceEnterpriseGroup
				related.FinanceDimension7Structure			= DerivedFinanceDimension7Structure
				related.FinanceDimension7					= SourceAddress.FinanceDimension7
		Dimension8InBasisRel
			one-to-one relation to FinanceDimension8Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 				= FinanceEnterpriseGroup
				related.FinanceDimension8Structure			= DerivedFinanceDimension8Structure
				related.FinanceDimension8					= SourceAddress.FinanceDimension8
		Dimension9InBasisRel
			one-to-one relation to FinanceDimension9Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 				= FinanceEnterpriseGroup
				related.FinanceDimension9Structure			= DerivedFinanceDimension9Structure
				related.FinanceDimension9					= SourceAddress.FinanceDimension9
		Dimension10InBasisRel
			one-to-one relation to FinanceDimension10Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 				= FinanceEnterpriseGroup
				related.FinanceDimension10Structure			= DerivedFinanceDimension10Structure
				related.FinanceDimension10					= SourceAddress.FinanceDimension10


	Action Exit Rules
		invoke UpdateChanged TransferPricing			
			
	Actions
		Create is a Create Action
		
		Update is an Update Action
		
		FastUpdate is an Update Action
			restricted
			bypass field rules			
					
		Delete is a Delete Action
			Local Fields
			Action Rules
			Exit Rules
				if (TransferPricingSourceRel exists 
				and instance count of TransferPricingSourceRel != last TransferPricingSourceRel.LineNumber)
					invoke Resequence TransferPricing
		
		GenerateWeights is an Instance Action
			valid when (RechargeCalculationOption.SplitUsingSourceWeights)
			Parameters
				PrmGeneralLedgerCalendarYear is a GeneralLedgerCalendarYear
					default label is "Year"
				PrmEntityOption					is Numeric 1
					default label is "EntityOption"
					States
						Blank					value is 0
						Single					value is 1
						All						value is 2
				PrmAccountingEntity			 is an AccountingEntity
					default label is "AccountingEntity"
				PrmDefaultWeight			 is an InternationalAmount
					default label is "DefaultWeight"
			Parameter Rules
				PrmGeneralLedgerCalendarYear
					required
				PrmAccountingEntity
					if (not PrmEntityOption.Single)
						initialize PrmAccountingEntity
			Action Rules
				invoke GenerateWeightsBySource TransferPricing
					invoked.PrmGeneralLedgerCalendarYear 	= PrmGeneralLedgerCalendarYear
					invoked.PrmEntityOption				 	= PrmEntityOption
					invoked.PrmAccountingEntity	 		    = PrmAccountingEntity
					invoked.PrmDefaultWeight				= PrmDefaultWeight
					invoked.PrmTransferPricingSource		= TransferPricingSource 
		
