PurchaseFromLocation is a BusinessClass
    owned by po
    prefix is PVL
    classic name is POVENDLOC

    Ontology
        symbolic key is PurchaseFromLocation
            classic set name is PVLSET1
            classic name is PURCH-FR-LOC

    Patterns
        implements StaticJava
        disable AuditIndex
        implements BODId

    Persistent Fields

        LeadtimeDays
        IssueMethod                                 is a PurchaseOrderIssueMethod
            classic name is ISSUE-METH
       	RevisedIssueMethod                          is a PurchaseOrderIssueMethod
            classic name is REV-ISSUE-METH
        EDINumber
        FaxNumber
            classic name for FaxNumber.InternationalPrefix is FAX-PREFIX
            classic name for FaxNumber.SubscriberNumber is FAX-NUMBER
            classic name for FaxNumber.Extension is FAX-EXT
        FreightTerm
            classic name is FREIGHT-TERMS
        ShipVia
        ShipTerm
            classic name is FOB-CODE
        NormalDeliveryDay
            classic name is NORM-DEL-DAY
        UndershipmentTolerancePercentage
            sql name is UTolerancePercentage
            classic name is USHIP-TOL-PCT
        RevisedEDINumber                            is an EDINumber
            classic name is REV-EDI-NUMBER
        RevisedEDITransaction                       is AlphaUpper size 1
            classic name is REV-EDI-TRANS
            States
                NotApplicable     value is "N"
                POTransaction     value is "P"
                ChangeTransaction value is "C"
        RevisionsInclude                            is AlphaUpper size 1
            classic name is REVISIONS-INCL
            States
                RevisionsOnly     value is "O"
                RevisionsComplete value is "C"
                Reissue           value is "I"

                NotApplicable     value is  "N"
        ContactName                                 is a VendorName 
        	holds pii
            classic name is VENDOR-CONTCT
        PhoneNumber                                 is a TelephoneNumber 
        	holds pii
            classic name for PhoneNumber.InternationalPrefix is PHONE-PREFIX
            classic name for PhoneNumber.SubscriberNumber is PHONE-NUM
            classic name for PhoneNumber.Extension is PHONE-EXT
        POCode
        VendorReturnShippingMethod                  is a ShipVia
            classic name is OVEND-SHIP-VIA
        LoadingPort
        UnloadingPort
        AllowChangeToPunchoutPurchaseOrder          is Boolean
            sql name is AChangeToPunchoutPurchaseOrder
            classic name is PUNCHOUT-CHG-F
        EmailAddress								is an EmailAddressMulti 
        	holds pii
        ReorderOnSunday                             is Boolean
            classic name is REORDER-SUN-FL
        ReorderOnMonday                             is Boolean
            classic name is REORDER-MON-FL
        ReorderOnTuesday                            is Boolean
            classic name is REORDER-TUE-FL
        ReorderOnWednesday                          is Boolean
            classic name is REORDER-WED-FL
        ReorderOnThursday                           is Boolean
            classic name is REORDER-THU-FL
        ReorderOnFriday                             is Boolean
            classic name is REORDER-FRI-FL
        ReorderOnSaturday                           is Boolean
            classic name is REORDER-SAT-FL
        LocationIDPrintOption                       is Numeric size 1
            classic name is LOC-ID-PRT
            States
                DoNotPrint					value is 0
                PrintHINOnPOLine			value is 1
                PrintGLNOnPOLine			value is 2
				PrintGLNOnPOHeaderOnly		value is 3
                PrintGLNOnPOHeaderAndLine	value is 4
        OvershipmentTolerancePercentage             is a CostPercent
            sql name is OTolerancePercentage
            classic name is OSHIP-TOL-PCT
        OvershipmentToleranceOption
            classic name is ZERO-OSHIP-FL
        UndershipmentToleranceOption
            classic name is ZERO-USHIP-FL
        CancelAllBackorder                          is Boolean
            classic name is CANCEL-ALL-BO
            restricted 
        ReturnMaterialAuthorizationRequired         is Boolean
            sql name is RMaterialAuthorizationRequired
            classic name is RMA-REQUIRED
        ReturnMaterialAuthorizationDocumentRequired is Boolean
            sql name is RMADocumentRequired
            classic name is RMA-DOC-REQ
        UpdatePurchaseOrderCost                     is Numeric size 1
			default label is "OverrideVendorDeterminedCost"
            classic name is UPD-PO-COST
            States
                DoNotUpdatePOCostFromReceipt				value is 1
                UpdatePOCostFromReceiptOrAcknowledgement	value is 2
        OverrideContractCost                       is Boolean
            classic name is OVER-AGRMT
        OverrideLastPOLastCost                      is Boolean
            classic name is OVER-LC-LP
        Buyer
            classic name is BUYER-CODE
        OpenPurchaseLimit                           is an InternationalAmount
            classic name is OPEN-PO-LIMIT
        OpenPurchaseAmount                          is an InternationalAmount
            classic name is OPEN-PO-AMT
            disable Auditing
        MaximumOrderAmount                          is an InternationalAmount
            classic name is MAX-ORDER-AMT
        LocationControl                             is AlphaUpper size 1
            classic name is REQ-LOC-LEVEL
            States
                CombineRequisitionLinesToPOLine			value is "S"
                CombineRequisitionsToPOLineByLocation	value is "L"
                CannotMixRequestingLocationsOnPO		value is "H"
                CannotCombineRequisitions				value is "N"
        MinimumOrderWeight
            classic name is MIN-ORD-WEIGHT
        OneSourceDocumentToOnePO                    is Numeric size 1
            classic name is ONE-SRC-ONE-PO
            States
                No									value is 0
                OneRequisitionToOnePO				value is 1
                OneCustomerOrderToOnePO				value is 2
                RequisitionAndCustomerOrderToOnePO	value is 3
        MinimumPurchaseOrderAmount                  is an InternationalAmount
            classic name is MIN-PO-AMT
        GlobalLocationNumber
            classic name is GLN-NBR
        MixContractsOnPurchaseOrder                 is Boolean
            classic name is REQ-CONT-LEVEL
        PrintVisitNumber                            is Boolean
            classic name is DSP-VISIT-NBR
        TransmitVisitNumber                         is Boolean
            classic name is EDI-VISIT-NBR
        MaskVisitNumber                             is Boolean
            classic name is MSK-VISIT-NBR
        PrintMedicalRecordNumber                    is Boolean
            classic name is DSP-PAT-ID
        TransmitMedicalRecordNumber                 is Boolean
            classic name is EDI-PAT-ID
        MaskMedicalRecordNumber                     is Boolean
            classic name is MSK-PAT-ID
        PrintCaseID                                 is Boolean
            classic name is DSP-CASE-NBR
        TransmitCaseID                              is Boolean
            classic name is EDI-CASE-NBR
        MaskCaseID                                  is Boolean
            classic name is MSK-CASE-NBR
        PrintProcedure                              is Boolean
            classic name is DSP-PROC
        TransmitProcedure                           is Boolean
            classic name is EDI-PROC
		PrintPatientProcedureModifier				is Boolean
			classic name is DSP-PROC-MOD
		TransmitPatientProcedureModifier			is Boolean
			classic name is EDI-PROC-MOD
        PrintProcedureDate                          is Boolean
            classic name is DSP-PROC-DT
        TransmitProcedureDate                       is Boolean
            classic name is EDI-PROC-DT
        PrintPractitioner                           is Boolean
            classic name is DSP-PHYS-NAME
        TransmitPractitioner                        is Boolean
            classic name is EDI-PHYS-NAME
        PrintNurseCoordinator                       is Boolean
            classic name is DSP-NRS-COORD
        TransmitNurseCoordinator                    is Boolean
            classic name is EDI-NRS-COORD
		PrintPatientName							is Boolean
			classic name is DSP-PAT-NAME
		TransmitPatientName							is Boolean
			classic name is EDI-PAT-NAME
		MaskPatientName                             is Boolean
		PrintPatientBirthdate						is Boolean
			classic name is DSP-BIRTHDATE
		TransmitPatientBirthdate					is Boolean
			classic name is EDI-BIRTHDATE
		MaskPatientBirthdate                        is Boolean
		PrintPatientGender							is Boolean
			classic name is DSP-GENDER
		TransmitPatientGender						is Boolean
			classic name is EDI-GENDER
		MaskPatientGender                           is Boolean
		PrintPatientSocialSecurityNumber			is Boolean
			classic name is DSP-SSN
		TransmitPatientSocialSecurityNumber			is Boolean
			classic name is EDI-SSN
		MaskPatientSocialSecurityNumber				is Boolean
			classic name is MSK-SSN
        PrintSalesRepresentative                    is Boolean
            classic name is DSP-SALES-REP
        TransmitSalesRepresentative                 is Boolean
            classic name is EDI-SALES-REP
        PrintSupplierOrderNumber                    is Boolean
            classic name is DSP-ORD-NBR
        TransmitSupplierOrderNumber                 is Boolean
            classic name is EDI-ORD-NBR
        PrintRequester                              is Boolean
            classic name is DSP-REQUESTOR
        TransmitRequester                           is Boolean
            classic name is EDI-REQUESTOR
        PrintLotNumber                              is Boolean
            classic name is DSP-LOT
        TransmitLotNumber                           is Boolean
            classic name is EDI-LOT
        PrintSerialNumber                           is Boolean
            classic name is DSP-SER-NBR
        TransmitSerialNumber                        is Boolean
            classic name is EDI-SER-NBR
        PrintUserDefined1                           is Boolean
            classic name is DSP-USERDEF1
        TransmitUserDefined1                        is Boolean
            classic name is EDI-USERDEF1
        MaskUserDefined1 		                   	is Boolean
            classic name is MSK-USERDEF1
        PrintUserDefined2                           is Boolean
            classic name is DSP-USERDEF2
        TransmitUserDefined2                        is Boolean
            classic name is EDI-USERDEF2
        MaskUserDefined2 		                   	is Boolean
            classic name is MSK-USERDEF2
        PrintUniqueDeviceId                        is Boolean
            classic name is UDI-FL
        TransmitUniqueDeviceId                     is Boolean
            classic name is EDI-UDI-FL
        PrintGTIN                                  is Boolean
            classic name is GTIN-FL
        TransmitGTIN                               is Boolean
            classic name is EDI-GTIN-FL
        PrintManufacturingDate                     is Boolean
            classic name is MANUF-DATE-FL
        TransmitManufacturingDate                  is Boolean
            classic name is EDI-MANUF-FL
        PrintExpirationDate                        is Boolean
            classic name is EXPIRE-DATE-FL
        TransmitExpirationDate                     is Boolean
            classic name is EDI-EXPIRE-FL
        AllowVendorItemUpdate                       is Boolean
			classic name is ALLOW-VI-UPDT
		OrderMinimumAmountEdit						is Numeric size 1
			classic name is ORDER-MIN-EDIT
			States
				PurchaseOrders							value is 0
				PurchaseOrdersAndRequisitions			value is 1
				
		AribaEnabled								is Numeric size 1
			States
				No									value is 0
				Integrated							value is 1
				Flipper								value is 2
				Light								value is 3
		SellerAribaNetworkId						is Alpha size 20
		NamedPlace									is Text
		IDMTemplate
		PurchaseOrderDocument
		DeliveryToleranceOption				  is Numeric size 1
			States
				DefaultToNextLevel 		 value is 0
				UseDeliveryToleranceDays value is 1
				DisableDeliveryTolerance value is 2
		DeliveryToleranceDays				  is Numeric size 3

    Conditions

        Active
        	restricted
        	when (VendorLocationRel.IsActive)
        
        HasGlobalLocationNumber
            classic name is HAS-GLN-NBR
            restricted
            when (GlobalLocationNumber entered)

        HasFreightTerm
            classic name is POFRTTERM
            restricted
            when (FreightTerm entered)

        HasIncoTerms
            classic name is POFRTTERM
            restricted
            when (FreightTerm entered
            and   NamedPlace  entered)

		VendorRecordExists
			restricted
			when (Vendor entered)

		VendorGroupRecordExists
			restricted
			when (VendorGroup entered)

		IsUseDeliveryTolerance
			restricted
			when (DeliveryToleranceOption.UseDeliveryToleranceDays)	

		IsZeroDeliveryToleranceDays
			restricted
			when (DeliveryToleranceDays not entered)	        

    Relations

    	VendorRel
    		one-to-one relation to Vendor
    		Field Mapping uses symbolic key
    			related.VendorGroup          	= VendorGroup
                related.Vendor              	= Vendor  
   
   		POCodeRel
   			one-to-one relation to POCode
   			Field Mapping uses symbolic key
   				related.ProcurementGroup 		=  VendorGroup	
   				related.POCode					=  POCode
    
    	PurchasingCompanysRel
    		one-to-many relation to PurchasingCompany
    		Field Mapping uses Set2
    			related.ProcurementGroup 		=  VendorGroup
    	
    	PurchaseOrdersRel
    		one-to-many relation to PurchaseOrder
    		Field Mapping uses Set2
    			related.Company       			= PurchasingCompanysRel.Company
                related.Vendor					= Vendor
                related.PurchaseFromLocation	= PurchaseFromLocation
    		
        VendorLocationRel
            one-to-one relation to VendorLocation
            required
            Field Mapping uses symbolic key
                related.VendorGroup   			= VendorGroup
                related.Vendor        			= Vendor
	            related.VendorLocation 			= PurchaseFromLocation

        BuyerRel
            one-to-one relation to Buyer
            Field Mapping uses symbolic key
                related.HROrganization	 		= VendorGroup.BusinessGroup.FinanceEnterpriseGroup.HROrganization
                related.Buyer            		= Buyer

        ShipTermRel
            one-to-one relation to ShipTerm
            Field Mapping uses symbolic key
                related.ProcurementGroup 		= VendorGroup
                related.ShipTerm         		= ShipTerm

		SupplierSourceIdRel
			one-to-many relation to SupplierSourceId
			Field Mapping uses symbolic key
				related.SupplierGroup           = VendorGroup
				related.Supplier                = Vendor.SupplierRel.Supplier
			Instance Selection	
				where (related.VendorLocation	= PurchaseFromLocation)

        GlobalLocationNumberRel
            one-to-one relation to GlobalLocationNumber
            valid when (HasGlobalLocationNumber)
            Field Mapping uses symbolic key
                related.ItemGroup            	= VendorGroup
                related.GlobalLocationNumber 	= GlobalLocationNumber

        GlobalLocationNumberDetailsRel
            one-to-many relation to GlobalLocationNumberDetail
            Field Mapping uses Set8
                related.ItemGroup														= VendorGroup
                related.GlobalLocationNumberDetail.GlobalLocationNumberType				= 10
                related.PurchasingVendorAndPurchaseFromLocation.PurchasingVendor 		= Vendor
               	related.PurchasingVendorAndPurchaseFromLocation.PurchaseFromLocation	= PurchaseFromLocation
                related.GlobalLocationNumber											= GlobalLocationNumber	


        FreightTermRel
            one-to-one relation to FreightTerm
            Field Mapping uses symbolic key
                related.ProcurementGroup 		= VendorGroup
                related.FreightTerm      		= FreightTerm
        
        VendorGroupRel
        	one-to-one relation to VendorGroup
        	Field Mapping uses symbolic key
        		related.VendorGroup		= Vendor.VendorGroup
        
        ProcurementGroupRel
        	one-to-one relation to ProcurementGroup
        	Field Mapping uses symbolic key
        		related.ProcurementGroup = VendorGroup     
        		
		PurchasingVendorAccountsRel
			one-to-many relation to PurchasingVendorAccount
			Field Mapping uses symbolic key
				related.VendorGroup 	= VendorGroup
				related.Vendor			= Vendor
				related.VendorLocation 	= PurchaseFromLocation


        
        FSMBODConfigurationParameterRel
        	one-to-one relation to FSMBODConfigurationParameter
			Field Mapping uses symbolic key
            	related.FSMBODConfigurationParameter 		= LocalConfigurationParameter
        
        BankEntityRel
            one-to-many relation to BankEntity
            Field Mapping uses symbolic key
            	related.CashManagementGroup							= VendorGroup.FinanceEnterpriseGroup
            	related.BankEntity									= DerivedIntermediaryBankEntity
        
        FSMBODConfigurationRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 1
            	related.FSMBODConfiguration.Noun 		= "ShipFromPartyMaster"
             	related.FSMBODConfiguration.Direction 	= 1
		
		BODGeneralLedgerCompanyRel
			one-to-many relation to GeneralLedgerCompany
			Field Mapping uses symbolic key
			Instance Selection
				where (related.BusinessGroup = VendorGroup)
				
		FSMCleanDocIDCrossReferenceDetailRel
			one-to-many relation to FSMBODCrossReferenceDetail
			Field Mapping uses symbolic key
				related.FSMBODCrossReference.SourceField 		= "CSFGLC"
				related.FSMBODCrossReference.DestinationField 	= "DESTAE"
			Instance Selection
				where (related.SourceValue	= LocalAccountingentityCompany)
		
		FSMCleanDocIDGLCCrossReferenceDetailRel
			one-to-many relation to FSMBODCrossReferenceDetail
			Field Mapping uses symbolic key
				related.FSMBODCrossReference.SourceField 		= "CSFGLC"
				related.FSMBODCrossReference.DestinationField 	= "DESTAE"
				
		FSMCleanDocIDGeneralLedgerCompanyRel
            one-to-one relation to GeneralLedgerCompany
            required
            Field Mapping uses symbolic key
                related.Company = LocalGeneralLedgerCompany
                		
		ActivePurchaseOrderDocumentsRel
			one-to-many relation to PurchaseOrderDocument
			Field Mapping uses symbolic key
				related.Company											= blank
			Instance Selection
				where  (related.VendorGroup								= Vendor.VendorGroup
				and		related.Vendor									= Vendor
				and	   (related.PurchaseFromLocation not entered
				or		related.PurchaseFromLocation					= PurchaseFromLocation)
				and		related.Active)
		
		FSMInboundBODTrackerRel
            one-to-one relation to FSMInboundBODTracker
            Field Mapping uses symbolic key
                related.FSMInboundBODTracker	= LocalFSMInboundBODTracker
                
	Local Fields

		ActionCode			is Alpha size 1
			States
				Create  value is "C"
				Update	value is "U"
				Delete	value is "D"
		NativeLPLBODTrigger	                is Boolean
		LocalGeneralLedgerCompany	        is Numeric 4
		LocalAccountingentityCompany        is Alpha 40
		LocalCrossAccountingEntity          is Alpha 40
		POVendorLocationCleanDocIDXMLBOD	is XMLDocument
		LocalBODFormattedID			        is Alpha 100	
		NewBODTracker  				is a FSMInboundBODTracker view
		LocalFSMInboundBODTracker	is Numeric 15
		Error            			is Boolean
	    ErrorMessage     			is Alpha 300
		LocalConfigurationParameter	is Alpha size up to 200
		LocalSourceValue			is Alpha 30
		
	Context Fields
		FSMInboundBODTracker
		    
	Derived Fields
	
		DerivedDelimiter is a DerivedField
			type is Alpha size 5
			restricted
			LocalConfigurationParameter = "Generic_Delimiter"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
					
		DerivedTenantID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "tenantID"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedReleaseID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "releaseID"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedLogicalID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "logicalID"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedVersionID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "VersionID"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
			
		DerivedappProdline is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "appProdline"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedCleanDocumentID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "RequiredCleanDocumentID"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
					
		DerivedMultipleFEG is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "IsMultipleFEG"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
					
		DerivedTriggerBODBasedOnCrossReference is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "TriggerBODBasedOnCrossReference"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
							
		NativeBODCurrentTimeStamp is a DerivedField
			type is TimeStamp
			NativeBODCurrentTimeStamp = system current timestamp
			return NativeBODCurrentTimeStamp
			
		NativeAlphaCurrentTimeStamp is a DerivedField
			type is Alpha size 20
			return NativeBODCurrentTimeStamp	
			
		NativeBODFormattedCurrentTimeStamp is a DerivedField
			type is Alpha size 25
			return NativeAlphaCurrentTimeStamp[1:4] + "-" + NativeAlphaCurrentTimeStamp[5:6] + "-" + NativeAlphaCurrentTimeStamp[7:8] + "T" + NativeAlphaCurrentTimeStamp[9:10] + ":" + NativeAlphaCurrentTimeStamp[11:12] + ":" + NativeAlphaCurrentTimeStamp[13:14] + "Z"	
	
		DerivedConfigAccountingEntityShipFrom is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "ConfigAccountingEntity"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
					
		DerivedAccountingEntityShipFrom is a DerivedField
			type is Alpha 20
			restricted
			if(DerivedConfigAccountingEntityShipFrom != blank)
				return VendorGroup.FinanceEnterpriseGroup + DerivedDelimiter + DerivedConfigAccountingEntityShipFrom					
			else
				return VendorGroup.FinanceEnterpriseGroup + DerivedDelimiter + VendorGroup
				
		DerivedDocumentID is a DerivedField
			type is Alpha 40
			restricted
			if(DerivedCleanDocumentID != "Y")
				return VendorGroup + DerivedDelimiter + Vendor + DerivedDelimiter + PurchaseFromLocation.VendorLocation
			else
				return Vendor + DerivedDelimiter + PurchaseFromLocation.VendorLocation
			
		DerivedNativeActionCode is a DerivedField
			type is Alpha 10
			if (action type.Create or ActionCode.Create)
				return "Add"
			else 
			if (action type.Update)
				return "Replace"
			else 
			if (action type.Delete)
				return "Replace"
			else
				return "" 
				
		DerivedNativeBODVariationID is a DerivedField
			type is Alpha 25
			restricted
			return VendorLocationRel.bod id.VariationID
			
		DerivedTaxID is a DerivedField
			type is Alpha 30 
        	restricted
			return PurchaseFromLocation.VendorLocation.Vendor.TaxID
		
		DerivedNativeBODID is a DerivedField
			type is Alpha 100
			restricted
			return "infor-nid:" + DerivedTenantID + ":" + DerivedAccountingEntityShipFrom + ":" + DerivedDocumentID + ":" + "?ShipFromPartyMaster&verb=Sync&TrackerID="+ LocalFSMInboundBODTracker	
		
		DerivedBODUpdateTimeStamp is a DerivedField
            type is Alpha size 25
            restricted
            DerivedBODUpdateTimeStamp = update stamp.timestamp
            return DerivedBODUpdateTimeStamp
            
        DerivedBODFormattedUpdateTimeStamp is a DerivedField
			type is Alpha size 30
			restricted
			return DerivedBODUpdateTimeStamp[1:4] + "-" + DerivedBODUpdateTimeStamp[5:6] + "-" + DerivedBODUpdateTimeStamp[7:8] + "T" + DerivedBODUpdateTimeStamp[9:10] + ":" + DerivedBODUpdateTimeStamp[11:12] + ":" + DerivedBODUpdateTimeStamp[13:14] + "Z"
		
		DerivedLastupdateBy is a DerivedField
        	type is Alpha size 60
            restricted
            return update stamp.actor
            
        DerivedVendorName is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.VendorName
			
		DerivedContactName is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.ContactName
			
		DerivedAddressLine1 is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.CurrentAddressRel.PostalAddress.DeliveryAddress.AddressLine1
			
		DerivedAddressLine2 is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.CurrentAddressRel.PostalAddress.DeliveryAddress.AddressLine2
			
		DerivedAddressLine3 is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.CurrentAddressRel.PostalAddress.DeliveryAddress.AddressLine3
			
		DerivedAddressLine4 is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.CurrentAddressRel.PostalAddress.DeliveryAddress.AddressLine4
			
		DerivedMunicipality is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.CurrentAddressRel.PostalAddress.Municipality
			
		DerivedStateProvince is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.CurrentAddressRel.PostalAddress.StateProvince
			
		DerivedCountry is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.CurrentAddressRel.PostalAddress.Country
			
		DerivedPostalCode is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.CurrentAddressRel.PostalAddress.PostalCode
			
		DerivedContact is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.Contact
			
		DerivedNativeContactID is a DerivedField
            type is Alpha size 30
            restricted
        	return Vendor + DerivedDelimiter + PurchaseFromLocation.VendorLocation + DerivedDelimiter + "PRIME"
        	
        DerivedPInternationalPrefix is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.PhoneNumber.InternationalPrefix
			
		DerivedPSubscriberNumber is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.PhoneNumber.SubscriberNumber
			
		DerivedPExtension is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.PhoneNumber.Extension
			
		DerivedMInternationalPrefix is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.MobileNumber.MobilePhoneNumber.InternationalPrefix
			
		DerivedMSubscriberNumber is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.MobileNumber.MobilePhoneNumber.SubscriberNumber
			
		DerivedMExtension is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.MobileNumber.MobilePhoneNumber.Extension
			
		DerivedFInternationalPrefix is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.FaxNumber.InternationalPrefix
			
		DerivedFSubscriberNumber is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.FaxNumber.SubscriberNumber
			
		DerivedFExtension is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.FaxNumber.Extension
			
		DerivedEmailAddress is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.EmailAddress
			
		DerivedTermsCode is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.TermsCode
			
		DerivedPaymentMethodCode is a DerivedField
            type is Alpha size 30
            if (VendorLocationRel.BankTransactionCode.BankTransactionType =  "C")
				return "Cash"
			else 
			if (VendorLocationRel.BankTransactionCode.BankTransactionType =  "D")
				return "BankDraft"
			else 
			if (VendorLocationRel.BankTransactionCode.BankTransactionType =  "B")
				return "ElectronicFundsTransfer"
			else
				return ""
				
		DerivedTaxExemptCode is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.TaxExemptCode
			
		DerivedBankEntity is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity
			
		DerivedBankName is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.BankName
			
		DerivedBAddressLine1 is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.PostalAddress.DeliveryAddress.AddressLine1
			
		DerivedBAddressLine2 is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.PostalAddress.DeliveryAddress.AddressLine2
			
		DerivedBAddressLine3 is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.PostalAddress.DeliveryAddress.AddressLine3
			
		DerivedBAddressLine4 is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.PostalAddress.DeliveryAddress.AddressLine4
			
		DerivedBMunicipality is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.PostalAddress.Municipality
			
		DerivedBStateProvince is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.PostalAddress.StateProvince
		
		DerivedBCountry is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.PostalAddress.Country
			
		DerivedBPostalCode is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.PostalAddress.PostalCode
			
		DerivedBContact is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.Contact
			
		DerivedBPInternationalPrefix is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.PhoneNumber.InternationalPrefix
			
		DerivedBPExtension is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.PhoneNumber.Extension
			
		DerivedBPSubscriberNumber is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.PhoneNumber.SubscriberNumber
			
		DerivedBFInternationalPrefix is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.FaxNumber.InternationalPrefix
			
		DerivedBFExtension is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.FaxNumber.Extension
			
		DerivedBFSubscriberNumber is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.FaxNumber.SubscriberNumber
			
		DerivedBankCurrency is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankCurrency
			
		DerivedBankAccountNumber is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.BankAccountNumber
			
		DerivedShipFormPartyBODStatus is a DerivedField
			type is Alpha 10
			if (action type.Delete or ActionCode.Delete)
				return "Deleted"
			else
			if (PurchaseFromLocation.VendorLocation.Status.Active or PurchaseFromLocation.VendorLocation.Status.InactiveForPOAdditions)
				return "Open"
			else
			if (PurchaseFromLocation.VendorLocation.Status.Inactive)
				return "Closed"
				
		DerivedVendorGroup is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.VendorGroup
			
		DerivedPartyID is a DerivedField
			type is Alpha 30 
        	restricted
        	if(DerivedCleanDocumentID = "Y")
				return Vendor
			else
				return VendorGroup.FinanceEnterpriseGroup + DerivedDelimiter + VendorGroup + DerivedDelimiter + Vendor
			
		DerivedVVName is a DerivedField
			type is Alpha 30 
        	restricted
			return PurchaseFromLocation.VendorLocation.Vendor.VendorName 
			
		DerivedFinanceEnterpriseGroup is a DerivedField
			type is Alpha 20
			restricted
			return VendorGroup.FinanceEnterpriseGroup
			
		DerivedVendor is a DerivedField
			type is Alpha 30 
        	restricted
			return PurchaseFromLocation.VendorLocation.Vendor
			
		DerivedIntermediaryBankEntity is a DerivedField
			type is Alpha 30 
        	restricted
			return PurchaseFromLocation.VendorLocation.IntermediaryBankEntity
			
		DerivedIBankName is a DerivedField
			type is Alpha 10
			restricted
			return PurchaseFromLocation.VendorLocation.BankEntity.BankName
			
		DerivedIBankAccount is a DerivedField
			type is Alpha 30 
        	restricted
			return PurchaseFromLocation.VendorLocation.IntermediaryBankAccount
			
		DerivedCreatedBy is a DerivedField
        	type is Alpha size 60
            restricted
            return create stamp.actor
            
        DerivedCreateTimeStamp is a DerivedField
			type is Alpha 25
			restricted
			DerivedCreateTimeStamp = create stamp.timestamp
            return DerivedCreateTimeStamp
            
        DerivedBODFormattedCreateTimeStamp is a DerivedField
			type is Alpha size 30
			restricted
			return DerivedCreateTimeStamp[1:4] + "-" + DerivedCreateTimeStamp[5:6] + "-" + DerivedCreateTimeStamp[7:8] + "T" + DerivedCreateTimeStamp[9:10] + ":" + DerivedCreateTimeStamp[11:12] + ":" + DerivedCreateTimeStamp[13:14] + "Z"
        
		DerivedCashCode is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.CashCode
			
		DerivedDiscountCode is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.VendorLocation.DiscountCode
			
		DerivedVendorLocationRemitToCode is a DerivedField
			type is Alpha 30 
        	restricted
			return PurchaseFromLocation.VendorLocation.RemitToCode
			
		DerivedRemitToCodeDocumentID is a DerivedField
            type is Alpha size 30
            restricted
            if(DerivedVendorLocationRemitToCode != "")
        		return VendorGroup + DerivedDelimiter + Vendor + DerivedDelimiter + DerivedVendorLocationRemitToCode
        	else
        		return ""
        	
        DerivedBankTransactionCode is a DerivedField
			type is Alpha 30 
        	restricted
			return PurchaseFromLocation.VendorLocation.BankTransactionCode
			
		DerivedSeparatePayment is a DerivedField
			type is Alpha 30 
        	restricted
			return PurchaseFromLocation.VendorLocation.SeparatePayment
			
		DerivedPayImmediately is a DerivedField
			type is Alpha 30 
        	restricted
			return PurchaseFromLocation.VendorLocation.PayImmediately
			
		DerivedInvoiceGroup is a DerivedField
			type is Alpha 30 
        	restricted
			return PurchaseFromLocation.VendorLocation.InvoiceGroup
			
		DerivedVendorLocation is a DerivedField
			type is Alpha 30 
        	restricted
			return PurchaseFromLocation.VendorLocation.VendorLocation
			
		DerivedIntermediaryBankName is a DerivedField
			type is Alpha 30 
        	restricted
        	return BankEntityRel.BankName
		
		DerivedPurchaseFromLocFaxSubscriberNumber is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.FaxNumber.SubscriberNumber
		
		DerivedPurchaseFromLocFaxExtension is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.FaxNumber.Extension
		
		DerivedPurchaseFromLocPhoneSubscriberNumber is a DerivedField
			type is Alpha size 30
			restricted
			return PurchaseFromLocation.PhoneNumber.SubscriberNumber
						
		DerivedIssueMethod is a DerivedField
			type is Alpha 30
			restricted
			if(IssueMethod.Paper)
				return "Paper"
			else
			if(IssueMethod.Fax)
				return "Fax"
			else
			if(IssueMethod.EDI)
				return "EDI"
			else
			if(IssueMethod.Email)
				return "Email"
			else
			if(IssueMethod.DoNotPrint)
				return "DoNotPrint"
			else
			if(IssueMethod.XML)
				return "XML"
		
		DerivedRevisedIssueMethod is a DerivedField
			type is Alpha 30
			restricted
			if(RevisedIssueMethod.Paper)
				return "Paper"
			else
			if(RevisedIssueMethod.Fax)
				return "Fax"
			else
			if(RevisedIssueMethod.EDI)
				return "EDI"
			else
			if(RevisedIssueMethod.Email)
				return "Email"
			else
			if(RevisedIssueMethod.DoNotPrint)
				return "DoNotPrint"
			else
			if(RevisedIssueMethod.XML)
				return "XML"	
		
		DerivedRevisionsInclude is a DerivedField
			type is Alpha 40
			restricted
			if(RevisionsInclude.RevisionsOnly)
				return "RevisionsOnly"
			else
			if(RevisionsInclude.RevisionsComplete)
				return "RevisionsComplete"	
			else
			if(RevisionsInclude.Reissue)
				return "Reissue"	
			else
			if(RevisionsInclude.NotApplicable)
				return "NotApplicable"	
		
		DerivedLocationControl is a DerivedField
			type is Alpha 100
			restricted
			if(LocationControl.CombineRequisitionLinesToPOLine)
				return "CombineRequisitionLinesToPOLine"
			else
			if(LocationControl.CombineRequisitionsToPOLineByLocation)
				return "CombineRequisitionsToPOLineByLocation"	
			else
			if(LocationControl.CannotMixRequestingLocationsOnPO)
				return "CannotMixRequestingLocationsOnPO"	
			else
			if(LocationControl.CannotCombineRequisitions)
				return "CannotCombineRequisitions"	
		
		DerivedLocationIDPrintOption  is a DerivedField
			type is Alpha 40
			restricted
			if(LocationIDPrintOption.DoNotPrint)
				return "DoNotPrint"
			else
			if(LocationIDPrintOption.PrintHINOnPOLine)
				return "PrintHINOnPOLine" 
			else
			if(LocationIDPrintOption.PrintGLNOnPOLine)
				return "PrintGLNOnPOLine"
			else
			if(LocationIDPrintOption.PrintGLNOnPOHeaderOnly)
				return "PrintGLNOnPOHeaderOnly"
			else
			if(LocationIDPrintOption.PrintGLNOnPOHeaderAndLine)
				return "PrintGLNOnPOHeaderAndLine"
				 
		DerivedUpdatePurchaseOrderCost	is a DerivedField
			type is Alpha 100
			restricted	
			if(UpdatePurchaseOrderCost.DoNotUpdatePOCostFromReceipt) 
				return "DoNotUpdatePOCostFromReceipt"
			else
			if(UpdatePurchaseOrderCost.UpdatePOCostFromReceiptOrAcknowledgement)
				return "UpdatePOCostFromReceiptOrAcknowledgement"
				
		DerivedOneSourceDocumentToOnePO   is a DerivedField
			type is Alpha 80
			restricted	
			if(OneSourceDocumentToOnePO.No)
				return "No"
			else
			if(OneSourceDocumentToOnePO.OneRequisitionToOnePO)
				return "OneRequisitionToOnePO"
			else
			if(OneSourceDocumentToOnePO.OneCustomerOrderToOnePO)
				return "OneCustomerOrderToOnePO"
			else
			if(OneSourceDocumentToOnePO.RequisitionAndCustomerOrderToOnePO)
				return "RequisitionAndCustomerOrderToOnePO"
		
		DerivedAribaEnabled	is a DerivedField
			type is Alpha 30
			restricted
			if(AribaEnabled.No)
				return "No"
			else
			if(AribaEnabled.Integrated)
				return "Integrated"
			else
			if(AribaEnabled.Flipper)
				return "Flipper"
			else
			if(AribaEnabled.Light)
				return "Light"
				
		POVendorLocationServiceXMLBOD is a DerivedField
			type is XMLDocument	
			restricted
			POVendorLocationServiceXMLBOD = template.IONSyncShipFromPartyMaster_PurchaseFromLocation_ST document for this instance
		

	Field Rules
		IssueMethod
			default to IssueMethod.Paper
					
		RevisedIssueMethod
			default to RevisedIssueMethod.Paper
			
		FaxNumber
			if (action type.Create)
				default to PurchaseFromLocation.VendorLocation.FaxNumber	
			
			if (IssueMethod.Fax
			or 	RevisedIssueMethod.Fax)
				required 	
					"FaxNumberIsRequiredWhenIssueMethodIsFax"														
		
		EDINumber
			if (IssueMethod.EDI)
				default to PurchaseFromLocation.VendorLocation.EDINumber 
				required
					"EDINumberIsRequiredWhenIssueMethodIsEDI"
					
			else
				cannot be entered
					"IssueMethodMustBeEDIWhenEDINumberIsEntered"
					
		EmailAddress
			if (action type.Create)
				default to PurchaseFromLocation.VendorLocation.EmailAddress
			
			if (IssueMethod.Email
			or	RevisedIssueMethod.Email)
				required															
					"EmailAddressIsRequiredWhenIssueMethodIsEmail"
		
		RevisedEDINumber
			if (RevisedIssueMethod.EDI)
				default to VendorLocationRel.EDINumber 
				required
					"RevisedEDINumberIsRequiredWhenRevisedIssueMethodIsEDI"	
			else
				cannot be entered
					"RevisedIssueMethodMustBeEDIWhenRevisedEDINumberIsEntered"								
		
		RevisionsInclude
			default to RevisionsInclude.RevisionsOnly
            
            if (RevisedIssueMethod.DoNotPrint)
            	constraint (RevisionsInclude.NotApplicable)
            		"NotApplicableIsRequiredForThisRevisionMethod<RevisedIssueMethod>"
            		
        RevisedEDITransaction
        	if (not RevisedIssueMethod.EDI) 
        		cannot be entered
        			"IssueMethodMustBeEDIWhenRevisedEDITransactionIsEntered"
		
		PurchaseFromLocation
			if (VendorLocationRel exists)
				constraint (! VendorLocationRel.LocationType.RemitTo )	
					"LocationIsNotPurchaseFromType"									
						
		ContactName
			default to PurchaseFromLocation.VendorLocation.ContactName 			
		
		PhoneNumber
			if (action type.Create)
				default to PurchaseFromLocation.VendorLocation.PhoneNumber
		
		UndershipmentTolerancePercentage
			if (not UndershipmentToleranceOption.UseUndershipmentTolerance)
				cannot be entered
					"UndershipmentTolerancePercentageMustBeZeroWhenNotUsingUndershipmentTolerance"               				 
		
			constraint (UndershipmentTolerancePercentage <= 100%)
					"UndershipmentTolerancePercentageCanNotBeGreaterThan100"								
		
		OvershipmentTolerancePercentage
        	if (not OvershipmentToleranceOption.UseOvershipmentTolerance)
				cannot be entered
					"OvershipmentTolerancePercentageMustBeZeroWhenNotUsingOvershipmentTolerance"							
				
		LocationControl		
			default to LocationControl.CombineRequisitionLinesToPOLine
		
			if (LocationControl.CannotCombineRequisitions)
				constraint (!OneSourceDocumentToOnePO.No)
					"SingleDocumentToAPurchaseOrderMustHaveValueIfLocationControlIsCannotCombineRequisitions"



		OneSourceDocumentToOnePO	
			if (!OneSourceDocumentToOnePO.No
			and !LocationControl.CannotCombineRequisitions)
				cannot be entered
					"LocationControlMustBeCannotCombineRequisitionsIfUsingSingleDocumentToAPurchaseOrder"
			
		MixContractsOnPurchaseOrder
			initial value is true
		
		UpdatePurchaseOrderCost
			default to UpdatePurchaseOrderCost.DoNotUpdatePOCostFromReceipt
		
		AllowChangeToPunchoutPurchaseOrder
			initial value is true
	
		OpenPurchaseLimit


			constraint (OpenPurchaseLimit > OpenPurchaseAmount)
				"OpenPurchaseLimitMustBeGreaterThanCumulativeOpenPurchaseAmount" 			
							


		IDMTemplate
			if (Vendor.PurchasingVendor.UseIDMTemplate)
				if (IDMTemplate entered)
					constraint (IDMTemplate.IDMDocumentType.PurchaseOrder)
						"InvalidTemplate"	
			else	
				initialize

		DeliveryToleranceOption
			initial value is DeliveryToleranceOption.DefaultToNextLevel
			default to DeliveryToleranceOption.DefaultToNextLevel

		DeliveryToleranceDays
			if (DeliveryToleranceOption.DisableDeliveryTolerance
			or  DeliveryToleranceOption.DefaultToNextLevel)
				initialize
				cannot be entered
					"DeliveryToleranceDisabledOrDefaultedToNextLevel;CannotEnterToleranceDays"
		
	Rule Blocks
		POCodeUpdate
			if (POCodeRel.InUse.Unused)
				invoke Update POCodeRel
					invoked.InUse	= "Y"
		TriggerPurchaseFromLocationRules
			trigger "POVendorLocationService" PA service
				resume on error
				title is "EG:<VendorGroup.FinanceEnterpriseGroup>VG:<VendorGroup>VN:<Vendor>VL:<PurchaseFromLocation>"
				Criteria
					VendorGroup.FinanceEnterpriseGroup
				Variables
					ActionCode
					include persistent fields from PurchaseFromLocation.VendorLocation
					include persistent fields from PurchaseFromLocation.VendorLocation.CurrentAddressRel
					include persistent fields from PurchaseFromLocation.VendorLocation.Vendor
					include persistent fields from PurchaseFromLocation.VendorLocation.BankEntity
					include persistent fields from PurchaseFromLocation
					VendorGroup.FinanceEnterpriseGroup
						variable name is FinanceEnterpriseGroup
					VendorLocationRel.BankTransactionCode.BankTransactionType
						variable name is BankTransactionType
					
	Actions	
		Create is a Create Action
			Exit Rules
				include POCodeUpdate	
				if (VendorGroup.FinanceEnterpriseGroup.BODTrigger)
					ActionCode = ActionCode.Create
					increment VendorLocationRel.bod id.VariationID
					include TriggerPurchaseFromLocationRules


											
		Update is an Update Action
			Exit Rules
				include POCodeUpdate
				if (VendorGroup.FinanceEnterpriseGroup.BODTrigger)
					ActionCode = ActionCode.Update
					increment VendorLocationRel.bod id.VariationID
					include TriggerPurchaseFromLocationRules	


															
		Delete is a Delete Action	
			Entrance Rules
				if (VendorGroup.FinanceEnterpriseGroup.BODTrigger)
					ActionCode = ActionCode.Delete
					increment VendorLocationRel.bod id.VariationID
					include TriggerPurchaseFromLocationRules


			Exit Rules
				invoke Delete GlobalLocationNumberDetailsRel
				
		UpdateGlobalLocationNumber is an Instance Action
			restricted
			Parameters
				PrmGlobalLocationNumber	is a GlobalLocationNumber
			Action Rules
				GlobalLocationNumber	=	PrmGlobalLocationNumber

		FastUpdate is an Update Action
			restricted
			refresh and lock this instance
			bypass field rules
			
		UpdateOpenPurchaseAmount is an Instance Action
			restricted
			Parameters
				PrmOpenPurchaseAmount is an InternationalAmount
			Action Rules
				OpenPurchaseAmount += PrmOpenPurchaseAmount
		
		Anonymize is an Instance Action	
			restricted
			Action Rules
				
				initialize EDINumber
				initialize FaxNumber
				initialize RevisedEDINumber
				initialize ContactName
				initialize PhoneNumber
				initialize EmailAddress
				initialize Buyer
				
			Exit Rules
				invoke Create AnonymizeLog
					invoked.FinanceEnterpriseGroup		= VendorGroup.FinanceEnterpriseGroup
					invoked.Status						= 1
					invoked.AffectedBusinessClass		= "PO2"
					invoked.VendorGroup					= VendorGroup
					invoked.Vendor						= Vendor
					invoked.VendorLocation				= PurchaseFromLocation
	
	    PurgeAuditLog is an Instance Action	
	    	restricted
	        Action Rules
	        	
	          	invoke purge audit log entries
	          	 
          	Exit Rules
				invoke Create AnonymizeLog
					invoked.FinanceEnterpriseGroup		= VendorGroup.FinanceEnterpriseGroup
					invoked.Status						= 2
					invoked.AffectedBusinessClass		= "PO2"
					invoked.VendorGroup					= VendorGroup
					invoked.Vendor						= Vendor
          			invoked.VendorLocation				= PurchaseFromLocation
        UpdateBODIdFields is an Instance Action
			restricted
			Parameters
				PrmAccountingEntity  is Alpha size 22
					default label is "AccountingEntity"
				PrmLocation          is Alpha size 22
					default label is "Location" 
				PrmDocumentID        is Alpha size 100
					default label is "DocumentID"
				PrmRevision          is Alpha size 22
					default label is "Revision"	
				PrmSystemOfRecord    is Alpha size 1
					default label is "SystemOfRecord"


			Action Rules
				if (bod id.AccountingEntity != PrmAccountingEntity)
					bod id.AccountingEntity 	= PrmAccountingEntity
				if (bod id.Location != PrmLocation)
					bod id.Location				= PrmLocation
				if (bod id.DocumentID != PrmDocumentID)
					bod id.DocumentID			= PrmDocumentID
				if (bod id.Revision != PrmRevision)
					bod id.Revision				= PrmRevision
				if (bod id.SystemOfRecord != PrmSystemOfRecord)
					bod id.SystemOfRecord		= PrmSystemOfRecord



        TriggerPurchaseFromLocation is an Instance Action
        	restricted
        	Action Rules
        		if (VendorGroup.FinanceEnterpriseGroup.BODTrigger)
					ActionCode = ActionCode.Create	

					include TriggerPurchaseFromLocationRules


        
        SendPurchaseFromLocationBODNativeLPL is an Instance Action
			restricted
			Entrance Rules
			Parameters
			Action Rules
				if(DerivedCleanDocumentID = "Y")
					send ion bod
						bod is POVendorLocationCleanDocIDXMLBOD
						bod type is "Sync.ShipFromPartyMaster"
						accounting entity is LocalCrossAccountingEntity
						document id is DerivedDocumentID
						variation id is	DerivedNativeBODVariationID
				else
					send ion bod
						bod is POVendorLocationServiceXMLBOD
						bod type is "Sync.ShipFromPartyMaster"
						accounting entity is DerivedAccountingEntityShipFrom
		                document id is DerivedDocumentID
		                variation id is DerivedNativeBODVariationID		
						
        TriggerPurchaseFromLocationRulesNativeLPL  is an Instance Action
        	restricted
        	Parameters
				RestartFlag    is Boolean
				PrmTriggerFrom is Alpha 50
        	Action Rules
        		invoke NativeLPLBODTriggerChecks FSMBODConfigurationRel
					invoked.PrmVerb 					= 1
					invoked.PrmNoun						= "ShipFromPartyMaster"
					invoked.PrmDirection				= 1
					invoked.PrmTriggerFrom				= PrmTriggerFrom
					invoked.PrmFinanceEnterpriseGroup	= VendorGroup.FinanceEnterpriseGroup
					invoked.PrmBusinessGroup			= VendorGroup
					invoked.PrmMainUserTemplate			= "IONSyncShipFromPartyMaster_PurchaseFromLocation_ST"
				NativeLPLBODTrigger = FSMBODConfigurationRel.NativeLPLBODTrigger
				if (VendorGroup.FinanceEnterpriseGroup.BODTrigger and NativeLPLBODTrigger)
					if(DerivedCleanDocumentID = "Y")
						if(RestartFlag)
							if (BODGeneralLedgerCompanyRel exist)
								initialize LocalCrossAccountingEntity
								initialize LocalBODFormattedID
								initialize LocalGeneralLedgerCompany
								initialize POVendorLocationCleanDocIDXMLBOD
								initialize LocalAccountingentityCompany
								LocalGeneralLedgerCompany = FSMInboundBODTracker.Reference3
								if(DerivedMultipleFEG = "Y")
									LocalAccountingentityCompany = DerivedFinanceEnterpriseGroup + DerivedDelimiter + LocalGeneralLedgerCompany
								else
									LocalAccountingentityCompany = LocalGeneralLedgerCompany
								if(DerivedTriggerBODBasedOnCrossReference = "Y")
									if (FSMCleanDocIDCrossReferenceDetailRel.DestinationValue entered)
										LocalCrossAccountingEntity = FSMCleanDocIDCrossReferenceDetailRel.DestinationValue
								else
									LocalCrossAccountingEntity = LocalAccountingentityCompany
								if(LocalCrossAccountingEntity entered)
									LocalFSMInboundBODTracker		= FSMInboundBODTracker
									invoke Update FSMInboundBODTrackerRel
										invoked.FinanceEnterpriseGroup	= DerivedFinanceEnterpriseGroup
										invoked.BODDocumentID			= DerivedDocumentID
										invoked.BODVariationID			= DerivedNativeBODVariationID
										invoked.BODID					= LocalBODFormattedID
										invoked.Status					= 1
										invoked.StartDate				= system current timestamp
										invoked.Direction				= 1
										invoked.BODAccountingEntity		= LocalCrossAccountingEntity
										invoked.Vendor					= Vendor
										invoked.Reference1				= VendorGroup
										invoked.Reference2				= PurchaseFromLocation
										invoked.Reference3				= LocalGeneralLedgerCompany
										invoked.Reference4				= PrmTriggerFrom
										invoked.Reference5				= "POVendorLocationService"
										initialize invoked.Error			
										initialize invoked.ErrorMessage
									LocalBODFormattedID 			 = "infor-nid:" + DerivedTenantID + ":" + LocalCrossAccountingEntity + "::" + DerivedDocumentID + ":" + "?ShipFromPartyMaster&verb=Sync&TrackerID="+ LocalFSMInboundBODTracker
									POVendorLocationCleanDocIDXMLBOD = template.IONSyncShipFromPartyMasterCleanDocID_PurchaseFromLocation_ST document for this instance
									invoke SendPurchaseFromLocationBODNativeLPL
										resume on error
					                   		Error            							= true
					                        ErrorMessage     							= error message
					                if(Error)
										invoke Update FSMInboundBODTrackerRel
											invoked.Error 								= Error
											invoked.ErrorMessage 						= ErrorMessage
											invoked.Status								= 2
											invoked.CloseDate							= system current timestamp
											invoked.BODXML								= POVendorLocationCleanDocIDXMLBOD
									else
										invoke Update FSMInboundBODTrackerRel
											invoked.Status									= 3
											invoked.CloseDate								= system current timestamp
											invoked.BODXML									= POVendorLocationCleanDocIDXMLBOD
						else
						if(DerivedTriggerBODBasedOnCrossReference = "Y")
							if(FSMCleanDocIDGLCCrossReferenceDetailRel exists)
								for each FSMCleanDocIDGLCCrossReferenceDetailRel
									initialize LocalSourceValue
									initialize LocalCrossAccountingEntity
									initialize LocalBODFormattedID
									initialize POVendorLocationCleanDocIDXMLBOD
									LocalSourceValue = each.SourceValue
									if (LocalSourceValue entered)
										for each LocalSourceValue split on "<DerivedDelimiter>"
											initialize LocalGeneralLedgerCompany
											LocalGeneralLedgerCompany = each
									if(FSMCleanDocIDGeneralLedgerCompanyRel exists)
										LocalCrossAccountingEntity = each.DestinationValue
										if(LocalCrossAccountingEntity entered)
											if(FSMInboundBODTracker not entered)
												invoke Create FSMInboundBODTracker
													assign result to NewBODTracker
													invoked.Verb 					= 1
													invoked.Noun 					= "ShipFromPartyMaster"					
													invoked.BODDocumentID			= DerivedDocumentID
													invoked.BODVariationID			= DerivedNativeBODVariationID
													invoked.Status					= 1
													invoked.StartDate				= system current timestamp
													invoked.FinanceEnterpriseGroup	= DerivedFinanceEnterpriseGroup
													invoked.Direction				= 1
													invoked.BODAccountingEntity		= LocalCrossAccountingEntity
													invoked.Vendor					= Vendor
													invoked.Reference1				= VendorGroup
													invoked.Reference2				= PurchaseFromLocation
													invoked.Reference3				= LocalGeneralLedgerCompany
													invoked.Reference4				= PrmTriggerFrom
													invoked.Reference5				= "POVendorLocationService"
													initialize invoked.Error			
													initialize invoked.ErrorMessage					
												LocalFSMInboundBODTracker	= NewBODTracker.FSMInboundBODTracker
											LocalBODFormattedID              = "infor-nid:" + DerivedTenantID + ":" + LocalCrossAccountingEntity + "::" + DerivedDocumentID + ":" + "?ShipFromPartyMaster&verb=Sync&TrackerID="+ LocalFSMInboundBODTracker
											POVendorLocationCleanDocIDXMLBOD = template.IONSyncShipFromPartyMasterCleanDocID_PurchaseFromLocation_ST document for this instance
											invoke SendPurchaseFromLocationBODNativeLPL
												resume on error
							                   		Error            							= true
							                        ErrorMessage     							= error message
							                if(Error)
												invoke Update FSMInboundBODTrackerRel
													invoked.Error 								= Error
													invoked.ErrorMessage 						= ErrorMessage
													invoked.Status								= 2
													invoked.CloseDate							= system current timestamp
													invoked.BODID								= LocalBODFormattedID
													invoked.BODXML								= POVendorLocationCleanDocIDXMLBOD
											else
												invoke Update FSMInboundBODTrackerRel
													invoked.Status									= 3
													invoked.CloseDate								= system current timestamp
													invoked.BODID									= LocalBODFormattedID
													invoked.BODXML									= POVendorLocationCleanDocIDXMLBOD
						else
						if(DerivedTriggerBODBasedOnCrossReference = "N")
							if (BODGeneralLedgerCompanyRel exist)
								for each BODGeneralLedgerCompanyRel
									initialize LocalGeneralLedgerCompany
									initialize LocalCrossAccountingEntity
									initialize POVendorLocationCleanDocIDXMLBOD
									initialize LocalBODFormattedID
									LocalGeneralLedgerCompany = each.Company
									if(DerivedMultipleFEG = "Y")
										LocalCrossAccountingEntity = DerivedFinanceEnterpriseGroup + DerivedDelimiter + LocalGeneralLedgerCompany
									else
										LocalCrossAccountingEntity = LocalGeneralLedgerCompany
									if(LocalCrossAccountingEntity entered)
										if(FSMInboundBODTracker not entered)
											invoke Create FSMInboundBODTracker
												assign result to NewBODTracker
												invoked.Verb 					= 1
												invoked.Noun 					= "ShipFromPartyMaster"					
												invoked.BODDocumentID			= DerivedDocumentID
												invoked.BODVariationID			= DerivedNativeBODVariationID
												invoked.Status					= 1
												invoked.StartDate				= system current timestamp
												invoked.FinanceEnterpriseGroup	= DerivedFinanceEnterpriseGroup
												invoked.Direction				= 1
												invoked.BODAccountingEntity		= LocalCrossAccountingEntity
												invoked.Vendor					= Vendor
												invoked.Reference1				= VendorGroup
												invoked.Reference2				= PurchaseFromLocation
												invoked.Reference3				= LocalGeneralLedgerCompany
												invoked.Reference4				= PrmTriggerFrom
												invoked.Reference5				= "POVendorLocationService"
												initialize invoked.Error			
												initialize invoked.ErrorMessage					
											LocalFSMInboundBODTracker	= NewBODTracker.FSMInboundBODTracker
										LocalBODFormattedID              = "infor-nid:" + DerivedTenantID + ":" + LocalCrossAccountingEntity + "::" + DerivedDocumentID + ":" + "?ShipFromPartyMaster&verb=Sync&TrackerID="+ LocalFSMInboundBODTracker
										POVendorLocationCleanDocIDXMLBOD = template.IONSyncShipFromPartyMasterCleanDocID_PurchaseFromLocation_ST document for this instance
										invoke SendPurchaseFromLocationBODNativeLPL
											resume on error
						                   		Error            							= true
						                        ErrorMessage     							= error message
						                if(Error)
											invoke Update FSMInboundBODTrackerRel
												invoked.Error 								= Error
												invoked.ErrorMessage 						= ErrorMessage
												invoked.Status								= 2
												invoked.CloseDate							= system current timestamp
												invoked.BODID								= LocalBODFormattedID
												invoked.BODXML								= POVendorLocationCleanDocIDXMLBOD
										else
											invoke Update FSMInboundBODTrackerRel
												invoked.Status									= 3
												invoked.CloseDate								= system current timestamp
												invoked.BODID									= LocalBODFormattedID
												invoked.BODXML									= POVendorLocationCleanDocIDXMLBOD
					else
						if(FSMInboundBODTracker not entered)
							invoke Create FSMInboundBODTracker
								assign result to NewBODTracker
								invoked.Verb 					= 1
								invoked.Noun 					= "ShipFromPartyMaster"					
								invoked.BODDocumentID			= DerivedDocumentID
								invoked.BODVariationID			= DerivedNativeBODVariationID
								invoked.Status					= 1
								invoked.StartDate				= system current timestamp
								invoked.FinanceEnterpriseGroup	= DerivedFinanceEnterpriseGroup
								invoked.Direction				= 1
								invoked.BODAccountingEntity		= DerivedAccountingEntityShipFrom
								invoked.Vendor					= Vendor
								invoked.Reference1				= VendorGroup
								invoked.Reference2				= PurchaseFromLocation
								invoked.Reference3				= LocalGeneralLedgerCompany
								invoked.Reference4				= PrmTriggerFrom
								invoked.Reference5				= "POVendorLocationService"
								initialize invoked.Error			
								initialize invoked.ErrorMessage					
							LocalFSMInboundBODTracker	= NewBODTracker.FSMInboundBODTracker
						else 
							LocalFSMInboundBODTracker		= FSMInboundBODTracker
							invoke Update FSMInboundBODTrackerRel
								invoked.FinanceEnterpriseGroup	= DerivedFinanceEnterpriseGroup
								invoked.BODDocumentID			= DerivedDocumentID
								invoked.BODVariationID			= DerivedNativeBODVariationID
								invoked.Status					= 1
								invoked.StartDate				= system current timestamp
								invoked.Direction				= 1
								invoked.BODAccountingEntity		= DerivedAccountingEntityShipFrom
								invoked.Vendor					= Vendor
								invoked.Reference1				= VendorGroup
								invoked.Reference2				= PurchaseFromLocation
								invoked.Reference3				= LocalGeneralLedgerCompany
								invoked.Reference4				= PrmTriggerFrom
								invoked.Reference5				= "POVendorLocationService"
								initialize invoked.Error			
								initialize invoked.ErrorMessage
						invoke SendPurchaseFromLocationBODNativeLPL
							resume on error
		                   		Error            							= true
		                        ErrorMessage     							= error message
		                if(Error)
							invoke Update FSMInboundBODTrackerRel
								invoked.Error 								= Error
								invoked.ErrorMessage 						= ErrorMessage
								invoked.Status								= 2
								invoked.CloseDate							= system current timestamp
								invoked.BODXML								= POVendorLocationServiceXMLBOD
								invoked.BODID								= DerivedNativeBODID			
						else
							invoke Update FSMInboundBODTrackerRel
								invoked.Status									= 3
								invoked.CloseDate								= system current timestamp
								invoked.BODXML									= POVendorLocationServiceXMLBOD
								invoked.BODID									= DerivedNativeBODID
								
        Purge is a Purge Action
        	restricted  							
			
