CustomerGroupPortalContact is a BusinessClass 
    owned by ar
    prefix is CGPCT
	representative text is "<Contact.Employee.FirstLastNameID>"
    representative image is Contact.Employee.ResourcePicture.File
        display as portrait image
        missing image is random background
            foreground text is "<Contact.Employee.Name.Initials>"
            
    Ontology
		symbolic key is CustomerGroupPortalContact
		
	Persistent Fields
		Contact		is an Employee
			default label is "Employee"
		Type		is AlphaUpper size 50
			default label is "ContactType"
	
	Derived Fields
		ContactName is a DerivedField
			type is Alpha up to 101
			default label is "Name"
			return Contact.FirstLastName
			
		ContactEmail is a DerivedField
			type is Alpha up to 100
			default label is "EmailAddress"
			return Contact.EmployeeWorkEmailAddress
			
		ContactPhone is a DerivedField
			type is Alpha up to 100
			default label is "Phone"
			return Contact.EmployeeWorkTelephone
			
		ContactInitials is a DerivedField
			type is AlphaUpper 3
			default label is "Initials"
			return Contact.Name.Initials
			
		ContactPicture is a DerivedField
			type is BinaryDocument
			default label is "Picture"
			return Contact.ResourcePicture.File
		
	Conditions
		EmailAddressExists
			restricted
			when (Contact.UseForWorkEmail entered)
    	
    	EmployeeWorkPhoneExists
    		restricted
			when (ContactPhone entered)
			
    	EmployeeWorkEmailAddressExists
    		restricted
			when (ContactEmail entered)
			
		ShowValidCustomerGroupRecords	
			restricted
			when (session.key.CustomerGroup = CustomerGroupPortalContact.CustomerGroup)			
    	
    Sets
    	ByType
    		Sort Order
    			CustomerGroup
    			Type
    			Contact

	Field Rules
		Contact
			required
