ConfigEntityHistory is a BusinessClass
    owned by repository
    default label is "ConfigurationEntityHistory"
    store using com.lawson.rdtech.framework.repository.ConfigEntityHistoryStorage

    Ontology
        part of ConfigEntity
    		relative key is ConfigEntityHistoryKey

    Patterns
    	implements ReadOnly
		implements ConfigurationMetadata

    Persistent Fields
        Action              is Alpha size 40
        InvokingAction      is Alpha size 80
        Changed             is TimeStamp
        ChangedBy           is like Actor
        AuthenticatedActor  is like Actor
        Server              is Alpha size 200
        OldLPL              is LPL
        NewLPL              is LPL
            default label is "LPL"
        OldStatus           is a UserObjectStatus
        NewStatus           is a UserObjectStatus
            default label is "Status"

    Derived Fields

    Conditions
	    LplChanged
            default label is "LPL_Changed"
            when (OldLPL != NewLPL)

	    StatusChanged
            when (OldStatus != NewStatus)

        ActorIsUpdateActor
            when (actor = ChangedBy)

	Actions
	    Revert is an Instance Action
	        valid when (LplChanged)
			disable multiple instance selection
			completion message is "LPL_revertedBackTo_<Changed>"
            confirmation required
                "AreYouSureYouWantToRevertBackTo_<Changed>?"

            Action Rules
                invoke Edit ConfigEntity
                    invoked.LPL = NewLPL


	Sets
		ByChanged
			Sort Order
			    ConfigEntity
			    Changed descending
