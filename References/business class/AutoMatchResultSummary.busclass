AutoMatchResultSummary is a BusinessClass
    owned by ma
    prefix is AuMSy

    Ontology
		symbolic key is AutoMatchResultSummary

    Patterns
    	disable AuditIndex
    	disable Auditing
    	disable EffectiveDated
		implements CreateStamp
		implements UpdateStamp	

    Persistent Fields
		SummaryType					is Numeric 2
			States
				ByVendor			value is 1
				ByBuyer				value is 2
				ByErrorNumber		value is 3
    	Year
    	Month						is Numeric 2
    	Buyer						is like Buyer
    	VendorGroup					is like VendorGroup
    	Vendor						is like Vendor
		ErrorNumber
		ErrorMessage				is Alpha 200
		TotalCount					is Numeric 9
		TotalAmount					is like InternationalAmount

	Transient Fields

	Local Fields
		NextSentence				is Boolean		
		MatchInvoiceErrorMessages
		
	Context Fields
				
	Derived Fields

	Sets

 		ByBuyer
 			Instance Selection
 				where (SummaryType.ByBuyer)
 			Sort Order
				FinanceEnterpriseGroup
 				AutoMatchResult
 				Buyer
		    	Year
    			Month
 				AutoMatchResultSummary

 		ByVendor
 			Instance Selection
 				where (SummaryType.ByVendor)
 			Sort Order
				FinanceEnterpriseGroup
 				AutoMatchResult
 				VendorGroup
 				Vendor
		    	Year
    			Month
 				AutoMatchResultSummary

 		ByErrorNumber
 			Instance Selection
 				where (SummaryType.ByErrorNumber)
 			Sort Order
				FinanceEnterpriseGroup
 				AutoMatchResult
 				ErrorNumber
		    	Year
    			Month
 				AutoMatchResultSummary

 		ByYearMonth
 			Sort Order
				FinanceEnterpriseGroup
 				AutoMatchResult
		    	Year descending
    			Month descending
 				AutoMatchResultSummary
				Buyer
				Vendor
				ErrorNumber

 		ByTotalAmount
 			Sort Order
				FinanceEnterpriseGroup
				AutoMatchResult
				SummaryType
				TotalAmount descending
 				AutoMatchResultSummary

 		ByTotalCount
 			Sort Order
				FinanceEnterpriseGroup
				AutoMatchResult
				SummaryType
				TotalCount descending
 				AutoMatchResultSummary
	Relations

        BuyerRel
            one-to-one relation to Buyer
            Field Mapping uses symbolic key
                related.HROrganization	 		= FinanceEnterpriseGroup.HROrganization
                related.Buyer            		= Buyer

        VendorRel
            one-to-one relation to Vendor
            Field Mapping uses symbolic key
                related.VendorGroup	 			= VendorGroup
                related.Vendor            		= Vendor

		BuyerSummaryInvoicesRel
			one-to-many relation to AutoMatchResultInvoice
			Field Mapping uses ByBuyer
				related.AutoMatchResult			= AutoMatchResult
				related.Buyer					= Buyer
		    	related.Year					= Year
    			related.Month					= Month
			Instance Selection
				where (related.ErrorNumber entered)

		BuyerSummaryTotalInvoicesRel
			one-to-many relation to AutoMatchResultInvoice
			Field Mapping uses ByBuyer
				related.AutoMatchResult			= AutoMatchResult
				related.Buyer					= Buyer
			Instance Selection
				where (related.ErrorNumber entered)

		VendorSummaryInvoicesRel
			one-to-many relation to AutoMatchResultInvoice
			Field Mapping uses ByVendor
				related.AutoMatchResult			= AutoMatchResult
				related.Vendor					= Vendor
		    	related.Year					= Year
    			related.Month					= Month
			Instance Selection
				where (related.ErrorNumber entered)

		VendorSummaryTotalInvoicesRel
			one-to-many relation to AutoMatchResultInvoice
			Field Mapping uses ByVendor
				related.AutoMatchResult			= AutoMatchResult
				related.Vendor					= Vendor
			Instance Selection
				where (related.ErrorNumber entered)

		ErrorNumberSummaryInvoicesRel
			one-to-many relation to AutoMatchResultInvoice
			Field Mapping uses ByErrorNumber
				related.AutoMatchResult			= AutoMatchResult
				related.ErrorNumber				= ErrorNumber
		    	related.Year					= Year
    			related.Month					= Month
			Instance Selection
				where (related.ErrorNumber entered)

		ErrorNumberSummaryTotalInvoicesRel
			one-to-many relation to AutoMatchResultInvoice
			Field Mapping uses ByErrorNumber
				related.AutoMatchResult			= AutoMatchResult
				related.ErrorNumber				= ErrorNumber
			Instance Selection
				where (related.ErrorNumber entered)

	Conditions
	
		IsTotal
			when (Year not entered
			and    Month not entered)

		IsNotTotal
			when (Year entered
			and    Month entered)

	Field Rules

	Create Rules

	Actions
		Create is a Create Action
			restricted
			Action Rules



				if (SummaryType.ByErrorNumber
				and ErrorMessage not entered)
					MatchInvoiceErrorMessages.ErrorNumber = ErrorNumber
					ErrorMessage = MatchInvoiceErrorMessages.DerivedErrorMessage
				
		Update is an Update Action
			restricted

		FastUpdate is an Update Action
			restricted
			bypass field rules
			Action Rules




		Delete is a Delete Action
			restricted

		FastDelete is a Delete Action
			restricted
			bypass relational integrity rules

		Purge is a Purge Action
			restricted
			bypass relational integrity rules

