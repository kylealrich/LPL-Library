BuildReportDefinitions is a BusinessTask
    owned by report
    default label is "BuildReportDefinitions"
    
    Parameters
    	BuildOptions 		is Numeric size 1
    		States
    			StandardUpdate	value is 0
    			ForceUpdate  	value is 1
    			FullRebuild		value is 2
    
    	RebuildSubCategories is Boolean
		
	Actions
		Build is an Instance Action
			run in background
			confirmation required
						
			Local Fields
				LocGroup is Alpha size 100
			
			Action Rules
				LocGroup = "BuildReportDefinitions" + system current timestamp
			
				invoke PurgeReportDefinitions ReportDefinition in background group(LocGroup)
					if (BuildOptions.FullRebuild)
						invoked.ParamPurgeMissingOnly = false
					else
						invoked.ParamPurgeMissingOnly = true
					invoked.ParamIncludeExternal = false
				
				if (BuildOptions.FullRebuild)			
					if (RebuildSubCategories)	
						invoke PurgeSubCategories ReportSubCategory in background group(LocGroup)
						
				invoke BuildReportDefinitions WebApp in background
					run after background group(LocGroup)
					if (!BuildOptions.StandardUpdate)
						invoked.ForceUpdate = true
					else
						invoked.ForceUpdate = false
						
				invoke BuildReportDefinitions UserFolder in background
					run after background group(LocGroup)
					if (!BuildOptions.StandardUpdate)
						invoked.ForceUpdate = true
					else
						invoked.ForceUpdate = false
						

			
