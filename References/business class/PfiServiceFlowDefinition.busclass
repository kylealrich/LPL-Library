PfiServiceFlowDefinition is a BusinessClass
    owned by pfi
    prefix is PfiSF
    default label is "ServiceProcessDefinition"
    framework type is ProcessFlow
    disable data area copy
		preserve target data

    Ontology
        symbolic key is PfiServiceFlowDefinition

    Patterns
        implements CRUD
        implements LightweightAuditing
        disable AuditIndex
        disable AsOfDateProcessing
        disable EffectiveDated
        implements DynamicCreation
        implements AuditLogEntryActions

    Persistent Fields

        Criterion1           is a PfiCriterion
        Criterion2           is a PfiCriterion
        Criterion3           is a PfiCriterion
        Task                 is a PfiTask
        FlowDefinition       is a PfiFlowDefinition
            default label is "ProcessDefinition"
        EventType            is a PfiEventType
            default label is "RequestType"
        IsServiceFlowEnabled is Boolean
            default label is "ServiceProcessIsEnabled"

    Derived Fields

        EventTypeText is a DerivedField
            type is Alpha size 6
            if (EventType = "EVT_PFLOW")
                return "Single"
            else
            if (EventType = "EVT_MULTI")
                return "Multi"

    Field Rules

        EventType
            default to "EVT_PFLOW"

        IsServiceFlowEnabled
            initial value is true

        FlowDefinition
            required

    Sets

        ByCriterion1
            sql name is PfiSF01
            not indexed
            Sort Order
                Criterion1
                PfiServiceDefinition
                PfiServiceFlowDefinition

        ByCriterion2
            sql name is PfiSF02
            not indexed
            Sort Order
                Criterion2
                PfiServiceDefinition
                PfiServiceFlowDefinition

        ByCriterion3
            sql name is PfiSF03
            not indexed
            Sort Order
                Criterion3
                PfiServiceDefinition
                PfiServiceFlowDefinition

        ByFlowDefinition
            sql name is PfiSF04
            not indexed
            Sort Order
                FlowDefinition
                PfiServiceDefinition
                PfiServiceFlowDefinition

        ByEventType
            sql name is PfiSF05
            not indexed
            Sort Order
                EventType
                PfiServiceDefinition
                PfiServiceFlowDefinition

        ByServDefCrit1Crit2Crit3
            sql name is PfiSF06
            indexed
            Sort Order
                PfiServiceDefinition
                Criterion1
                Criterion2
                Criterion3
                PfiServiceFlowDefinition
            Instance Selection
                where (IsServiceFlowEnabled)

        ByServDefFlowDefCrit1Crit2Crit3
            sql name is PfiSF07
            no duplicates
            indexed
            Sort Order
                PfiServiceDefinition
                FlowDefinition
                Criterion1
                Criterion2
                Criterion3

        ByIsServiceFlowEnabled
            sql name is PfiSF08
            not indexed
            Sort Order
                IsServiceFlowEnabled
                PfiServiceDefinition
                PfiServiceFlowDefinition

    Actions

        Create is a Create Action

        Update is an Update Action

        Delete is a Delete Action

            Exit Rules
                invoke Update PfiServiceDefinition
                    invoked.PfiServiceDefinition = PfiServiceDefinition

        EnableDisable is an Instance Action
            default label is "Enable/Disable"

            Action Rules
                if (IsServiceFlowEnabled)
                    IsServiceFlowEnabled = false
                else
                    IsServiceFlowEnabled = true
