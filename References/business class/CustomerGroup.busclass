CustomerGroup is a BusinessClass
	owned by ar
	prefix is ACG
	classic name is ARCUSTGRP

	Ontology
		symbolic key is CustomerGroup
			classic set name is ACGSET1
			classic name is CUST-GROUP

	Patterns
		implements StaticJava
		disable AuditIndex

	Persistent Fields


		Name
		CustomerNumberType					is AlphaUpper size 1
			classic name is CUST-ALP-NBR
			States
				AlphaCustomerNumbers			value is "A"
				NumericCustomerNumbers			value is "N"
		AutomaticCustomerNumbering			is AlphaUpper size 1
			classic name is AUTO-CUSTOMER
			restricted	
			States
				ManualCustomerNumbering			value is "N"
				AutomatedCustomerNumbering		value is "Y"
		LastAutomaticCustomerNumber			is like Customer
			classic name is LAST-CUSTOMER
			disable Auditing	
		Currency
			classic name is CURRENCY-CD
		AgeCreditsRule						is AlphaUpper size 1
			classic name is AGE-CREDITS
			States
				AgedToLastDebitColumn			value is "L"
				AgedInCurrentColumn				value is "N"
				AgedRespectiveToDate			value is "R"
		AgePaymentsRule						is AlphaUpper size 1
			classic name is AGE-PYMNT
			States
				AgedToLastDebitColumn			value is "L"
				AgedInCurrentColumn				value is "N"
				AgedRespectiveToDate			value is "R"
		AgeDisputesRule						is AlphaUpper size 1
			classic name is AGE-DISPUTES
			States
				AgedInCurrentColumn				value is "N"
				AgeByTransactionDate			value is "Y"
		AgingMethod							is AlphaUpper size 1
			classic name is AGE-TYPE
			States
				AgeByDueDate					value is "D"
				AgeByTransactionDate			value is "T"
		CurrentAgingPeriod					is an AgePeriods
			classic name is AGE-CURRENT
		AgePeriodses						is an AgePeriodsX4InArcustgrp
			classic name is AGE-PERIODS
		BaseNumberOfDecimals
			classic name is BASE-ND
		AgingDisplayDate					is AlphaUpper size 1
			classic name is DISPLAY-DATE
			States
				DueDate							value is "D"
				TransactionDate					value is "T"
		AgingTransactionSequence			is a TransSequence
			classic name is TRANS-SEQUENCE
		BillOfExchangeProcessing			is Boolean
			classic name is DRAFT-PROCESS
		ElectronicFundsTransferProcess		is Boolean
			classic name is EFT-PROCESS
		EFTCalendar							is a SystemCalendar

		EFTDueDays							is a DueDays
			classic name is DUE-DAYS
		EFTDueDaysType						is AlphaUpper size 1
			classic name is DUE-TYPE
			States
				ActualDays						value is "A"
				BankDays						value is "M"
		EFTGLDays							is a GlDays
			classic name is GL-DAYS
		EFTGLDaysType						is AlphaUpper size 1
			classic name is GL-TYPE
			States
				ActualDays						value is "A"
				BankDays						value is "M"
		EFTDepositDays						is a DepositDays
			classic name is DEPOSIT-DAYS
		EFTDepositDaysType					is AlphaUpper size 1
			classic name is DEPOSIT-TYPE
			States
				ActualDays						value is "A"
				BankDays						value is "M"
		CurrencyDisplayType					is AlphaUpper size 1
			classic name is CURR-DISPLAY
			States
				Base							value is "B"
				Transaction						value is "T"
		EFTProcessingLevel					is AlphaUpper size 1
			classic name is EFT-LEVEL
			States
				CompanyLevelProcessing			value is "C"
				GroupLevelProcessing			value is "G"
				NoEFTProcessing					value is blank
		CustomerChangeAudit					is Boolean
			classic name is CUST-AUDIT















		ApplicationSort1Label				is Alpha size 30
		ApplicationSort2Label				is Alpha size 30
		ApplicationSort3Label				is Alpha size 30
		ApplicationSort4Label				is Alpha size 30
		LogoImageMaximumSize				is Numeric 8
		LogoImageUOM						is Numeric 1
			States
				Bytes							value is 0
				Kilobytes						value is 1
				Megabytes						value is 2
		ExpandedAgingPeriods				is Boolean
		AgeFuture							is an AgePeriods


		UseBillingReceivablesPortal			is Boolean
		TermAndCondition					is RichText
			default label is "TermsAndConditions"
		TaxIdFormat							is Numeric size 2
			States
				None							value is 0
				StandardFormatNoDelimiter		value is 1
				StandardFormatWithDelimiter		value is 2
		CustomerEmailHelpLink				is a URL
		SendForInternallyCreatedCustomer	is Boolean
		NotifyNewPrimaryContact				is Boolean
		NotifyPreviousPrimaryContact		is Boolean
		NotificationEmailAddress			is an EmailAddressMulti 
			holds pii
			default label is "SendAccessRequestEmailMessagesTo"
		AdminEmailAddress					is an EmailAddress 
			holds pii
			default label is "SendEmailMessagesFrom"
		AccessRequestTermText				is Alpha size up to 250
		AccessRequestLoginText				is Alpha size up to 250
		AccessRequestCompanyText			is Alpha size up to 250
		AccessRequestQuestionText			is Alpha size up to 250
		AdditionalContactText				is Alpha size up to 250
		ContactInformationText				is Alpha size up to 250
		CompleteAccessRequestText			is Alpha size up to 250
		IncompleteAccessRequestText			is Alpha size up to 250
		AccessRequestEmailSubject			is Alpha size 100
		AccessRequestEmailContent			is RichText
		PrimaryContactEmailSubject			is Alpha size 100
		PrimaryContactEmailContent			is RichText
		ContactEmailSubject					is Alpha size 100
		ContactEmailContent					is RichText
		ForgotUsernameEmailSubject			is Alpha size 100
		ForgotUsernameEmailContent			is RichText
		PasswordResetEmailSubject			is Alpha size 100	
			restricted
		PasswordResetEmailContent			is RichText			
			restricted
		NewValidationEmailSubject			is Alpha size 100
			Text Variables
				CustomerRepresentative			value is CustomerRepresentative
				CustomerName					value is CustomerRepresentative.CustomerName
				CustomerRepresentativeContact	value is CustomerRepresentativeContact
		NewValidationEmailContent			is RichText
			Text Variables
				CustomerRepresentative			value is CustomerRepresentative
				CustomerName					value is CustomerRepresentative.CustomerName
				CustomerRepresentativeContact	value is CustomerRepresentativeContact
		CustomerPrimaryItemHistoryAccess	is Boolean
		CustomerItemHistoryAccess			is Boolean
		CustomerPrimaryPaymentAccess		is Boolean
		CustomerPaymentAccess				is Boolean
		CustomerPrimaryInvoiceAccess		is Boolean
		CustomerInvoiceAccess				is Boolean
		CustomerPrimaryOrderAccess			is Boolean
		CustomerOrderAccess					is Boolean
		CustomerPrimaryReturnAccess			is Boolean
		CustomerReturnAccess				is Boolean



		CustomerPrimaryInvoicePaymentAccess	is Boolean	
		CustomerInvoicePaymentAccess		is Boolean	








		ThirdPartyPaymentProcessingContactId						is Alpha size 36	
			default label is "ContactId"
		ThirdPartyPaymentProcessingDeveloperId						is Alpha size 12	
			default label is "DeveloperId"
			restricted	
		ThirdPartyPaymentProcessingLocationId						is Alpha size 36	
			default label is "LocationId"
		ThirdPartyPaymentProcessingProductTransactionIdACH			is Alpha size 36	
			default label is "ProductTransactionIdACH"
		ThirdPartyPaymentProcessingProductTransactionIdCC			is Alpha size 36	
			default label is "ProductTransactionIdCC"
		ThirdPartyPaymentProcessingUserApiKey						is Alpha size 36	
			default label is "UserApiKey"
		ThirdPartyPaymentProcessingUserHashKey						is Alpha size 36	
			default label is "UserHashKey"
		ThirdPartyPaymentProcessingUserId							is Alpha size 36	
			default label is "UserId"
		ThirdPartyPaymentProcessingTransactionApiId					is Numeric size 15	
			default label is "TransactionApiId"
			disable Auditing	
		ReleasePortalPaymentProcessAutoCashApplication				is Boolean	
			default label is "ReleasePortalPaymentBatchAndProcessAutomaticCashApplication"
		AdjustmentApprovalEmailSubject		is Alpha 255
			Text Variables
 				Company							value is ReceivableApplication.Company
				Adjustment						value is ReceivableApplicationAdjustment
 				TransType						value is ReceivableApplication.TransType
 				Invoice							value is ReceivableApplication.Invoice
 				AdjustmentAmount				value is ReceivableApplicationAdjustment.AdjustmentAmount.CurrencyAmount
				Customer						value is ReceivableApplicationAdjustment.Customer	
				Currency						value is ReceivableApplication.DerivedCreditCurrency
				AdjustmentReason				value is ReceivableApplicationAdjustment.AdjustmentReason
				ReasonType						value is ReceivableApplicationAdjustment.AdjustmentReason.ReceivableAdjustmentReasonType
		AdjustmentApprovalEmailContent		is RichText
			Text Variables
				Company							value is ReceivableApplication.Company
				Adjustment						value is ReceivableApplicationAdjustment
 				TransType						value is ReceivableApplication.TransType
 				Invoice							value is ReceivableApplication.Invoice
 				AdjustmentAmount				value is ReceivableApplicationAdjustment.AdjustmentAmount.CurrencyAmount
				Customer						value is ReceivableApplicationAdjustment.Customer	
				Currency						value is ReceivableApplication.DerivedCreditCurrency
				AppliedAmount					value is ReceivableApplication.CreditTransaction.CreditApplicationAmount.CurrencyAmount
				AdjustmentReason				value is ReceivableApplicationAdjustment.AdjustmentReason
				ReasonType						value is ReceivableApplicationAdjustment.AdjustmentReason.ReceivableAdjustmentReasonType
		AdjustmentApprovalIncludeLink		is Boolean
			default label is "IncludeLinkToReviewAdjustment"
		AdjustmentApprovalIncludeRelatedDocs	is Boolean
			default label is "IncludeAllRelatedDocuments"
		AdjustmentApprovedEmailSubject		is Alpha 255
			Text Variables
				Company							value is ReceivableApplication.Company
				Adjustment						value is ReceivableApplicationAdjustment
 				TransType						value is ReceivableApplication.TransType
 				Invoice							value is ReceivableApplication.Invoice
 				AdjustmentAmount				value is ReceivableApplicationAdjustment.AdjustmentAmount.CurrencyAmount
				Customer						value is ReceivableApplicationAdjustment.Customer	
				Currency						value is ReceivableApplication.DerivedCreditCurrency
				AdjustmentReason				value is ReceivableApplicationAdjustment.AdjustmentReason
				ReasonType						value is ReceivableApplicationAdjustment.AdjustmentReason.ReceivableAdjustmentReasonType
		AdjustmentApprovedEmailContent		is RichText
			Text Variables
				Company							value is ReceivableApplication.Company
				Adjustment						value is ReceivableApplicationAdjustment
 				TransType						value is ReceivableApplication.TransType
 				Invoice							value is ReceivableApplication.Invoice
 				AdjustmentAmount				value is ReceivableApplicationAdjustment.AdjustmentAmount.CurrencyAmount
				Customer						value is ReceivableApplicationAdjustment.Customer	
				Currency						value is ReceivableApplication.DerivedCreditCurrency
				AppliedAmount					value is ReceivableApplication.CreditTransaction.CreditApplicationAmount.CurrencyAmount
				AdjustmentReason				value is ReceivableApplicationAdjustment.AdjustmentReason
				ReasonType						value is ReceivableApplicationAdjustment.AdjustmentReason.ReceivableAdjustmentReasonType
		AdjustmentApprovedIncludeRelatedDocs is Boolean
			default label is "IncludeAllRelatedDocuments"
		AdjustmentRejectEmailSubject		is Alpha 255
			Text Variables
				Company							value is ReceivableApplication.Company
				Adjustment						value is ReceivableApplicationAdjustment
 				TransType						value is ReceivableApplication.TransType
 				Invoice							value is ReceivableApplication.Invoice
 				AdjustmentAmount				value is ReceivableApplicationAdjustment.AdjustmentAmount.CurrencyAmount
				Customer						value is ReceivableApplicationAdjustment.Customer	
				Currency						value is ReceivableApplication.DerivedCreditCurrency
				AdjustmentReason				value is ReceivableApplicationAdjustment.AdjustmentReason
				ReasonType						value is ReceivableApplicationAdjustment.AdjustmentReason.ReceivableAdjustmentReasonType
		AdjustmentRejectEmailContent		is RichText
			Text Variables
				Company							value is ReceivableApplication.Company
				Adjustment						value is ReceivableApplicationAdjustment
 				TransType						value is ReceivableApplication.TransType
 				Invoice							value is ReceivableApplication.Invoice
 				AdjustmentAmount				value is ReceivableApplicationAdjustment.AdjustmentAmount.CurrencyAmount
				Customer						value is ReceivableApplicationAdjustment.Customer	
				Currency						value is ReceivableApplication.DerivedCreditCurrency
				AppliedAmount					value is ReceivableApplication.CreditTransaction.CreditApplicationAmount.CurrencyAmount
				AdjustmentReason				value is ReceivableApplicationAdjustment.AdjustmentReason
				ReasonType						value is ReceivableApplicationAdjustment.AdjustmentReason.ReceivableAdjustmentReasonType
		AdjustmentRejectIncludeRelatedDocs	is Boolean
			default label is "IncludeAllRelatedDocuments"
		

		LastLinkDisplayOrder				is Numeric size 8
			disable Auditing	
		UseIDMTemplate						is Boolean
		EFTNotificationPrintIDMTemplate		is an IDMTemplate
			default label is "EFTNotificationPrintTemplate"
		EEMigrationUsernameChangeEmailSubject		is Alpha size 100
		EEMigrationUsernameChangeEmailContent		is RichText
		EEMigrationUsernameChangeFromEmailAddress	is an EmailAddress 
			holds pii


	Context Fields
		CustomerRepresentative
		CustomerRepresentativeContact
		ReceivableApplicationAdjustment
		ReceivableApplication


	Transient Fields

		TransientSingleJSONNode			is Alpha 400
		TransientRawText				is RichText


	Local Fields

		I1										is Numeric 3
		LocalTitle								is Alpha 50
		LocalDays								is Alpha 3
		WorkNumber								is Numeric 3




		JSONResponse							is JSONObject
		LocalElementCounter						is Numeric size 4
		LocalArraySize							is Numeric size 4



	Derived Fields

		RepresentativeText is a StringField
			type is Text
			default label is "CustomerGroup"
			CustomerGroup " - " Name

		Future1Message is a MessageField
			restricted
			"Future1"

		FutureMessage is a MessageField
			restricted
			"Future"

		CurrentMessage is a MessageField
			restricted
			"Current"

		PastDueMessage is a MessageField
			restricted
			"PastDue"

		Period0Title is a DerivedField
			type is Alpha size 10
			restricted
			return Future1Message

		Period1Title is a DerivedField
			type is Alpha size 10
			restricted
			return FutureMessage

		Period2Title is a DerivedField
			type is Alpha size 10
			restricted
			return CurrentMessage

		Period3Title is a DerivedField
			type is Alpha size 10
			LocalDays	= "1"
			LocalTitle	= LocalDays + "-"
			LocalDays	= AgePeriodses.AgePeriods[1]
			LocalTitle += LocalDays
			return LocalTitle

		Period4Title is a DerivedField
			type is Alpha size 10
			WorkNumber	= AgePeriodses.AgePeriods[1] + 1
			LocalDays	= WorkNumber
			LocalTitle	= LocalDays + "-"
			LocalDays	= AgePeriodses.AgePeriods[2]
			LocalTitle += LocalDays
			return LocalTitle

		Period5Title is a DerivedField
			type is Alpha size 10
			WorkNumber	= AgePeriodses.AgePeriods[2] + 1
			LocalDays	= WorkNumber
			LocalTitle	= LocalDays + "-"
			LocalDays	= AgePeriodses.AgePeriods[3]
			LocalTitle += LocalDays
			return LocalTitle

		Period6Title is a DerivedField
			type is Alpha size 10
			WorkNumber	= AgePeriodses.AgePeriods[3] + 1
			LocalDays	= WorkNumber
			LocalTitle	= LocalDays + "-"
			LocalDays	= AgePeriodses.AgePeriods[4]
			LocalTitle += LocalDays
			return LocalTitle

		Period7Title is a DerivedField
			type is Alpha size 10
			WorkNumber	= AgePeriodses.AgePeriods[4] + 1
			LocalDays	= WorkNumber
			LocalTitle	= LocalDays + "-"
			LocalDays	= AgePeriodses.AgePeriods[5]
			LocalTitle += LocalDays
			return LocalTitle

		Period8Title is a DerivedField
			type is Alpha size 15
			WorkNumber	= AgePeriodses.AgePeriods[5] + 1
			LocalDays	= WorkNumber
			LocalTitle	= LocalDays + "-"
			LocalDays	= AgePeriodses.AgePeriods[6]
			LocalTitle += LocalDays
			return LocalTitle

		Period9Title is a DerivedField
			type is Alpha size 15
			WorkNumber	= AgePeriodses.AgePeriods[6] + 1
			LocalDays	= WorkNumber
			LocalTitle	= LocalDays + "-"
			LocalDays	= AgePeriodses.AgePeriods[7]
			LocalTitle += LocalDays
			return LocalTitle

		Period10Title is a DerivedField
			type is Alpha size 10
			return PastDueMessage

		StaticAgingPeriod1Title is a DerivedField
			type is Alpha size 15
			LocalDays	= "1"
			LocalTitle	= LocalDays + "-"
			LocalDays	= AgePeriodses.AgePeriods[1]
			LocalTitle += LocalDays
			return LocalTitle

		StaticAgingPeriod2Title is a DerivedField
			type is Alpha size 15
			WorkNumber	= AgePeriodses.AgePeriods[1] + 1
			LocalDays	= WorkNumber
			LocalTitle	= LocalDays + "-"
			LocalDays	= AgePeriodses.AgePeriods[2]
			LocalTitle += LocalDays
			return LocalTitle

		StaticAgingPeriod3Title is a DerivedField
			type is Alpha size 15
			WorkNumber	= AgePeriodses.AgePeriods[2] + 1
			LocalDays	= WorkNumber
			LocalTitle	= LocalDays + "-"
			LocalDays	= AgePeriodses.AgePeriods[3]
			LocalTitle += LocalDays
			return LocalTitle

		StaticAgingPeriod4Title is a DerivedField
			type is Alpha size 15
			WorkNumber	= AgePeriodses.AgePeriods[3] + 1
			LocalDays	= WorkNumber
			LocalTitle	= LocalDays + "-"
			LocalDays	= AgePeriodses.AgePeriods[4]
			LocalTitle += LocalDays
			return LocalTitle

		StaticAgingPeriod5Title is a DerivedField
			type is Alpha size 15
			if (ExpandedAgingPeriods)
				WorkNumber	= AgePeriodses.AgePeriods[4] + 1
				LocalDays	= WorkNumber
				LocalTitle	= LocalDays + "-"
				LocalDays	= AgePeriodses.AgePeriods[5]
			else
				LocalTitle	= "Over_"
				LocalDays	= AgePeriodses.AgePeriods[4]
			LocalTitle += LocalDays
			return LocalTitle

		StaticAgingPeriod6Title is a DerivedField
			type is Alpha size 15
			WorkNumber	= AgePeriodses.AgePeriods[5] + 1
			LocalDays	= WorkNumber
			LocalTitle	= LocalDays + "-"
			LocalDays	= AgePeriodses.AgePeriods[6]
			LocalTitle += LocalDays
			return LocalTitle

		StaticAgingPeriod7Title is a DerivedField
			type is Alpha size 15
			WorkNumber	= AgePeriodses.AgePeriods[6] + 1
			LocalDays	= WorkNumber
			LocalTitle	= LocalDays + "-"
			LocalDays	= AgePeriodses.AgePeriods[7]
			LocalTitle += LocalDays
			return LocalTitle

		StaticAgingPeriod8Title is a DerivedField
			type is Alpha size 15
			LocalTitle	= "Over_"
			LocalDays	= AgePeriodses.AgePeriods[7]
			LocalTitle += LocalDays
			return LocalTitle

		LogoImageMaximumSizeBytes is a ConditionalField
			type is Numeric 16
			if (LogoImageUOM.Kilobytes)
				(LogoImageMaximumSize * 1024)
			else
			if (LogoImageUOM.Megabytes)
				(LogoImageMaximumSize * 1024 * 1024)
			else
				LogoImageMaximumSize

		FinalNewValidationEmailSubject is a DerivedField
			type is Alpha size 100
			restricted
			return NewValidationEmailSubject text

		FinalNewValidationEmailContent is a DerivedField
			type is RichText
			restricted
			return NewValidationEmailContent text

		ActorCustomerGroup is a DerivedField
			type is like CustomerBusinessGroup
			return actor.context.CustomerBusinessGroup

		UserDefaultPrinter is a DerivedField
			type is like IDMPrinter
			if (UseIDMTemplate)
				return UserDefaultPrinterRel.IDMPrinter


		PayaJSONTransactionRequest is a DerivedField	
			type is JSONObject	
			restricted	
			PayaJSONTransactionRequest = template.PayaTransactionRequest_Template document for this instance	

		PayaJSONPayFormRequest is a DerivedField	
			type is JSONObject	
			PayaJSONPayFormRequest = template.PayaPayFormRequest_Template document for this instance	






		DerivedThirdPartyPaymentProcessingCashManagementAccountSetupWithThirdPartyPaymentProcessingReceivableProcessLevelRelCashManagementAccount is a DerivedField	
			type is like CashManagementAccount	

			return CashManagementAccountSetupWithThirdPartyPaymentProcessingReceivableProcessLevelRel.CashManagementAccount	

		DerivedThirdPartyPaymentProcessingCashManagementAccountSetupWithThirdPartyPaymentProcessingReceivableProcessLevelRelThirdPartyPaymentProcessingReceivableProcessLevel is a DerivedField	
			type is like ReceivableProcessLevel	

			return CashManagementAccountSetupWithThirdPartyPaymentProcessingReceivableProcessLevelRel.ThirdPartyPaymentProcessingReceivableProcessLevel	

		DerivedThirdPartyPaymentProcessingCompany is a DerivedField	
			type is like ReceivableCompany	

			return CashManagementAccountSetupWithThirdPartyPaymentProcessingReceivableProcessLevelRel.LegalEntity	


		BillingRecvExtEntityGUID is a DerivedField	
			type is Alpha size 36					
			restricted
			default label is untranslatable
			return stackconfig(config).BillingRecvExtEntity

		BillingRecvExtEntityEnabled is a DerivedField	
			type is Boolean								
			restricted
			default label is untranslatable
			return stackconfig(config).IFS_EnableBillingRecvExtEntity

		BillingReceivablesPortalBaseURL is a DerivedField
			type is Alpha 300
			restricted
			return base url(webapp is BillingReceivablesPortal)

		DerivedPasswordPolicy is a DerivedField
			type is RichText
			default label is untranslatable
			if (BillingRecvExtEntityEnabled)
				if (BillingRecvExtEntityGUID != blank)
					invoke GetPasswordPolicy ExternalUserExecutor
						resume on error
						assign result to JSONResponse
						invoked.EntityId = BillingRecvExtEntityGUID
					LocalElementCounter		= 0
					TransientSingleJSONNode	= JSONResponse select "$.responsestatus"
					if (com.lawson.apps.security.base.Security_ActionBase.isEqualIgnoreCase(TransientSingleJSONNode, "Success"))
						TransientSingleJSONNode = JSONResponse select "$..passwordpolicy[*]"
						if (com.lawson.apps.security.base.Security_ActionBase.isNumeric(TransientSingleJSONNode))
							LocalArraySize = java.lang.Integer.parseInt(TransientSingleJSONNode)
						else
							LocalArraySize = 1
						TransientRawText = blank
						while (LocalElementCounter < LocalArraySize)
							TransientSingleJSONNode = JSONResponse select "$..passwordpolicy[<LocalElementCounter>].visible"
							if (TransientSingleJSONNode = "true")
								TransientSingleJSONNode = JSONResponse select "$..passwordpolicy[<LocalElementCounter>].langtext"
								TransientRawText += TransientSingleJSONNode + DerivedNewLineMF
							LocalElementCounter += 1
					else
						TransientRawText = PasswordPolicyErrorMF
				else
					TransientRawText = MissingIdentityMF
			return TransientRawText

		DerivedNewLineMF is a DerivedField
			type is RichText
			restricted
			return "<br>"

		MissingIdentityMF is a MessageField
			restricted
			"MissingExternalEntityIdentityId"

		PasswordPolicyErrorMF is a MessageField
			restricted
			"PasswordPolicyCannotBeDisplayedAtThisTime"


	Relations

		ReceivableCompanyEFTAttributesRel
			one-to-many relation to ReceivableCompany
			Field Mapping uses Set2
				related.CustomerGroupField.CustomerGroup	 = CustomerGroup
			Instance Selection
				where (related.EFTDebitCashCode entered)

		CustomerRel
			classic name is ARCUSTDESC
			one-to-many relation to Customer
			delete restricted
			Field Mapping uses symbolic key
				related.CustomerGroup = CustomerGroup

		ReceivableCompanyRel
			classic name is ASSIGNEDCOMPS
			one-to-many relation to ReceivableCompany
			delete restricted
			Field Mapping uses Set2
				related.CustomerGroupField.CustomerGroup = CustomerGroup

		PortalPaymentCompanyCustomerRel	
			one-to-many relation to CompanyCustomer	
			Field Mapping uses symbolic key	
				related.Company		 = DerivedThirdPartyPaymentProcessingCompany	

		PortalPaymentProcessingCompanyRel	
			one-to-one relation to ReceivableCompany
			Field Mapping uses symbolic key
				related.Company		= CustomerGroup.DerivedThirdPartyPaymentProcessingCompany

		ReceivableAgePeriodRel
			one-to-many relation to ReceivableAgePeriod
			Field Mapping uses symbolic key
			Instance Selection
				where (related.CustomerGroup = CustomerGroup)

		AgingPeriodForCustomerGroupRel
			one-to-many relation to ReceivableAgePeriod
			Field Mapping uses symbolic key
			Instance Selection
				where (related.CustomerGroup = CustomerGroup
				and	related.ReceivableCompany = blank
				and	related.AgingCode = blank
				and	related.SetupIndicator = "C"
				and	related.AgePeriodSequence = I1)

		ExpandedAgingPeriodRel
			one-to-many relation to ReceivableAgePeriod
			Field Mapping uses ByCustomerGroup
				related.CustomerGroup = CustomerGroup
				related.ReceivableCompany = blank
				related.AgingCode = blank
			Instance Selection
				where ((related.AgePeriodSequence = 8
				or	  related.AgePeriodSequence = 9
				or	  related.AgePeriodSequence = 10
				or	  related.AgePeriodSequence = 11)
				and	(related.SetupIndicator = "C"))

		ReceivableProjectTransactionRel
			one-to-many relation to ReceivableProjectTransaction
			Field Mapping uses symbolic key
			Instance Selection
				where (related.Company.CustomerGroupField.CustomerGroup			= CustomerGroup)

		StructureDefaultCodeRel
			one-to-one relation to StructureDefaultCode
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= CustomerGroup.CustomerBusinessGroup.FinanceEnterpriseGroup
				related.StructureDefaultCode	= "ARManualInvoiceDlts"

		StructureDefaultCodeDetailRel
			one-to-many relation to StructureDefaultCodeDetail
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= CustomerGroup.CustomerBusinessGroup.FinanceEnterpriseGroup
				related.StructureDefaultCode	= "ARManualInvoiceDlts"

		ReceivableInvoiceUserSortRel
			one-to-many relation to ReceivableInvoiceUserSort
			Field Mapping uses symbolic key
			Instance Selection
				where (related.Company.CustomerGroupField.CustomerGroup	= CustomerGroup)

		ReceivableInvoiceLineItemRel
			one-to-many relation to ReceivableInvoiceLineItem
			Field Mapping uses symbolic key
			Instance Selection
				where (related.Company.CustomerGroupField.CustomerGroup	= CustomerGroup)

		ActiveCustomerGroupQuestionRel is a CustomerGroupQuestion set
			Instance Selection
				where (related.Active)

		CustomerRepresentativeContactRoleSTRel
			one-to-one relation to ActorRole
			Field Mapping uses symbolic key
				related.Actor				= actor
				related.ActorRole.Role		= "CustomerRepresentativeContact_ST"

		CustomerRepresentativePrimaryContactRoleSTRel
			one-to-one relation to ActorRole
			Field Mapping uses symbolic key
				related.Actor				= actor
				related.ActorRole.Role		= "CustomerRepresentativePrimaryContact_ST"

		CustomerPrimaryItemHistoryAccessRel
			one-to-one relation to RoleSecurityClass
			Field Mapping uses symbolic key
				related.Role				= "CustomerRepresentativePrimaryContact_ST"
				related.DataArea			= parentcontext.dataarea
				related.SecurityClass		= "BillingReceivablesPortalItemHistory_ST"

		CustomerItemHistoryAccessRel
			one-to-one relation to RoleSecurityClass
			Field Mapping uses symbolic key
				related.Role				= "CustomerRepresentativeContact_ST"
				related.DataArea			= parentcontext.dataarea
				related.SecurityClass		= "BillingReceivablesPortalItemHistory_ST"

		CustomerPrimaryPaymentAccessRel
			one-to-one relation to RoleSecurityClass
			Field Mapping uses symbolic key
				related.Role				= "CustomerRepresentativePrimaryContact_ST"
				related.DataArea			= parentcontext.dataarea
				related.SecurityClass		= "BillingReceivablesPortalPayments_ST"

		CustomerPaymentAccessRel
			one-to-one relation to RoleSecurityClass
			Field Mapping uses symbolic key
				related.Role				= "CustomerRepresentativeContact_ST"
				related.DataArea			= parentcontext.dataarea
				related.SecurityClass		= "BillingReceivablesPortalPayments_ST"

		CustomerPrimaryInvoiceAccessRel
			one-to-one relation to RoleSecurityClass
			Field Mapping uses symbolic key
				related.Role				= "CustomerRepresentativePrimaryContact_ST"
				related.DataArea			= parentcontext.dataarea
				related.SecurityClass		= "BillingReceivablesPortalInvoices_ST"

		CustomerInvoiceAccessRel
			one-to-one relation to RoleSecurityClass
			Field Mapping uses symbolic key
				related.Role				= "CustomerRepresentativeContact_ST"
				related.DataArea			= parentcontext.dataarea
				related.SecurityClass		= "BillingReceivablesPortalInvoices_ST"


		CustomerPrimaryInvoicePaymentAccessRel	
			one-to-one relation to RoleSecurityClass	
			Field Mapping uses symbolic key	
				related.Role				= "CustomerRepresentativePrimaryContact_ST"	
				related.DataArea			= parentcontext.dataarea
				related.SecurityClass		= "BillingReceivablesPortalInvoicePayment_ST"	

		CustomerInvoicePaymentAccessRel	
			one-to-one relation to RoleSecurityClass	
			Field Mapping uses symbolic key	
				related.Role				= "CustomerRepresentativeContact_ST"	
				related.DataArea			= parentcontext.dataarea
				related.SecurityClass		= "BillingReceivablesPortalInvoicePayment_ST"	

		DeletedCustomerPrimaryInvoicePaymentAccessRel	
			one-to-many relation to RoleSecurityClass
			Field Mapping uses ByRoleAndSecurityClass
				related.Role			 = "CustomerRepresentativePrimaryContact_ST"
				related.DataArea		 = parentcontext.dataarea
				related.SecurityClass	 = "BillingReceivablesPortalInvoicePayment_ST"
			Instance Selection
				include only deleted records

		DeletedCustomerInvoicePaymentAccessRel	
			one-to-many relation to RoleSecurityClass
			Field Mapping uses ByRoleAndSecurityClass
				related.Role			 = "CustomerRepresentativeContact_ST"
				related.DataArea		 = parentcontext.dataarea
				related.SecurityClass	 = "BillingReceivablesPortalInvoicePayment_ST"
			Instance Selection
				include only deleted records


		CustomerPrimaryOrderAccessRel
			one-to-one relation to RoleSecurityClass
			Field Mapping uses symbolic key
				related.Role				= "CustomerRepresentativePrimaryContact_ST"
				related.DataArea			= parentcontext.dataarea
				related.SecurityClass		= "BillingReceivablesPortalOrders_ST"

		CustomerOrderAccessRel
			one-to-one relation to RoleSecurityClass
			Field Mapping uses symbolic key
				related.Role				= "CustomerRepresentativeContact_ST"
				related.DataArea			= parentcontext.dataarea
				related.SecurityClass		= "BillingReceivablesPortalOrders_ST"

		CustomerPrimaryReturnAccessRel
			one-to-one relation to RoleSecurityClass
			Field Mapping uses symbolic key
				related.Role				= "CustomerRepresentativePrimaryContact_ST"
				related.DataArea			= parentcontext.dataarea
				related.SecurityClass		= "BillingReceivablesPortalReturns_ST"

		CustomerReturnAccessRel
			one-to-one relation to RoleSecurityClass
			Field Mapping uses symbolic key
				related.Role				= "CustomerRepresentativeContact_ST"
				related.DataArea			= parentcontext.dataarea
				related.SecurityClass		= "BillingReceivablesPortalReturns_ST"

		CustomerPrimaryAllAccessRel 
			one-to-one relation to RoleSecurityClass 
			Field Mapping uses symbolic key
				related.Role					= "CustomerRepresentativePrimaryContact_ST"
				related.DataArea				= parentcontext.dataarea
				related.SecurityClass			= "IEFINCommonViewInformation_ST"

		CustomerContactAllAccessRel 
			one-to-one relation to RoleSecurityClass 
			Field Mapping uses symbolic key
				related.Role					= "CustomerRepresentativeContact_ST"
				related.DataArea				= parentcontext.dataarea
				related.SecurityClass			= "IEFINCommonViewInformation_ST"

		CustomerAnonymousAllAccessRel 
			one-to-one relation to RoleSecurityClass 
			Field Mapping uses symbolic key
				related.Role					= "CustomerRepresentativeAnonymous_ST"
				related.DataArea				= parentcontext.dataarea
				related.SecurityClass			= "IEFINCommonViewInformation_ST"	

		ActorGroupRel
			one-to-one relation to ActorGroup
			Field Mapping uses symbolic key
				related.ActorGroup			= "InactiveCustomerRepresentative"

		InactivationLandingPageRel is a LandingPage set
			Instance Selection
				where (related.Description	= "BillingReceivablesPortal-Inactive")

		CustomerRepresentativeRejectActionReasonRel
			one-to-many relation to ActionReason
			Field Mapping uses symbolic key
				related.BusinessSubject = "CustomerRespresentativeReject"

		CustomerRepresentativeReinstateActionReasonRel
			one-to-many relation to ActionReason
			Field Mapping uses symbolic key
				related.BusinessSubject = "CustomerRespresentativeReinstate"

		UserDefaultPrinterRel
			one-to-one relation to UserDefaultPrinter
			Field Mapping uses symbolic key
				related.UserDefaultPrinter.Actor	= actor


		CashManagementAccountSetupWithThirdPartyPaymentProcessingReceivableProcessLevelRel	
			one-to-many relation to CashManagementAccount	
			Field Mapping uses symbolic key	
				related.CashManagementGroup = CustomerGroup.CustomerBusinessGroup.FinanceEnterpriseGroup	
			Instance Selection	
				where (related.LegalEntity = any ReceivableCompanyRel.Company	
				and related.ThirdPartyPaymentProcessingReceivableProcessLevel entered)	

		ContextPropertyRel	
			one-to-one relation to ContextProperty	
			Field Mapping uses ByKeyField	
				related.KeyField = "CustomerGroup"	
				related.DataArea = parentcontext.dataarea	

		ActorContextRel	
			one-to-many relation to ActorContext	
			Field Mapping uses symbolic key	
			Instance Selection	
				where (related.ContextProperty	= ContextPropertyRel.ContextProperty	
				and	   related.Value			= CustomerGroup)	

		CustomerRepresentativeContextPropertyRel	
			one-to-one relation to ContextProperty	
			Field Mapping uses ByKeyField	
				related.KeyField = "CustomerRepresentative"	
				related.DataArea = parentcontext.dataarea	

		CustomerRepresentativeContactContextPropertyRel	
			one-to-one relation to ContextProperty	
			Field Mapping uses ByKeyField	
				related.KeyField = "CustomerRepresentativeContact"	
				related.DataArea = parentcontext.dataarea	

		ThirdPartyPaymentProcessingEndpointConfigurationParameterRel	
			one-to-one relation to ConfigurationParameter	
			Field Mapping uses symbolic key	
				related.ConfigurationParameter.ConfigurationID	= "config"	
				related.ConfigurationParameter.Name				= "PAYACONNECT.WSI.ENDPOINT"	


		ThirdPartyPaymentProcessingPayformURIConfigurationParameterRel	
			one-to-one relation to ConfigurationParameter	
			Field Mapping uses symbolic key	
				related.ConfigurationParameter.ConfigurationID	= "config"	
				related.ConfigurationParameter.Name				= "PAYACONNECT.WSI.PAYFORMURI"	


		ThirdPartyPaymentProcessingPaymentCurrencyConfigurationParameterStartRel	
			one-to-many relation to ConfigurationParameter	
			Field Mapping uses symbolic key	
				related.ConfigurationParameter.ConfigurationID	= "config"	
				related.ConfigurationParameter.Name				= "PAYACONNECT.PAYMENTCURRENCY"	
			Instance Selection	
				where (related.Value									= "USD")	

		ThirdPartyPaymentProcessingPaymentCurrencyConfigurationParameterRel	
			one-to-one relation to ConfigurationParameter	
			Field Mapping uses symbolic key	
				related.ConfigurationParameter.ConfigurationID	= "config"	
				related.ConfigurationParameter.Name				= "PAYACONNECT.PAYMENTCURRENCY"	



		ThirdPartyPaymentProcessingReceivableInvoiceDetailSelectedForPaymentRel	
			one-to-many relation to ReceivableInvoiceDetail	
			Field Mapping uses OpenByCustomer	
			Instance Selection	

				where	(related.Customer								 = actor.context.CustomerRepresentative.Customer)


		ReceivableInvoiceDetailSelectedForPaymentWithoutPaymentDetailRel	
			one-to-many relation to ReceivableInvoiceDetail
			Field Mapping uses OpenByCustomer
			Instance Selection		
				where (related.PortalPaymentSelectedButNoCorrespondingReceivablePortalPaymentDetailExist)

		CustomerRepresentativeContactActiveRel is a CustomerRepresentativeContact set	
			Instance Selection	
				where (related.Active)	

		CustomerRepresentativeActiveRel is a CustomerRepresentative set	
			Instance Selection	
				where (related.Active)	

		CustomerRepresentativeActiveCompanyCustomerWithoutDiscountAdjustmentReasonRel is a CustomerRepresentative set	
			Instance Selection
				where (related.Active
				and related.CompanyCustomerRelDiscountAdjustmentReasonNotEntered)

		ReceivablePortalPaymentHeaderRel is a ReceivablePortalPaymentHeader set	

		ReceivablePortalPaymentDetailRel is a ReceivablePortalPaymentDetail set	

		CustomerRepresentativeContactAttentionRel is a CustomerRepresentativeContact set	
			Instance Selection	
				where (related.ActorContextValuesDoNotMatchActuals)	

		ExternalMenuVersionV3ConfigRel	
			one-to-many relation to ConfigurationParameter
			Field Mapping uses symbolic key
				related.ConfigurationParameter.ConfigurationID	= "UI"
				related.ConfigurationParameter.Name				= "ExternalMenuVersion"
			Instance Selection
				where (related.Value							= "v3")











	Form Invokes
























		PayaConnectEndpointConfigurationParameterRecord	
			if (ThirdPartyPaymentProcessingEndpointConfigurationParameterRel exists)	
				invoke Update ThirdPartyPaymentProcessingEndpointConfigurationParameterRel	
			else	
				invoke Create ConfigurationParameter	
					invoked.ConfigurationParameter.ConfigurationID	= "config"	
					invoked.ConfigurationParameter.Name				= "PAYACONNECT.WSI.ENDPOINT"	
					invoked.Type									= 8222	
					invoked.Length									= 300	



	Field Rules















		CustomerNumberType
			initial value is "N"
			default to "N"


















		AutomaticCustomerNumbering
			initial value is "N"
			default to "N"
			force default to "N"	
			if (AutomaticCustomerNumbering entered)
				constraint (last CustomerRel.Customer <= LastAutomaticCustomerNumber)
					"LastCustomerAssignedLessThanExistingCustomer"			

		AgePeriodses
			if (AgePeriodses.AgePeriods[1] = 0
			and AgePeriodses.AgePeriods[2] = 0
			and AgePeriodses.AgePeriods[3] = 0
			and AgePeriodses.AgePeriods[4] = 0)
				AgePeriodses.AgePeriods[1] = 30
				AgePeriodses.AgePeriods[2] = 60
				AgePeriodses.AgePeriods[3] = 90
				AgePeriodses.AgePeriods[4] = 120

			if (ExpandedAgingPeriods
			and AgePeriodses.AgePeriods[5] = 0
			and AgePeriodses.AgePeriods[6] = 0
			and AgePeriodses.AgePeriods[7] = 0)
				AgePeriodses.AgePeriods[5] = 150
				AgePeriodses.AgePeriods[6] = 180
				AgePeriodses.AgePeriods[7] = 210

			constraint (AgePeriodses.AgePeriods[1] < AgePeriodses.AgePeriods[2]
			and			AgePeriodses.AgePeriods[1] < AgePeriodses.AgePeriods[3]
			and			AgePeriodses.AgePeriods[1] < AgePeriodses.AgePeriods[4])
				"AgingDaysMustBeInAscendingOrder"							

			constraint (AgePeriodses.AgePeriods[1] >= 1)
				"AgingDaysMustBeInAscendingOrder"							

			constraint (AgePeriodses.AgePeriods[2] < AgePeriodses.AgePeriods[3]
			and		AgePeriodses.AgePeriods[2] < AgePeriodses.AgePeriods[4])
				"AgingDaysMustBeInAscendingOrder"							

			constraint (AgePeriodses.AgePeriods[2] >= 1)
				"AgingDaysMustBeInAscendingOrder"							

			constraint (AgePeriodses.AgePeriods[3] < AgePeriodses.AgePeriods[4])
				"AgingDaysMustBeInAscendingOrder"							

			constraint (AgePeriodses.AgePeriods[3] >= 1)
				"AgingDaysMustBeInAscendingOrder"							

			if (ExpandedAgingPeriods)
				constraint (AgePeriodses.AgePeriods[5] entered
				and			AgePeriodses.AgePeriods[6] entered
				and			AgePeriodses.AgePeriods[7] entered)
					"AdditionalAgingPeriodsMustBeEntered"

				constraint (AgePeriodses.AgePeriods[1] < AgePeriodses.AgePeriods[5]
				and		AgePeriodses.AgePeriods[1] < AgePeriodses.AgePeriods[6]
				and		AgePeriodses.AgePeriods[1] < AgePeriodses.AgePeriods[7])
					"AgingDaysMustBeInAscendingOrder"

				constraint (AgePeriodses.AgePeriods[2] < AgePeriodses.AgePeriods[5]
				and		AgePeriodses.AgePeriods[2] < AgePeriodses.AgePeriods[6]
				and		AgePeriodses.AgePeriods[2] < AgePeriodses.AgePeriods[7])
					"AgingDaysMustBeInAscendingOrder"

				constraint (AgePeriodses.AgePeriods[3] < AgePeriodses.AgePeriods[5]
				and		AgePeriodses.AgePeriods[3] < AgePeriodses.AgePeriods[6]
				and		AgePeriodses.AgePeriods[3] < AgePeriodses.AgePeriods[7])
					"AgingDaysMustBeInAscendingOrder"

				constraint (AgePeriodses.AgePeriods[4] < AgePeriodses.AgePeriods[5]
				and		AgePeriodses.AgePeriods[4] < AgePeriodses.AgePeriods[6]
				and		AgePeriodses.AgePeriods[4] < AgePeriodses.AgePeriods[7])
					"AgingDaysMustBeInAscendingOrder"

				constraint (AgePeriodses.AgePeriods[4] >= 1)
					"AgingDaysMustBeInAscendingOrder"

				constraint (AgePeriodses.AgePeriods[5] < AgePeriodses.AgePeriods[6]
				and		AgePeriodses.AgePeriods[5] < AgePeriodses.AgePeriods[7])
					"AgingDaysMustBeInAscendingOrder"

				constraint (AgePeriodses.AgePeriods[5] >= 1)
					"AgingDaysMustBeInAscendingOrder"

				constraint (AgePeriodses.AgePeriods[6] < AgePeriodses.AgePeriods[7])
					"AgingDaysMustBeInAscendingOrder"

				constraint (AgePeriodses.AgePeriods[6] >= 1)
					"AgingDaysMustBeInAscendingOrder"

			else
				initialize AgePeriodses.AgePeriods[5]
				initialize AgePeriodses.AgePeriods[6]
				initialize AgePeriodses.AgePeriods[7]
				initialize AgeFuture

		Currency
			constraint (Currency not changed
			or			!ReceivableCompanyExists)
				"CannotChangeCurrencyCode;CompanyExists"						
			required

		CurrentAgingPeriod
			constraint (CurrentAgingPeriod >= 1)
				"NegativeValueNotAllowed"

			if (ExpandedAgingPeriods)
				required
					"CurrentDaysMustBeEntered"

		EFTProcessingLevel
			constraint (ElectronicFundsTransferProcess
			or		EFTProcessingLevel not entered)
				"E\F\T_\LevelMustBeBlankIf_\E\F\TProcessingIsNotUsed"			

			if (ElectronicFundsTransferProcess
			and EFTProcessingLevel.GroupLevelProcessing)
				constraint (instance count of ReceivableCompanyEFTAttributesRel <= 1)
					"E\F\T_\AttributesDefinedForMultipleCompanies"

				constraint (EFTCalendar entered)
					"CalendarRequired;_\E\F\TProcess_=_\YAndLevel_=_\G"			

			if (ElectronicFundsTransferProcess
			and EFTProcessingLevel.GroupLevelProcessing
			and EFTDueDaysType entered)
				constraint (EFTDueDays entered)
					"DueDaysRequired;_\E\F\TProcess_=_\YAndLevel_=_\G"			

			if (ElectronicFundsTransferProcess
			and EFTProcessingLevel.GroupLevelProcessing)
				constraint (EFTDueDaysType entered)
					"DueDayTypeRequired;_\E\F\TProcess_=_\YAndLevel_=_\G"		

			if (ElectronicFundsTransferProcess
			and not EFTProcessingLevel.GroupLevelProcessing)
				initialize UseIDMTemplate
				initialize EFTNotificationPrintIDMTemplate

		EFTCalendar





			constraint (ElectronicFundsTransferProcess
			or			EFTCalendar not entered)
				"CannotEnterField;_\E\F\TProcess_=_\N"							

			if (ElectronicFundsTransferProcess
			and EFTProcessingLevel.CompanyLevelProcessing)
				constraint (EFTCalendar not entered)
					"CannotAdd_\E\F\TAttributes_-_\CompanyProcessingSpecified"	

		EFTDueDays
			constraint (ElectronicFundsTransferProcess
			or			EFTDueDays not entered)
				"CannotEnterField;_\E\F\TProcess_=_\N"							

			if (ElectronicFundsTransferProcess
			and EFTProcessingLevel.CompanyLevelProcessing)
				constraint (EFTDueDays not entered)
					"CannotAdd_\E\F\TAttributes_-_\CompanyProcessingSpecified"	

			constraint (EFTDueDays >= 0)
				"ValueMustBeGreaterThanZero"

		EFTDueDaysType
			constraint (ElectronicFundsTransferProcess
			or			EFTDueDaysType not entered)
				"CannotEnterField;_\E\F\TProcess_=_\N"							

			if (ElectronicFundsTransferProcess
			and EFTProcessingLevel.CompanyLevelProcessing)
				constraint (EFTDueDaysType not entered)
					"CannotAdd_\E\F\TAttributes_-_\CompanyProcessingSpecified"	

		ElectronicFundsTransferProcess





			constraint (!ElectronicFundsTransferProcess
			or			EFTProcessingLevel entered)
				"E\F\T_\LevelMustBeSelectedIfUsing_\E\F\T_\Processing"			

		EFTGLDays
			constraint (ElectronicFundsTransferProcess
			or			EFTGLDays not entered)
				"CannotEnterField;_\E\F\TProcess_=_\N"							

			if (ElectronicFundsTransferProcess
			and EFTProcessingLevel.CompanyLevelProcessing)
				constraint (EFTGLDays not entered)
					"CannotAdd_\E\F\TAttributes_-_\CompanyProcessingSpecified"		







			constraint (EFTGLDays >= 0)
				"ValueMustBeGreaterThanZero"

		EFTGLDaysType
			constraint (ElectronicFundsTransferProcess
			or			EFTGLDaysType not entered)
				"CannotEnterField;_\E\F\TProcess_=_\N"					

			if (ElectronicFundsTransferProcess
			and EFTProcessingLevel.CompanyLevelProcessing)
				constraint (EFTGLDaysType not entered)
					"CannotAdd_\E\F\TAttributes_-_\CompanyProcessingSpecified"		




		EFTDepositDays
			constraint (ElectronicFundsTransferProcess
			or EFTDepositDays not entered)
				"CannotEnterField;_\E\F\TProcess_=_\N"							

			if (ElectronicFundsTransferProcess
			and EFTProcessingLevel.CompanyLevelProcessing)
				constraint (EFTDepositDays not entered)
					"CannotAdd_\E\F\TAttributes_-_\CompanyProcessingSpecified"	

			constraint (EFTDepositDays >= 0)
				"ValueMustBeGreaterThanZero"

		EFTDepositDaysType
			constraint (ElectronicFundsTransferProcess
			or EFTDepositDaysType not entered)
				"CannotEnterField;_\E\F\TProcess_=_\N"							

			if (ElectronicFundsTransferProcess
			and EFTProcessingLevel.CompanyLevelProcessing)
				constraint (EFTDepositDaysType not entered)
					"CannotAdd_\E\F\TAttributes_-_\CompanyProcessingSpecified"	

		AgingMethod
			initial value is "D"
			default to "D"
			required

		CurrencyDisplayType
			initial value is "B"
			default to "B"
			required

		Name
			required

		AgeCreditsRule
			initial value is "L"
			default to "L"

		AgeDisputesRule
			initial value is "Y"
			default to "Y"

		AgePaymentsRule
			initial value is "L"
			default to "L"

		AgingDisplayDate
			initial value is "T"
			default to "T"

		AgingTransactionSequence
			initial value is "T"
			default to "T"

		LogoImageMaximumSize
			required
			initial value is 20
			if (LogoImageMaximumSize = blank)
				LogoImageMaximumSize = 20
				LogoImageUOM = LogoImageUOM.Kilobytes

		LogoImageUOM
			initial value is LogoImageUOM.Kilobytes

		AgeFuture
			constraint (AgeFuture>= 1)
				"NegativeValueNotAllowed"

			if (ExpandedAgingPeriods)
				required
					"FutureDaysMustBeEntered"

		BaseNumberOfDecimals
			force default to Currency.NumberOfDecimals

		TermAndCondition
			if (UseBillingReceivablesPortal)
				required
					"TermsAndConditionsIsRequired"

		CustomerEmailHelpLink
			initial value is "http://gmail.com"
			default to "http://gmail.com"

		AdminEmailAddress
			if (UseBillingReceivablesPortal)
				required
					"AnEmailAddressIsRequiredToSendEmailMessagesFrom"

		AccessRequestTermText
			initial value is "Read the Terms and Conditions for using the Billing & Receivables Portal. To request customer access, you must accept the Terms and Conditions."
			default to "Read the Terms and Conditions for using the Billing & Receivables Portal. To request customer access, you must accept the Terms and Conditions."

		AccessRequestLoginText
			initial value is "Enter your login and contact information."
			default to "Enter your login and contact information."

		AccessRequestCompanyText
			initial value is "Enter information about your company."
			default to "Enter information about your company."

		AccessRequestQuestionText
			initial value is "Answer the following questions related to your company. An * indicates a required field."
			default to "Answer the following questions related to your company. An * indicates a required field."

		AdditionalContactText
			initial value is "Enter information for other contacts in your company. These contacts can manage billing and invoice information, and have additional user names and passwords."
			default to "Enter information for other contacts in your company. These contacts can manage billing and invoice information, and have additional user names and passwords."

		ContactInformationText
			initial value is "Update contact information."
			default to "Update contact information."

		CompleteAccessRequestText
			initial value is "Your customer access request is complete.  You will be notified when your request has been approved.  Select Home or any menu item to proceed."
			default to "Your customer access request is complete.  You will be notified when your request has been approved.  Select Home or any menu item to proceed."

		IncompleteAccessRequestText
			initial value is "Your customer access request is not complete for the following reasons:"
			default to "Your customer access request is not complete for the following reasons:"

		AccessRequestEmailSubject
			initial value is "Thank you for requesting customer access to the Billing & Receivables Portal"
			default to "Thank you for requesting customer access to the Billing & Receivables Portal"

		AccessRequestEmailContent
			initial value is "Once your customer access request has been approved, you will be able to manage billing and invoice information. The following user name has been established based on your registration details:"
			default to "Once your customer access request has been approved, you will be able to manage billing and invoice information. The following user name has been established based on your registration details:"

		NewValidationEmailSubject
			initial value is "Congratulations! Your customer access request has been approved"
			default to "Congratulations! Your customer access request has been approved"

		NewValidationEmailContent
			initial value is "Your customer access request has been approved and you will now be able to manage billing and invoice information."
			default to "Your customer access request has been approved and you will now be able to manage billing and invoice information."

		PrimaryContactEmailSubject
			initial value is "The primary contact for your company has changed"
			default to "The primary contact for your company has changed"

		PrimaryContactEmailContent
			initial value is "You are now the primary contact for your company."
			default to "You are now the primary contact for your company."

		ContactEmailSubject
			initial value is "The primary contact for your company has changed"
			default to "The primary contact for your company has changed"

		ContactEmailContent
			initial value is "You are no longer the primary contact for your company."
			default to "You are no longer the primary contact for your company."

		ForgotUsernameEmailSubject
			initial value is "User name reminder"
			default to "User name reminder"

		ForgotUsernameEmailContent
			initial value is "The user name associated with the entered email address is displayed below:"
			default to "The user name associated with the entered email address is displayed below:"

		CustomerPrimaryItemHistoryAccess
			if (CustomerPrimaryItemHistoryAccess
			and !CustomerPrimaryItemHistoryAccessRel exists)
				invoke Create RoleSecurityClass
					invoked.Role				= "CustomerRepresentativePrimaryContact_ST"
					invoked.DataArea			= parentcontext.dataarea
					invoked.SecurityClass		= "BillingReceivablesPortalItemHistory_ST"

		CustomerItemHistoryAccess
			if (CustomerItemHistoryAccess
			and !CustomerItemHistoryAccessRel exists)
				invoke Create RoleSecurityClass
					invoked.Role				= "CustomerRepresentativeContact_ST"
					invoked.DataArea			= parentcontext.dataarea
					invoked.SecurityClass		= "BillingReceivablesPortalItemHistory_ST"

		CustomerPrimaryPaymentAccess
			if (CustomerPrimaryPaymentAccess
			and !CustomerPrimaryPaymentAccessRel exists)
				invoke Create RoleSecurityClass
					invoked.Role				= "CustomerRepresentativePrimaryContact_ST"
					invoked.DataArea			= parentcontext.dataarea
					invoked.SecurityClass		= "BillingReceivablesPortalPayments_ST"

		CustomerPaymentAccess
			if (CustomerPaymentAccess
			and !CustomerPaymentAccessRel exists)
				invoke Create RoleSecurityClass
					invoked.Role				= "CustomerRepresentativeContact_ST"
					invoked.DataArea			= parentcontext.dataarea
					invoked.SecurityClass		= "BillingReceivablesPortalPayments_ST"

		CustomerPrimaryInvoiceAccess
			if (CustomerPrimaryInvoiceAccess
			and !CustomerPrimaryInvoiceAccessRel exists)
				invoke Create RoleSecurityClass
					invoked.Role				= "CustomerRepresentativePrimaryContact_ST"
					invoked.DataArea			= parentcontext.dataarea
					invoked.SecurityClass		= "BillingReceivablesPortalInvoices_ST"

		CustomerInvoiceAccess
			if (CustomerInvoiceAccess
			and !CustomerInvoiceAccessRel exists)
				invoke Create RoleSecurityClass
					invoked.Role				= "CustomerRepresentativeContact_ST"
					invoked.DataArea			= parentcontext.dataarea
					invoked.SecurityClass		= "BillingReceivablesPortalInvoices_ST"


		CustomerPrimaryInvoicePaymentAccess	
			if (CustomerPrimaryInvoicePaymentAccess	
			and (!CustomerPrimaryInvoicePaymentAccessRel exists	
			or DeletedCustomerPrimaryInvoicePaymentAccessRel exists))	
				invoke Create RoleSecurityClass	
					invoked.Role				= "CustomerRepresentativePrimaryContact_ST"	
					invoked.DataArea			= parentcontext.dataarea
					invoked.SecurityClass		= "BillingReceivablesPortalInvoicePayment_ST"	

		CustomerInvoicePaymentAccess	
			if (CustomerInvoicePaymentAccess	
			and (!CustomerInvoicePaymentAccessRel exists	
			or	  DeletedCustomerInvoicePaymentAccessRel exists))	
				invoke Create RoleSecurityClass	
					invoked.Role				= "CustomerRepresentativeContact_ST"	
					invoked.DataArea			= parentcontext.dataarea
					invoked.SecurityClass		= "BillingReceivablesPortalInvoicePayment_ST"	

		ReleasePortalPaymentProcessAutoCashApplication	
			initial value is true
			default to true

		ThirdPartyPaymentProcessingDeveloperId	
			initial value is blank	
			force default to blank	


		CustomerPrimaryOrderAccess
			if (CustomerPrimaryOrderAccess
			and !CustomerPrimaryOrderAccessRel exists)
				invoke Create RoleSecurityClass
					invoked.Role				= "CustomerRepresentativePrimaryContact_ST"
					invoked.DataArea			= parentcontext.dataarea
					invoked.SecurityClass		= "BillingReceivablesPortalOrders_ST"

		CustomerOrderAccess
			if (CustomerOrderAccess
			and !CustomerOrderAccessRel exists)
				invoke Create RoleSecurityClass
					invoked.Role				= "CustomerRepresentativeContact_ST"
					invoked.DataArea			= parentcontext.dataarea
					invoked.SecurityClass		= "BillingReceivablesPortalOrders_ST"

		CustomerPrimaryReturnAccess
			if (CustomerPrimaryReturnAccess
			and !CustomerPrimaryReturnAccessRel exists)
				invoke Create RoleSecurityClass
					invoked.Role				= "CustomerRepresentativePrimaryContact_ST"
					invoked.DataArea			= parentcontext.dataarea
					invoked.SecurityClass		= "BillingReceivablesPortalReturns_ST"

		CustomerReturnAccess
			if (CustomerReturnAccess
			and !CustomerReturnAccessRel exists)
				invoke Create RoleSecurityClass
					invoked.Role				= "CustomerRepresentativeContact_ST"
					invoked.DataArea			= parentcontext.dataarea
					invoked.SecurityClass		= "BillingReceivablesPortalReturns_ST"

		EFTNotificationPrintIDMTemplate
			if (UseIDMTemplate)
				required

				constraint (EFTNotificationPrintIDMTemplate.IDMDocumentType.EFTNotificationPrint)
					"InvalidTemplate"

		EEMigrationUsernameChangeEmailSubject
			initial value is "Your Username has changed"
			default to "Your Username has changed"

		EEMigrationUsernameChangeEmailContent
			initial value is "Your login Username has changed to be the email address this notification was sent to.  Your password remains the same."
			default to "Your login Username has changed to be the email address this notification was sent to.  Your password remains the same."

		EEMigrationUsernameChangeFromEmailAddress
			initial value is AdminEmailAddress
			default to AdminEmailAddress

		AdjustmentApprovalEmailSubject
			initial value is "[Approval Required]: Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice}"
			default to "[Approval Required]: Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice}"

		AdjustmentApprovalEmailContent
			initial value is "Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice} has been submitted for your approval."
			default to "Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice} has been submitted for your approval."

		AdjustmentApprovedEmailSubject
			initial value is "[Approved]: Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice}"
			default to "[Approved]: Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice}"
		
		AdjustmentApprovedEmailContent
			initial value is "Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice} has been approved."
			default to "Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice} has been approved."

		AdjustmentRejectEmailSubject
			initial value is "[Rejected]: Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice}"
			default to "[Rejected]: Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice}"

		AdjustmentRejectEmailContent
			initial value is "Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice} has been rejected."
			default to "Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice} has been rejected."


	Rule Blocks

		EditData
			if (ElectronicFundsTransferProcess
			and EFTProcessingLevel.GroupLevelProcessing
			and EFTGLDays entered)
				constraint (EFTGLDaysType entered)
					"G\LTypeRequired"										 

			if (ElectronicFundsTransferProcess
			and EFTProcessingLevel.GroupLevelProcessing
			and EFTGLDaysType entered)
				constraint (EFTGLDays entered)
					"G\LDaysRequired"										 

			if (ElectronicFundsTransferProcess
			and EFTProcessingLevel.GroupLevelProcessing
			and EFTDepositDaysType entered)
				constraint (EFTDepositDays entered)
					"DepositDaysRequired"									 

			if (ElectronicFundsTransferProcess
			and EFTProcessingLevel.GroupLevelProcessing
			and EFTDepositDays entered)
				constraint (EFTDepositDaysType entered)
					"DepositTypeRequired"									 

			if (EFTProcessingLevel.CompanyLevelProcessing
			and any ReceivableCompanyRel.EFTCalendar entered)
				constraint (EFTProcessingLevel.CompanyLevelProcessing)
					"E\F\TRulesEstablishedAtSpecifiedLevel_-CannotChange"	 

			if  (ElectronicFundsTransferProcess
			and  ElectronicFundsTransferProcess changed
			and  EFTProcessingLevel.CompanyLevelProcessing)
				constraint (all ReceivableCompanyRel.EFTCalendar not entered)
					"E\F\TRulesEstablishedAtSpecifiedLevel_-CannotChange"	 

			if (UseBillingReceivablesPortal
			and MainThirdPartyPaymentProcessingSetupsComplete)	
				constraint (PortalPaymentProcessingCompanyRel.PaymentBatchNumbering)
					"Enable_\Automatic_\Batch_\NumberingIn_\Third_\Party_\Payment_\Processing_\Company_<PortalPaymentProcessingCompanyRel.Company>"


	Conditions

		ReceivableAgePeriodExists
			restricted
			when (ReceivableAgePeriodRel exists)

		CustomerRelExists
			restricted
			when (CustomerRel exists)

		CustomerGroupAllowsAccess
			when ((actor.context.CustomerBusinessGroup != ""
			and	actor.context.CustomerBusinessGroup = CustomerGroup)
			or	actor.context.CustomerBusinessGroup = ""
			or	CustomerGroup !entered)   

		ReceivableCompanyExists
			restricted
			when (ReceivableCompanyRel exists)

		GroupEFTProcessing
			restricted
			when (ElectronicFundsTransferProcess and EFTProcessingLevel.GroupLevelProcessing)

		CompanyEFTProcessing
			restricted
			when (ElectronicFundsTransferProcess and EFTProcessingLevel.CompanyLevelProcessing)

		IsApplicationSort1Label
			restricted
			when (ApplicationSort1Label entered)

		IsApplicationSort2Label
			restricted
			when (ApplicationSort2Label entered)

		IsApplicationSort3Label
			restricted
			when (ApplicationSort3Label entered)

		IsApplicationSort4Label
			restricted
			when (ApplicationSort4Label entered)

		IsApplicationSort
			restricted
			when (ApplicationSort1Label entered
			or	ApplicationSort2Label entered
			or	ApplicationSort3Label entered
			or	ApplicationSort4Label entered)

		StructureDefaultCodeRelExists
			restricted
			when (StructureDefaultCodeRel exists)

		StructureDefaultCodeDetailRelExists
			restricted
			when (StructureDefaultCodeDetailRel exists)

		IsValidForActorContext
			restricted
			when ((actor.context.FinanceEnterpriseGroup != ""
			and   CustomerGroup.CustomerBusinessGroup.FinanceEnterpriseGroup = actor.context.FinanceEnterpriseGroup)
			or   (actor.context.FinanceEnterpriseGroup = ""))

		QuestionsExist
			restricted
			when (ActiveCustomerGroupQuestionRel exists)

		ExternalMenuVersionV3ConfigRelExist	
			when (first ExternalMenuVersionV3ConfigRel exist)



		CashManagementAccountSetupWithThirdPartyPaymentProcessingReceivableProcessLevelRelLegalEntityMatchesAReceivableCompany	
			when (any CashManagementAccountSetupWithThirdPartyPaymentProcessingReceivableProcessLevelRel.LegalEntity = any ReceivableCompanyRel.Company)	

		ThirdPartyPaymentProcessingPaymentCurrencyConfigurationParameterStartRelExists	
			when (ThirdPartyPaymentProcessingPaymentCurrencyConfigurationParameterStartRel exists)	

		ThirdPartyPaymentProcessingPaymentCurrencyConfigurationParameterRelExists	
			when (ThirdPartyPaymentProcessingPaymentCurrencyConfigurationParameterRel exists)	

		ThirdPartyPaymentProcessingEndpointConfigurationParameterRelExists	
			when (ThirdPartyPaymentProcessingEndpointConfigurationParameterRel exists)	

		ThirdPartyPaymentProcessingPayformURIConfigurationParameterRelExists	
			when (ThirdPartyPaymentProcessingPayformURIConfigurationParameterRel exists)	

		ContextPropertyRelExists	
			when (ContextPropertyRel exists)	

		CustomerRepresentativeContextPropertyRelExists	
			when (CustomerRepresentativeContextPropertyRel exists)	

		ContextPropertyRelIntialSetupsExists	
			when (ContextPropertyRel exists	
			and CustomerRepresentativeContextPropertyRel exists
			and CustomerRepresentativeContactContextPropertyRel exists)	

		CustomerRepresentativeContactContextPropertyRelExists	
			when (CustomerRepresentativeContactContextPropertyRel exists)	


		MissingThirdPartyPaymentInitialSetups	
			when (UseBillingReceivablesPortal	
			and (ContextPropertyRel not exists	
			or CustomerRepresentativeContextPropertyRel not exists	
			or CustomerRepresentativeContactContextPropertyRel not exists	
			or ThirdPartyPaymentProcessingPaymentCurrencyConfigurationParameterRel not exists	

			or ThirdPartyPaymentProcessingPayformURIConfigurationParameterRel not exists))	









		UseBillingReceivablesPortalAnyCustomerRepresentativeContactAttentionRelExists	
			when (UseBillingReceivablesPortal
			and !MissingThirdPartyPaymentInitialSetups	
			and any CustomerRepresentativeContactAttentionRel exists)

		UseBillingReceivablesPortalAnyCustomerRepresentativeContactAttentionRelNotExists	
			when (UseBillingReceivablesPortal
			and !MissingThirdPartyPaymentInitialSetups	
			and any CustomerRepresentativeContactAttentionRel not exists)

		ThirdPartyPaymentProcessingSetupsCompleteLessCashManagementAccount	
			when (ThirdPartyPaymentProcessingPaymentCurrencyConfigurationParameterRelExists
			and ThirdPartyPaymentProcessingEndpointConfigurationParameterRelExists
			and ThirdPartyPaymentProcessingPayformURIConfigurationParameterRelExists
			and ThirdPartyPaymentProcessingContactId entered

			and ThirdPartyPaymentProcessingLocationId entered
			and (ThirdPartyPaymentProcessingProductTransactionIdACH entered
			or ThirdPartyPaymentProcessingProductTransactionIdCC entered)
			and ThirdPartyPaymentProcessingUserApiKey entered
			and ThirdPartyPaymentProcessingUserHashKey entered
			and ThirdPartyPaymentProcessingUserId entered)

		MainThirdPartyPaymentProcessingSetupsComplete	
			when (CashManagementAccountSetupWithThirdPartyPaymentProcessingReceivableProcessLevelRel exists
			and ThirdPartyPaymentProcessingPaymentCurrencyConfigurationParameterRelExists
			and ThirdPartyPaymentProcessingEndpointConfigurationParameterRelExists
			and ThirdPartyPaymentProcessingPayformURIConfigurationParameterRelExists
			and ThirdPartyPaymentProcessingContactId entered

			and ThirdPartyPaymentProcessingLocationId entered
			and (ThirdPartyPaymentProcessingProductTransactionIdACH entered
			or ThirdPartyPaymentProcessingProductTransactionIdCC entered)
			and ThirdPartyPaymentProcessingUserApiKey entered
			and ThirdPartyPaymentProcessingUserHashKey entered
			and ThirdPartyPaymentProcessingUserId entered)





		PrimaryFlaggedButPrimaryRoleSecurityClassNotExits	
			when (CustomerPrimaryInvoicePaymentAccess	
			and (!CustomerPrimaryInvoicePaymentAccessRel exists	
			or	  DeletedCustomerPrimaryInvoicePaymentAccessRel exists))	

		OtherContactsFlaggedButOtherContactsRoleSecurityClassNotExists	
			when (CustomerInvoicePaymentAccess	
			and (!CustomerInvoicePaymentAccessRel exists	
			or	  DeletedCustomerInvoicePaymentAccessRel exists))	


		AnyCustomerRepresentativeActiveCompanyCustomerWithoutDiscountAdjustmentReasonRelExists	
			restricted
			when (any CustomerRepresentativeActiveCompanyCustomerWithoutDiscountAdjustmentReasonRel exists)

		AnyCustomerRepresentativeActiveCompanyCustomerWithoutDiscountAdjustmentReasonRelNotExists	
			restricted
			when (any CustomerRepresentativeActiveCompanyCustomerWithoutDiscountAdjustmentReasonRel not exists)

		MainPortalPaymentSetupsCompleteCustomerRepresentativeWithoutDiscountAdjustmentReasonExists	
			when (UseBillingReceivablesPortal
			and	MainThirdPartyPaymentProcessingSetupsComplete
			and AnyCustomerRepresentativeActiveCompanyCustomerWithoutDiscountAdjustmentReasonRelExists) 

		ReceivableInvoiceDetailSelectedForPaymentWithoutPaymentDetailRelExists	
			restricted
			when (ReceivableInvoiceDetailSelectedForPaymentWithoutPaymentDetailRel exists)

		NotAllEEMigrationEmailFieldsPopulated
			restricted
			when (EEMigrationUsernameChangeEmailSubject not entered
			or	  EEMigrationUsernameChangeEmailContent not entered
			or	  EEMigrationUsernameChangeFromEmailAddress not entered)


	Actions

		Create is a Create Action
			Action Rules
				if (!ActorGroupRel exists)
					invoke Create ActorGroup
						invoked.ActorGroup	 = "InactiveCustomerRepresentative"

					invoke UpdateTemplate InactivationLandingPageRel
						invoked.ActorGroup	 = "InactiveCustomerRepresentative"
						invoked.effective date = current corporate date

			Exit Rules
				if (!StructureDefaultCodeRelExists)
					invoke Create StructureDefaultCode
						invoked.FinanceEnterpriseGroup	= CustomerGroup.CustomerBusinessGroup.FinanceEnterpriseGroup
						invoked.StructureDefaultCode	= "ARManualInvoiceDlts"
						invoked.Description				= "ReceivableManualInvoiceDefault"
						invoked.SystemCode				= "AR" 
						invoked.Type					= 1
				if (!StructureDefaultCodeDetailRelExists)
					invoke Create StructureDefaultCodeDetail
						invoked.FinanceEnterpriseGroup	= CustomerGroup.CustomerBusinessGroup.FinanceEnterpriseGroup
						invoked.StructureDefaultCode	= "ARManualInvoiceDlts"
						invoked.Name					= "ReceivableDistributionCategoryDefault"
						invoked.Value					= 1
					invoke Create StructureDefaultCodeDetail
						invoked.FinanceEnterpriseGroup	= CustomerGroup.CustomerBusinessGroup.FinanceEnterpriseGroup
						invoked.StructureDefaultCode	= "ARManualInvoiceDlts"
						invoked.Name					= "ReceivableProcessLevelDefault"
						invoked.Value					= 2

				if (ExpandedAgingPeriods)
					I1 = 1
					while (I1 <= 11)
						if (AgingPeriodForCustomerGroupRel not exists)
							invoke Create ReceivableAgePeriod
								invoked.CustomerGroup = CustomerGroup
								initialize invoked.ReceivableCompany
								initialize invoked.AgingCode
								invoked.SetupIndicator = ReceivableAgePeriod.SetupIndicator.ForCustomerGroup
								invoked.AgePeriodSequence = I1
						I1 += 1
				else
					I1 = 1
					while (I1 <= 7)
						if (AgingPeriodForCustomerGroupRel not exists)
							invoke Create ReceivableAgePeriod
								invoked.CustomerGroup = CustomerGroup
								initialize invoked.ReceivableCompany
								initialize invoked.AgingCode
								invoked.SetupIndicator = ReceivableAgePeriod.SetupIndicator.ForCustomerGroup
								invoked.AgePeriodSequence = I1
						I1 += 1

		T2VCreate is a Create Action
			restricted
			default label is untranslatable
			bypass field rules

		FastUpdate is an Update Action
			restricted
			bypass field rules


		Update is an Update Action
			Action Rules
				if (MainPortalPaymentSetupsCompleteCustomerRepresentativeWithoutDiscountAdjustmentReasonExists)	
					constraint (AnyCustomerRepresentativeActiveCompanyCustomerWithoutDiscountAdjustmentReasonRelNotExists)	
						"Customer_Group<CustomerGroup>IsDefinedFor_Third_Party_Payment_Processing._Customer_Representative<first CustomerRepresentativeActiveCompanyCustomerWithoutDiscountAdjustmentReasonRel.CustomerRepresentative>IsLinkedTo_Company<first CustomerRepresentativeActiveCompanyCustomerWithoutDiscountAdjustmentReasonRel.ReceivableCompany>_Customer<first CustomerRepresentativeActiveCompanyCustomerWithoutDiscountAdjustmentReasonRel.Customer>,WhichDoesNotHaveA_Discount_Adjustment_Reason_CodeDefined._PleaseDefine_Discount_Adjustment_Reason_CodeIn_Company_Customer."	

				if (!ActorGroupRel exists)
					invoke Create ActorGroup
						invoked.ActorGroup	 = "InactiveCustomerRepresentative"

					invoke UpdateTemplate InactivationLandingPageRel
						invoked.ActorGroup		 = "InactiveCustomerRepresentative"
						invoked.effective date	 = current corporate date

				include EditData

			Exit Rules
				I1 = 1
				while (I1 <= 7)
					if (AgingPeriodForCustomerGroupRel not exists)
						invoke Create ReceivableAgePeriod
							invoked.CustomerGroup = CustomerGroup
							initialize invoked.ReceivableCompany
							initialize invoked.AgingCode
							invoked.SetupIndicator = ReceivableAgePeriod.SetupIndicator.ForCustomerGroup
							invoked.AgePeriodSequence = I1
					I1 += 1

				if (ExpandedAgingPeriods)
					if (ExpandedAgingPeriodRel not exists)
						I1 = 8
						while (I1 <= 11)
							invoke Create ReceivableAgePeriod
								invoked.CustomerGroup = CustomerGroup
								initialize invoked.ReceivableCompany
								initialize invoked.AgingCode
								invoked.SetupIndicator = ReceivableAgePeriod.SetupIndicator.ForCustomerGroup
								invoked.AgePeriodSequence = I1
							I1 += 1
				else
					invoke Delete ExpandedAgingPeriodRel


				if (ApplicationSort1Label changed)
					constraint (any ReceivableInvoiceUserSortRel.Sort1 not entered)
						"TransactionsExistsContaningSort1Value;CannotChangeSort1Label"
					constraint (any ReceivableInvoiceLineItemRel.Sort1 not entered)
						"TransactionsExistsContaningSort1Value;CannotChangeSort1Label"
				if (ApplicationSort2Label changed)
					constraint (any ReceivableInvoiceUserSortRel.Sort2 not entered)
						"TransactionsExistsContaningSort2Value;CannotChangeSort2Label"
					constraint (any ReceivableInvoiceLineItemRel.Sort2 not entered)
						"TransactionsExistsContaningSort2Value;CannotChangeSort2Label"
				if (ApplicationSort3Label changed)
					constraint (any ReceivableInvoiceUserSortRel.Sort3 not entered)
						"TransactionsExistsContaningSort3Value;CannotChangeSort3Label"
					constraint (any ReceivableInvoiceLineItemRel.Sort3 not entered)
						"TransactionsExistsContaningSort3Value;CannotChangeSort3Label"
				if (ApplicationSort4Label changed)
					constraint (any ReceivableInvoiceUserSortRel.Sort4 not entered)
						"TransactionsExistsContaningSort4Value;CannotChangeSort4Label"
					constraint (any ReceivableInvoiceLineItemRel.Sort4 not entered)
						"TransactionsExistsContaningSort4Value;CannotChangeSort4Label"

				if (CustomerPrimaryItemHistoryAccess = false
				and CustomerPrimaryItemHistoryAccessRel exists)
					invoke Delete CustomerPrimaryItemHistoryAccessRel

				if (CustomerItemHistoryAccess = false
				and CustomerItemHistoryAccessRel exists)
					invoke Delete CustomerItemHistoryAccessRel

				if (CustomerPrimaryPaymentAccess = false
				and CustomerPrimaryPaymentAccessRel exists)
					invoke Delete CustomerPrimaryPaymentAccessRel

				if (CustomerPaymentAccess = false
				and CustomerPaymentAccessRel exists)
					invoke Delete CustomerPaymentAccessRel

				if (CustomerPrimaryInvoiceAccess = false
				and CustomerPrimaryInvoiceAccessRel exists)
					invoke Delete CustomerPrimaryInvoiceAccessRel

				if (CustomerInvoiceAccess = false
				and CustomerInvoiceAccessRel exists)
					invoke Delete CustomerInvoiceAccessRel

				if (CustomerPrimaryInvoicePaymentAccess = false	
				and CustomerPrimaryInvoicePaymentAccessRel exists)	
					invoke Delete CustomerPrimaryInvoicePaymentAccessRel	

				if (CustomerInvoicePaymentAccess = false	
				and CustomerInvoicePaymentAccessRel exists)	
					invoke Delete CustomerInvoicePaymentAccessRel	

				if (CustomerPrimaryInvoicePaymentAccess = true	
				and (!CustomerPrimaryInvoicePaymentAccessRel exists
				or	  DeletedCustomerPrimaryInvoicePaymentAccessRel exists))
					invoke Create RoleSecurityClass
						invoked.Role				= "CustomerRepresentativePrimaryContact_ST"
						invoked.DataArea			= parentcontext.dataarea
						invoked.SecurityClass		= "BillingReceivablesPortalInvoicePayment_ST"

				if (CustomerInvoicePaymentAccess = true	
				and (!CustomerInvoicePaymentAccessRel exists
				or	  DeletedCustomerInvoicePaymentAccessRel exists))
					invoke Create RoleSecurityClass
						invoked.Role				= "CustomerRepresentativeContact_ST"
						invoked.DataArea			= parentcontext.dataarea
						invoked.SecurityClass		= "BillingReceivablesPortalInvoicePayment_ST"

				if (CustomerPrimaryOrderAccess = false
				and CustomerPrimaryOrderAccessRel exists)
					invoke Delete CustomerPrimaryOrderAccessRel

				if (CustomerOrderAccess = false
				and CustomerOrderAccessRel exists)
					invoke Delete CustomerOrderAccessRel

				if (CustomerPrimaryReturnAccess = false
				and CustomerPrimaryReturnAccessRel exists)
					invoke Delete CustomerPrimaryReturnAccessRel

				if (CustomerReturnAccess = false
				and CustomerReturnAccessRel exists)
					invoke Delete CustomerReturnAccessRel


		Delete is a Delete Action





		UpdateCustomerRepresentativeActionReasons is a Set Action	

			restricted
			completion message is "CustomerRepresentativeActionReasonsHaveBeenUpdated"
			Parameters
				PrmNotContinue	is Boolean

			Action Rules
				Instance Rules
					if (CustomerRepresentativeRejectActionReasonRel exists)
						for each CustomerRepresentativeRejectActionReasonRel
							invoke Create ActionReason
								fill in fields from each
								invoked.BusinessSubject = "CustomerRepresentativeReject"
								invoked.ActionReason	= each.ActionReason

							invoke Delete each

					if (CustomerRepresentativeReinstateActionReasonRel exists)
						for each CustomerRepresentativeReinstateActionReasonRel
							invoke Create ActionReason
								fill in fields from each
								invoked.BusinessSubject = "CustomerRepresentativeReinstate"
								invoked.ActionReason	= each.ActionReason

							invoke Delete each


		CreateReceivableAgePeriods is a Set Action		

			restricted
			completion message is "ReceivableAgePeriodsCreatedForAllCustomerGroups,Companies,AndAgingCodes"
			Parameters
				PrmNotContinue	is Boolean

			Action Rules
				Set Rules
					Exit Rules
						invoke CreateReceivableAgePeriods ReceivableCompany
				Instance Rules
					invoke Update



		UpdateCustomerGroupCurrencyDecimals is a Set Action		

			restricted
			completion message is "CustomerGroupCurrencyDecimalsForAllCustomerGroupsUpdated"
			Parameters
				PrmNotContinue	is Boolean

			Action Rules
				Instance Rules
					invoke Update




		IncrementTransactionApiId is an Instance Action	
			restricted	
			Action Rules	
				increment ThirdPartyPaymentProcessingTransactionApiId	



		ThirdPartyPaymentProcessingInitialSetups is an Instance Action	
			valid when (MissingThirdPartyPaymentInitialSetups)	
			completion message is "PortalPaymentInitialSetupsCompleted"	
			Action Rules	
				invoke CreateCustomerGroupContextProperty	
				invoke CreateCustomerRepresentativeContextProperty	
				invoke CreateCustomerRepresentativeContactContextProperty	
				invoke CreateThirdPartyPaymentProcessingPaymentCurrencyConfigurationParameterStartRel	
				invoke CreateThirdPartyPaymentProcessingPayformURIConfigurationParameterRel	
				invoke CreateActorContextForEachCustomerRepresentativeContact	

		EnableProperSecurityForCustomerPortal is an Instance Action 
			restricted 
			Action Rules 

				if (CustomerPrimaryAllAccessRel exists) 
					invoke Delete CustomerPrimaryAllAccessRel

				if (CustomerContactAllAccessRel exists) 
					invoke Delete CustomerContactAllAccessRel

				if (CustomerAnonymousAllAccessRel exists) 				
					invoke Delete CustomerAnonymousAllAccessRel

		CreateCustomerGroupContextProperty is an Instance Action	
			restricted	
			valid when (!ContextPropertyRelExists)	
			completion message is "CustomerGroupContextPropertyCreated"	
			Action Rules	
				if (!ContextPropertyRelExists)	
					invoke Create ContextPropertyRel	



		CreateCustomerRepresentativeContextProperty is an Instance Action	
			restricted	
			valid when (!CustomerRepresentativeContextPropertyRelExists)	
			completion message is "CustomerRepresentativeContextPropertyCreated"	
			Action Rules	
				if (!CustomerRepresentativeContextPropertyRelExists)	
					invoke Create CustomerRepresentativeContextPropertyRel	



		CreateCustomerRepresentativeContactContextProperty is an Instance Action	
			restricted	
			valid when (!CustomerRepresentativeContactContextPropertyRelExists)	
			completion message is "CustomerRepresentativeContactContextPropertyCreated"	
			Action Rules	
				if (!CustomerRepresentativeContactContextPropertyRelExists)	
					invoke Create CustomerRepresentativeContactContextPropertyRel	



		CreateThirdPartyPaymentProcessingPaymentCurrencyConfigurationParameterStartRel is an Instance Action	
			restricted	
			valid when (!ThirdPartyPaymentProcessingPaymentCurrencyConfigurationParameterStartRelExists)	
			Action Rules	
				if (!ThirdPartyPaymentProcessingPaymentCurrencyConfigurationParameterStartRelExists)	
					invoke Create ThirdPartyPaymentProcessingPaymentCurrencyConfigurationParameterStartRel	



		CreateThirdPartyPaymentProcessingPayformURIConfigurationParameterRel is an Instance Action	
			restricted	
			valid when (!ThirdPartyPaymentProcessingPayformURIConfigurationParameterRelExists)	
			Action Rules	
				if (!ThirdPartyPaymentProcessingPayformURIConfigurationParameterRelExists)	
					invoke Create ConfigurationParameter	
						invoked.ConfigurationParameter.ConfigurationID	= "config"	
						invoked.ConfigurationParameter.Name				= "PAYACONNECT.WSI.PAYFORMURI"	
						invoked.Type									= 8222	
						invoked.Length									= 300	
						invoked.Value									= "/payform"	



		CreateActorContextForEachCustomerRepresentativeContact is an Instance Action	
			valid when (UseBillingReceivablesPortalAnyCustomerRepresentativeContactAttentionRelExists)	
			Entrance Rules	
				constraint (AnyCustomerRepresentativeActiveCompanyCustomerWithoutDiscountAdjustmentReasonRelNotExists)	
					"Customer_Group<CustomerGroup>IsDefinedFor_Third_Party_Payment_Processing._Customer_Representative<first CustomerRepresentativeActiveCompanyCustomerWithoutDiscountAdjustmentReasonRel.CustomerRepresentative>IsLinkedTo_Company<first CustomerRepresentativeActiveCompanyCustomerWithoutDiscountAdjustmentReasonRel.ReceivableCompany>_Customer<first CustomerRepresentativeActiveCompanyCustomerWithoutDiscountAdjustmentReasonRel.Customer>,WhichDoesNotHaveA_Discount_Adjustment_Reason_CodeDefined._PleaseDefine_Discount_Adjustment_Reason_CodeIn_Company_Customer."	
			Action Rules	
				for each CustomerRepresentativeContactActiveRel	
					invoke CreateActorContextForEachCustomerRepresentativeContact each	

		PopulateExternalEntityMigrationEmailFields is a Set Action

			Parameters
				PrmCustomerGroup	is a CustomerGroup
			Instance Selection
				where ((CustomerGroup = PrmCustomerGroup
				or	   PrmCustomerGroup not entered)
				and   (NotAllEEMigrationEmailFieldsPopulated))

			Action Rules
				Instance Rules
					invoke Update CustomerGroup
						if (EEMigrationUsernameChangeEmailSubject not entered)
							invoked.EEMigrationUsernameChangeEmailSubject		= "Your Username has changed"
						if (EEMigrationUsernameChangeEmailContent not entered)
							invoked.EEMigrationUsernameChangeEmailContent		= "Your login Username has changed to be the email address this notification was sent to.  Your password remains the same."
						if (EEMigrationUsernameChangeFromEmailAddress not entered)
							invoked.EEMigrationUsernameChangeFromEmailAddress	= AdminEmailAddress

		UpdateAdjustmentApprovalEmailFields is a Set Action
			restricted
			completion message is "AdjustmentApprovalEmailFieldsForAllCustomerGroupsUpdated"
			Parameters
				PrmNotContinue	is Boolean

			Action Rules
				Instance Rules

					AdjustmentApprovalEmailSubject = "[Approval Required]: Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice}"
					AdjustmentApprovalEmailContent = "Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice} has been submitted for your approval."
				    AdjustmentApprovedEmailSubject = "[Approved]: Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice}"
					AdjustmentApprovedEmailContent = "Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice} has been approved."
					AdjustmentRejectEmailSubject = "[Rejected]: Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice}"
					AdjustmentRejectEmailContent = "Receivable Application Adjustment {Adjustment} with Reason {AdjustmentReason} of type {ReasonType} For {TransType} {Invoice} has been rejected."




