PurchaseOrderReceiptLineDistribution is a BusinessClass
	owned by po
	prefix is PORLD
	sql name is PORLineDistribution

    Ontology
    	symbolic key is PurchaseOrderReceiptLineDistribution

    Patterns
        implements StaticJava
        implements Archivable
        
	Persistent Fields
		AssetInformation
        DistributionPercent			is a TotalPercent
        DistributionQuantity		is like Quantity
        PostingType                 is AlphaUpper size 2
            States
                Inventory           value is "I1"
                Offset              value is "O1"
                RniExpenseAccount   value is "E1"
                ReceivedNotInvoiced value is "RN"
                MatchedNotReceived  value is "MN"
                AddOnCost           value is "A"
		DistributionAccount		 		is a FinanceCodeBlock		 		

		DistributionAmount		 		is a CurrencyAmount			


	Transient Fields
		BypassAccountEdit				is Boolean
		CreateDistributionAccount 		is a FinanceCodeBlock		 		
		GLTKeepRateOnly					is Boolean
		BypassActiveCodeBlockEdit                              
	

	Local Fields


	Conditions
		DistributionByQuantity
			restricted
			when (DistributionQuantity entered)
		DistributionByPercent
			restricted
			when (DistributionPercent entered)
		DistributionByAmount
			restricted
			when (DistributionAmount entered)


	Field Rules
		DistributionAccount




		AssetInformation




		DistributionPercent
			if (DistributionQuantity not entered)
				default to 100%

			constraint (DistributionPercent > 0)
				"DistributionPercentMustBeGreaterThanZero"
			constraint (DistributionPercent <= 100%)
				"DistributionPercentCannotBeGreaterThan100%"

		DistributionQuantity
		
			if (DistributionPercent entered)
				cannot be entered
					"CanEitherEnterDistributionQuantityOrDistributionPercent,NotBoth"





			constraint (DistributionQuantity != 0)	
				"DistributionQuantityMustBeGreaterThanZero"




	Rule Blocks
	































	Actions
		Create is a Create Action
		
			Entrance Rules
				BypassActiveCodeBlockEdit   = true
			
			Action Rules

				BypassAccountEdit			= true

				if (PurchaseOrderReceiptLine.PurchaseOrderReceipt.ReceiptCurrencyConversionRate entered)
					GLTKeepRateOnly = true
				else
					GLTKeepRateOnly = false
				



		Update is an Update Action
			bypass field rules
			Entrance Rules
				BypassActiveCodeBlockEdit 	= true
							
			Action Rules
				BypassAccountEdit			= true

				
		Delete is a Delete Action

		Release is an Instance Action
			Action Rules
				BypassAccountEdit		= false




		Purge is a Purge Action
			restricted
				
