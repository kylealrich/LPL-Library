TierQualifierCalculationDetail is a BusinessClass
    owned by po
    prefix is TQCD
    
    Ontology
  		symbolic key is TierQualifierCalculationDetail

	Patterns
		
    Persistent Fields
		PurchasingCompany                         
		DetailContract			   is a Contract 
		PurchaseOrder 
		PurchaseOrderLine 
		PayablesInvoice            is an Invoice 
		Quantity                   is an UnsignedQuantity
			precision is 0
		UnitCost                   is an UnsignedUnitCost
			precision is 2
		QualifiedOrCompetitiveItem is Numeric 1
			States 
				Qualified               value is 1
				Competitive             value is 2		

    Local Fields
		
	Transient Fields 
	
	Derived Fields

		TotalAmount is a DerivedField
			type is like InternationalAmount
			return (Quantity * UnitCost)

	Conditions 

		Qualified 
			restricted
			when (QualifiedOrCompetitiveItem = 1)


		Competitive 
			restricted
			when (QualifiedOrCompetitiveItem = 2)

		NotOnContract 
			restricted 
			when (DetailContract !entered)

	Relations

		PayablesInvoiceRel 
			one-to-many relation to PayablesInvoice 
			Field Mapping uses ByInvoice 
				related.Invoice		= PayablesInvoice 	
			Instance Selection 
				where (related.Company	= PurchasingCompany)	

	Sets

		ByCompanyPO
			Sort Order 
				ContractGroup 
				Contract
				PurchasingCompany
				PurchaseOrder 
				PurchaseOrderLine 
				TierQualifierCalculation
				TierQualifierCalculationDetail 


  	Field Rules
  	
  	Actions     	 	
 		Create is a Create Action
			restricted 				

		Update is an Update Action 
			restricted 

		Delete is a Delete Action
			restricted  
