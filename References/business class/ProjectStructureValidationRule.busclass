ProjectStructureValidationRule is a BusinessClass
    sql name is "ProjStructValidRule"
    owned by Projects
    prefix is PJSVR

    Ontology
    	part of ProjectStructureValidation
    		relative key is SequenceNumber
    		
    Persistent Fields
        ProjectCodeBlockDimension
   		RuleOption			is Numeric size 1
			States
				Include		value is 1
				Exclude		value is 2
		FromValue			is AlphaUpper size 26
		ToValue				is AlphaUpper size 26
		RuleGroup			is Numeric size 2

	Local Fields

	Rule Blocks
		ValidateRange
			if ((ProjectCodeBlockDimension = 1
			and  AccountingEntityRel not exists)
			or  (ProjectCodeBlockDimension = 2
			and  GeneralLedgerChartAccountRel not exists)
			or  (ProjectCodeBlockDimension = 3
			and  AccountingUnitRel not exists)
			or  (ProjectCodeBlockDimension = 5
			and  FinanceDimension1Rel not exists)
			or  (ProjectCodeBlockDimension = 6
			and  FinanceDimension2Rel not exists)
			or  (ProjectCodeBlockDimension = 7
			and  FinanceDimension3Rel not exists)
			or  (ProjectCodeBlockDimension = 8
			and  FinanceDimension4Rel not exists)
			or  (ProjectCodeBlockDimension = 9
			and  FinanceDimension5Rel not exists)
			or  (ProjectCodeBlockDimension = 10
			and  FinanceDimension6Rel not exists)
			or  (ProjectCodeBlockDimension = 11
			and  FinanceDimension7Rel not exists)
			or  (ProjectCodeBlockDimension = 12
			and  FinanceDimension8Rel not exists)
			or  (ProjectCodeBlockDimension = 13
			and  FinanceDimension9Rel not exists)
			or  (ProjectCodeBlockDimension = 14
			and  FinanceDimension10Rel not exists))
				confirmation required
					"No<ProjectCodeBlockDimension.DimensionLabel>RecordsCurrentlyExistWithinEnteredRange;_UpdateAnyway?"
			
	Derived Fields
			
    Conditions
		IsStructureValidationDimension
			when (ProjectStructureValidation.StructureDimension entered
			and ((FinanceEnterpriseGroup.StructureValidationDimension.Dimension3
			and   ProjectCodeBlockDimension = 7)
			or   (FinanceEnterpriseGroup.StructureValidationDimension.Dimension4
			and   ProjectCodeBlockDimension = 8)
			or   (FinanceEnterpriseGroup.StructureValidationDimension.Dimension5
			and   ProjectCodeBlockDimension = 9)
			or   (FinanceEnterpriseGroup.StructureValidationDimension.Dimension6
			and   ProjectCodeBlockDimension = 10)
			or   (FinanceEnterpriseGroup.StructureValidationDimension.Dimension7
			and   ProjectCodeBlockDimension = 11)
			or   (FinanceEnterpriseGroup.StructureValidationDimension.Dimension8
			and   ProjectCodeBlockDimension = 12)
			or   (FinanceEnterpriseGroup.StructureValidationDimension.Dimension9
			and   ProjectCodeBlockDimension = 13)
			or   (FinanceEnterpriseGroup.StructureValidationDimension.Dimension10
			and   ProjectCodeBlockDimension = 14)
			or   (FinanceEnterpriseGroup.StructureValidationDimension.Account
			and   ProjectCodeBlockDimension = 2)))

		IsAccountingEntity
			when (ProjectCodeBlockDimension = 1)
		IsAccount
			when (ProjectCodeBlockDimension = 2)
		IsAccountingUnit
			when (ProjectCodeBlockDimension = 3)
		IsDimension1
			when (ProjectCodeBlockDimension = 5)
		IsDimension2
			when (ProjectCodeBlockDimension = 6)
		IsDimension3
			when (ProjectCodeBlockDimension = 7)
		IsDimension4
			when (ProjectCodeBlockDimension = 8)
		IsDimension5
			when (ProjectCodeBlockDimension = 9)
		IsDimension6
			when (ProjectCodeBlockDimension = 10)
		IsDimension7
			when (ProjectCodeBlockDimension = 11)
		IsDimension8
			when (ProjectCodeBlockDimension = 12)
		IsDimension9
			when (ProjectCodeBlockDimension = 13)
		IsDimension10
			when (ProjectCodeBlockDimension = 14)
			
    Relations
    	AccountingEntityRel
    		one-to-many relation to AccountingEntity
    		Field Mapping uses symbolic key
    			related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
    			related.AccountingEntity		>= FromValue
    		Instance Selection
    			where (related.AccountingEntity <= ToValue
    			and    related.PostingEntity)
    	AccountingUnitRel
    		one-to-many relation to AccountingUnit
    		Field Mapping uses LeafRecords
    			related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
    		Instance Selection
    			where (related.AccountingUnit >= FromValue
    			and    related.AccountingUnit <= ToValue)
    	GeneralLedgerChartAccountRel
    		one-to-many relation to GeneralLedgerChartAccount
    		Field Mapping uses LeafRecords
    			related.FinanceEnterpriseGroup	  = FinanceEnterpriseGroup
    			related.GeneralLedgerChartAccount >= FromValue
    		Instance Selection
    			where (related.GeneralLedgerChartAccount <= ToValue)
    	FinanceDimension1Rel
    		one-to-many relation to FinanceDimension1
    		Field Mapping uses LeafRecords
    			related.FinanceEnterpriseGroup	 = FinanceEnterpriseGroup
    			related.FinanceDimension1		 >= FromValue
    		Instance Selection
    			where (related.FinanceDimension1 <= ToValue)
    	FinanceDimension2Rel
    		one-to-many relation to FinanceDimension2
    		Field Mapping uses LeafRecords
    			related.FinanceEnterpriseGroup	 = FinanceEnterpriseGroup
    			related.FinanceDimension2		 >= FromValue
    		Instance Selection
    			where (related.FinanceDimension2 <= ToValue)
    	FinanceDimension3Rel
    		one-to-many relation to FinanceDimension3
    		Field Mapping uses LeafRecords
    			related.FinanceEnterpriseGroup	 = FinanceEnterpriseGroup
    			related.FinanceDimension3		 >= FromValue
    		Instance Selection
    			where (related.FinanceDimension3 <= ToValue)
    	FinanceDimension4Rel
    		one-to-many relation to FinanceDimension4
    		Field Mapping uses LeafRecords
    			related.FinanceEnterpriseGroup	 = FinanceEnterpriseGroup
    			related.FinanceDimension4		 >= FromValue
    		Instance Selection
    			where (related.FinanceDimension4 <= ToValue)
    	FinanceDimension5Rel
    		one-to-many relation to FinanceDimension5
    		Field Mapping uses LeafRecords
    			related.FinanceEnterpriseGroup	 = FinanceEnterpriseGroup
    			related.FinanceDimension5		 >= FromValue
    		Instance Selection
    			where (related.FinanceDimension5 <= ToValue)
    	FinanceDimension6Rel
    		one-to-many relation to FinanceDimension6
    		Field Mapping uses LeafRecords
    			related.FinanceEnterpriseGroup	 = FinanceEnterpriseGroup
    			related.FinanceDimension6		 >= FromValue
    		Instance Selection
    			where (related.FinanceDimension6 <= ToValue)
    	FinanceDimension7Rel
    		one-to-many relation to FinanceDimension7
    		Field Mapping uses LeafRecords
    			related.FinanceEnterpriseGroup	 = FinanceEnterpriseGroup
    			related.FinanceDimension7		 >= FromValue
    		Instance Selection
    			where (related.FinanceDimension7 <= ToValue)
    	FinanceDimension8Rel
    		one-to-many relation to FinanceDimension8
    		Field Mapping uses LeafRecords
    			related.FinanceEnterpriseGroup	 = FinanceEnterpriseGroup
    			related.FinanceDimension8		 >= FromValue
    		Instance Selection
    			where (related.FinanceDimension8 <= ToValue)
    	FinanceDimension9Rel
    		one-to-many relation to FinanceDimension9
    		Field Mapping uses LeafRecords
    			related.FinanceEnterpriseGroup	 = FinanceEnterpriseGroup
    			related.FinanceDimension9		 >= FromValue
    		Instance Selection
    			where (related.FinanceDimension9 <= ToValue)
    	FinanceDimension10Rel
    		one-to-many relation to FinanceDimension10
    		Field Mapping uses LeafRecords
    			related.FinanceEnterpriseGroup	 = FinanceEnterpriseGroup
    			related.FinanceDimension10		 >= FromValue
    		Instance Selection
    			where (related.FinanceDimension10 <= ToValue)

    Sets
    	ByRule
    		Sort Order
    			FinanceEnterpriseGroup
    			ProjectStructureValidation
    			RuleGroup
    			ProjectCodeBlockDimension
    			SequenceNumber

    	ByRuleOption
    		Sort Order
    			FinanceEnterpriseGroup
    			ProjectStructureValidation
    			RuleGroup
    			RuleOption descending
    			ProjectCodeBlockDimension
    			SequenceNumber
    			
    Field Rules
    	SequenceNumber
    		autosequence
		ProjectCodeBlockDimension
			required
				constraint (!IsStructureValidationDimension)
					"RulesNotAllowedForProjectStructureValidationDimension<FinanceEnterpriseGroup.StructureValidationDimensionLabel>"
    	RuleOption
    		required
    	FromValue
    		if (ToValue not entered)
	    		required
	    ToValue
    		required
    	RuleGroup
    		required
			
	Actions
		Create is a Create Action
			Action Rules
				include ValidateRange
			Exit Rules
				invoke GenerateValidationCondition ProjectStructureValidation

		Delete is a Delete Action
			Exit Rules
				invoke GenerateValidationCondition ProjectStructureValidation
			
		Update is an Update Action
			Action Rules
				include ValidateRange
			Exit Rules
				invoke GenerateValidationCondition ProjectStructureValidation


				
				
				
