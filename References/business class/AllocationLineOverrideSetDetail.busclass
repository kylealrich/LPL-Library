AllocationLineOverrideSetDetail is a BusinessClass
	owned by Allocations
	prefix is ALOSD
	sql name is "ALOverrideSetDetail"
	
	Ontology
		symbolic key is AllocationLineOverrideSetDetail
		
	Patterns
	
	Persistent Fields
		AccountingEntity
		AccountingUnit
		GeneralLedgerChartAccount
		Project
		FinanceDimension1
		FinanceDimension2
		FinanceDimension3
		FinanceDimension4
		FinanceDimension5
		FinanceDimension6
		FinanceDimension7
		FinanceDimension8
		FinanceDimension9
		FinanceDimension10
		TreatBlankAccountAsEmpty			is Boolean
		TreatBlankAccountingUnitAsEmpty		is Boolean
		TreatBlankProjectAsEmpty			is Boolean
		TreatBlankDimension1AsEmpty			is Boolean
		TreatBlankDimension2AsEmpty			is Boolean
		TreatBlankDimension3AsEmpty			is Boolean
		TreatBlankDimension4AsEmpty			is Boolean
		TreatBlankDimension5AsEmpty			is Boolean
		TreatBlankDimension6AsEmpty			is Boolean
		TreatBlankDimension7AsEmpty			is Boolean
		TreatBlankDimension8AsEmpty			is Boolean
		TreatBlankDimension9AsEmpty			is Boolean
		TreatBlankDimension10AsEmpty		is Boolean
		Weight								is Decimal 31.4 
        WeightDecimal					    is a AllocationWeightDecimal
            default label is "Weight"
	
	Context Fields
		AllocationContext
	
	Relations
		OtherAllocationLineOverrideSetDetailsRel
    		one-to-many relation to AllocationLineOverrideSetDetail
    		Field Mapping uses symbolic key
    			related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
    			related.AllocationLineOverrideSet	= AllocationLineOverrideSet
    		Instance Selection
    			where (related.AllocationLineOverrideSetDetail not = AllocationLineOverrideSetDetail)
	
	Conditions
		AccountingUnitConfiguredButNotRequired
			restricted
			when (FinanceEnterpriseGroup.AccountingUnitSelected
			and   not FinanceEnterpriseGroup.AccountingUnitRequired)
		
		ProjectConfiguredButNotRequired
			restricted
			when (FinanceEnterpriseGroup.ProjectEntry
			and   not FinanceEnterpriseGroup.ProjectRequired)
		
		FinanceDimension1ConfiguredButNotRequired
			restricted
			when (FinanceEnterpriseGroup.FinanceDimension1Entry
			and   not FinanceEnterpriseGroup.FinanceDimension1Required)
		
		FinanceDimension2ConfiguredButNotRequired
			restricted
			when (FinanceEnterpriseGroup.FinanceDimension2Entry
			and   not FinanceEnterpriseGroup.FinanceDimension2Required)
		
		FinanceDimension3ConfiguredButNotRequired
			restricted
			when (FinanceEnterpriseGroup.FinanceDimension3Entry
			and   not FinanceEnterpriseGroup.FinanceDimension3Required)
			
		FinanceDimension4ConfiguredButNotRequired
			restricted
			when (FinanceEnterpriseGroup.FinanceDimension4Entry
			and   not FinanceEnterpriseGroup.FinanceDimension4Required)
			
		FinanceDimension5ConfiguredButNotRequired
			restricted
			when (FinanceEnterpriseGroup.FinanceDimension5Entry
			and   not FinanceEnterpriseGroup.FinanceDimension5Required)
			
		FinanceDimension6ConfiguredButNotRequired
			restricted
			when (FinanceEnterpriseGroup.FinanceDimension6Entry
			and   not FinanceEnterpriseGroup.FinanceDimension6Required)
			
		FinanceDimension7ConfiguredButNotRequired
			restricted
			when (FinanceEnterpriseGroup.FinanceDimension7Entry
			and   not FinanceEnterpriseGroup.FinanceDimension7Required)
			
		FinanceDimension8ConfiguredButNotRequired
			restricted
			when (FinanceEnterpriseGroup.FinanceDimension8Entry
			and   not FinanceEnterpriseGroup.FinanceDimension8Required)
			
		FinanceDimension9ConfiguredButNotRequired
			restricted
			when (FinanceEnterpriseGroup.FinanceDimension9Entry
			and   not FinanceEnterpriseGroup.FinanceDimension9Required)
			
		FinanceDimension10ConfiguredButNotRequired
			restricted
			when (FinanceEnterpriseGroup.FinanceDimension10Entry
			and   not FinanceEnterpriseGroup.FinanceDimension10Required)
	
	Derived Fields
		DimensionCode        is a StringField
            type is Alpha 105
            restricted
            AccountingEntity.DerivedSequenceNumber
            AccountingUnit.DerivedSequenceNumber
            GeneralLedgerChartAccount.DerivedSequenceNumber
            Project.DerivedSequenceNumber
			FinanceDimension1.DerivedSequenceNumber
			FinanceDimension2.DerivedSequenceNumber
			FinanceDimension3.DerivedSequenceNumber
			FinanceDimension4.DerivedSequenceNumber
			FinanceDimension5.DerivedSequenceNumber
			FinanceDimension6.DerivedSequenceNumber
			FinanceDimension7.DerivedSequenceNumber
			FinanceDimension8.DerivedSequenceNumber
			FinanceDimension9.DerivedSequenceNumber
			FinanceDimension10.DerivedSequenceNumber
			DerivedSequenceNumber
			
		DerivedSequenceNumber	is a DerivedField
			type is AlphaRight 7
			restricted
			return DerivedAlphaSequence[2:8]
		DerivedAlphaSequence	is a DerivedField
			type is AlphaRight 8
			restricted
			return (10000000)
			
		Percent is a DerivedField
			type is Percent size 14.10
			if (AllocationLineOverrideSetDetail != last AllocationLineOverrideSet.AllocationLineOverrideSetDetailsRel.AllocationLineOverrideSetDetail)
				return WeightDecimal/(sum AllocationLineOverrideSet.AllocationLineOverrideSetDetailsRel.WeightDecimal)
			else
				return 1.0 - (sum OtherAllocationLineOverrideSetDetailsRel.Percent)
			
	Field Rules
        WeightDecimal
			initial value is 1.0
			default to 1.0
			if (not AllocationLineOverrideSet.AllowNegativeWeights)
				constraint (WeightDecimal > 0.0)
					"WeightMustBePositive"
			required
	
	Create Rules
		AllocationLineOverrideSetDetail = DimensionCode
	
	Actions
		Create is a Create Action
		
		Update is an Update Action
		
		Delete is a Delete Action

        UpdateWeightDecimal is a Set Action
            restricted
            Instance Selection
                where (Weight entered and WeightDecimal not entered)
            
            Action Rules
                Instance Rules
                    WeightDecimal = Weight
