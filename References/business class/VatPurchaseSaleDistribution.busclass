VatPurchaseSaleDistribution is a BusinessClass
    owned by tx
    prefix is TDT
    classic name is TXRPTDIST

    Ontology
        symbolic key is VatPurchaseSaleDistribution
            classic set name is TDTSET1
            classic name for VatPurchaseSaleDistribution.SystemCode is SYSTEM-CD
            classic name for VatPurchaseSaleDistribution.TransactionType is TRANS-TYPE
            classic name for VatPurchaseSaleDistribution.LineNumber is LINE-NBR
            classic name for VatPurchaseSaleDistribution.TaxSequence is SEQ-NBR
            classic name for VatPurchaseSaleDistribution.DistributionSequence is DIST-SEQ-NBR

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields

        TaxCode
        TaxReportingAccount is a FinanceCodeBlock
            classic name for TaxReportingAccount.ToAccountingEntity is DIST-COMPANY
            classic name for TaxReportingAccount.AccountingUnit is ACCT-UNIT
            classic name for TaxReportingAccount.GeneralLedgerChartAccount is ACCOUNT


        BaseAmount          is an InternationalAmount
            classic name is BASE-AMT
        BaseTaxable         is an InternationalAmount

	Context Fields


		Source	 
		InvoiceType

	Transient Fields
		PurchaseOrSalesTransaction	
				
    Conditions
 		SalesTransactions	
			restricted
			when (VatPurchaseSaleDistribution.SystemCode = "AR"
			or    VatPurchaseSaleDistribution.SystemCode = "BL"
			or    VatPurchaseSaleDistribution.SystemCode = "PS")  // was "BR"
 		PurchaseTransactions
			restricted		
			when (VatPurchaseSaleDistribution.SystemCode = "AP"
			or    VatPurchaseSaleDistribution.SystemCode = "CB")






	 	VatPurchaseAndSalesDistributionRelExist
	 		restricted
	 		when (VatPurchaseAndSalesDistributionRel exist)	

 		SalesTransactions2	
			restricted
			when (PurchaseOrSalesTransaction.SalesOnly
			and   VatPurchaseSaleDistribution.SystemCode = "AR"
			or    VatPurchaseSaleDistribution.SystemCode = "BL"
			or    VatPurchaseSaleDistribution.SystemCode = "PS")   
				 					
    Relations

        TxrpttransRel
            one-to-many relation to VatPurchaseSaleTransaction
            Field Mapping uses symbolic key
            	related.FinanceEnterpriseGroup	= TaxEntity.FinanceEnterpriseGroup
                related.TaxEntity 				= TaxEntity
            Instance Selection
                where (related.VatPurchaseSaleTransaction.SystemCode = VatPurchaseSaleDistribution.SystemCode
                and   related.VatPurchaseSaleTransaction.Document = VatPurchaseSaleDistribution.Document
                and   related.VatPurchaseSaleTransaction.Suffix = VatPurchaseSaleDistribution.Suffix
                and   related.VatPurchaseSaleTransaction.TransactionType = VatPurchaseSaleDistribution.TransactionType)

		VatPurchaseAndSalesDistributionRel
            one-to-many relation to VatPurchaseSaleDistribution
            Field Mapping uses symbolic key	 
            	related.FinanceEnterpriseGroup				= TaxEntity.FinanceEnterpriseGroup
                related.TaxEntity 							= TaxEntity







