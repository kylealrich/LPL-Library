SupplyManagementReport is a BusinessClass
	owned by procurement
	
	prefix is SRCRP
	
	Ontology
		symbolic key is SupplyManagementReport
	
	Patterns
	
	Persistent Fields
		ReportType									is a SupplyManagementReportTypes
		Description									is a Description4
		PrintParameters								is Boolean
		PrintDate								is TimeStamp
		ListingReport								is BinaryDocument
		

		SupplyManagementReportVendorGroupField
		SupplyManagementReportSupplierGroupField
		SupplyManagementReportContractGroupField
		SupplyManagementReportSourcingGroupField
		

		CommodityCode
		IncludeNoBids								is Boolean
		IncludeUnsubmittedBids						is Boolean
		EditDiversityCertificationDates				is Boolean
		RequireCurrentDiversityCertification		is Boolean


		IncludeEventContacts						is Boolean
		IncludeEventTerms							is Boolean
		IncludeQuestionsAndResponses				is Boolean
		IncludeQandA								is Boolean
		IncludeSupplierContact						is Boolean
		IncludeResponseDetails						is Boolean
		IncludeResponseWeighting					is Boolean
		IncludeLineDetails							is Boolean


		HROrganization
		PurchasingCompany
			default label is "Company"
		Buyer
		PurchaseOrder
		EventRequired								is Boolean
			default label is "DisplayEventPerformance"
		AbovePOAmount								is like InternationalAmount
			default label is "AbovePurchaseOrderLineExtendedAmount"

		FromDate									is Date
		ThruDate									is Date
		

		MatchCompany
		ItemType
		IncludePurchaseOrderDetail					is Boolean
		IncludeInvoiceDetail						is Boolean
		PrintGraph									is Boolean


		Private										is Boolean
		IncludeVendorDetail							is Boolean
		

		IncludeAlternateResponses					is Boolean
		IncludeResponseComment						is Boolean
		IncludeContactDetails						is Boolean
		

		Item
		ManufacturerCode							is Alpha 4
		ManufacturerDivision						is Alpha 4
		PurchasingMajorClass						is like MajorPurchasingClass
		PurchasingMinorClass						is like MinorPurchasingClass
		UNSPSCCode
		IncludeDetails								is Boolean


		FromPaymentDateRange						is Date
		ToPaymentDateRange							is Date
		ExcludeVendorClass							is a VendorClass
		ExcludePOCode								is a POCode
		PayablesCompany
		ExcludeVendorClassArray


		OnOffContract								is Boolean
		AbovePercentageVariance						is Percent size 21.2
		AboveAmountVariance							is an InternationalAmount			







		Category     
			restricted




		IncludeOnlyPurchasesWithVendorAgreement		is Numeric size 1
			States
				IncludeAll									value is 1
				Yes											value is 2
				IncludeOnlyPurchasesWithoutVendorAgreement	value is 3


				
				

		SupplierDetail								is Boolean 
		

		ExcludePOCodeArray


		IncludeRecordsWithNoCommodityCode		is Boolean

	Transient Fields

		TransientManufacturer						is a Manufacturer
		TransientMajorPurchasingClass				is a MajorPurchasingClass
		TransientMinorPurchasingClass				is a MinorPurchasingClass
		TransientExcludePOCode						is Boolean
		TransientExcludeVendorClass					is Boolean
	
	Derived Fields
		ItemHistoryByVendorNotifMessageField 		is a MessageField
			"PDF_report_Item_History_By_Vendor_-_Print_to_PDF_is_available_to_view"
			
		ItemHistoryByVendorNoDataMessageField		is a MessageField
			"Item_History_By_Vendor_-_No_data_to_print"
			
		AllTextForParameters is a MessageField
			"All"
		
		DerivedContractComplianceReportAmountTotal is a DerivedField
			type is like InternationalAmount
			restricted
			return (sum ContractsForContractComplianceReportRel.ContractComplianceReportTotal)
			
		NonDiverseTotal is a DerivedField
        	type is like InternationalAmount
			return sum NonDiversePurchaseOrdersRel.TotalOrderAmount
			


		DerivedNonDiverseTotalEventsBid is a DerivedField
			type is Numeric size 21
			return (sum NonDiverseSupplierResponseRel.DerivedNonDiverseTotalEventsBid)
		
		DerivedNonDiverseTotalEventsAwarded is a DerivedField
			type is Numeric size 21
			return (sum NonDiverseSupplierResponseRel.DerivedNonDiverseTotalEventsAwarded)
		
		DerivedEventsBidPercent is a ComputeField	
    		type is Percent size 6.2
    		(DerivedNonDiverseTotalEventsAwarded/DerivedNonDiverseTotalEventsBid)

		DerivedNonDiverseTotalEventLinesBid is a DerivedField
			type is Numeric size 6
			return (sum NonDiverseSupplierResponseRel.DerivedNonDiverseTotalEventLinesBid)
		
		DerivedNonDiverseTotalEventLinesAwarded is a DerivedField
			type is Numeric size 6
			return (sum NonDiverseSupplierResponseRel.DerivedNonDiverseTotalEventLinesAwarded)
		
		DerivedEventLinesBidPercent is a ComputeField	
    		type is Percent size 6.2
    		(DerivedNonDiverseTotalEventLinesAwarded/DerivedNonDiverseTotalEventLinesBid)

 		DerivedNonDiverseBidTotal is a DerivedField
			type is like InternationalAmount
			return (sum NonDiverseSupplierResponseRel.DerivedNonDiverseBidTotal)
 		
 		DerivedNonDiverseAwardedTotal is a DerivedField
			type is Decimal size 21.2
			return (sum NonDiverseSupplierResponseRel.DerivedNonDiverseAwardedTotal)
 
		DerivedTotalBidPercent is a ComputeField	
    		type is Percent size 6.2
    		(DerivedNonDiverseAwardedTotal/DerivedNonDiverseBidTotal)
    		

		DerivedGrandTotalEventsBid is a DerivedField
			type is Numeric size 21
			return DerivedNonDiverseTotalEventsBid + sum SupplierDiversityResponseRel.DerivedTotalEventsBidByDiversity
		
		DerivedGrandTotalEventsAwarded is a DerivedField
			type is Numeric size 21
			return DerivedNonDiverseTotalEventsAwarded + sum SupplierDiversityResponseRel.DerivedTotalEventsAwardedByDiversity
		
		DerivedTotalEventsBidPercent is a ComputeField	
    		type is Percent size 6.2
    		(DerivedGrandTotalEventsAwarded/ DerivedGrandTotalEventsBid)

		DerivedGrandTotalEventLinesBid is a DerivedField
			type is Numeric size 6
			return DerivedNonDiverseTotalEventLinesBid + sum SupplierDiversityResponseRel.DerivedTotalEventLinesBidByDiversity
		
		DerivedGrandTotalEventLinesAwarded is a DerivedField
			type is Numeric size 6
			return DerivedNonDiverseTotalEventLinesAwarded + sum SupplierDiversityResponseRel.DerivedTotalEventLinesAwardedByDiversity
		
		DerivedTotalEventLinesBidPercent is a ComputeField	
    		type is Percent size 6.2
    		(DerivedGrandTotalEventLinesAwarded/ DerivedGrandTotalEventLinesBid)

 		DerivedBidGrandTotal is a DerivedField
			type is like InternationalAmount
			return DerivedNonDiverseBidTotal + sum SupplierDiversityResponseRel.DerivedBidTotalByDiversity
 		
 		DerivedAwardedGrandTotal is a DerivedField
			type is Decimal size 21.2
			return DerivedNonDiverseAwardedTotal + sum SupplierDiversityResponseRel.DerivedAwardedTotalByDiversity
 
		DerivedGrandTotalBidPercent is a ComputeField	
    		type is Percent size 6.2
    		(DerivedAwardedGrandTotal/ DerivedBidGrandTotal)
    		



		PurchaseOrderTotal is a DerivedField
        	type is like InternationalAmount
			return sum PayablesDiversityCodeForPurchasingRel.DiverseTotal + NonDiverseTotal

		

		NonDiverseInvoiceTotal is a DerivedField
			type is like InternationalAmount
			return sum VendorsForInvoiceSpendByDiversityCodeRel.GrandTotalInvoiceBasePayment
			
		PayablesInvoiceTotal is a DerivedField
        	type is like InternationalAmount
			return sum PayablesDiversityCodeRel.PayablesInvoiceTotal + NonDiverseInvoiceTotal

		
		DerivedEventRequiredValue is a DerivedField
			type is MessageField
			if (EventRequired)
				return "Yes"
			else
				return "No"
			
		DerivedPrintParametersValue is a DerivedField
			type is MessageField
			if (PrintParameters)
				return "Yes"
			else
				return "No"	

	
	Relations
		ProcessRuleSecurityRel
			one-to-many relation to Security
			Field Mapping uses symbolic key
				related.Security.ProductLine		= parentcontext.dataarea
				related.Security.Param				= "1"
			Instance Selection
				where (related.Value				= "PROCESS_RULES")
		
		ApplicationAdministratorRoleRel
			one-to-one relation to ActorRole
			Field Mapping uses symbolic key
				related.Actor			= actor
				related.ActorRole.Role	= "ApplicationAdministrator_ST"
								
		BuyerRoleRel
			one-to-one relation to ActorRole
			Field Mapping uses symbolic key
				related.Actor			= actor
				related.ActorRole.Role	= "Buyer_ST"

		SupplyManagementProcessorRoleRel
			one-to-one relation to ActorRole
			Field Mapping uses symbolic key
				related.Actor 			= actor
				related.ActorRole.Role	= "SupplyManagementProcessor_ST"
				
		PurchasingManagerRoleRel
			one-to-one relation to ActorRole
			Field Mapping uses symbolic key
				related.Actor 			= actor
				related.ActorRole.Role	= "PurchasingManager_ST"													
	
		EventResponsesByCommodityRel	
			one-to-many relation to SourcingEventLineResponse
			Field Mapping uses ByNotifiedSupplier
			Instance Selection
				where	(related.NotifiedSupplier.SupplierGroup	= SupplyManagementReportSupplierGroupField.SupplierGroup
				and		(CommodityCode not entered
				or		related.SourcingEventLine.CommodityCode	= CommodityCode)
				and		(SupplyManagementReportSupplierGroupField.Supplier not entered
				or		related.NotifiedSupplier.Supplier		= SupplyManagementReportSupplierGroupField.Supplier)
				and		related.IsGroupByCommodity)


		SourcingEventRel	
			one-to-many relation to SourcingEvent
			Field Mapping uses symbolic key
				related.Company			= SupplyManagementReportSourcingGroupField.SourcingCompany
				related.SourcingEvent	= SupplyManagementReportSourcingGroupField.SourcingEvent

		EventLineResponsesBySupplierRel 
			one-to-many relation to SourcingEventLineResponse
			Field Mapping uses ByNotifiedSupplier
			Instance Selection
				where	((SupplyManagementReportSourcingGroupField.SourcingCompany not entered
				or		related.Company						= SupplyManagementReportSourcingGroupField.SourcingCompany)
				and		(SupplyManagementReportSourcingGroupField.SourcingEvent not entered
				or		related.SourcingEvent				= SupplyManagementReportSourcingGroupField.SourcingEvent)
				and		(SupplyManagementReportSupplierGroupField.Supplier not entered
				or		related.NotifiedSupplier.Supplier	= SupplyManagementReportSupplierGroupField.Supplier))
			
		PurchaseOrderLineSourceRel	
			one-to-many relation to PurchaseOrderLineSource	
			Field Mapping uses Set1
				related.Company										= PurchasingCompany
			Instance Selection
				where	(related.PurchaseOrder.Buyer				= Buyer
				and		(FromDate not entered
				or		related.PurchaseOrder.PurchaseOrderDate		>= FromDate)
				and		(ThruDate not entered
				or		related.PurchaseOrder.PurchaseOrderDate		<= ThruDate)
				and		(AbovePOAmount not entered
				or		related.PurchaseOrderLine.ExtendedAmount	> AbovePOAmount)
				and		(EventRequired
				or		not related.EventRequired))
				
		SourcingEventReponseRel	
			one-to-many relation to SourcingEventResponse
			Field Mapping uses ByEvents
			Instance Selection
				where	(related.NotifiedSupplier.SupplierGroup	= SupplyManagementReportSupplierGroupField.SupplierGroup
				and		(SupplyManagementReportSupplierGroupField.Supplier not entered
				or		related.NotifiedSupplier.Supplier		= SupplyManagementReportSupplierGroupField.Supplier)
				and		related.HeaderSourcingEventResponse)
		
		PayablesInvoiceDetailRel	

			one-to-many relation to PayablesInvoiceDetail
			Field Mapping uses ByCompanyVendorPayablesInvoice
				related.Company							= MatchCompany
			Instance Selection
				where	(related.CommodityCode					= CommodityCode
				and		(ItemType not entered
				or		related.ItemType						= ItemType)
				and     (SupplyManagementReportVendorGroupField.Vendor not entered
				or		 related.Vendor							= SupplyManagementReportVendorGroupField.Vendor)
				and		(related.PurchaseOrder					= PurchaseOrder
				or		PurchaseOrder not entered))

		SourcingEventQAndARel	
			one-to-many relation to SourcingEventQandA
			Field Mapping uses part of key
			Instance Selection
				where	(SupplyManagementReportSourcingGroupField.SourcingCompany not entered
				or		(related.Company						= SupplyManagementReportSourcingGroupField.SourcingCompany)
				and		(SupplyManagementReportSourcingGroupField.SourcingEvent not entered
				or		related.SourcingEvent					= SupplyManagementReportSourcingGroupField.SourcingEvent)
				and		(Private
				or		not related.Private))

		SourcingEventLineResponseByEventLineRel	
			one-to-many relation to SourcingEventLineResponse
			Field Mapping uses ByNotifiedSupplier
				related.Company							= SupplyManagementReportSourcingGroupField.SourcingCompany
				related.SourcingEvent					= SupplyManagementReportSourcingGroupField.SourcingEvent
			Instance Selection
				where	(related.SourcingEventLine				= SupplyManagementReportSourcingGroupField.SourcingEventLine
				and		(IncludeNoBids
				or		not related.ResponseAmount.NoBid)
				and		related.SourcingEventLine.AllowAlternateResponses = IncludeAlternateResponses
				and		(IncludeResponseComment
				or		not related.CommentsExist)
				and		(IncludeContactDetails
				or		not related.ContactDetailExist))				
								
		InvoiceSpendByDiversityCodeRel    
			one-to-many relation to PayablesInvoicePayment
			Field Mapping uses ByCompanyDivCodeVendor
				related.Company								= PayablesCompany
			Instance Selection
				where	(related.Company.VendorGroup		= SupplyManagementReportVendorGroupField.VendorGroup
				and		related.IsGroupByDiversityCode)

		VendorClassRel
			one-to-many relation to VendorClass
			Field Mapping uses symbolic key
				related.VendorGroup = SupplyManagementReportVendorGroupField.VendorGroup

		OffContractPurchasingItemRel	
			one-to-many relation to Item
			Field Mapping uses symbolic key
				related.ItemGroup			= ItemGroup
			Instance Selection
				where	((Item not entered
				or		related.Item		= Item)
				and		related.ItemHasVendor)

		ItemHistoryByVendorInventoriedRel    
            one-to-many relation to PayablesInvoiceDetail
            Field Mapping uses ByItemTypeItemVendor
            Instance Selection
            	where 	(related.Company.VendorGroup		= SupplyManagementReportVendorGroupField.VendorGroup
				and		related.Company					= PayablesCompany
				and		related.ItemType.Inventoried
				and		(related.Item					= Item
            	or		Item not entered)
            	and		(related.Vendor					= SupplyManagementReportVendorGroupField.Vendor
            	or		SupplyManagementReportVendorGroupField.Vendor not entered)
            	and 	related.IsGroupByItem)

		ItemHistoryByVendorNonStockRel    
            one-to-many relation to PayablesInvoiceDetail
            Field Mapping uses ByItemTypeItemVendor
            Instance Selection
            	where 	(related.Company.VendorGroup		= SupplyManagementReportVendorGroupField.VendorGroup
				and		related.Company					= PayablesCompany
				and		related.ItemType.NonStock
				and		(related.Item					= Item
            	or		Item not entered)
            	and		(related.Vendor					= SupplyManagementReportVendorGroupField.Vendor
            	or		SupplyManagementReportVendorGroupField.Vendor not entered)
            	and 	related.IsGroupByItem
            	and 	related.PayablesInvoiceDetailTotalsRelExists)
        
        ItemHistoryByVendorSpecialRel    
            one-to-many relation to PayablesInvoiceDetail
            Field Mapping uses ByItemTypeItemVendor
            Instance Selection
            	where 	(related.Company.VendorGroup		= SupplyManagementReportVendorGroupField.VendorGroup
				and		related.Company					= PayablesCompany
				and		related.ItemType.Special
				and		(related.Item					= Item
            	or		Item not entered)
            	and		(related.Vendor					= SupplyManagementReportVendorGroupField.Vendor
            	or		SupplyManagementReportVendorGroupField.Vendor not entered)
            	and 	related.IsGroupByItem)

		ItemHistoryByVendorServiceRel    
            one-to-many relation to PayablesInvoiceDetail
            Field Mapping uses ByItemTypeItemVendor
            Instance Selection
            	where 	(related.Company.VendorGroup		= SupplyManagementReportVendorGroupField.VendorGroup
				and		related.Company					= PayablesCompany
				and		related.ItemType.Service
				and		(related.Item					= Item
            	or		Item not entered)
            	and		(related.Vendor					= SupplyManagementReportVendorGroupField.Vendor
            	or		SupplyManagementReportVendorGroupField.Vendor not entered)
            	and 	related.IsGroupByItem)
            	
		ItemHistoryByVendorReportItemTypeRel
			one-to-many relation to ItemHistoryByVendorReport
			Field Mapping uses symbolic key
				related.ItemGroup							= ItemGroup
				related.SupplyManagementReport  			= SupplyManagementReport
			Instance Selection
				where ((ItemType not entered or related.ItemHistoryByVendorReport.ItemType 	= ItemType)
				and     related.ItemHistoryByVendorReport.Item 								= blank
				and     related.ItemHistoryByVendorReport.Vendor 							= blank)            	
		
		SuppliersForEventResponsesHistoryRel    
            one-to-many relation to Supplier
            Field Mapping uses symbolic key
            	related.SupplierGroup = SupplyManagementReportSupplierGroupField.SupplierGroup
            Instance Selection                                
                where (SupplyManagementReportSupplierGroupField.Supplier not entered
                or	related.Supplier = SupplyManagementReportSupplierGroupField.Supplier)               
               
        EventQuestionsAndResponsesRel
        	one-to-many relation to SourcingEventQuestion
        	Field Mapping uses ByQuestion
        	Instance Selection
        		where ((related.Company = SupplyManagementReportSourcingGroupField.SourcingCompany 
        		or SupplyManagementReportSourcingGroupField.SourcingCompany not entered)
        		and (related.SourcingEvent = SupplyManagementReportSourcingGroupField.SourcingEvent
        		or SupplyManagementReportSourcingGroupField.SourcingEvent not entered))
        
        SourcingEventsRel
        	one-to-many relation to SourcingEvent
        	Field Mapping uses ByCompany
        	Instance Selection
        		where ((related.Company = SupplyManagementReportSourcingGroupField.SourcingCompany 
        		or SupplyManagementReportSourcingGroupField.SourcingCompany not entered)
        		and (related.SourcingEvent = SupplyManagementReportSourcingGroupField.SourcingEvent
        		or SupplyManagementReportSourcingGroupField.SourcingEvent not entered))

        ContractsForContractComplianceReportRel	
        	one-to-many relation to Contract
        	Field Mapping uses ByContract
        	Instance Selection
        		where ((related.ContractGroup = SupplyManagementReportContractGroupField.ContractGroup  
        		or SupplyManagementReportContractGroupField.ContractGroup not entered)
        		and (related.Contract = SupplyManagementReportContractGroupField.Contract
        		or SupplyManagementReportContractGroupField.Contract not entered)
        		and related.AllowedForContractRebateReporting)
        		

		NonDiversePurchaseOrdersRel
			one-to-many relation to PurchaseOrder
			Field Mapping uses symbolic key
				related.Company					= PurchasingCompany
			Instance Selection
				where ((related.PurchaseOrderDate >= FromDate
				and related.PurchaseOrderDate <= ThruDate)
				and related.Vendor.DiversityCode = blank
				and (related.POCode not entered
				or not related.ExcludeFromReportBasedOnPOCode))
        

        PayablesDiversityCodeForPurchasingRel
        	one-to-many relation to PayablesDiversityCode
        	Field Mapping uses symbolic key
        		related.VendorGroup = SupplyManagementReportVendorGroupField.VendorGroup
        	Instance Selection
        		where (related.VendorDiversityForPurchasingByDiversityCodeRelExists)
        

        PayablesDiversityCodeRel
        	one-to-many relation to PayablesDiversityCode
        	Field Mapping uses symbolic key
        		related.VendorGroup = SupplyManagementReportVendorGroupField.VendorGroup
        	Instance Selection
        		where (related.VendorDiversityRelExists)
        

        VendorsForInvoiceSpendByDiversityCodeRel
        	one-to-many relation to Vendor
			Field Mapping uses symbolic key
				related.VendorGroup	= SupplyManagementReportVendorGroupField.VendorGroup		
			Instance Selection
				where (related.NonDiversePayablesInvoicesByVendorRelExists)	
        					
		SupplierDiversityResponseRel		
			one-to-many relation to PayablesDiversityCode
			Field Mapping uses symbolic key
				related.VendorGroup		= SupplyManagementReportSupplierGroupField.SupplierGroup
			Instance Selection
				where (related.SupplierDiversityReportExists)
		
		NonDiverseSupplierResponseRel	
			one-to-many relation to Supplier
			Field Mapping uses symbolic key
				related.SupplierGroup	= SupplyManagementReportSupplierGroupField.SupplierGroup
			Instance Selection
				where (not related.IsDiversityCertified
				and related.NonDiverseSupplierRelExists
				and (SupplyManagementReportSupplierGroupField.Supplier not entered 
				or	related.Supplier = SupplyManagementReportSupplierGroupField.Supplier))

		CommoditySpendByDiversityCodeRel	
			one-to-many relation to PayablesInvoiceDetail
			Field Mapping uses ByCompanyCommodityCode
				related.Company								= PayablesCompany
			Instance Selection
				where	(related.Company.VendorGroup		= SupplyManagementReportVendorGroupField.VendorGroup
				and		(CommodityCode not entered
				or		related.CommodityCode				= CommodityCode)
				and		related.IsGroupByCommodity)
        					
        VendorsForItemCostVarianceRel 
        	one-to-many relation to Vendor
        	Field Mapping uses symbolic key
        		related.VendorGroup = SupplyManagementReportVendorGroupField.VendorGroup
        	Instance Selection
        		where ((related.Vendor = SupplyManagementReportVendorGroupField.Vendor
        		or SupplyManagementReportVendorGroupField.Vendor not entered))	
        		
        POCodesRel
        	one-to-many relation to POCode
        	Field Mapping uses symbolic key
        		related.ProcurementGroup = ItemGroup
        		
		PurchaseOrdersByDiversityRel				
			one-to-many relation to PurchaseOrder
			Field Mapping uses symbolic key
				related.Company = PurchasingCompany
			Instance Selection
				where (related.IsGroupedByDiversity)
		
		PayablesInvoiceByDiversityRel				
			one-to-many relation to PayablesInvoice
			Field Mapping uses ByVendorGroupVendor
				related.VendorGroup = SupplyManagementReportVendorGroupField.VendorGroup
			Instance Selection
				where (related.IsGroupedByDiversity)
				
		SourcingEventLineResponseByDiversityRel				
			one-to-many relation to SourcingEventLineResponse
			Field Mapping uses BySupplier
				related.NotifiedSupplier.SupplierGroup = SupplyManagementReportSupplierGroupField.SupplierGroup
			Instance Selection
				where (related.IsGroupedByDiversityCode)
        	 					
	Conditions
		HasItemHistoryByVendorReport
			when (ListingReport entered)
	
		EventNotRequired
			restricted
			when (not EventRequired)
			
		IsDiverse
			restricted
			when (SupplierDiversityResponseRel exist)
		
		IsNonDiverse
			restricted
			when (NonDiverseSupplierResponseRel exist)
		
		NonDiverseSupplierResponseRelExists
			restricted
			when (NonDiverseSupplierResponseRel exists)
		
		DisplayInventoriedItems
			restricted
			when ((ItemType.Inventoried
			or	ItemType not entered)
			and ItemHistoryByVendorInventoriedRel exists)

		DisplayNonStockItems
			restricted
			when ((ItemType.NonStock
			or	ItemType not entered)
			and ItemHistoryByVendorNonStockRel exists)

		DisplaySpecialItems	
			restricted
			when ((ItemType.Special
			or	ItemType not entered)
			and ItemHistoryByVendorSpecialRel exists)

		DisplayServiceItems
			restricted
			when ((ItemType.Service
			or	ItemType not entered)
			and ItemHistoryByVendorServiceRel exists)
		
		POCodesRelExists
			restricted
			when (POCodesRel exists)
		
		IncludeAndExclude
			restricted
			when (ReportType.BuyerPerformance
			and  !ReportType.BuyerPerformance)

		ExcludePOCodeOrVendorClass
			restricted
			when (TransientExcludePOCode
			or TransientExcludeVendorClass)
			
		ContractManagementReport
			restricted


			when (ReportType.ContractRebateActivity)


			
		StrategicSourcingReport
			restricted
			when (ReportType.SupplierResponseByCommodityCode










			or    ReportType.AwardHistoryByDiversityCode)

			
		PurchasingReport
			restricted
			when (ReportType.BuyerPerformance
			or    ReportType.CommoditySpendByVendor

			or    ReportType.ItemHistoryByVendor 
			or    ReportType.PurchasingByDiversityCodeCertification


			or	  ReportType.ContractRebateActivity)
			
		ValidForItemHistoryByVendorRerun
			restricted
			when (ReportType.ItemHistoryByVendor
			and   not Private)

	Field Rules
			
		FromDate
			if (ThruDate entered)
				required
		ThruDate
			if (FromDate entered)
				required
			constraint (ThruDate >= FromDate)
        		"ThruDateCannotPrecedeFromDate"

		PrintParameters
			initial value is true
		
		PrintDate 
			default to current timestamp
		
		PrintGraph
			initial value is true

		IncludeInvoiceDetail
			initial value is true

		IncludeVendorDetail
			initial value is true

	Rule Blocks
		ItemHistoryByVendorSendNotification
			
			if (ProcessRuleSecurityRel exists)			
				if (ApplicationAdministratorRoleRel exists)
					send notification
						to LocalActor
						description is "<ItemHistoryByVendorNotifMessageField>"
						priority is high
						detail is "<ItemHistoryByVendorNotifMessageField>"
						linkback(webapp is ApplicationAdministrator navigation is ItemHistoryByVendorView text is "<ItemHistoryByVendorNotifMessageField>")
				
				else		
				if (SupplyManagementProcessorRoleRel exists)
					send notification
						to LocalActor
						description is "<ItemHistoryByVendorNotifMessageField>"
						priority is high
						detail is "<ItemHistoryByVendorNotifMessageField>"
						linkback(webapp is SupplyManagementProcessor navigation is ItemHistoryByVendorView text is "<ItemHistoryByVendorNotifMessageField>")
				else
				if (PurchasingManagerRoleRel exists)
					send notification
						to LocalActor
						description is "<ItemHistoryByVendorNotifMessageField>"
						priority is high
						detail is "<ItemHistoryByVendorNotifMessageField>"
						linkback(webapp is PurchasingManager navigation is ItemHistoryByVendorView text is "<ItemHistoryByVendorNotifMessageField>")				
				else
				if (BuyerRoleRel exists)
					send notification
						to LocalActor
						description is "<ItemHistoryByVendorNotifMessageField>"
						priority is high
						detail is "<ItemHistoryByVendorNotifMessageField>"
						linkback(webapp is Buyer navigation is ItemHistoryByVendorView text is "<ItemHistoryByVendorNotifMessageField>")
			else
				send notification
					to LocalActor
					description is "<ItemHistoryByVendorNotifMessageField>"
					priority is high
					detail is "<ItemHistoryByVendorNotifMessageField>"
					linkback(webapp is ApplicationAdministrator navigation is ItemHistoryByVendorView text is "<ItemHistoryByVendorNotifMessageField>")						

	Actions
		Delete is a Delete Action

		Create is a Create Action
			restricted

		CreateSupplierResponseByCommodityCode is a Create Action
			default label is "SupplierResponse_byCommodityCode"
			Parameters
				PrmSupplierGroup			is a SupplierGroup
					default label is "SupplierGroup"
				PrmDescription				is a Description4
				PrmCommodityCode			is a CommodityCode
				PrmFromDate					is Date
				PrmThruDate					is Date
				PrmIncludeNoBids			is Boolean
					default label is "IncludeNoBids"
				PrmIncludeUnsubmittedBids	is Boolean
					default label is "IncludeUnsubmittedBids"
				PrmPrintParameters			is Boolean
					default label is "PrintParameters"
			Parameter Rules
				PrmSupplierGroup
					required
				PrmPrintParameters
					initial value is true
			Action Rules
				invoke Create this instance
					invoked.SupplyManagementReportSupplierGroupField.SupplierGroup	= PrmSupplierGroup
					invoked.ItemGroup												= PrmSupplierGroup
					invoked.ReportType												= SupplyManagementReportTypes.SupplierResponseByCommodityCode
					invoked.Description												= PrmDescription
					invoked.CommodityCode											= PrmCommodityCode
					invoked.FromDate												= PrmFromDate
					invoked.ThruDate												= PrmThruDate
					invoked.IncludeNoBids											= PrmIncludeNoBids
					invoked.IncludeUnsubmittedBids									= PrmIncludeUnsubmittedBids
					invoked.PrintParameters											= PrmPrintParameters

		CreateExecutiveSummaryReport is a Create Action   
			default label is "ExecutiveSummaryReport"
			Parameters

			 	PrmDescription					is a Description4
























				
		CreateBuyerPerformance is a Create Action
			default label is "BuyerPerformance"
				
			Field Rules
				HROrganization
					default to actor.context.HROrganization
				PurchasingCompany
					required
				Buyer
					required
			Entrance Rules
				ReportType	= ReportType.BuyerPerformance
		
		CreateSupplierBidSuccess is a Create Action  
			default label is "SupplierBidSuccess"
			restricted
			Parameters
				PrmSupplierGroup		is a SupplyManagementReportSupplierGroupField
				PrmDescription			is a Description4
				PrmFromDate				is Date
					default label is "FromDate"
				PrmThruDate				is Date
					default label is "ThruDate"
				PrmPrintParameters		is Boolean
					default label is "PrintParameters"
			Parameter Rules
				PrmSupplierGroup
					required
				PrmPrintParameters
					initial value is true
			Action Rules
				invoke Create this instance
					invoked.ItemGroup													= PrmSupplierGroup.SupplierGroup

					invoked.SupplyManagementReportSupplierGroupField.SupplierGroup		= PrmSupplierGroup.SupplierGroup
					invoked.SupplyManagementReportSupplierGroupField.Supplier			= PrmSupplierGroup.Supplier
					invoked.Description													= PrmDescription
					invoked.FromDate													= PrmFromDate
					invoked.ThruDate													= PrmThruDate
					invoked.PrintParameters												= PrmPrintParameters
				
				
		CreateCommoditySpendByVendor is a Create Action
			default label is "CommoditySpendByVendor"
			Parameters
				PrmVendorGroup					is a SupplyManagementReportVendorGroupField
				PrmDescription					is a Description4
				PrmMatchCompany					is a MatchCompany
					default label is "MatchCompany"
				PrmCommodityCode				is a CommodityCode
					default label is "CommodityCode"
				PrmItemType						is an ItemType
					default label is "ItemType"
				PrmPurchaseOrder				is a PurchaseOrder
					default label is "PurchaseOrder"
				PrmFromDate						is Date
					default label is "FromDate"
				PrmIncludePurchaseOrderDetail	is Boolean
					default label is "IncludePurchaseOrderDetail"
				PrmIncludeInvoiceDetail			is Boolean
					default label is "IncludeInvoiceDetail"
				PrmThruDate						is Date
					default label is "ThruDate"
				PrmPrintGraph					is Boolean
					default label is "PrintGraph"
				PrmPrintParameters				is Boolean
					default label is "PrintParameters"
			Parameter Rules
				PrmVendorGroup
					required
				PrmCommodityCode
					required
				PrmFromDate
					required
				PrmThruDate
					required
					constraint (PrmThruDate >= PrmFromDate)
						"ThruDateCannotPrecedeFromDate"
				PrmPrintParameters
					initial value is true
			Action Rules
				invoke Create this instance
					invoked.ItemGroup											= PrmVendorGroup.VendorGroup
					invoked.ReportType											= SupplyManagementReportTypes.CommoditySpendByVendor
					invoked.SupplyManagementReportVendorGroupField.VendorGroup	= PrmVendorGroup.VendorGroup
					invoked.SupplyManagementReportVendorGroupField.Vendor		= PrmVendorGroup.Vendor
					invoked.Description											= PrmDescription
					invoked.MatchCompany										= PrmMatchCompany
					invoked.CommodityCode										= PrmCommodityCode
					invoked.ItemType											= PrmItemType
					invoked.PurchaseOrder										= PrmPurchaseOrder
					invoked.FromDate											= PrmFromDate
					invoked.IncludePurchaseOrderDetail							= PrmIncludePurchaseOrderDetail
					invoked.IncludeInvoiceDetail								= PrmIncludeInvoiceDetail
					invoked.ThruDate											= PrmThruDate
					invoked.PrintGraph											= PrmPrintGraph
					invoked.PrintParameters										= PrmPrintParameters
		
























		CreateSupplierResponseHistory	is a Create Action  
			default label is "SupplierResponseHistory"
			Parameters
				PrmSupplierGroup						is a SupplyManagementReportSupplierGroupField
				PrmDescription							is a Description4
				PrmFromDate								is Date
				PrmThruDate								is Date
				PrmIncludeDetails						is Boolean
					default label is "IncludeDetails"
				PrmRequireCurrentDiversityCertification	is Boolean
					default label is "RequireCurrentDiversityCertification"
				PrmEditDiversityCertificationDates		is Boolean
					default label is "EditDiversityCertificationDates"
				PrmPrintParameters						is Boolean
					default label is "PrintParameters"
			Parameter Rules
				PrmSupplierGroup
					required
				PrmPrintParameters
					initial value is true
			Action Rules
				invoke Create this instance
					invoked.ItemGroup													= PrmSupplierGroup.SupplierGroup
					invoked.SupplyManagementReportSupplierGroupField.SupplierGroup		= PrmSupplierGroup.SupplierGroup
					invoked.SupplyManagementReportSupplierGroupField.Supplier			= PrmSupplierGroup.Supplier
					invoked.Description													= PrmDescription
					invoked.FromDate													= PrmFromDate
					invoked.ThruDate													= PrmThruDate
					invoked.IncludeDetails												= PrmIncludeDetails
					invoked.RequireCurrentDiversityCertification						= PrmRequireCurrentDiversityCertification
					invoked.EditDiversityCertificationDates								= PrmEditDiversityCertificationDates
					invoked.PrintParameters												= PrmPrintParameters

				
		CreateSupplierParticipation	is a Create Action   
			default label is "SupplierParticipation"
			restricted
			Parameters
				PrmSupplierGroup						is a SupplyManagementReportSupplierGroupField
				PrmDescription							is a Description4
				PrmFromDate								is Date
				PrmThruDate								is Date
				PrmSourcingEvent						is a SupplyManagementReportSourcingGroupField
				PrmRequireCurrentDiversityCertification	is Boolean
					default label is "RequireCurrentDiversityCertification"
				PrmEditDiversityCertificationDates		is Boolean
					default label is "EditDiversityCertificationDates"
				PrmPrintParameters						is Boolean
					default label is "PrintParameters"
			Parameter Rules
				PrmSupplierGroup
					required
				PrmPrintParameters
					initial value is true
			Action Rules
				invoke Create this instance
					invoked.ItemGroup 												= PrmSupplierGroup.SupplierGroup
					invoked.SupplyManagementReportSourcingGroupField.SourcingGroup	= PrmSupplierGroup.SupplierGroup
					invoked.SupplyManagementReportSupplierGroupField.SupplierGroup	= PrmSupplierGroup.SupplierGroup
					invoked.SupplyManagementReportSupplierGroupField.Supplier		= PrmSupplierGroup.Supplier
					invoked.Description												= PrmDescription
					invoked.FromDate												= PrmFromDate
					invoked.ThruDate												= PrmThruDate
					invoked.SupplyManagementReportSourcingGroupField.SourcingEvent	= PrmSourcingEvent
					invoked.RequireCurrentDiversityCertification					= PrmRequireCurrentDiversityCertification
					invoked.EditDiversityCertificationDates							= PrmEditDiversityCertificationDates
					invoked.PrintParameters											= PrmPrintParameters

		
		CreateLineResponseCompare is a Create Action  
			restricted
			default label is "LineResponseCompare"































								


















		
		CreateOffContractPurchasing is a Create Action
			default label is "OffContractPurchasing"
			Field Rules
				ItemGroup
					required
			Entrance Rules

				ManufacturerCode		= TransientManufacturer.ManufacturerCode
				ManufacturerDivision	= TransientManufacturer.ManufacturerDivision
				PurchasingMajorClass	= TransientMajorPurchasingClass
				PurchasingMinorClass	= TransientMinorPurchasingClass

		CreateItemHistoryByVendor is a Create Action
			default label is "ItemHistoryByVendor"
			completion message is "ItemHistoryByVendorReportSubmitted"	
			Parameters
				PrmVendorGroup			is a SupplyManagementReportVendorGroupField
				PrmDescription			is a Description4
				PrmPayablesCompany		is a PayablesCompany
				PrmItemType				is AlphaUpper size 1
					default label is "ItemType"
					States
						Inventoried		value is "I"
						NonStock		value is "N"
						Special			value is "X"
				PrmItem					is an Item
					default label is "Item"
				PrmFromDate				is Date
				PrmThruDate				is Date
				PrmPrintParameters		is Boolean
					default label is "PrintParameters"
				PrmPrintGraph			is Boolean
					default label is "PrintGraph"
				PrmIncludeInvoiceDetail	is Boolean
					default label is "IncludeInvoiceDetail"
			Parameter Rules
				PrmVendorGroup
					required
				PrmPayablesCompany
					required


				PrmFromDate
					required
				PrmThruDate
					required
					constraint (PrmThruDate >= PrmFromDate)
                		"ToInvoiceDateCannotPrecedeFromInvoiceDate"
                PrmPrintParameters
					initial value is true
			Action Rules
				invoke Create this instance
					invoked.ItemGroup 											= PrmVendorGroup.VendorGroup
					invoked.SupplyManagementReportVendorGroupField.VendorGroup	= PrmVendorGroup.VendorGroup
					invoked.SupplyManagementReportVendorGroupField.Vendor		= PrmVendorGroup.Vendor
					invoked.Description											= PrmDescription
					invoked.PayablesCompany										= PrmPayablesCompany
					invoked.ItemType											= PrmItemType
					invoked.Item												= PrmItem
					invoked.FromDate											= PrmFromDate
					invoked.ThruDate											= PrmThruDate
					invoked.PrintParameters										= PrmPrintParameters
					invoked.PrintGraph											= PrmPrintGraph
					invoked.IncludeInvoiceDetail								= PrmIncludeInvoiceDetail
					invoked.ReportType											= SupplyManagementReportTypes.ItemHistoryByVendor
					invoked.PrintDate										= current timestamp
					
			Exit Rules
				invoke CreateItemHistoryRecord
												
		CreateItemHistoryRecord is an Instance Action
			restricted

			Action Rules
				invoke CreateItemHistoryRecord PayablesInvoiceDetail
					invoked.PrmSupplyManagementReport	= SupplyManagementReport
					invoked.PrmVendorGroup				= SupplyManagementReportVendorGroupField.VendorGroup
					invoked.PrmVendor					= SupplyManagementReportVendorGroupField.Vendor
					invoked.PrmPayablesCompany			= PayablesCompany
					invoked.PrmItemType					= ItemType
					invoked.PrmItem						= Item
					invoked.PrmFromDate					= FromDate
					invoked.PrmThruDate					= ThruDate		
		
		GenerateItemHistoryReport	is an Instance Action
			restricted
			Local Fields
				LocalActor		is an Actor				
			
			Parameters
				PrmHasItemHistoryByVendorRecord	is Boolean
				
			Entrance Rules
				
				LocalActor = actor
				if (not PrmHasItemHistoryByVendorRecord)
					send notification
						to LocalActor
						description is "<ItemHistoryByVendorNoDataMessageField>"
						priority is medium
						detail is "<ItemHistoryByVendorNoDataMessageField>"
			
			Action Rules
				if (PrmHasItemHistoryByVendorRecord)
					Private = true
					generate document ItemHistoryByVendor as pdf in portrait font offset is -2
						set using action SetListingReport
			
		SetListingReport	is an Instance Action
			restricted
			Local Fields
				LocalActor		is an Actor
			Parameters
				Report is BinaryDocument
			
			Action Rules
				ListingReport = Report
				
			Exit Rules
				if (ListingReport entered)
					LocalActor = actor
					include ItemHistoryByVendorSendNotification
					initialize Private		
		
		CreateEventResponseListing is a Create Action  
		
		CreateContractCompliance is a Create Action
			default label is "ContractCompliance"
			Parameters
				PrmContractGroup			is a SupplyManagementReportContractGroupField
				PrmDescription				is a Description4
				PrmOnOffContract			is Boolean
				PrmAbovePercentageVariance	is Percent size 21.2
					default label is "AbovePercentageVariance"
				PrmAboveAmountVariance		is an InternationalAmount
					default label is "AboveAmountVariance"
				PrmPrintParameters			is Boolean
					default label is "PrintParameters"
			Parameter Rules
				PrmContractGroup
					required
				PrmPrintParameters
					initial value is true				
			Action Rules
				invoke Create this instance
					invoked.ItemGroup	= PrmContractGroup.ContractGroup
					invoked.SupplyManagementReportContractGroupField.ContractGroup	= PrmContractGroup.ContractGroup
					invoked.SupplyManagementReportContractGroupField.Contract		= PrmContractGroup.Contract
					invoked.Description												= PrmDescription
					invoked.OnOffContract											= PrmOnOffContract
					invoked.AbovePercentageVariance									= PrmAbovePercentageVariance
					invoked.AboveAmountVariance										= PrmAboveAmountVariance
					invoked.PrintParameters											= PrmPrintParameters







		
		CreateAwardHistoryByDiversityCode is a Create Action
			default label is "AwardHistoryByDiversityCode"
			Parameters
				PrmSupplierGroup						is a SupplyManagementReportSupplierGroupField
				PrmDescription							is a Description4
				PrmFromDate								is Date
				PrmThruDate								is Date
				PrmEditDiversityCertificationDates		is Boolean
					default label is "EditDiversityCertificationDates"
				PrmRequireCurrentDiversityCertification	is Boolean
					default label is "RequireCurrentDiversityCertification"
				PrmSupplierDetail						is Boolean
				PrmPrintGraph							is Boolean
				PrmPrintParameters						is Boolean
					default label is "PrintParameters"
			Parameter Rules
				PrmSupplierGroup
					required
				PrmFromDate
					required
				PrmThruDate
					required
				PrmPrintParameters
					initial value is true
			Action Rules
				invoke Create this instance
					invoked.ItemGroup	= PrmSupplierGroup.SupplierGroup
					invoked.SupplyManagementReportSupplierGroupField.SupplierGroup	= PrmSupplierGroup.SupplierGroup
					invoked.SupplyManagementReportSupplierGroupField.Supplier		= PrmSupplierGroup.Supplier
					invoked.Description												= PrmDescription
					invoked.FromDate												= PrmFromDate
					invoked.ThruDate												= PrmThruDate
					invoked.EditDiversityCertificationDates							= PrmEditDiversityCertificationDates
					invoked.RequireCurrentDiversityCertification					= PrmRequireCurrentDiversityCertification
					invoked.SupplierDetail											= PrmSupplierDetail
					invoked.PrintGraph												= PrmPrintGraph
					invoked.PrintParameters											= PrmPrintParameters
					invoked.ReportType												= SupplyManagementReportTypes.AwardHistoryByDiversityCode
		
		CreateContractRebateActivity is a Create Action
			default label is "ContractRebateActivity"
			Parameters
				PrmContractGroup	is a SupplyManagementReportContractGroupField
				PrmDescription		is a Description4
				PrmFromDate			is Date
				PrmThruDate			is Date
				PrmPrintParameters	is Boolean
					default label is "PrintParameters"
			Parameter Rules
				PrmContractGroup
					required
				PrmPrintParameters
					initial value is true				
			Action Rules
				invoke Create this instance
					invoked.ItemGroup													= PrmContractGroup.ContractGroup
					invoked.SupplyManagementReportContractGroupField.ContractGroup		= PrmContractGroup.ContractGroup
					invoked.SupplyManagementReportContractGroupField.Contract			= PrmContractGroup.Contract
					invoked.SupplyManagementReportContractGroupField.ContractRebateType	= PrmContractGroup.ContractRebateType
					invoked.Description													= PrmDescription
					invoked.FromDate													= PrmFromDate
					invoked.ThruDate													= PrmThruDate
					invoked.PrintParameters												= PrmPrintParameters
					invoked.ReportType													= SupplyManagementReportTypes.ContractRebateActivity
					
		CreatePurchasingByDiversityCodeCertification is a Create Action
			default label is "PurchasingByDiversityCodeCertification"			
			Field Rules
				ItemGroup
					ItemGroup = SupplyManagementReportSourcingGroupField.SourcingGroup
					required
						"SourcingGroupIsRequired"
				PurchasingCompany
					required
				FromDate
					required
				ThruDate
					required
			Entrance Rules
				ReportType	= ReportType.PurchasingByDiversityCodeCertification
				






































		
		CreateItemCostVariance is a Create Action
			default label is "ItemCostVariance"
			Parameters
				PrmVendorGroup								is a SupplyManagementReportVendorGroupField
				PrmDescription								is a Description4
				PrmFromDate									is Date
				PrmThruDate									is Date
				PrmItemGroup								is an ItemGroup
				PrmItem										is an Item
					default label is "Item"
				PrmPurchasingMajorClass						is AlphaUpper size 4
				PrmPurchasingMinorClass						is AlphaUpper size 4
				PrmManufacturerCode							is a ManufacturerCode
					default label is "ManufacturerCode"
				PrmManufacturerDivision						is a ManufacturerDivision
					default label is "ManufacturerDivision"
				PrmCommodityCode							is a CommodityCode
				PrmUNSPSCCode								is a UNSPSCCode
				PrmIncludeOnlyPurchasesWithVendorAgreement	is Numeric size 1
					default label is "IncludeOnlyPurchasesWithVendorAgreement"
				PrmAbovePercentageVariance					is Percent size 21.2
				PrmAboveAmountVariance						is an InternationalAmount
				PrmIncludeDetails							is Boolean
				PrmPrintParameters							is Boolean
			Parameter Rules
				PrmVendorGroup
					required
				PrmIncludeOnlyPurchasesWithVendorAgreement
					default to 1
				PrmPrintParameters
					initial value is true				
			Action Rules
				invoke Create this instance
					invoked.ItemGroup											= PrmVendorGroup.VendorGroup
					invoked.SupplyManagementReportVendorGroupField.VendorGroup	= PrmVendorGroup.VendorGroup
					invoked.SupplyManagementReportVendorGroupField.Vendor		= PrmVendorGroup.Vendor
					invoked.Description											= PrmDescription
					invoked.FromDate											= PrmFromDate
					invoked.ThruDate											= PrmThruDate
					invoked.Item												= PrmItem
					invoked.PurchasingMajorClass								= PrmPurchasingMajorClass
					invoked.PurchasingMinorClass								= PrmPurchasingMinorClass
					invoked.ManufacturerCode									= PrmManufacturerCode
					invoked.ManufacturerDivision								= PrmManufacturerDivision
					invoked.CommodityCode										= PrmCommodityCode
					invoked.UNSPSCCode											= PrmUNSPSCCode
					invoked.IncludeOnlyPurchasesWithVendorAgreement				= PrmIncludeOnlyPurchasesWithVendorAgreement
					invoked.AbovePercentageVariance								= PrmAbovePercentageVariance
					invoked.AboveAmountVariance									= PrmAboveAmountVariance
					invoked.IncludeDetails										= PrmIncludeDetails
					invoked.PrintParameters										= PrmPrintParameters

		
		CreateContractTierDetail is a Create Action
			default label is "ContractTierDetail"
			Parameters
				PrmContractGroup	is a SupplyManagementReportContractGroupField
				PrmDescription		is a Description4
			Parameter Rules
				PrmContractGroup
					required
						"ContractGroupIsRequired"
			Action Rules
				invoke Create this instance
					invoked.ItemGroup												= PrmContractGroup.ContractGroup
					invoked.SupplyManagementReportContractGroupField.ContractGroup	= PrmContractGroup.ContractGroup
					invoked.SupplyManagementReportContractGroupField.Contract		= PrmContractGroup.Contract
					invoked.Description												= PrmDescription

		
		CreateCommoditySpendByDiversityCode is a Create Action   
			restricted 
			default label is "CommoditySpendByDiversityCode"
			Parameters
				PrmVendorGroup			is a SupplyManagementReportVendorGroupField
				PrmDescription			is a Description4
				PrmPayablesCompany		is a PayablesCompany
				PrmItemType				is an ItemType
					default label is "ItemType"
				PrmItem					is an Item
					default label is "Item"
				PrmCommodityCode		is a CommodityCode
				PrmFromDate				is Date
				PrmThruDate				is Date
				PrmPrintParameters		is Boolean
					default label is "PrintParameters"
				PrmIncludeInvoiceDetail	is Boolean
					default label is "IncludeInvoiceDetail"
			Parameter Rules
				PrmVendorGroup
					required
				PrmPayablesCompany
					required
				PrmFromDate
					required
				PrmThruDate
					required
					constraint (PrmThruDate >= PrmFromDate)
						"ToInvoiceDateCannotPrecedeFromInvoiceDate"
				PrmPrintParameters
					initial value is true
			Action Rules
				invoke Create this instance
					invoked.ItemGroup											= PrmVendorGroup.VendorGroup
					invoked.SupplyManagementReportVendorGroupField.VendorGroup	= PrmVendorGroup.VendorGroup
					invoked.Description											= PrmDescription
					invoked.PayablesCompany										= PrmPayablesCompany
					invoked.ItemType											= PrmItemType
					invoked.Item												= PrmItem
					invoked.CommodityCode										= PrmCommodityCode
					invoked.FromDate											= PrmFromDate
					invoked.ThruDate											= PrmThruDate
					invoked.PrintParameters										= PrmPrintParameters
					invoked.IncludeInvoiceDetail								= PrmIncludeInvoiceDetail
					invoked.ReportType											= SupplyManagementReportTypes.CommoditySpendByDiversityCode
					invoked.PrintDate										= current timestamp
		

		
		RerunSupplierResponseByCommodityCode is an Update Action
			valid when (ReportType.SupplierResponseByCommodityCode)
			default label is "RerunSupplierResponseByCommodityCode"
			Action Rules
				PrintDate	= current timestamp

		RerunExecutiveSummaryReport is an Update Action  
			valid when (ReportType.ExecutiveSummaryReport)
			default label is "RerunExecutiveSummaryReport"
			Action Rules
				PrintDate	= current timestamp

		RerunBuyerPerformance is an Update Action
			valid when (ReportType.BuyerPerformance)
			default label is "RerunBuyerPerformance"
			Action Rules
				PrintDate	= current timestamp

		RerunSupplierBidSuccess is an Update Action  

			default label is "RerunSupplierBidSuccess"
			Action Rules
				PrintDate	= current timestamp

		RerunCommoditySpendByVendor is an Update Action
			valid when (ReportType.CommoditySpendByVendor)
			default label is "RerunCommoditySpendByVendor"
			Action Rules
				PrintDate	= current timestamp
		






		RerunSupplierResponseHistory is an Update Action  

			default label is "RerunSupplierResponseHistory"
			Action Rules
				PrintDate	= current timestamp

		RerunSupplierParticipation	is an Update Action  

			default label is "RerunSupplierParticipation"
			Action Rules
				PrintDate	= current timestamp

		RerunLineResponseCompare is an Update Action  

			default label is "RerunLineResponseCompare"
			Action Rules
				PrintDate	= current timestamp







		RerunOffContractPurchasing is an Update Action

			default label is "RerunOffContractPurchasing"
			Action Rules
				PrintDate	= current timestamp

		RerunItemHistoryByVendor is an Update Action
			valid when (ValidForItemHistoryByVendorRerun)
			default label is "RerunItemHistoryByVendor"
			completion message is "ItemHistoryByVendorReportSubmitted" 
			Local Fields
				LocalActor		is an Actor	
			Action Rules
				PrintDate	= current timestamp
				
				if (ListingReport entered)
					LocalActor = actor
					include ItemHistoryByVendorSendNotification
				else
					invoke GenerateItemHistoryReport
						if (ItemHistoryByVendorReportItemTypeRel exists)
							invoked.PrmHasItemHistoryByVendorRecord		= true

		RerunEventResponseListing is an Update Action

			default label is "RerunEventResponseListing"
			Action Rules
				PrintDate	= current timestamp

		RerunContractCompliance is an Update Action

			default label is "RerunContractCompliance"
			Action Rules
				PrintDate	= current timestamp






		RerunAwardHistoryByDiversityCode is an Update Action
			valid when (ReportType.AwardHistoryByDiversityCode)
			default label is "RerunAwardHistoryByDiversityCode"
			Action Rules
				PrintDate	= current timestamp

		RerunContractRebateActivity is an Update Action
			valid when (ReportType.ContractRebateActivity)
			default label is "RerunContractRebateActivity"
			Action Rules
				PrintDate	= current timestamp

		RerunPurchasingByDiversityCodeCertification is an Update Action
			valid when (ReportType.PurchasingByDiversityCodeCertification)
			default label is "RerunPurchasingByDiversityCodeCertification"
			Action Rules
				PrintDate	= current timestamp

		RerunInvoiceSpendByDiversityCodeCertification is an Update Action  

			default label is "RerunInvoiceSpendByDiversityCodeCertification"
			Action Rules
				PrintDate	= current timestamp

		RerunItemCostVariance is an Update Action

			default label is "RerunItemCostVariance"
			Action Rules
				PrintDate	= current timestamp

		RerunContractTierDetail is an Update Action

			default label is "RerunContractTierDetail"
			Action Rules
				PrintDate	= current timestamp

		RerunCommoditySpendByDiversityCode is an Update Action 
			restricted 
			default label is "RerunCommoditySpendByDiversityCode"
			Action Rules
				PrintDate	= current timestamp
