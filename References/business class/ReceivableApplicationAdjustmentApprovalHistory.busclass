ReceivableApplicationAdjustmentApprovalHistory is a BusinessClass
	owned by ar
	prefix is RAAAH
	sql name is "RAAdjustmentApprovalHistory"
	
	Ontology
		symbolic key is ReceivableApplicationAdjustmentApprovalHistory
		
	Patterns
		implements Archivable
			
	Persistent Fields
		ActionTaken			is Numeric 2
			States
				Approved			value is 1
				Rejected			value is 2
				Submitted			value is 3

		ActionDate			is TimeStamp
		ActionTakenBy		is an Employee
			delete ignored
		Comment				is Alpha size up to 500
		ActionReason		is AlphaUpper 20

	Derived Fields	
		DerivedResourceTeamDisplay is a DerivedField
			type is Alpha 250
			default label is "Team/\Resource"
			if (ActionTakenBy entered)
				if (FinanceResourceExists)
					return FinanceResourceRel.PreferredSimplePresentationName
				else
					return ActionTakenBy.PresentationNameSnapshot
			else
				return ""

		DerivedResourceTeamInitials is a DerivedField
			type is AlphaUpper 3
			restricted
			if (ActionTakenBy entered)
				if (FinanceResourceExists)
					return FinanceResourceRel.PreferredSimplePresentationName
				else
					return ActionTakenBy.PresentationNameSnapshot
			else
				return "SYS"	


	Field Rules
		ActionDate
			default to current timestamp
			
		ActionTakenBy
			default to actor.agent(Employee).Employee	

	Conditions
		FinanceResourceExists
			restricted
			when (FinanceResourceRel exists)

	Relations
		FinanceResourceRel
			one-to-one relation to FinanceResource
			Field Mapping uses symbolic key
				related.HROrganization		= ActionTakenBy.HROrganization
				related.FinanceResource		= ActionTakenBy	

																																	
	Actions
        Create is a Create Action
			restricted

		Update is an Update Action
			restricted
		
        Delete is a Purge Action
			restricted	
