AverageDailyBalanceAggregate is a BusinessClass
    owned by ad
    prefix is ADBAP

    Ontology
    	symbolic key is AverageDailyBalanceAggregate

    Patterns
 		implements DynamicCreation
		implements LightweightAuditing
		disable AuditIndex
 		disable EffectiveDated
		disable AsOfDateProcessing 		

    Persistent Fields
        ADBDimension1					is like AccountingUnit
        ADBDimension2					is like AccountingUnit
        ADBDimension3					is like AccountingUnit
		BalanceOnPostDate				is an InternationalAmount
        	default label is "FunctionalAggregateOnPostDate"
 			disable Auditing
 			precision is AccountingEntity.FunctionalCurrency.NumberOfDecimals
		BalanceOnTransactionDate		is an InternationalAmount
			default label is "FunctionalAggregateOnTransactionDate"
 			disable Auditing
 			precision is AccountingEntity.FunctionalCurrency.NumberOfDecimals
        TransactionLedger						is like Ledger
	        default label is "Ledger"
	    TransactionCurrency						is like Currency
        OnPostDateTransactionAmount				is a InternationalAmount
        	default label is "TransactionAggregateOnPostDate"
 			disable Auditing
        	precision is TransactionCurrencyDecimals
        OnPostDateAlternateAmount1				is a InternationalAmount	
			precision is AccountingEntity.AlternateCurrency.NumberOfDecimals
 			disable Auditing
        	default label is "Alternate1AggregateOnPostDate"
        OnPostDateAlternateAmount2				is a InternationalAmount
        	precision is AccountingEntity.AlternateCurrency2.NumberOfDecimals
 			disable Auditing
        	default label is "Alternate2AggregateOnPostDate"
        OnPostDateAlternateAmount3				is a InternationalAmount
        	precision is AccountingEntity.AlternateCurrency3.NumberOfDecimals
 			disable Auditing
        	default label is "Alternate3AggregateOnPostDate"
		OnPostDateReportAmount1					is a InternationalAmount	
			default label is "Reporting1AggregateOnPostDate"
 			disable Auditing
			precision is FinanceEnterpriseGroup.ReportCurrencyOne.NumberOfDecimals
		OnPostDateReportAmount2					is a InternationalAmount
			default label is "Reporting2AggregateOnPostDate"
 			disable Auditing
			precision is FinanceEnterpriseGroup.ReportCurrencyTwo.NumberOfDecimals
		OnPostDateReportAmount3					is a InternationalAmount
			default label is "Reporting3AggregateOnPostDate"
 			disable Auditing
			precision is FinanceEnterpriseGroup.ReportCurrencyThree.NumberOfDecimals
		OnPostDateReportAmount4					is a InternationalAmount
			default label is "Reporting4AggregateOnPostDate"
 			disable Auditing
			precision is FinanceEnterpriseGroup.ReportCurrencyFour.NumberOfDecimals
		OnPostDateReportAmount5					is a InternationalAmount
			default label is "Reporting5AggregateOnPostDate"
 			disable Auditing
			precision is FinanceEnterpriseGroup.ReportCurrencyFive.NumberOfDecimals

	Transient Fields
		PrmBalanceOnPostDate			is an InternationalAmount
        	default label is "FunctionalAggregateOnPostDate"
		PrmBalanceOnTransactionDate		is an InternationalAmount
			default label is "FunctionalAggregateOnTransactionDate"
        PrmOnPostDateTransactionAmount	is a InternationalAmount
        	default label is "TransactionAggregateOnPostDate"
        PrmOnPostDateAlternateAmount1	is a InternationalAmount	
        	default label is "Alternate1AggregateOnPostDate"
        PrmOnPostDateAlternateAmount2	is a InternationalAmount
        	default label is "Alternate2AggregateOnPostDate"
        PrmOnPostDateAlternateAmount3	is a InternationalAmount
        	default label is "Alternate3AggregateOnPostDate"
		PrmOnPostDateReportAmount1		is a InternationalAmount	
			default label is "Reporting1AggregateOnPostDate"
		PrmOnPostDateReportAmount2		is a InternationalAmount
			default label is "Reporting2AggregateOnPostDate"
		PrmOnPostDateReportAmount3		is a InternationalAmount
			default label is "Reporting3AggregateOnPostDate"
		PrmOnPostDateReportAmount4		is a InternationalAmount
			default label is "Reporting4AggregateOnPostDate"
		PrmOnPostDateReportAmount5		is a InternationalAmount
			default label is "Reporting5AggregateOnPostDate"
		TransientTransactionLedger		is a Ledger
			default label is "Ledger"
			derive value from DerivedTransactionLedger
		TransientTransactionCurrency	is a Currency
			default label is "TransactionCurrency"
			derive value from DerivedTransactionCurrency

	Derived Fields
		DerivedTransactionLedger		is a DerivedField
			type is like Ledger
			restricted
			if (FinanceEnterpriseGroup.IncludeLedgerInAverageDailyBalance)
				return TransactionLedger
		DerivedTransactionCurrency		is a DerivedField
			type is like Currency
			restricted
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				return TransactionCurrency

		LedgerDescription				is a DerivedField
			type is like Description
			if (FinanceEnterpriseGroup.IncludeLedgerInAverageDailyBalance)
				LocalLedger = TransactionLedger
				if (LocalLedger exists)
					return LocalLedger.Description
			else
				return ""
		NoOfDays						is a DerivedField
			type is Numeric 4 
			if (ReportingBasis.ADBRunDate		< AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.DerivedEndDate)
				return ((ReportingBasis.ADBRunDate - AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.DerivedStartDate) + 1)
			else
				return ((AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.DerivedEndDate - AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.DerivedStartDate) + 1)
		AverageOnPostDate				is a DerivedField
			type is like InternationalAmount
	 			precision is AccountingEntity.FunctionalCurrency.NumberOfDecimals
	 		default label is "FunctionalAverageOnPostDate"
			return (BalanceOnPostDate / NoOfDays)
		AverageOnTransactionDate		is a DerivedField
			type is like InternationalAmount 
 				precision is AccountingEntity.FunctionalCurrency.NumberOfDecimals
	 		default label is "FunctionalAverageOnTransactionDate"
			return (BalanceOnTransactionDate / NoOfDays)

		YTDNoOfDays						is a DerivedField
			type is Numeric 4
			if (ReportingBasis.ADBRunDate < AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.DerivedEndDate)
				return ((ReportingBasis.ADBRunDate - CalendarYearTypeYearRel.DerivedStartDate) + 1)
			else
				return ((AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.DerivedEndDate - CalendarYearTypeYearRel.DerivedStartDate) + 1)

		YTDAggregateOnPostDate is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.FunctionalCurrency.NumberOfDecimals
			default label is "YTDFunctionalAggregateOnPostDate"
			if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
				return BalanceOnPostDate
			else
				LocalFromStartDateNumeric  = CalendarYearTypeYearRel.StartDateNumeric
				LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Quarter)
					LocalPeriodType            = 2
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					LocalPeriodType            = 3
				return sum PeriodToDateAggregateRel.BalanceOnPostDate

		YTDAverageOnPostDate is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.FunctionalCurrency.NumberOfDecimals
			default label is "YTDFunctionalAverageOnPostDate"
			if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
				return AverageOnPostDate
			else
				return (YTDAggregateOnPostDate / YTDNoOfDays)

		QTDNoOfDays						is a DerivedField
			type is Numeric 4
			if (ReportingBasis.ADBRunDate < AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.DerivedEndDate)
				return ((ReportingBasis.ADBRunDate - CalendarQuarterPeriodRel.DerivedStartDate) + 1)
			else
				return ((AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.DerivedEndDate - CalendarQuarterPeriodRel.DerivedStartDate) + 1)

		QTDAggregateOnPostDate is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.FunctionalCurrency.NumberOfDecimals
			default label is "QTDFunctionalAggregateOnPostDate"
			if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
				LocalFromStartDateNumeric  = CalendarQuarterPeriodRel.StartDateNumeric
				LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
				LocalPeriodType            = 3
				return sum PeriodToDateAggregateRel.BalanceOnPostDate
			else
				return BalanceOnPostDate

		QTDAverageOnPostDate is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.FunctionalCurrency.NumberOfDecimals
			default label is "QTDFunctionalAverageOnPostDate"
			if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
				return (QTDAggregateOnPostDate / QTDNoOfDays)
			else
				return AverageOnPostDate


		TransactionCurrencyDecimals is a DerivedField
			type is Numeric 1
			restricted
			LocalCurrencyCode = TransactionCurrency
			return LocalCurrencyCode.NumberOfDecimals
		AverageOnPostDateTranAmount				is a DerivedField
			type is like InternationalAmount
				precision is TransactionCurrencyDecimals
			default label is "TransactionAverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				return (OnPostDateTransactionAmount / NoOfDays)
		YTDAggregateOnPostDateTranAmount is a DerivedField
			type is like InternationalAmount 
				precision is TransactionCurrencyDecimals
			default label is "YTDTransactionAggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return OnPostDateTransactionAmount
				else
					LocalFromStartDateNumeric  = CalendarYearTypeYearRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Quarter)
						LocalPeriodType            = 2
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
						LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateTransactionAmount
		YTDAverageOnPostDateTranAmount is a DerivedField
			type is like InternationalAmount 
				precision is TransactionCurrencyDecimals
			default label is "YTDTransactionAverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return AverageOnPostDateTranAmount
				else
					return (YTDAggregateOnPostDateTranAmount / YTDNoOfDays)
		QTDAggregateOnPostDateTranAmount is a DerivedField
			type is like InternationalAmount 
				precision is TransactionCurrencyDecimals
			default label is "QTDTransactionAggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					LocalFromStartDateNumeric  = CalendarQuarterPeriodRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateTransactionAmount
				else
					return OnPostDateTransactionAmount
		QTDAverageOnPostDateTranAmount is a DerivedField
			type is like InternationalAmount 
				precision is TransactionCurrencyDecimals
			default label is "QTDTransactionAverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					return (QTDAggregateOnPostDateTranAmount / QTDNoOfDays)
				else
					return AverageOnPostDateTranAmount

		AverageOnPostDateAlternateAmount1				is a DerivedField
			type is like InternationalAmount
				precision is AccountingEntity.AlternateCurrency.NumberOfDecimals
			default label is "Alternate1AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				return (OnPostDateAlternateAmount1 / NoOfDays)
		YTDAggregateOnPostDateAlternateAmount1 is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.AlternateCurrency.NumberOfDecimals
			default label is "YTDAlternate1AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return OnPostDateAlternateAmount1
				else
					LocalFromStartDateNumeric  = CalendarYearTypeYearRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Quarter)
						LocalPeriodType            = 2
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
						LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateAlternateAmount1
		YTDAverageOnPostDateAlternateAmount1 is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.AlternateCurrency.NumberOfDecimals
			default label is "YTDAlternate1AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return AverageOnPostDateAlternateAmount1
				else
					return (YTDAggregateOnPostDateAlternateAmount1 / YTDNoOfDays)
		QTDAggregateOnPostDateAlternateAmount1 is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.AlternateCurrency.NumberOfDecimals
			default label is "QTDAlternate1AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					LocalFromStartDateNumeric  = CalendarQuarterPeriodRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateAlternateAmount1
				else
					return OnPostDateAlternateAmount1
		QTDAverageOnPostDateAlternateAmount1 is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.AlternateCurrency.NumberOfDecimals
			default label is "QTDAlternate1AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					return (QTDAggregateOnPostDateAlternateAmount1 / QTDNoOfDays)
				else
					return AverageOnPostDateAlternateAmount1

		AverageOnPostDateAlternateAmount2				is a DerivedField
			type is like InternationalAmount
				precision is AccountingEntity.AlternateCurrency2.NumberOfDecimals
			default label is "Alternate2AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				return (OnPostDateAlternateAmount2 / NoOfDays)
		YTDAggregateOnPostDateAlternateAmount2 is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.AlternateCurrency2.NumberOfDecimals
			default label is "YTDAlternate2AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return OnPostDateAlternateAmount2
				else
					LocalFromStartDateNumeric  = CalendarYearTypeYearRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Quarter)
						LocalPeriodType            = 2
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
						LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateAlternateAmount2
		YTDAverageOnPostDateAlternateAmount2 is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.AlternateCurrency2.NumberOfDecimals
			default label is "YTDAlternate2AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return AverageOnPostDateAlternateAmount2
				else
					return (YTDAggregateOnPostDateAlternateAmount2 / YTDNoOfDays)
		QTDAggregateOnPostDateAlternateAmount2 is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.AlternateCurrency2.NumberOfDecimals
			default label is "QTDAlternate2AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					LocalFromStartDateNumeric  = CalendarQuarterPeriodRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateAlternateAmount2
				else
					return OnPostDateAlternateAmount2
		QTDAverageOnPostDateAlternateAmount2 is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.AlternateCurrency2.NumberOfDecimals
			default label is "QTDAlternate2AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					return (QTDAggregateOnPostDateAlternateAmount2 / QTDNoOfDays)
				else
					return AverageOnPostDateAlternateAmount2

		AverageOnPostDateAlternateAmount3				is a DerivedField
			type is like InternationalAmount
				precision is AccountingEntity.AlternateCurrency3.NumberOfDecimals
			default label is "Alternate3AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				return (OnPostDateAlternateAmount3 / NoOfDays)
		YTDAggregateOnPostDateAlternateAmount3 is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.AlternateCurrency3.NumberOfDecimals
			default label is "YTDAlternate3AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return OnPostDateAlternateAmount3
				else
					LocalFromStartDateNumeric  = CalendarYearTypeYearRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Quarter)
						LocalPeriodType            = 2
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
						LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateAlternateAmount3
		YTDAverageOnPostDateAlternateAmount3 is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.AlternateCurrency3.NumberOfDecimals
			default label is "YTDAlternate3AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return AverageOnPostDateAlternateAmount3
				else
					return (YTDAggregateOnPostDateAlternateAmount3 / YTDNoOfDays)
		QTDAggregateOnPostDateAlternateAmount3 is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.AlternateCurrency3.NumberOfDecimals
			default label is "QTDAlternate3AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					LocalFromStartDateNumeric  = CalendarQuarterPeriodRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateAlternateAmount3
				else
					return OnPostDateAlternateAmount3
		QTDAverageOnPostDateAlternateAmount3 is a DerivedField
			type is like InternationalAmount 
				precision is AccountingEntity.AlternateCurrency3.NumberOfDecimals
			default label is "QTDAlternate3AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					return (QTDAggregateOnPostDateAlternateAmount3 / QTDNoOfDays)
				else
					return AverageOnPostDateAlternateAmount3

		AverageOnPostDateReportAmount1				is a DerivedField
			type is like InternationalAmount
				precision is FinanceEnterpriseGroup.ReportCurrencyOne.NumberOfDecimals
			default label is "Reporting1AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				return (OnPostDateReportAmount1 / NoOfDays)
		YTDAggregateOnPostDateReportAmount1 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyOne.NumberOfDecimals
			default label is "YTDReporting1AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return OnPostDateReportAmount1
				else
					LocalFromStartDateNumeric  = CalendarYearTypeYearRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Quarter)
						LocalPeriodType            = 2
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
						LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateReportAmount1
		YTDAverageOnPostDateReportAmount1 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyOne.NumberOfDecimals
			default label is "YTDReporting1AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return AverageOnPostDateReportAmount1
				else
					return (YTDAggregateOnPostDateReportAmount1 / YTDNoOfDays)
		QTDAggregateOnPostDateReportAmount1 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyOne.NumberOfDecimals
			default label is "QTDReporting1AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					LocalFromStartDateNumeric  = CalendarQuarterPeriodRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateReportAmount1
				else
					return OnPostDateReportAmount1
		QTDAverageOnPostDateReportAmount1 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyOne.NumberOfDecimals
			default label is "QTDReporting1AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					return (QTDAggregateOnPostDateReportAmount1 / QTDNoOfDays)
				else
					return AverageOnPostDateReportAmount1

		AverageOnPostDateReportAmount2				is a DerivedField
			type is like InternationalAmount
				precision is FinanceEnterpriseGroup.ReportCurrencyTwo.NumberOfDecimals
			default label is "Reporting2AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				return (OnPostDateReportAmount2 / NoOfDays)
		YTDAggregateOnPostDateReportAmount2 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyTwo.NumberOfDecimals
			default label is "YTDReporting2AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return OnPostDateReportAmount2
				else
					LocalFromStartDateNumeric  = CalendarYearTypeYearRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Quarter)
						LocalPeriodType            = 2
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
						LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateReportAmount2
		YTDAverageOnPostDateReportAmount2 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyTwo.NumberOfDecimals
			default label is "YTDReporting2AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return AverageOnPostDateReportAmount2
				else
					return (YTDAggregateOnPostDateReportAmount2 / YTDNoOfDays)
		QTDAggregateOnPostDateReportAmount2 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyTwo.NumberOfDecimals
			default label is "QTDReporting2AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					LocalFromStartDateNumeric  = CalendarQuarterPeriodRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateReportAmount2
				else
					return OnPostDateReportAmount2
		QTDAverageOnPostDateReportAmount2 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyTwo.NumberOfDecimals
			default label is "QTDReporting2AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					return (QTDAggregateOnPostDateReportAmount2 / QTDNoOfDays)
				else
					return AverageOnPostDateReportAmount2

		AverageOnPostDateReportAmount3				is a DerivedField
			type is like InternationalAmount
				precision is FinanceEnterpriseGroup.ReportCurrencyThree.NumberOfDecimals
			default label is "Reporting3AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				return (OnPostDateReportAmount3 / NoOfDays)
		YTDAggregateOnPostDateReportAmount3 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyThree.NumberOfDecimals
			default label is "YTDReporting3AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return OnPostDateReportAmount3
				else
					LocalFromStartDateNumeric  = CalendarYearTypeYearRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Quarter)
						LocalPeriodType            = 2
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
						LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateReportAmount3
		YTDAverageOnPostDateReportAmount3 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyThree.NumberOfDecimals
			default label is "YTDReporting3AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return AverageOnPostDateReportAmount3
				else
					return (YTDAggregateOnPostDateReportAmount3 / YTDNoOfDays)
		QTDAggregateOnPostDateReportAmount3 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyThree.NumberOfDecimals
			default label is "QTDReporting3AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					LocalFromStartDateNumeric  = CalendarQuarterPeriodRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateReportAmount3
				else
					return OnPostDateReportAmount3
		QTDAverageOnPostDateReportAmount3 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyThree.NumberOfDecimals
			default label is "QTDReporting3AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					return (QTDAggregateOnPostDateReportAmount3 / QTDNoOfDays)
				else
					return AverageOnPostDateReportAmount3

		AverageOnPostDateReportAmount4				is a DerivedField
			type is like InternationalAmount
				precision is FinanceEnterpriseGroup.ReportCurrencyFour.NumberOfDecimals
			default label is "Reporting4AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				return (OnPostDateReportAmount4 / NoOfDays)
		YTDAggregateOnPostDateReportAmount4 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyFour.NumberOfDecimals
			default label is "YTDReporting4AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return OnPostDateReportAmount4
				else
					LocalFromStartDateNumeric  = CalendarYearTypeYearRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Quarter)
						LocalPeriodType            = 2
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
						LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateReportAmount4
		YTDAverageOnPostDateReportAmount4 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyFour.NumberOfDecimals
			default label is "YTDReporting4AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return AverageOnPostDateReportAmount4
				else
					return (YTDAggregateOnPostDateReportAmount4 / YTDNoOfDays)
		QTDAggregateOnPostDateReportAmount4 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyFour.NumberOfDecimals
			default label is "QTDReporting4AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					LocalFromStartDateNumeric  = CalendarQuarterPeriodRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateReportAmount4
				else
					return OnPostDateReportAmount4
		QTDAverageOnPostDateReportAmount4 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyFour.NumberOfDecimals
			default label is "QTDReporting4AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					return (QTDAggregateOnPostDateReportAmount4 / QTDNoOfDays)
				else
					return AverageOnPostDateReportAmount4

		AverageOnPostDateReportAmount5				is a DerivedField
			type is like InternationalAmount
				precision is FinanceEnterpriseGroup.ReportCurrencyFive.NumberOfDecimals
			default label is "Reporting5AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				return (OnPostDateReportAmount5 / NoOfDays)
		YTDAggregateOnPostDateReportAmount5 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyFive.NumberOfDecimals
			default label is "YTDReporting5AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return OnPostDateReportAmount5
				else
					LocalFromStartDateNumeric  = CalendarYearTypeYearRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Quarter)
						LocalPeriodType            = 2
					if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
						LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateReportAmount5
		YTDAverageOnPostDateReportAmount5 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyFive.NumberOfDecimals
			default label is "YTDReporting5AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Year)
					return AverageOnPostDateReportAmount5
				else
					return (YTDAggregateOnPostDateReportAmount5 / YTDNoOfDays)
		QTDAggregateOnPostDateReportAmount5 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyFive.NumberOfDecimals
			default label is "QTDReporting5AggregateOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					LocalFromStartDateNumeric  = CalendarQuarterPeriodRel.StartDateNumeric
					LocalToStartDateNumeric    = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
					LocalPeriodType            = 3
					return sum PeriodToDateAggregateRel.OnPostDateReportAmount5
				else
					return OnPostDateReportAmount5
		QTDAverageOnPostDateReportAmount5 is a DerivedField
			type is like InternationalAmount 
				precision is FinanceEnterpriseGroup.ReportCurrencyFive.NumberOfDecimals
			default label is "QTDReporting5AverageOnPostDate"
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				if (AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.PeriodType.Month)
					return (QTDAggregateOnPostDateReportAmount5 / QTDNoOfDays)
				else
					return AverageOnPostDateReportAmount5

	Local Fields
		LocalFromStartDateNumeric		is Numeric 7
		LocalToStartDateNumeric			is Numeric 7
		LocalPeriodType					is Numeric 1
		LocalLedger						is a Ledger
		LocalCurrencyCode				is a Currency

	Relations
		AverageDailyBalanceAmountRel	
			one-to-many relation to AverageDailyBalanceAmount
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup								= FinanceEnterpriseGroup
				related.ReportingBasis										= ReportingBasis
				related.AccountingEntity									= AccountingEntity
				related.AverageDailyBalanceAmount.GeneralLedgerChartAccount	= AverageDailyBalanceAggregate.GeneralLedgerChartAccount
				related.AverageDailyBalanceAmount.DimensionCode				= AverageDailyBalanceAggregate.DimensionCode
				related.AverageDailyBalanceAmount.RunDate 					>=  AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.DerivedStartDate
			Instance Selection
				where (related.AverageDailyBalanceAmount.RunDate <=  AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.DerivedEndDate)

		CalendarYearTypeYearRel	
		    one-to-many relation to GeneralLedgerCalendarPeriod
		    Field Mapping uses ByTopNode
		        related.FinanceEnterpriseGroup = FinanceEnterpriseGroup
		        related.TopNode                = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.TopNode
		        related.Year                   = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.Year
		        related.PeriodType             = 1	
		
		CalendarQuarterPeriodRel 
		    one-to-many relation to GeneralLedgerCalendarPeriod
		    Field Mapping uses ByTopNode
		        related.FinanceEnterpriseGroup = FinanceEnterpriseGroup
		        related.TopNode                = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.TopNode
		        related.Year                   = AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.Year
		        related.PeriodType             = 2 
			Instance Selection
				where (related.StartDateNumeric <= AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.StartDateNumeric
				and    related.EndDateNumeric   >= AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.EndDateNumeric)

		PeriodToDateAggregateRel
		    one-to-many relation to AverageDailyBalanceAggregate
		    Field Mapping uses symbolic key
		        related.FinanceEnterpriseGroup 										= FinanceEnterpriseGroup
		        related.ReportingBasis         										= ReportingBasis
		        related.AccountingEntity       										= AccountingEntity
		        related.AverageDailyBalanceAggregate.GeneralLedgerChartAccount		= AverageDailyBalanceAggregate.GeneralLedgerChartAccount
		        related.AverageDailyBalanceAggregate.DimensionCode					= AverageDailyBalanceAggregate.DimensionCode
		        related.AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod 	= any CalendarPeriodWithinPeriodType.GeneralLedgerCalendarPeriod

		CalendarPeriodWithinPeriodType
		    one-to-many relation to GeneralLedgerCalendarPeriod
		    Field Mapping uses ByTopNode
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.TopNode						= ReportingBasis.GeneralLedgerCalendar.TopNode
				related.Year						= AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.Year
				related.PeriodType					= LocalPeriodType
		    Instance Selection
		        where (related.StartDateNumeric >= LocalFromStartDateNumeric
		        and    related.StartDateNumeric <= LocalToStartDateNumeric)

		SubordinateLedgerHierarchyRel
			one-to-one relation to LedgerHierarchy
			Field Mapping uses SubordinateInTopNode
				related.FinanceEnterpriseGroup       = FinanceEnterpriseGroup
				related.TopNode           			 = ReportingBasis.LedgerTopNode
				related.SubordinateLedger  			 = TransactionLedger

	Conditions
		LedgerForBasis
			restricted
			when (SubordinateLedgerHierarchyRel exists)

	Sets				
		ByGeneralLedgerCalendarPeriod
			Sort Order
				FinanceEnterpriseGroup
				ReportingBasis
				AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod
				AccountingEntity
				AverageDailyBalanceAggregate.GeneralLedgerChartAccount
				ADBDimension1
				ADBDimension2
				ADBDimension3
				AverageDailyBalanceAggregate.DimensionCode

		ByEntityAccountADBDimensions
			Sort Order
				FinanceEnterpriseGroup
				ReportingBasis
				AccountingEntity
				AverageDailyBalanceAggregate.GeneralLedgerChartAccount
				ADBDimension1
				ADBDimension2
				ADBDimension3
				AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod
				AverageDailyBalanceAggregate.DimensionCode

	Field Rules

	Rule Blocks
		UpdateAggregateAmount
			BalanceOnPostDate				+= PrmBalanceOnPostDate
			BalanceOnTransactionDate		+= PrmBalanceOnTransactionDate
			if (FinanceEnterpriseGroup.CalculateADBOption.AllCurrencyAmounts)
				OnPostDateTransactionAmount		+= PrmOnPostDateTransactionAmount
				OnPostDateAlternateAmount1		+= PrmOnPostDateAlternateAmount1
				OnPostDateAlternateAmount2		+= PrmOnPostDateAlternateAmount2
				OnPostDateAlternateAmount3		+= PrmOnPostDateAlternateAmount3
				OnPostDateReportAmount1			+= PrmOnPostDateReportAmount1
				OnPostDateReportAmount2			+= PrmOnPostDateReportAmount2
				OnPostDateReportAmount3			+= PrmOnPostDateReportAmount3
				OnPostDateReportAmount4			+= PrmOnPostDateReportAmount4
				OnPostDateReportAmount5			+= PrmOnPostDateReportAmount5
			initialize PrmBalanceOnPostDate
			initialize PrmBalanceOnTransactionDate
			initialize PrmOnPostDateTransactionAmount
			initialize PrmOnPostDateAlternateAmount1
			initialize PrmOnPostDateAlternateAmount2
			initialize PrmOnPostDateAlternateAmount3
			initialize PrmOnPostDateReportAmount1
			initialize PrmOnPostDateReportAmount2
			initialize PrmOnPostDateReportAmount3
			initialize PrmOnPostDateReportAmount4
			initialize PrmOnPostDateReportAmount5

	Actions
		Create is a Create Action
			default label is untranslatable
			restricted
			bypass field rules
			Action Rules
				include UpdateAggregateAmount

		Update is an Update Action
			default label is untranslatable
			restricted
			bypass field rules
			Action Rules
				include UpdateAggregateAmount

		Delete is a Delete Action
			default label is untranslatable
			restricted
			Action Rules

		DeleteData is a Set Action
			default label is untranslatable
			restricted
			Parameters
				PrmFinanceEnterpriseGroup	is like FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
				PrmReportingBasis			is like ReportingBasis
					default label is "ReportingBasis"
			Instance Selection
				where (FinanceEnterpriseGroup		= PrmFinanceEnterpriseGroup
				and	   ReportingBasis				= PrmReportingBasis)
			Set Is
				PrmFinanceEnterpriseGroup
				PrmReportingBasis
			Action Rules
				Empty Set Rules
				Instance Rules
					invoke Delete 

		Purge is a Purge Action
			default label is untranslatable
			restricted

		PurgeData is a Set Action
			default label is untranslatable
			restricted
			Parameters
				PrmFinanceEnterpriseGroup		is a FinanceEnterpriseGroup
				PrmReportingBasis				is a ReportingBasis
				PrmAccount						is like GeneralLedgerChartAccount
				PrmFiscalYear					is like GeneralLedgerCloseYear
				PrmAccountingEntity				is like AccountingEntity
				PrmDimension1					is like AccountingUnit
				PrmDimension2					is like AccountingUnit
				PrmDimension3					is like AccountingUnit
				PrmAccountToPurge				is a ADBAccountType		
				PrmIncludeFutureYears			is Boolean

			Instance Selection
				where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and    (PrmAccountingEntity         not entered or PrmAccountingEntity = AccountingEntity)
				and    (PrmReportingBasis           not entered or PrmReportingBasis   = ReportingBasis)
				and    (PrmAccount                  not entered or PrmAccount          = AverageDailyBalanceAggregate.GeneralLedgerChartAccount)
				and    (PrmDimension1               not entered or PrmDimension1       = ADBDimension1)
				and    (PrmDimension2               not entered or PrmDimension2       = ADBDimension2)
				and    (PrmDimension3               not entered or PrmDimension3       = ADBDimension3)
				and    (PrmFiscalYear               not entered
				or      ((not PrmIncludeFutureYears and AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.Year  = PrmFiscalYear)
				or       (PrmIncludeFutureYears     and AverageDailyBalanceAggregate.GeneralLedgerCalendarPeriod.Year >= PrmFiscalYear))))

			Action Rules
				Instance Rules
					invoke Purge
