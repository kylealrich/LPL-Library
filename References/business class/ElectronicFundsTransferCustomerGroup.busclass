ElectronicFundsTransferCustomerGroup is a BusinessClass
    owned by ar
    prefix is FTG
    sql name is EFundsTransferCustomerGroup
    classic name is FTCUSTGRP

    Ontology
        symbolic key is ElectronicFundsTransferCustomerGroup
            classic set name is FTGSET1
            classic name for ElectronicFundsTransferCustomerGroup.CreditCustomer is CR-CUSTOMER
            classic name for CustomerGroup is CUST-GROUP

    Patterns
        implements StaticJava
        disable AuditIndex

	Field Rules
		ElectronicFundsTransferCustomerGroup.CreditCustomer				
			constraint (!ElectronicFundsTransferCustomerGroupRel exists)
				"CannotEnterData;CustomerPartOf_\E\F\TGroup"               


			constraint (ElectronicFundsTransferCustomerGroup.CreditCustomer != ElectronicFundsTransferCustomerGroup.Customer)
				"CannotEnterElectronicFundsCustomerAsCustomer"    
		


		ElectronicFundsTransferCustomerGroup.Customer				
			constraint (!ElectronicFundsTransferCustomerGroupRel exists)
				"CannotEnterData;CustomerPartOf_\E\F\TGroup"               


			constraint (ElectronicFundsTransferCustomerGroup.Customer != ElectronicFundsTransferCustomerGroup.CreditCustomer)
				"CannotEnterElectronicFundsCustomerAsCustomer"   


	Conditions
		ElectronicFundsTransferCustomerGroupRelExists
			restricted
			when (ElectronicFundsTransferCustomerGroupRel exists)





		EligibleGroupCustomer
			restricted
			when (ReceivableElectronicFundsTransferNotifyRel exists
			and   CustomerGroup.EFTProcessingLevel = "G")		


	Relations

        EFTCustomerGroupsRel		
        	one-to-many relation to ElectronicFundsTransferCustomerGroup
        	Field Mapping uses Set2
        		related.ElectronicFundsTransferCustomerGroup.Customer = ElectronicFundsTransferCustomerGroup.CreditCustomer
        		related.ElectronicFundsTransferCustomerGroup.Company  = ElectronicFundsTransferCustomerGroup.Company
                related.CustomerGroup								  = CustomerGroup

        CustomerDraftBanksRel
			one-to-many relation to CustomerDraftBank
			Field Mapping uses Set4
				related.CustomerGroup				= CustomerGroup
				related.Company						= ElectronicFundsTransferCustomerGroup.Company
				related.Customer					= ElectronicFundsTransferCustomerGroup.Customer

        EFTNotifyRecordsRel
			one-to-many relation to ReceivableElectronicFundsTransferNotify
			Field Mapping uses symbolic key
				related.CustomerGroup			= CustomerGroup
				related.Company					= ElectronicFundsTransferCustomerGroup.Company
				related.Customer				= ElectronicFundsTransferCustomerGroup.Customer
				
		EFTCustomerGroupChildsRel
			one-to-many relation to ElectronicFundsTransferCustomerGroup
			Field Mapping uses Set2
				related.ElectronicFundsTransferCustomerGroup.Customer	= ElectronicFundsTransferCustomerGroup.Customer
				related.ElectronicFundsTransferCustomerGroup.Company	= ElectronicFundsTransferCustomerGroup.Company
                related.CustomerGroup									= CustomerGroup
		
		EFTCustomerGroupParentsRel
			one-to-many relation to ElectronicFundsTransferCustomerGroup
			Field Mapping uses symbolic key
				related.CustomerGroup 									= CustomerGroup
            Instance Selection
            	where (related.ElectronicFundsTransferCustomerGroup.Company	= ElectronicFundsTransferCustomerGroup.Company
				and    related.ElectronicFundsTransferCustomerGroup.CreditCustomer	= ElectronicFundsTransferCustomerGroup.Customer)

        ElectronicFundsTransferCustomerGroupRel		
            one-to-many relation to	 ElectronicFundsTransferCustomerGroup
            Field Mapping uses Set2	
                related.ElectronicFundsTransferCustomerGroup.Customer = ElectronicFundsTransferCustomerGroup.CreditCustomer
                related.ElectronicFundsTransferCustomerGroup.Company  = blank	
                related.CustomerGroup								  = CustomerGroup










        ReceivableElectronicFundsTransferNotifyRel		
            one-to-one relation to	 ReceivableElectronicFundsTransferNotify
            Field Mapping uses symbolic key		

                related.CustomerGroup											= CustomerGroup

                related.Company													= blank	

                related.Customer												= ElectronicFundsTransferCustomerGroup.CreditCustomer











    Sets

        Set2
            indexed
            Sort Order
                ElectronicFundsTransferCustomerGroup.Customer
                ElectronicFundsTransferCustomerGroup.Company
                CustomerGroup
                ElectronicFundsTransferCustomerGroup.CreditCustomer

	Actions
		Create is a Create Action
			Entrance Rules
				constraint (!ElectronicFundsTransferCustomerGroupRel exists)
					"CannotEnterData;CustomerPartOf_\E\F\TGroup"			           
                constraint (!EFTCustomerGroupsRel exists)			
					"CannotEnterData;CustomerPartOf_\E\F\TGroup"
				constraint (!EFTCustomerGroupChildsRel exists)
					"CustomerAlreadyPartOfAnEFTCustomerGroup"
				constraint (!EFTCustomerGroupParentsRel exists)			           
					"CustomerOwnsAnEFTCustomerGroup"
				constraint (!CustomerDraftBanksRel exists)
					"EFTBankRecordExistsCannotBePartOfEFTGroup"
				constraint (!EFTNotifyRecordsRel exists)
					"CannotBePartOfEFTGroup;EFTNotificationRecordExists"

		Update is an Update Action
		Delete is a Delete Action
