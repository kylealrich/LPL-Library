CustomerCompanyGroupMember is a BusinessClass
    owned by ar
    prefix is CCGE

    Ontology
        symbolic key is CustomerCompanyGroupMember

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields
		ReceivableDefaultCode
        Sequence is Numeric size 4

	Conditions
		SecurityGroupAllowsAccess
			restricted
			when (Company.SecurityGroupAllowsAccess)

	Relations
		OtherCompaniesInGroupRel
			one-to-many relation to CustomerCompanyGroupMember
			Field Mapping uses symbolic key
				related.CustomerCompanyGroup = CustomerCompanyGroup
			Instance Selection
				where (related.Company != Company)

	Field Rules
		ReceivableDefaultCode
			required

    Sets

        Set1
            indexed
            Sort Order
                Company
                CustomerCompanyGroup 

        Set2
            indexed
            Sort Order
                CustomerCompanyGroup 
                Company

	Actions
		Create is a Create Action
			Field Rules
				Sequence
					increment CustomerCompanyGroup.LastSequence
					Sequence = CustomerCompanyGroup.LastSequence
			Action Rules
				if (OtherCompaniesInGroupRel exists)
					constraint (Company.FinanceEnterpriseGroup = first OtherCompaniesInGroupRel.Company.FinanceEnterpriseGroup)
						"CanOnlyIncludeReceivableCompaniesAssociatedWith_Finance_Enterprise_Group"

					constraint (Company.CustomerGroupField.CustomerGroup  = first OtherCompaniesInGroupRel.Company.CustomerGroupField.CustomerGroup)
						"CanOnlyIncludeReceivableCompaniesAssociatedWithTheSameCustomerGroup<first OtherCompaniesInGroupRel.Company.CustomerGroupField.CustomerGroup>"

		Update is an Update Action

		Delete is a Delete Action

    			        		
		
