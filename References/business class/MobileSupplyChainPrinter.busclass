MobileSupplyChainPrinter is a BusinessClass
	owned by mscm
	
	prefix is MSPRI
	
	Ontology
		symbolic key is MobileSupplyChainPrinter
	
	Patterns
	
	Persistent Fields
        PrinterType             is Numeric 1
            States
                Label       value is 1
                Report      value is 2
        Hostname                is Alpha 256
        Port                    is Numeric 6
        Protocol                is Numeric 1
            States
                FTP         value is 1
                LPR         value is 2
                RAWSOCKET   value is 3
        LPRServer               is Alpha 30
    	Language				is Numeric 1
    		States
    			ZPL2		value is 1
    			IPL			value is 2     
        MaxRetries              is Numeric 2
        RetryTimeout            is Numeric 5
        Active
        Mobile                  is Boolean
    	
				
	Context Fields		
		ContextCompany is a Company
			
	Field Rules
		PrinterType
			required
		Hostname
			required
		Port
			if (IsLabelPrinter)
				required
			initial value is 9100
		Protocol
			if (IsLabelPrinter)
				required
			initial value is Protocol.RAWSOCKET
		Language
			if (IsLabelPrinter)
				required
			initial value is Language.ZPL2
		LPRServer
			if (not IsLabelPrinter)
				initialize LPRServer
			
	Conditions
		IsLabelPrinter
			restricted
			when (PrinterType.Label)
		
		RecordExists
			restricted
			when (MobileSupplyChainPrinter exists)
		
		CompanyPrinterExists
			restricted
			when (MobileSupplyChainCompanyPrinterRel exists)
		
		AccessiblePrinterToCompany
			restricted
			when (ContextCompany exists
			and   ValidCompanyPrinterRel exists)	

		ShowReportPrinterDefaultsPanel
			restricted
			when (MobileSupplyChainCompanyPrinterRel exists
			and   PrinterType.Report)

		ShowLabelPrinterDefaultsPanel
			restricted
			when (MobileSupplyChainCompanyPrinterRel exists
			and   PrinterType.Label)
		
		HasValidCompanyPrinter
			restricted
			when (ValidCompanyPrinterRel exists)
		
	Relations
		ValidCompanyPrinterRel
			one-to-many relation to MobileSupplyChainCompanyPrinter
			Field Mapping uses symbolic key
				related.Company = ContextCompany
				related.MobileSupplyChainPrinter = MobileSupplyChainPrinter				

        ReportPrinterMobileSupplyChainLocationRel
            one-to-many relation to MobileSupplyChainLocation
            Field Mapping uses ByDefaultReportPrinter
                related.DefaultReportPrinter = MobileSupplyChainPrinter
		
		LabelPrinterMobileSupplyChainLocationRel
			one-to-many relation to MobileSupplyChainLocation
			Field Mapping uses ByDefaultLabelPrinter
				related.DefaultLabelPrinter = MobileSupplyChainPrinter

		ReportPrinterUnassignedMobileSupplyChainLocationsRel
			one-to-many relation to MobileSupplyChainLocation
			Field Mapping uses symbolic key
			Instance Selection
				where (related.Company 				 = any MobileSupplyChainCompanyPrinterRel.Company
				and    related.DefaultReportPrinter != MobileSupplyChainPrinter)

		LabelPrinterUnassignedMobileSupplyChainLocationsRel
			one-to-many relation to MobileSupplyChainLocation
			Field Mapping uses symbolic key
			Instance Selection
				where (related.Company 				= any MobileSupplyChainCompanyPrinterRel.Company
				and    related.DefaultLabelPrinter != MobileSupplyChainPrinter)
				
		ReportPrinterResourceAccessRel
			one-to-many relation to MobileSupplyChainResourceAccessPrinter
			Field Mapping uses ByDefaultReportResourceAccessPrinter
				related.DefaultReportPrinter = MobileSupplyChainPrinter
		
		LabelPrinterResourceAccessRel
			one-to-many relation to MobileSupplyChainResourceAccessPrinter
			Field Mapping uses ByDefaultLabelResourceAccessPrinter
				related.DefaultLabelPrinter = MobileSupplyChainPrinter

		MobileSupplyChainCompanyPrinterRel
			one-to-many relation to MobileSupplyChainCompanyPrinter
			Field Mapping uses ByPrinter
				related.MobileSupplyChainPrinter = MobileSupplyChainPrinter

				
	Actions
		Create is a Create Action
		
		Update is an Update Action
		
		Delete is a Delete Action

	
