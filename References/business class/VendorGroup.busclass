VendorGroup is a BusinessClass
	owned by ap
	prefix is VGP
	classic name is APVENGROUP

	Ontology
		symbolic key is VendorGroup
			classic set name is VGPSET1

	Patterns
		implements StaticJava
		disable AuditIndex
		implements BODId
	Context Fields
		VendorBalanceDate
		PayablesInvoice
		PayablesCompany
		FSMInboundBODTracker

	Persistent Fields
		Description
		AuditVendor                		is Boolean
			classic name is VENDOR-AUDIT
		LastVendor				   		is like Vendor
			disable Auditing
		OneTimeVendorClass		   		is a VendorClass
		ManualPaymentHoldCode      		is a PayablesHoldCode
			classic name is MANP-HOLD
		CreditBalanceHoldCode      		is a PayablesHoldCode
			classic name is CRED-HOLD
		PrepaymentHoldCode         		is a PayablesHoldCode
			classic name is PREP-HOLD
		ReturnOnInvestmentHoldCode 		is a PayablesHoldCode
			classic name is ROI-HOLD
		MaximumPaymentHoldCode     		is a PayablesHoldCode
			classic name is MAXP-HOLD
		RetainageHoldCode          		is a PayablesHoldCode
			classic name is RET-HOLD
		MinimumPaymentHoldCode     		is a PayablesHoldCode
			classic name is MINP-HOLD
		TaxToleranceHoldCode			is a PayablesHoldCode		
		PeriodEndingDates          		is a PerEndDateX13InApvengroup
			classic name is PER-END-DATE
		ValidateOFAC					is Boolean
		OFACCompareThreshold			is Decimal size 25.5

		DistributionEntryOnApproval		is Boolean
			default label is "AllowDistributionEntryDuringInvoiceApproval"


		UsingDocMgmtSystem				is Boolean
			default label is "UsingDocumentManagementSystem"
		DocMgmtPartner					is Numeric 2
			default label is "DocumentManagementPartner"
			States
				HylandSoftware					value is 1
				MHCSoftware						value is 2
				AscendSoftware					value is 3
				PerceptiveSoftware				value is 4
				Other							value is 9
		DocMgmtSystemKey				is Alpha 30
			default label is "DocumentManagementSystemKey"
		StoreDocumentLocally			is Boolean
		InvoiceApprovalEmailSubject		is Alpha 100
			Text Variables
 				Company							value is PayablesInvoice.Company
				Invoice							value is PayablesInvoice.Invoice
 				VendorName						value is PayablesInvoice.Vendor.VendorName
 				VendorID						value is PayablesInvoice.Vendor							
 				InvoiceAmount					value is PayablesInvoice.InvoiceAmount.CurrencyAmount	
 				InvoiceDate						value is PayablesInvoice.InvoiceDate					
 				DueDate							value is PayablesInvoice.DueDate						
				InvoiceURL						value is PayablesInvoice.InvoiceURL						
		InvoiceApprovalEmailContent		is RichText
			Text Variables
 				Invoice							value is PayablesInvoice.Invoice
 				VendorID						value is PayablesInvoice.Vendor	
 				VendorName						value is PayablesInvoice.Vendor.VendorName
 				Company							value is PayablesInvoice.Company
 				InvoiceDate						value is PayablesInvoice.InvoiceDate
 				DueDate							value is PayablesInvoice.DueDate
 				InvoiceAmount					value is PayablesInvoice.InvoiceAmount.CurrencyAmount
 				InvoiceCurrency					value is PayablesInvoice.InvoiceCurrency
 				PurchaseOrder					value is PayablesInvoice.first MatchPurchaseOrderInvoicesRel.PurchaseOrder	
 				DiscountDate					value is PayablesInvoice.DiscountDate
 				PaymentTerms					value is PayablesInvoice.TermsCode
 				APClerkName						value is PayablesInvoice.APClerk.PreferredSimplePresentationName
 				Description						value is PayablesInvoice.Description
 				CurrentApproverName				value is PayablesInvoice.ResponsiblePerson.PreferredSimplePresentationName
 				Voucher							value is PayablesInvoice.VoucherNumber		
 				PostDate						value is PayablesInvoice.DistributionDate	
				InvoiceURL						value is PayablesInvoice.InvoiceURL						
		InvoiceApprovedEmailSubject		is Alpha 100
			Text Variables
 				Company							value is PayablesInvoice.Company
				Invoice							value is PayablesInvoice.Invoice
 				VendorName						value is PayablesInvoice.Vendor.VendorName
 				VendorID						value is PayablesInvoice.Vendor							
 				InvoiceAmount					value is PayablesInvoice.InvoiceAmount.CurrencyAmount	
 				InvoiceDate						value is PayablesInvoice.InvoiceDate					
 				DueDate							value is PayablesInvoice.DueDate					
				InvoiceURL						value is PayablesInvoice.InvoiceURL						
		InvoiceApprovedEmailContent		is RichText
			Text Variables
 				Invoice							value is PayablesInvoice.Invoice
 				VendorID						value is PayablesInvoice.Vendor	
 				VendorName						value is PayablesInvoice.Vendor.VendorName
 				Company							value is PayablesInvoice.Company
 				InvoiceDate						value is PayablesInvoice.InvoiceDate
 				DueDate							value is PayablesInvoice.DueDate
 				InvoiceAmount					value is PayablesInvoice.InvoiceAmount.CurrencyAmount
 				InvoiceCurrency					value is PayablesInvoice.InvoiceCurrency
 				PurchaseOrder					value is PayablesInvoice.first MatchPurchaseOrderInvoicesRel.PurchaseOrder	
 				DiscountDate					value is PayablesInvoice.DiscountDate
 				PaymentTerms					value is PayablesInvoice.TermsCode
 				APClerkName						value is PayablesInvoice.APClerk.PreferredSimplePresentationName
 				Description						value is PayablesInvoice.Description
 				CurrentApproverName				value is PayablesInvoice.ResponsiblePerson.PreferredSimplePresentationName
 				Voucher							value is PayablesInvoice.VoucherNumber		
 				PostDate						value is PayablesInvoice.DistributionDate	
				InvoiceURL						value is PayablesInvoice.InvoiceURL						
		InvoiceApprovalIncludeLink		is Boolean
			default label is "IncludeLinkToReviewInvoice"
		InvoiceApprovalIncludeRelatedDocs	is Boolean
			default label is "IncludeAllRelatedDocuments"
		InvoiceRejectEmailSubject		is Alpha 100
			Text Variables
 				Invoice							value is PayablesInvoice.Invoice
 				VendorName						value is PayablesInvoice.Vendor.VendorName
				Company							value is PayablesInvoice.Company
				VendorID						value is PayablesInvoice.Vendor
				InvoiceURL						value is PayablesInvoice.InvoiceURL						
		InvoiceRejectEmailContent		is RichText
			Text Variables
 				Invoice							value is PayablesInvoice.Invoice
 				VendorID						value is PayablesInvoice.Vendor	
 				VendorName						value is PayablesInvoice.Vendor.VendorName
 				Company							value is PayablesInvoice.Company
 				InvoiceDate						value is PayablesInvoice.InvoiceDate
 				DueDate							value is PayablesInvoice.DueDate
 				InvoiceAmount					value is PayablesInvoice.InvoiceAmount.CurrencyAmount
 				InvoiceCurrency					value is PayablesInvoice.InvoiceCurrency
 				PurchaseOrder					value is PayablesInvoice.first MatchPurchaseOrderInvoicesRel.PurchaseOrder	
 				DiscountDate					value is PayablesInvoice.DiscountDate
 				PaymentTerms					value is PayablesInvoice.TermsCode
 				APClerkName						value is PayablesInvoice.APClerk.PreferredSimplePresentationName
 				Description						value is PayablesInvoice.Description
 				CurrentApproverName				value is PayablesInvoice.ResponsiblePerson.PreferredSimplePresentationName
				InvoiceURL						value is PayablesInvoice.InvoiceURL						
		InvoiceRejectIncludeRelatedDocs	is Boolean
			default label is "IncludeAllRelatedDocuments"
		InvoiceApprovedIncludeRelatedDocs is Boolean
			default label is "IncludeAllRelatedDocuments"
		InvoiceEmailSubject				is Alpha 100
			Text Variables
 				Invoice							value is PayablesInvoice.Invoice
 				VendorName						value is PayablesInvoice.Vendor.VendorName
		InvoiceEmailContent				is RichText
			Text Variables
 				Invoice							value is PayablesInvoice.Invoice
 				VendorID						value is PayablesInvoice.Vendor	
 				VendorName						value is PayablesInvoice.Vendor.VendorName
 				Company							value is PayablesInvoice.Company
 				InvoiceDate						value is PayablesInvoice.InvoiceDate
 				DueDate							value is PayablesInvoice.DueDate
 				InvoiceAmount					value is PayablesInvoice.InvoiceAmount.CurrencyAmount
 				InvoiceCurrency					value is PayablesInvoice.InvoiceCurrency
 				PurchaseOrder					value is PayablesInvoice.first MatchPurchaseOrderInvoicesRel.PurchaseOrder	
 				DiscountDate					value is PayablesInvoice.DiscountDate
 				PaymentTerms					value is PayablesInvoice.TermsCode
 				APClerkName						value is PayablesInvoice.APClerk.PreferredSimplePresentationName
 				Description						value is PayablesInvoice.Description
 				CurrentApproverName				value is PayablesInvoice.ResponsiblePerson.PreferredSimplePresentationName
				InvoiceURL						value is PayablesInvoice.InvoiceURL						
		InvoiceEmailIncludeRelatedDocs	is Boolean
			default label is "IncludeAllRelatedDocuments"
		CorporateCalendar					is a SystemCalendar
		LogoImageMaximumSize				is Numeric 8
		LogoImageUOM						is Numeric 1
			States
				Bytes			value is 0
				Kilobytes		value is 1
				Megabytes		value is 2
		DiversityValidWhenCertificationComplete  is Boolean
		DiversityValidWhenWithinDates            is Boolean
		DiversityValidWhenHasAttachment          is Boolean
		LastErrorRunGroupNumber					 is Numeric 8
			disable Auditing
		InvoicePostDateDefaultOption			 is Numeric 1		
			States
				InvoiceDate				value is 0
				CurrentDate				value is 1
		InvoiceNumberEdit					is Numeric 2
			States
				CompanyVendor			value is 0
				VendorGroupVendor		value is 1
		UseIDMInVendorStatement									is Boolean
			default label is "UseIDMTemplate"
		VendorStatementTemplate									is an IDMTemplate
			default label is "VendorStatement"
		IDMOutputSettingsForVendorStatement						is an IDMOutputSettings
			protected
			restricted
		GlobalWithholding										is Boolean

		VendorXfrefReference1					is Boolean
			default label is "Reference1"
		VendorXfrefReference2					is Boolean
			default label is "Reference2"
		VendorXfrefTaxID						is Boolean
			default label is "TaxID"
		VendorXfrefVATRegistrationNumber		is Boolean
			default label is "VATRegistrationNumber"
		VendorXfrefVendorAccount				is Boolean
			default label is "VendorAccount"
		VendorXfrefEDINumber					is Boolean
			default label is "EDINumber"
		VendorXfrefLegacyVendor					is Boolean
			default label is "LegacyVendor"
		VendorXfrefGLN							is Boolean
			default label is "GlobalLocationNumber"
		Reference1Order 	 					is a VendorXrefOrder
		Reference2Order          	 			is a VendorXrefOrder
		TaxIDOrder		 						is a VendorXrefOrder
		VATRegistrationNumberOrder			 	is a VendorXrefOrder
		VendorAccountOrder			 			is a VendorXrefOrder
		EDINumberOrder 							is a VendorXrefOrder
		LegacyVendorOrder 						is a VendorXrefOrder
		GLNOrder 								is a VendorXrefOrder

		RemittanceAdviceFromEmailAddress        is an EmailAddress 
			holds pii
		EnableUS1099IDMForms					is Boolean 	
			default label is "UseIDM1099Forms"
		VendorOffset						is Boolean		
		VendorBankCode1Label					is Alpha 25		
			translatable
		VendorBankCode2Label					is Alpha 25		
			translatable
		VendorBankCode3Label					is Alpha 25		
			translatable
		VendorBankCode4Label					is Alpha 25		
			translatable
		VendorBankCode5Label					is Alpha 25		
			translatable
		VendorBankCode6Label					is Alpha 25		
			translatable
		VendorBankCode7Label					is Alpha 25		
			translatable
		VendorBankCode8Label					is Alpha 25		
			translatable
		VendorBankCode9Label					is Alpha 25		
			translatable
		VendorBankCode10Label					is Alpha 25		
			translatable
		VendorBankCode11Label					is Alpha 25		
			translatable
		VendorBankCode12Label					is Alpha 25		
			translatable
		VendorBankCode13Label					is Alpha 25		
			translatable
		VendorBankCode14Label					is Alpha 25		
			translatable
		VendorBankCode15Label					is Alpha 25		
			translatable
		VendorBankCode16Label					is Alpha 25		
			translatable
		VendorBankCode17Label					is Alpha 25		
			translatable
		VendorBankCode18Label					is Alpha 25		
			translatable
		VendorBankCode19Label					is Alpha 25		
			translatable
		VendorBankCode20Label					is Alpha 25		
			translatable
		ProcessRoutingRulesByHierarchy			is Boolean		
		EnforceMaxInvoiceApprovalAmount			is Boolean		
		EditForPayToVendor 						is Boolean		
		RequireReasonCodeForManualInvoiceApproval	is Boolean		
		IDMBackgroundGroupAsyncId				is an AsyncActionRequest
			protected
		
	Transient Fields
		TransientOneTimeClass						is like VendorClass
		TransientManualPaymentHoldCode      		is like PayablesHoldCode
		TransientCreditBalanceHoldCode      		is like PayablesHoldCode
		TransientPrepaymentHoldCode         		is like PayablesHoldCode
		TransientReturnOnInvestmentHoldCode 		is like PayablesHoldCode
		TransientMaximumPaymentHoldCode     		is like PayablesHoldCode
		TransientRetainageHoldCode          		is like PayablesHoldCode
		TransientMinimumPaymentHoldCode     		is like PayablesHoldCode
		TransientTaxToleranceHoldCode	 	 		is like PayablesHoldCode
		EvaluateRoutingRulesOnDistributionCreate	is Boolean			
			derive value from config.EvaluateRoutingRulesOnDistributionCreate

	Local Fields
		LocalHoldCode 			is a PayablesHoldCode
		LocalCounter 			is Numeric size 2
		LocalCurrentPeriod		is Numeric 2
		LocalPeriodDate			is Date
		LocalOneTimeClass		is like VendorClass
		LocalBODCurrentTimeStamp		is a BODCurrentTimeStamp
		OFACWebService
		ActionCode
		LocalOrderTotal			is Numeric 3	
		LocalOrderCount			is Numeric 2	
		LocalOrderCheck			is an VendorXrefOrderArray	
		LocalBODtrigger 		is Boolean 
		LocalNativeLPLBODTrigger  		 is Boolean				
 		LocalIDMDocumentType    		 is Numeric size 3
  		LocalDefaultIDMTemplateDocType	 is Numeric size 3
  		LocalDefaultIDMTemplateType		 is Numeric size 3
  		LocalUS1099Version				 is Text
		NewBODTracker  					is a FSMInboundBODTracker view
		LocalFSMInboundBODTracker		is Numeric 15
		Error            				is Boolean
	    ErrorMessage     				is Alpha 300
	    LocalConfigurationParameter		is Alpha size up to 200
		LocalConfigParamName			is Alpha size up to 200			
		LocalPayGroup					is like PayGroup				
		LocalRunProgram					is a RunProgram					
		LocalProcessGroup				is like PayablesProcessGroup	
		LocalIDMTemplateYear			is Numeric size 4
		LocalDefaultIDMTemplateYear		is Numeric size 4
		AsyncID 						is an AsyncActionRequest

	    
    Derived Fields



		US1099FormRevisionYear    is a MessageField
			"2024_Revision"
		
		UploadingUS1099IDMTemplatesMsg is a MessageField
			"ReloadIn-\progress.PleaseClickOnRefresh."

		US1099IDMTemplateUploadBackgroundGroup is a MessageField
			restricted
			"UploadingUS1099IDMTemplatesForVendorGroup<VendorGroup>"

		VendorGroupAndDescription is a MessageField
			default label is "VendorGroup"
			"<Description>_(<VendorGroup>)"

		CreateMessage is a LabelField
			restricted
			"CreateVendorGroup"
		
		FormLabel is a LabelField
			restricted
			"VendorGroup:_"

		RepresentativeText is a StringField
			type is Text
			default label is "VendorGroup"
			VendorGroup " - " Description
		
		DerivedVendorGroupTitle	is a DerivedField
			type is Alpha size up to 132
			default label is "VendorGroup"
			return RepresentativeText

		DerivedFormTitle is a DerivedField
			type is MessageField
			restricted
			if (RecordExists)
				return FormLabel + DerivedVendorGroupTitle
			else
				return CreateMessage
			
		MissingTemplateMessage is a MessageField
			restricted
			"Warning:NoTemplateDefined"

		ManualPaymentHold is a MessageField
			restricted
			"ManualPaymentHold"
		CreditBalanceHold is a MessageField
			restricted
			"CreditBalanceHold"
		PrepaymentHold is a MessageField
			restricted
			"PrepaymentHold"
		ReturnOnInvestment is a MessageField
			restricted
			"ReturnOnInvestment"
		RetainagePaymentHold is a MessageField
			restricted
			"RetainagePaymentHoldCode"
		MaximumPaymentHold is a MessageField
			restricted
			"MaximumPaymentHold"
		MinimumPaymentHold is a MessageField
			restricted
			"MinimumPaymentHoldCode"
		WorkFlowApprovalHold is a MessageField
			restricted
			"WorkFlowApprovalHoldCode"

		NewLine								is a NativeField
			type is Alpha 1
			restricted

		LogoImageMaximumSizeBytes is a ConditionalField
			type is Numeric 16

			if (LogoImageUOM.Kilobytes)
				(LogoImageMaximumSize * 1024)
			else
			if (LogoImageUOM.Megabytes)
				(LogoImageMaximumSize * 1024 * 1024)
			else
				LogoImageMaximumSize

		PeriodBucket is a DerivedField
			type is Numeric size 2
			restricted
			if (VendorBalanceDate.LastPurchaseDate entered)
				LocalPeriodDate	= VendorBalanceDate.LastPurchaseDate
			else
				LocalPeriodDate	= VendorBalanceDate.LastPaymentDate

			if (LocalPeriodDate not entered)
				LocalPeriodDate	= current corporate date

			if (LocalPeriodDate <= PeriodEndingDates.PeriodEndingDate[1])
				return 1
			LocalCurrentPeriod = 1
			while (LocalCurrentPeriod <= 13)
			 	if (PeriodEndingDates.PeriodEndingDate[LocalCurrentPeriod] >= LocalPeriodDate)
			 		return LocalCurrentPeriod
				LocalCurrentPeriod += 1

			return 14

		PeriodEndDate01 is an ArrayValueField
			type is Date
			classic name is GRP-END-DTE-01
			restricted
			PeriodEndingDates.PeriodEndingDate[1]

		PeriodEndDate02 is an ArrayValueField
			type is Date
			classic name is GRP-END-DTE-02
			restricted
			PeriodEndingDates.PeriodEndingDate[2]

		PeriodEndDate03 is an ArrayValueField
			type is Date
			classic name is GRP-END-DTE-03
			restricted
			PeriodEndingDates.PeriodEndingDate[3]

		PeriodEndDate04 is an ArrayValueField
			type is Date
			classic name is GRP-END-DTE-04
			restricted
			PeriodEndingDates.PeriodEndingDate[4]

		PeriodEndDate05 is an ArrayValueField
			type is Date
			classic name is GRP-END-DTE-05
			restricted
			PeriodEndingDates.PeriodEndingDate[5]

		PeriodEndDate06 is an ArrayValueField
			type is Date
			classic name is GRP-END-DTE-06
			restricted
			PeriodEndingDates.PeriodEndingDate[6]

		PeriodEndDate07 is an ArrayValueField
			type is Date
			classic name is GRP-END-DTE-07
			restricted
			PeriodEndingDates.PeriodEndingDate[7]

		PeriodEndDate08 is an ArrayValueField
			type is Date
			classic name is GRP-END-DTE-08
			restricted
			PeriodEndingDates.PeriodEndingDate[8]

		PeriodEndDate09 is an ArrayValueField
			type is Date
			classic name is GRP-END-DTE-09
			restricted
			PeriodEndingDates.PeriodEndingDate[9]

		PeriodEndDate10 is an ArrayValueField
			type is Date
			classic name is GRP-END-DTE-10
			restricted
			PeriodEndingDates.PeriodEndingDate[10]

		PeriodEndDate11 is an ArrayValueField
			type is Date
			classic name is GRP-END-DTE-11
			restricted
			PeriodEndingDates.PeriodEndingDate[11]

		PeriodEndDate12 is an ArrayValueField
			type is Date
			classic name is GRP-END-DTE-12
			restricted
			PeriodEndingDates.PeriodEndingDate[12]

		PeriodEndDate13 is an ArrayValueField
			type is Date
			classic name is GRP-END-DTE-13
			restricted
			PeriodEndingDates.PeriodEndingDate[13]

		SpendAnalysisLastRunDate is a StringField
			type is Date
			restricted
			ProcurementGroupRel.ProcurementGroupSetActionInvoiceSpendExportAndConsolidateRel.LastRunEndDate

		SupplierRebateLastRunDate is a StringField
			type is Date
			restricted
			ProcurementGroupRel.ProcurementGroupSetActionLoadSupplierRebateInvoiceRel.LastRunEndDate

		FinalInvoiceApprovalEmailSubject is a DerivedField
			type is Alpha 100
			restricted
			return InvoiceApprovalEmailSubject text

		FinalInvoiceApprovalEmailContent is a DerivedField
			type is RichText
			restricted
			return InvoiceApprovalEmailContent text
		
		FinalInvoiceApprovedEmailSubject is a DerivedField
			type is Alpha 100
			restricted
			return InvoiceApprovedEmailSubject text

		FinalInvoiceApprovedEmailContent is a DerivedField
			type is RichText
			restricted
			return InvoiceApprovedEmailContent text

		FinalInvoiceRejectEmailSubject is a DerivedField
			type is Alpha 100
			restricted
			return InvoiceRejectEmailSubject text

		FinalInvoiceRejectEmailContent is a DerivedField
			type is RichText
			restricted
			return InvoiceRejectEmailContent text

		FinalInvoiceEmailSubject is a DerivedField
			type is Alpha 100
			restricted
			return InvoiceEmailSubject text

		FinalInvoiceEmailContent is a DerivedField
			type is RichText
			restricted
			return InvoiceEmailContent text

		UserDefaultPrinter is a DerivedField
            type is like IDMPrinter
            if (UseIDMInVendorStatement)
            	return UserDefaultPrinterRel.IDMPrinter


		DerivedDelimiter is a DerivedField
			type is Alpha size 5
			restricted
			LocalConfigurationParameter	= "Generic_Delimiter"
			if(FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
					
		DerivedTenantID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter	= "tenantID"
			if(FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedReleaseID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter	= "releaseID"
			if(FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedLogicalID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter	= "logicalID"
			if(FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedVersionID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter	= "VersionID"
			if(FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedappProdline is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter	= "appProdline"
			if(FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		BODVariationID is a DerivedField
			type is Alpha 25
			restricted
			return bod id.VariationID
			
		DerivedBODCurrentTimeStamp is a DerivedField
			type is Alpha size 20
			restricted
			DerivedBODCurrentTimeStamp = system current timestamp
			return DerivedBODCurrentTimeStamp
			
		DerivedBODFormattedCurrentTimeStamp is a DerivedField
			type is Alpha size 30
			restricted
			return DerivedBODCurrentTimeStamp[1:4] + "-" + DerivedBODCurrentTimeStamp[5:6] + "-" + DerivedBODCurrentTimeStamp[7:8] + "T" + DerivedBODCurrentTimeStamp[9:10] + ":" + DerivedBODCurrentTimeStamp[11:12] + ":" + DerivedBODCurrentTimeStamp[13:14] + "Z"
		
		DerivedBODActionCode is a DerivedField
			type is Alpha 10
			restricted
			if ((BODVariationID <= 1) or action type.Create)
				return "Add"
			else
			if(action type.Update or action type.Delete)
				return "Replace"
			else
				return ""	
				
		DerivedBODStatusCode is a DerivedField
			type is Alpha 10
			restricted
			if (action type.Create or action type.Update)
				return "Open"
			else
			if(action type.Delete)
				return "Deleted"
			else
				return ""	
				
		DerivedFinanceEnterpriseGroup is a DerivedField
			type is Alpha 4
			restricted
			return VendorGroup.FinanceEnterpriseGroup
		
		DerivedBODRevision is a DerivedField
			type is Alpha 25
			restricted
			return ""
				
		DerivedBODFormattedId is a DerivedField
			type is Alpha 100
			restricted
			return 	"infor-nid:" + DerivedTenantID + ":" + ":"  + ":" + VendorGroup + ":" + DerivedBODRevision +"?CodeDefinition&verb=Sync&TrackerID="+LocalFSMInboundBODTracker

		DerivedLastupdateBy is a DerivedField
			type is Alpha size 60
			restricted
			return update stamp.actor
			
		DerivedBODUpdateTimeStamp is a DerivedField
			type is Alpha size 25
			restricted
			DerivedBODUpdateTimeStamp = update stamp.timestamp
			return DerivedBODUpdateTimeStamp
			
		DerivedBODFormattedUpdateTimeStamp is a DerivedField
			type is Alpha size 30
			restricted
			return DerivedBODUpdateTimeStamp[1:4] + "-" + DerivedBODUpdateTimeStamp[5:6] + "-" + DerivedBODUpdateTimeStamp[7:8] + "T" + DerivedBODUpdateTimeStamp[9:10] + ":" + DerivedBODUpdateTimeStamp[11:12] + ":" + DerivedBODUpdateTimeStamp[13:14] + "Z"
		
		VendorGroupXMLBOD is a DerivedField
			type is XMLDocument
	        restricted
	        VendorGroupXMLBOD = template.IONSyncCodeDefination_VendorGroup_ST document for this instance	

 
    Conditions




		RecordExists
			restricted
			when (VendorGroup exists)

		SupplierGroupExists
			restricted
			when (SupplierGroupRel exists)







		BusinessGroupAllowsAccess		
			when ((actor.context.BusinessGroup != ""
			and    actor.context.BusinessGroup = VendorGroup)
			or	   actor.context.BusinessGroup = ""
			or     VendorGroup !entered)   

		MHCOAuthRelExists	
			default label is untranslatable
			when (MHCOAuthRel exists)

		DisplayCreateMHCOAuthRecord	
			default label is untranslatable
			when (DocMgmtPartner.MHCSoftware
			and	  !MHCOAuthRelExists)

		DisplayEditMHCOAuthRecord	
			default label is untranslatable
			when (DocMgmtPartner.MHCSoftware
			and	  MHCOAuthRelExists)

		MHCConfigParamExists	
			default label is untranslatable
			when (MHCConfigParamRel exist)

		DisplayCreateMHCConfigParam	
			default label is untranslatable
			when (DocMgmtPartner.MHCSoftware
			and	  !MHCConfigParamExists)

		DisplayEditMHCConfigParam	
			default label is untranslatable
			when (DocMgmtPartner.MHCSoftware
			and	  MHCConfigParamExists)

		HylandOAuthRelExists	
			default label is untranslatable
			when (HylandOAuthRel exists)

		DisplayCreateHylandOAuthRecord	
			default label is untranslatable
			when (DocMgmtPartner.HylandSoftware
			and	  !HylandOAuthRelExists)

		DisplayEditHylandOAuthRecord	
			default label is untranslatable
			when (DocMgmtPartner.HylandSoftware
			and	  HylandOAuthRelExists)

		HylandImageConfigParamExists	
			default label is untranslatable
			when (HylandImageConfigParamRel exist)

		DisplayCreateHylandImageConfigParam	
			default label is untranslatable
			when (DocMgmtPartner.HylandSoftware
			and	  !HylandImageConfigParamExists)

		DisplayEditHylandImageConfigParam	
			default label is untranslatable
			when (DocMgmtPartner.HylandSoftware
			and	  HylandImageConfigParamExists)

		HylandUrlConfigParamExists	
			default label is untranslatable
			when (HylandUrlConfigParamRel exist)

		DisplayCreateHylandUrlConfigParam	
			default label is untranslatable
			when (DocMgmtPartner.HylandSoftware
			and	  !HylandUrlConfigParamExists)

		DisplayEditHylandUrlConfigParam	
			default label is untranslatable
			when (DocMgmtPartner.HylandSoftware
			and	  HylandUrlConfigParamExists)

		HylandUpdateConfigParamExists	
			default label is untranslatable
			when (HylandUpdateConfigParamRel exist)

		DisplayCreateHylandUpdateConfigParam	
			default label is untranslatable
			when (DocMgmtPartner.HylandSoftware
			and	  !HylandUpdateConfigParamExists)

		DisplayEditHylandUpdateConfigParam	
			default label is untranslatable
			when (DocMgmtPartner.HylandSoftware
			and	  HylandUpdateConfigParamExists)

		VendorBankCodeLabelsEntered		
			restricted
			when (VendorBankCode1Label entered
			or    VendorBankCode2Label entered
			or    VendorBankCode3Label entered
			or    VendorBankCode4Label entered
			or    VendorBankCode5Label entered
			or    VendorBankCode6Label entered
			or    VendorBankCode7Label entered
			or    VendorBankCode8Label entered
			or    VendorBankCode9Label entered
			or    VendorBankCode10Label entered
			or    VendorBankCode11Label entered
			or    VendorBankCode12Label entered
			or    VendorBankCode13Label entered
			or    VendorBankCode14Label entered
			or    VendorBankCode15Label entered
			or    VendorBankCode16Label entered
			or    VendorBankCode17Label entered
			or    VendorBankCode18Label entered
			or    VendorBankCode19Label entered
			or    VendorBankCode20Label entered)
		
		UploadingUS1099IDMTemplates
			restricted
			when (US1099IDMTemplateUploadInProgressRel exists)

		ForceUploadIsValid
			restricted
			when (EnableUS1099IDMForms
			and	  not UploadingUS1099IDMTemplates)
		
		IDMUS1099Enabled
			restricted
			when (EnableUS1099IDMForms)

	Relations




		ProcurementGroupRel
			one-to-one relation to ProcurementGroup
			Field Mapping uses symbolic key
				related.ProcurementGroup = VendorGroup

		SupplierGroupRel
			one-to-one relation to SupplierGroup
			Field Mapping uses symbolic key
				related.SupplierGroup    = VendorGroup

		PayablesOnHoldRel
			one-to-many relation to PayablesOnHold
			Field Mapping uses Set4
				related.VendorGroup = VendorGroup
				related.HoldCode 	= LocalHoldCode







		PayablesCompaniesRel
			classic name is APCOMPANY
			one-to-many relation to PayablesCompany
			Field Mapping uses Set2
				related.VendorGroup = VendorGroup

		PayablesHoldCodesRel
			classic name is APHOLDCODE
			one-to-many relation to PayablesHoldCode
			Field Mapping uses symbolic key
				related.VendorGroup = VendorGroup

		VendorClassesRel
			classic name is APVENDCLASS
			one-to-many relation to VendorClass
			delete cascades
			Field Mapping uses symbolic key
				related.VendorGroup = VendorGroup

		OneTimeClassRel
			one-to-one relation to VendorClass
			Field Mapping uses symbolic key
				related.VendorGroup = VendorGroup
				related.VendorClass = LocalOneTimeClass

		VendorsRel
			classic name is APVENDMAST
			one-to-many relation to Vendor
			delete cascades
			Field Mapping uses symbolic key
				related.VendorGroup = VendorGroup

		VendorAlternatesRel
			classic name is APVENDMASTA
			one-to-many relation to Vendor
			Field Mapping uses Set5
				related.VendorGroup = VendorGroup

		VendorDebtRel		
			one-to-many relation to VendorDebt
			Field Mapping uses symbolic key
				related.VendorGroup	= VendorGroup

		PayablesInvoiceAnalyticCubeRel
			one-to-one relation to AnalyticCube
			Field Mapping uses AnalyticCubeSet
				related.BusinessClass = "PayablesInvoice"

		PayablesInvoiceDistributionAnalyticCubeRel
			one-to-one relation to AnalyticCube
			Field Mapping uses AnalyticCubeSet
				related.BusinessClass = "PayablesInvoiceDistribution"

		PayablesInvoicePaymentAnalyticCubeRel
			one-to-one relation to AnalyticCube
			Field Mapping uses AnalyticCubeSet
				related.BusinessClass = "PayablesInvoicePayment"

		PayablesProcessingMonitorRel				
			one-to-one relation to PayablesProcessingMonitor
			Field Mapping uses symbolic key
				related.VendorGroup									  = VendorGroup
				related.PayablesProcessingMonitor.PayGroup			  = LocalPayGroup		
				related.PayablesProcessingMonitor.RunProgram		  = LocalRunProgram			
				related.PayablesProcessingMonitor.ProcessGroup		  = LocalProcessGroup
				related.PayablesProcessingMonitor.ProcessLevel		  = blank
				related.PayablesProcessingMonitor.AccountStructure	  = blank						
				related.PayablesProcessingMonitor.RunGroup			  = blank		
				related.PayablesProcessingMonitor.AuthorityCode		  = blank	
				related.PayablesProcessingMonitor.Company			  = blank	   
				related.PayablesProcessingMonitor.BankTransactionCode = blank		

		MHCOAuthRel	
			one-to-one relation to OAuth
			Field Mapping uses symbolic key
				related.OAuth			= "MHCOAuth"

		MHCConfigParamRel	
			one-to-one relation to ConfigurationParameter
			Field Mapping uses symbolic key
				related.ConfigurationParameter.ConfigurationID	= "config"
				related.ConfigurationParameter.Name				= "MHCDOCUMENTSERVICEMT.WSI.ENDPOINT"

		HylandOAuthRel	
			one-to-one relation to OAuth
			Field Mapping uses symbolic key
				related.OAuth			= "HylandOAuth"

		HylandImageConfigParamRel	
			one-to-one relation to ConfigurationParameter
			Field Mapping uses symbolic key
				related.ConfigurationParameter.ConfigurationID	= "config"
				related.ConfigurationParameter.Name				= "HYLANDGETDOCUMENTIMAGEOAUTH.WSI.ENDPOINT"

		HylandUrlConfigParamRel	
			one-to-one relation to ConfigurationParameter
			Field Mapping uses symbolic key
				related.ConfigurationParameter.ConfigurationID	= "config"
				related.ConfigurationParameter.Name				= "HYLANDGETDOCUMENTURLOAUTH.WSI.ENDPOINT"

		HylandUpdateConfigParamRel	
			one-to-one relation to ConfigurationParameter
			Field Mapping uses symbolic key
				related.ConfigurationParameter.ConfigurationID	= "config"
				related.ConfigurationParameter.Name				= "HYLANDDOCUMENTSECUREUPDATEOAUTH.WSI.ENDPOINT"

		LocalConfigParamRel				
			one-to-one relation to ConfigurationParameter
			Field Mapping uses symbolic key
				related.ConfigurationParameter.ConfigurationID	= "config"
				related.ConfigurationParameter.Name				= LocalConfigParamName

		UserDefaultPrinterRel
			one-to-one relation to UserDefaultPrinter
			Field Mapping uses symbolic key
				related.UserDefaultPrinter.Actor	= actor

		IDMTemplateRel
			one-to-many relation to IDMTemplate
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup = VendorGroup.FinanceEnterpriseGroup
			Instance Selection
				where (related.IDMDocumentType = LocalIDMDocumentType
				and	   related.TemplateYear	   = LocalIDMTemplateYear)

		DefaultIDMTemplateRel
			one-to-many relation to DefaultIDMTemplate
			Field Mapping uses ByLatestVersion
				related.DocumentType 	   = LocalDefaultIDMTemplateDocType
				related.TemplateType	   = LocalDefaultIDMTemplateType
				related.Year			   = LocalDefaultIDMTemplateYear

		US1099IDMTemplateUploadInProgressRel
			one-to-many relation to AsyncActionRequest
			Field Mapping uses ByClass
				related.ImplementingClass		= "DefaultIDMTemplate"
				related.AsyncAction				= "UploadUS1099IDMTemplates"
            Instance Selection
                where (related.BackgroundGroupName = US1099IDMTemplateUploadBackgroundGroup
                and    related.NonFinishedNotInErrorTriggersExist = true)


		FSMBODConfigurationParameterRel
    		one-to-one relation to FSMBODConfigurationParameter
    		Field Mapping uses symbolic key
    			related.FSMBODConfigurationParameter	= LocalConfigurationParameter
		
		FSMBODConfigurationRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 1
            	related.FSMBODConfiguration.Noun 		= "CodeDefinition"
            	related.FSMBODConfiguration.Direction 	= 1
          

		FSMInboundBODTrackerRel
            one-to-one relation to FSMInboundBODTracker
            Field Mapping uses symbolic key
                related.FSMInboundBODTracker	= LocalFSMInboundBODTracker


    Field Rules
        Description
            required
		
		LastVendor
			if (LastVendor changed
			and VendorsRel exists)
				constraint (LastVendor > old LastVendor)
					"VendorsExistForVendorGroup;CannotChangeStartingVendorNumberToAValueLessThanTheCurrentValue"

		TransientManualPaymentHoldCode
			constraint (TransientManualPaymentHoldCode != TransientCreditBalanceHoldCode
			and         TransientManualPaymentHoldCode != TransientPrepaymentHoldCode
			and         TransientManualPaymentHoldCode != TransientReturnOnInvestmentHoldCode
			and         TransientManualPaymentHoldCode != TransientMaximumPaymentHoldCode
			and         TransientManualPaymentHoldCode != TransientRetainageHoldCode
			and         TransientManualPaymentHoldCode != TransientMinimumPaymentHoldCode
			and         TransientManualPaymentHoldCode != TransientTaxToleranceHoldCode)
				"DuplicateHoldCodeNotAllowed"                              

		ManualPaymentHoldCode
			constraint (ManualPaymentHoldCode != CreditBalanceHoldCode
			and         ManualPaymentHoldCode != PrepaymentHoldCode
			and         ManualPaymentHoldCode != ReturnOnInvestmentHoldCode
			and         ManualPaymentHoldCode != MaximumPaymentHoldCode
			and         ManualPaymentHoldCode != RetainageHoldCode
			and         ManualPaymentHoldCode != MinimumPaymentHoldCode
			and         ManualPaymentHoldCode != TaxToleranceHoldCode)
				"DuplicateHoldCodeNotAllowed"                              

			LocalHoldCode = old ManualPaymentHoldCode
			if (PayablesOnHoldRel exists)
				cannot be changed
					"CannotChange;InvoicesExistWithHoldCode<LocalHoldCode>"     

			constraint (ManualPaymentHoldCode.HoldOnVendor not entered
			and ManualPaymentHoldCode.HoldOnInvoice.PermanentHold)
				"HoldFlagsNotCorrect.MustBe_'Permanent-\Invoice'_forThisHoldCode"    

		TransientCreditBalanceHoldCode
			constraint (TransientCreditBalanceHoldCode != TransientPrepaymentHoldCode
			and         TransientCreditBalanceHoldCode != TransientReturnOnInvestmentHoldCode
			and         TransientCreditBalanceHoldCode != TransientMaximumPaymentHoldCode
			and         TransientCreditBalanceHoldCode != TransientRetainageHoldCode
			and         TransientCreditBalanceHoldCode != TransientMinimumPaymentHoldCode
			and         TransientCreditBalanceHoldCode != TransientTaxToleranceHoldCode)
				"DuplicateHoldCodeNotAllowed"                              

		CreditBalanceHoldCode
			constraint (CreditBalanceHoldCode != PrepaymentHoldCode
			and         CreditBalanceHoldCode != ReturnOnInvestmentHoldCode
			and         CreditBalanceHoldCode != MaximumPaymentHoldCode
			and         CreditBalanceHoldCode != RetainageHoldCode
			and         CreditBalanceHoldCode != MinimumPaymentHoldCode
			and         CreditBalanceHoldCode != TaxToleranceHoldCode)
				"DuplicateHoldCodeNotAllowed"                              

			LocalHoldCode = old CreditBalanceHoldCode
			if (PayablesOnHoldRel exists)
				cannot be changed
					"CannotChange;InvoicesExistWithHoldCode<LocalHoldCode>"     

			constraint (CreditBalanceHoldCode.HoldOnVendor not entered
			and CreditBalanceHoldCode.HoldOnInvoice.TemporaryHold)
				"HoldFlagsNotCorrect.MustBe_'Temporary-\Invoice'_forThisHoldCode"    

		TransientPrepaymentHoldCode
			constraint (TransientPrepaymentHoldCode != TransientReturnOnInvestmentHoldCode
			and         TransientPrepaymentHoldCode != TransientMaximumPaymentHoldCode
			and         TransientPrepaymentHoldCode != TransientRetainageHoldCode
			and         TransientPrepaymentHoldCode != TransientMinimumPaymentHoldCode
			and         TransientPrepaymentHoldCode != TransientTaxToleranceHoldCode)
				"DuplicateHoldCodeNotAllowed"                              

		PrepaymentHoldCode
			constraint (PrepaymentHoldCode != ReturnOnInvestmentHoldCode
			and         PrepaymentHoldCode != MaximumPaymentHoldCode
			and         PrepaymentHoldCode != RetainageHoldCode
			and         PrepaymentHoldCode != MinimumPaymentHoldCode
			and         PrepaymentHoldCode != TaxToleranceHoldCode)
				"DuplicateHoldCodeNotAllowed"                              

			LocalHoldCode = old PrepaymentHoldCode
			if (PayablesOnHoldRel exists)
				cannot be changed
					"CannotChange;InvoicesExistWithHoldCode<LocalHoldCode>"     

			constraint (PrepaymentHoldCode.HoldOnVendor not entered
			and PrepaymentHoldCode.HoldOnInvoice.PermanentHold)
				"HoldFlagsNotCorrect.MustBe_'Permanent-\Invoice'_forThisHoldCode"    

		TransientReturnOnInvestmentHoldCode
			constraint (TransientReturnOnInvestmentHoldCode != TransientMaximumPaymentHoldCode
			and         TransientReturnOnInvestmentHoldCode != TransientRetainageHoldCode
			and         TransientReturnOnInvestmentHoldCode != TransientMinimumPaymentHoldCode
			and         TransientReturnOnInvestmentHoldCode != TransientTaxToleranceHoldCode)
				"DuplicateHoldCodeNotAllowed"                              

		ReturnOnInvestmentHoldCode
			constraint (ReturnOnInvestmentHoldCode != MaximumPaymentHoldCode
			and         ReturnOnInvestmentHoldCode != RetainageHoldCode
			and         ReturnOnInvestmentHoldCode != MinimumPaymentHoldCode
			and         ReturnOnInvestmentHoldCode != TaxToleranceHoldCode)
				"DuplicateHoldCodeNotAllowed"                              

			LocalHoldCode = old ReturnOnInvestmentHoldCode
			if (PayablesOnHoldRel exists)
				cannot be changed
					"CannotChange;InvoicesExistWithHoldCode<LocalHoldCode>"     

			constraint (ReturnOnInvestmentHoldCode.HoldOnVendor not entered
			and ReturnOnInvestmentHoldCode.HoldOnInvoice.TemporaryHold)
				"HoldFlagsNotCorrect.MustBe_'Temporary-\Invoice'_forThisHoldCode"   

		TransientMaximumPaymentHoldCode
			constraint (TransientMaximumPaymentHoldCode != TransientRetainageHoldCode
			and         TransientMaximumPaymentHoldCode != TransientMinimumPaymentHoldCode
			and         TransientMaximumPaymentHoldCode != TransientTaxToleranceHoldCode)
				"DuplicateHoldCodeNotAllowed"                              

		MaximumPaymentHoldCode
			constraint (MaximumPaymentHoldCode != RetainageHoldCode
			and         MaximumPaymentHoldCode != MinimumPaymentHoldCode
			and         MaximumPaymentHoldCode != TaxToleranceHoldCode)
				"DuplicateHoldCodeNotAllowed"                              

			LocalHoldCode = old MaximumPaymentHoldCode
			if (PayablesOnHoldRel exists)
				cannot be changed
					"CannotChange;InvoicesExistWithHoldCode<LocalHoldCode>"     

			constraint (MaximumPaymentHoldCode.HoldOnVendor not entered
			and MaximumPaymentHoldCode.HoldOnInvoice.TemporaryHold)
					"HoldFlagsNotCorrect.MustBe_'Temporary-\Invoice'_forThisHoldCode"   

		TransientRetainageHoldCode
			constraint (TransientRetainageHoldCode != TransientMinimumPaymentHoldCode
			and 		TransientRetainageHoldCode != TransientTaxToleranceHoldCode)
				"DuplicateHoldCodeNotAllowed"                              




		RetainageHoldCode
			constraint (RetainageHoldCode != MinimumPaymentHoldCode
			and			RetainageHoldCode != TaxToleranceHoldCode)
				"DuplicateHoldCodeNotAllowed"                              


			LocalHoldCode = old RetainageHoldCode
			if (PayablesOnHoldRel exists)
				cannot be changed
					"CannotChange;InvoicesExistWithHoldCode<LocalHoldCode>"     

			constraint (RetainageHoldCode.HoldOnVendor not entered
			and RetainageHoldCode.HoldOnInvoice.PermanentHold)
				"HoldFlagsNotCorrect.MustBe_'Permanent-\Invoice'_forThisHoldCode"    





		MinimumPaymentHoldCode
			LocalHoldCode = old MinimumPaymentHoldCode
			if (PayablesOnHoldRel exists)
				cannot be changed
					"CannotChange;InvoicesExistWithHoldCode<LocalHoldCode>"     

			constraint (MinimumPaymentHoldCode != TaxToleranceHoldCode)
				"DuplicateHoldCodeNotAllowed"                              
			
			constraint (MinimumPaymentHoldCode.HoldOnVendor not entered
			and MinimumPaymentHoldCode.HoldOnInvoice.TemporaryHold)
				"HoldFlagsNotCorrect.MustBe_'Temporary-\Invoice'_forThisHoldCode"    
		
		TransientMinimumPaymentHoldCode
			constraint (TransientMinimumPaymentHoldCode != TransientTaxToleranceHoldCode)
				"DuplicateHoldCodeNotAllowed"                              

		TaxToleranceHoldCode											
			constraint (TaxToleranceHoldCode.HoldOnVendor not entered
			and TaxToleranceHoldCode.HoldOnInvoice.PermanentHold)
				"HoldFlagsNotCorrect.MustBe_'Permanent-\Invoice'_forThisHoldCode"

		EvaluateRoutingRulesOnDistributionCreate		
			if (config.EvaluateRoutingRulesOnDistributionCreate = true)
				if (EvaluateRoutingRulesOnDistributionCreate changed)
					LocalConfigParamName		= "EvaluateRoutingRulesOnDistributionCreate"
					invoke Delete LocalConfigParamRel
			else
				if (EvaluateRoutingRulesOnDistributionCreate changed)
					LocalConfigParamName		= "EvaluateRoutingRulesOnDistributionCreate"
					if (LocalConfigParamRel not exists)
						invoke Create LocalConfigParamRel
							invoked.Type		= 8233		
							invoked.Length		= 1
							invoked.Value		= true
					else
						invoke Update LocalConfigParamRel
							invoked.Value		= true

		PeriodEndingDates
			if (not PeriodEndingDates.PeriodEndingDate[1] entered)
				required		//	"DefineAtLeastOnePeriodEndingDate"            

		InvoiceApprovalEmailSubject
			initial value is "Invoice {Invoice} for vendor {VendorName} has been submitted for your approval"
			default to "Invoice {Invoice} for vendor {VendorName} has been submitted for your approval"

		InvoiceApprovalEmailContent
			initial value is "Invoice {Invoice} for vendor {VendorName} has been submitted for your approval."
			default to "Invoice {Invoice} for vendor {VendorName} has been submitted for your approval."

		InvoiceApprovedEmailSubject
			initial value is "Invoice {Invoice} for vendor {VendorName} has been approved"
			default to "Invoice {Invoice} for vendor {VendorName} has been approved"
		
		InvoiceApprovedEmailContent
			initial value is "Invoice {Invoice} for vendor {VendorName} has been approved."
			default to "Invoice {Invoice} for vendor {VendorName} has been approved."

		InvoiceRejectEmailSubject
			initial value is "Invoice {Invoice} for vendor {VendorName} has been rejected"
			default to "Invoice {Invoice} for vendor {VendorName} has been rejected"

		InvoiceRejectEmailContent
			initial value is "Invoice {Invoice} for vendor {VendorName} has been rejected."
			default to "Invoice {Invoice} for vendor {VendorName} has been rejected."

		InvoiceEmailSubject
			initial value is "Invoice {Invoice} for vendor {VendorName}"
			default to "Invoice {Invoice} for vendor {VendorName}"

		InvoiceEmailContent
			initial value is "Invoice {Invoice} for vendor {VendorName}."
			default to "Invoice {Invoice} for vendor {VendorName}."

		DocMgmtPartner
			constraint (UsingDocMgmtSystem)		
				"DocumentManagementPartnerIsEntered;CannotUncheckUsingDocumentManagementSystem"

		DocMgmtSystemKey
			constraint (UsingDocMgmtSystem)		
				"DocumentManagementSystemKeyIsEntered;CannotUncheckUsingDocumentManagementSystem"

		StoreDocumentLocally
			constraint (UsingDocMgmtSystem)		
					"StoreDocumentLocallyIsChecked;CannotUncheckUsingDocumentManagementSystem"

		LogoImageMaximumSize
			required
			initial value is 20
			if (LogoImageMaximumSize = blank)
				LogoImageMaximumSize = 20
				LogoImageUOM = LogoImageUOM.Kilobytes

		LogoImageUOM
			initial value is LogoImageUOM.Kilobytes

		OFACCompareThreshold
			if (ValidateOFAC)
				required
				constraint (OFACCompareThreshold > 0.00)
					"OFACCompareThresholdMustBeGreaterThanZero"
			else
				OFACCompareThreshold = 0.00

		VendorStatementTemplate
			if (UseIDMInVendorStatement)
				required
				constraint(VendorStatementTemplate.IDMDocumentType.VendorStatement)
					"InvalidTemplate"

		EnableUS1099IDMForms
			if (EnableUS1099IDMForms changed
			and EnableUS1099IDMForms)
				invoke ForceUploadUS1099IDMTemplate in background

	Rule Blocks
		EditData
			LocalCounter = 2
			while (LocalCounter <= 13)
				if (PeriodEndingDates.PeriodEndingDate[LocalCounter] entered)
					constraint (PeriodEndingDates.PeriodEndingDate[LocalCounter] > PeriodEndingDates.PeriodEndingDate[LocalCounter - 1])
						"DefineDatesInAscendingOrder"                            
				LocalCounter += 1

		VendorXrefOrderEdit	
			initialize LocalOrderTotal
			initialize LocalOrderCount
			if (Reference1Order entered)
				LocalOrderTotal += Reference1Order
				LocalOrderCount += 1
			if (Reference2Order entered)
				LocalOrderTotal += Reference2Order
				LocalOrderCount += 1
			if (TaxIDOrder entered)
				LocalOrderTotal += TaxIDOrder
				LocalOrderCount += 1
			if (VATRegistrationNumberOrder entered)
				LocalOrderTotal += VATRegistrationNumberOrder
				LocalOrderCount += 1
			if (VendorAccountOrder entered)
				LocalOrderTotal += VendorAccountOrder
				LocalOrderCount += 1
			if (EDINumberOrder entered)
				LocalOrderTotal += EDINumberOrder
				LocalOrderCount += 1
			if (LegacyVendorOrder entered)
				LocalOrderTotal += LegacyVendorOrder
				LocalOrderCount += 1
			if (GLNOrder entered)
				LocalOrderTotal += GLNOrder
				LocalOrderCount += 1

			if (Reference1Order entered)
				constraint (!LocalOrderCheck.VendorXrefOrderElement[Reference1Order] = Reference1Order)
					"DuplicateOrderNumber"
				LocalOrderCheck.VendorXrefOrderElement[Reference1Order] = Reference1Order
			if (Reference2Order entered)
				constraint (!LocalOrderCheck.VendorXrefOrderElement[Reference2Order] = Reference2Order)
					"DuplicateOrderNumber"
				LocalOrderCheck.VendorXrefOrderElement[Reference2Order] = Reference2Order
			if (TaxIDOrder entered)
				constraint (!LocalOrderCheck.VendorXrefOrderElement[TaxIDOrder] = TaxIDOrder)
					"DuplicateOrderNumber"
				LocalOrderCheck.VendorXrefOrderElement[TaxIDOrder] = TaxIDOrder
			if (VATRegistrationNumberOrder entered)
				constraint (!LocalOrderCheck.VendorXrefOrderElement[VATRegistrationNumberOrder] = VATRegistrationNumberOrder)
					"DuplicateOrderNumber"
				LocalOrderCheck.VendorXrefOrderElement[VATRegistrationNumberOrder] = VATRegistrationNumberOrder
			if (VendorAccountOrder entered)
				constraint (!LocalOrderCheck.VendorXrefOrderElement[VendorAccountOrder] = VendorAccountOrder)
					"DuplicateOrderNumber"
				LocalOrderCheck.VendorXrefOrderElement[VendorAccountOrder] = VendorAccountOrder
			if (EDINumberOrder entered)
				constraint (!LocalOrderCheck.VendorXrefOrderElement[EDINumberOrder] = EDINumberOrder)
					"DuplicateOrderNumber"
				LocalOrderCheck.VendorXrefOrderElement[EDINumberOrder] = EDINumberOrder
			if (LegacyVendorOrder entered)
				constraint (!LocalOrderCheck.VendorXrefOrderElement[LegacyVendorOrder] = LegacyVendorOrder)
					"DuplicateOrderNumber"
				LocalOrderCheck.VendorXrefOrderElement[LegacyVendorOrder] = LegacyVendorOrder
			if (GLNOrder entered)
				constraint (!LocalOrderCheck.VendorXrefOrderElement[GLNOrder] = GLNOrder)
					"DuplicateOrderNumber"
				LocalOrderCheck.VendorXrefOrderElement[GLNOrder] = GLNOrder

			if (LocalOrderCount = 1)
				constraint (LocalOrderTotal = 1)
					"IncorrectOrder,OrderNumberSkipped"
			else
			if (LocalOrderCount = 2)
				constraint (LocalOrderTotal = 3)
					"IncorrectOrder,OrderNumberSkipped"
			else
			if (LocalOrderCount  = 3)
				constraint (LocalOrderTotal = 6)
					"IncorrectOrder,OrderNumberSkipped"
			else
			if (LocalOrderCount  = 4)
				constraint (LocalOrderTotal = 10)
					"IncorrectOrder,OrderNumberSkipped"
			else
			if (LocalOrderCount  = 5)
				constraint (LocalOrderTotal = 15)
					"IncorrectOrder,OrderNumberSkipped"
			else
			if (LocalOrderCount  = 6)
				constraint (LocalOrderTotal = 21)
					"IncorrectOrder,OrderNumberSkipped"
			else
			if (LocalOrderCount  = 7)
				constraint (LocalOrderTotal = 28)
					"IncorrectOrder,OrderNumberSkipped"
			else
			if (LocalOrderCount  = 8)
				constraint (LocalOrderTotal = 36)
					"IncorrectOrder,OrderNumberSkipped"
				
		TriggerVendorGroupCDServiceRules
			trigger "VendorGroupCDService" PA service
				resume on error
				title is "EG:<VendorGroup.FinanceEnterpriseGroup>VendorGroup:<VendorGroup>"
				Criteria
					VendorGroup.FinanceEnterpriseGroup
					VendorGroup
				Variables
					ActionCode
					include persistent fields from VendorGroup
					VendorGroup.FinanceEnterpriseGroup
						variable name is FinanceEnterpriseGroup
					LocalBODCurrentTimeStamp.OutputBODCurrentTimeStamp
						variable name is LastModTimeStamp

	Form Invokes
		MHCOAuthRecord	
			if (MHCOAuthRel exists)
				invoke Update MHCOAuthRel
			else
				invoke Create OAuth
					invoked.OAuth				= "MHCOAuth"
					invoked.Type 				= 5 

		MHCConfigurationParameterRecord	
			if (MHCConfigParamRel exists)
				invoke Update MHCConfigParamRel
			else
				invoke Create ConfigurationParameter
					invoked.ConfigurationParameter.ConfigurationID	= "config"
					invoked.ConfigurationParameter.Name				= "MHCDOCUMENTSERVICEMT.WSI.ENDPOINT"

		HylandOAuthRecord	
			if (HylandOAuthRel exists)
				invoke Update HylandOAuthRel
			else
				invoke Create OAuth
					invoked.OAuth				= "HylandOAuth"
					invoked.Type 				= 5 

		HylandImageConfigurationParameterRecord	
			if (HylandImageConfigParamRel exists)
				invoke Update HylandImageConfigParamRel
			else
				invoke Create ConfigurationParameter
					invoked.ConfigurationParameter.ConfigurationID	= "config"
					invoked.ConfigurationParameter.Name				= "HYLANDGETDOCUMENTIMAGEOAUTH.WSI.ENDPOINT"

		HylandUrlConfigurationParameterRecord	
			if (HylandUrlConfigParamRel exists)
				invoke Update HylandUrlConfigParamRel
			else
				invoke Create ConfigurationParameter
					invoked.ConfigurationParameter.ConfigurationID	= "config"
					invoked.ConfigurationParameter.Name				= "HYLANDGETDOCUMENTURLOAUTH.WSI.ENDPOINT"

		HylandUpdateConfigurationParameterRecord	
			if (HylandUpdateConfigParamRel exists)
				invoke Update HylandUpdateConfigParamRel
			else
				invoke Create ConfigurationParameter
					invoked.ConfigurationParameter.ConfigurationID	= "config"
					invoked.ConfigurationParameter.Name				= "HYLANDDOCUMENTSECUREUPDATEOAUTH.WSI.ENDPOINT"

	Actions
		UpdatePeriodEndDate is an Instance Action
			restricted
			Parameters
				PrmPeriodEndDate	is a PeriodEndDateArray
			Action Rules
			 	if(PrmPeriodEndDate.PerEndDate[1] entered)
				 	PeriodEndingDates = PrmPeriodEndDate

		UpdateBODIdFields is an Instance Action
			restricted
			Parameters
				PrmDocumentID        is Alpha size 100
					default label is "DocumentID"
				PrmSystemOfRecord    is Alpha size 1
					default label is "SystemOfRecord"
			Action Rules
				if (bod id.DocumentID != PrmDocumentID)
					bod id.DocumentID			= PrmDocumentID
				if (bod id.SystemOfRecord != PrmSystemOfRecord)
					bod id.SystemOfRecord		= PrmSystemOfRecord

		Create is a Create Action
			Action Rules
				include EditData
				include VendorXrefOrderEdit	

			Exit Rules

				if (TransientOneTimeClass entered)
					LocalOneTimeClass = TransientOneTimeClass
					invoke CreateOneTimeClass OneTimeClassRel
					OneTimeVendorClass = LocalOneTimeClass

				invoke CreatePrimeContactCode VendorContactCode
					invoked.VendorGroup		= VendorGroup

				if (TransientManualPaymentHoldCode 		not entered)
					TransientManualPaymentHoldCode 			= "MPAY"
				if (TransientCreditBalanceHoldCode 		not entered)
					TransientCreditBalanceHoldCode 			= "CRED"
				if (TransientPrepaymentHoldCode 		not entered)
					TransientPrepaymentHoldCode 			= "PREP"
				if (TransientReturnOnInvestmentHoldCode not entered)
					TransientReturnOnInvestmentHoldCode 	= "ROI"
				if (TransientMaximumPaymentHoldCode 	not entered)
					TransientMaximumPaymentHoldCode 		= "MAX"
				if (TransientMinimumPaymentHoldCode 	not entered)
					TransientMinimumPaymentHoldCode 		= "MIN"


				invoke Create PayablesHoldCodesRel
					invoked.HoldCode 		= TransientManualPaymentHoldCode		
					invoked.Description 	= ManualPaymentHold						
					invoked.HoldOnInvoice 	= "P"

				invoke Create PayablesHoldCodesRel
					invoked.HoldCode 		= TransientCreditBalanceHoldCode		
					invoked.Description 	= CreditBalanceHold						
					invoked.HoldOnInvoice 	= "T"

				invoke Create PayablesHoldCodesRel
					invoked.HoldCode 		= TransientPrepaymentHoldCode			
					invoked.Description 	= PrepaymentHold						
					invoked.HoldOnInvoice 	= "P"

				invoke Create PayablesHoldCodesRel
					invoked.HoldCode 		= TransientReturnOnInvestmentHoldCode	
					invoked.Description 	= ReturnOnInvestment					
					invoked.HoldOnInvoice 	= "T"

				invoke Create PayablesHoldCodesRel
					invoked.HoldCode 		= TransientMaximumPaymentHoldCode		
					invoked.Description 	= MaximumPaymentHold					
					invoked.HoldOnInvoice 	= "T"

				invoke Create PayablesHoldCodesRel
					invoked.HoldCode 		= TransientMinimumPaymentHoldCode		
					invoked.Description 	= MinimumPaymentHold					
					invoked.HoldOnInvoice 	= "T"


				if (TransientRetainageHoldCode entered)
					display "VG:Create:9"
					invoke Create PayablesHoldCodesRel
						invoked.HoldCode 		= TransientRetainageHoldCode
						invoked.Description 	= RetainagePaymentHold
						invoked.HoldOnInvoice 	= "P"


				invoke SetHoldCodesAfterCreate




		Update is an Update Action
			Action Rules
				include EditData
				include VendorXrefOrderEdit	

				initialize LocalOneTimeClass
				if (OneTimeVendorClass entered)
					LocalOneTimeClass = OneTimeVendorClass
				else
				if (TransientOneTimeClass entered)
					LocalOneTimeClass = TransientOneTimeClass

				if (LocalOneTimeClass entered)
					if (OneTimeClassRel not exist)
						invoke CreateOneTimeClass OneTimeClassRel
					OneTimeVendorClass = LocalOneTimeClass
				else
					initialize OneTimeVendorClass
				initialize TransientOneTimeClass

				if (ManualPaymentHoldCode not entered)
					ManualPaymentHoldCode 		= "MPAY"
				if (CreditBalanceHoldCode not entered)
					CreditBalanceHoldCode 		= "CRED"
				if (PrepaymentHoldCode not entered)
					PrepaymentHoldCode 			= "PREP"
				if (ReturnOnInvestmentHoldCode not entered)
					ReturnOnInvestmentHoldCode 	= "ROI"
				if (MaximumPaymentHoldCode not entered)
					MaximumPaymentHoldCode 		= "MAX"
				if (MinimumPaymentHoldCode not entered)
					MinimumPaymentHoldCode 		= "MIN"

		FastUpdate is an Update Action		
			default label is untranslatable
			restricted
			bypass field rules

		Delete is a Delete Action
			Entrance Rules
				constraint (VendorsRel not exists) 
					"CannotDeleteVendorGroup;VendorsExist"                    
				constraint (PayablesCompaniesRel not exists) 
					"CannotDelete;CompletedCompanyExists"                     

				if (VendorGroup.FinanceEnterpriseGroup.BODTrigger)
					ActionCode = ActionCode.Delete
					increment bod id.VariationID
					LocalBODCurrentTimeStamp.CurrentTimeStamp = current timestamp
					include TriggerVendorGroupCDServiceRules

								
		SendVendorGroupNativeLPLBOD is an Instance Action
			restricted
			Entrance Rules
			Parameters
			Action Rules
				send ion bod
					bod is VendorGroupXMLBOD
					bod type is "Sync.CodeDefinition"
					document id is VendorGroup
					variation id is	BODVariationID
					
		TriggerVendorGroupNativeLPLBOD is an Instance Action
			restricted
			Entrance Rules
			Parameters
			Action Rules
				invoke NativeLPLBODTriggerChecks FSMBODConfigurationRel
					invoked.PrmVerb 					= 1
					invoked.PrmNoun						= "CodeDefinition"
					invoked.PrmDirection				= 1
					invoked.PrmTriggerFrom				= "VendorGroup"
					invoked.PrmFinanceEnterpriseGroup	= VendorGroup.FinanceEnterpriseGroup
					invoked.PrmMainUserTemplate			= "IONSyncCodeDefination_VendorGroup_ST"
				LocalNativeLPLBODTrigger = FSMBODConfigurationRel.NativeLPLBODTrigger
				LocalBODtrigger = true
				if(VendorGroup.FinanceEnterpriseGroup.BODTrigger and LocalNativeLPLBODTrigger)
					if(FSMInboundBODTracker not entered)
						invoke Create FSMInboundBODTracker
							assign result to NewBODTracker
							invoked.Verb 					= 1
							invoked.Noun 					= "CodeDefinition"					
							invoked.BODDocumentID			= VendorGroup
							invoked.BODVariationID			= BODVariationID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.FinanceEnterpriseGroup	= DerivedFinanceEnterpriseGroup
							invoked.Direction				= 1
							invoked.Reference2				= "VendorGroup"
							initialize invoked.Error			
							initialize invoked.ErrorMessage					
						LocalFSMInboundBODTracker	= NewBODTracker.FSMInboundBODTracker
					else 
						LocalFSMInboundBODTracker		= FSMInboundBODTracker
						invoke Update FSMInboundBODTrackerRel
							invoked.FinanceEnterpriseGroup	= DerivedFinanceEnterpriseGroup
							invoked.BODDocumentID			= VendorGroup
							invoked.BODVariationID			= BODVariationID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.Direction				= 1
							invoked.Reference2				= "VendorGroup"
							initialize invoked.Error			
							initialize invoked.ErrorMessage
					invoke SendVendorGroupNativeLPLBOD
						resume on error
							Error            							= true
							ErrorMessage     							= error message
					if(Error)
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 								= Error
							invoked.ErrorMessage 						= ErrorMessage
							invoked.Status								= 2
							invoked.CloseDate							= system current timestamp
							invoked.BODID								= DerivedBODFormattedId
							invoked.BODXML								= VendorGroupXMLBOD
					else
						invoke Update FSMInboundBODTrackerRel
							invoked.Status									= 3
							invoked.CloseDate								= system current timestamp
							invoked.BODID									= DerivedBODFormattedId
							invoked.BODXML									= VendorGroupXMLBOD

		SetHoldCodesAfterCreate is an Instance Action
			restricted
			Action Rules
				display "VG:SHCAC:1"
				ManualPaymentHoldCode		= TransientManualPaymentHoldCode
				CreditBalanceHoldCode		= TransientCreditBalanceHoldCode
				PrepaymentHoldCode			= TransientPrepaymentHoldCode
				ReturnOnInvestmentHoldCode	= TransientReturnOnInvestmentHoldCode
				MaximumPaymentHoldCode		= TransientMaximumPaymentHoldCode
				MinimumPaymentHoldCode		= TransientMinimumPaymentHoldCode
				RetainageHoldCode			= TransientRetainageHoldCode
				display "VG:SHCAC:2"

		TriggerSupplierPartyMaster is an Instance Action
			restricted
			Parameters
				PrmVendor			is like Vendor
				ActionCode
				PrmProcess			is Boolean
			Local Fields
				LocalTitle 				is Alpha size 255
				Vendor

				VendorContact
			Action Rules
				Vendor = PrmVendor
				if(!PrmProcess)
					LocalTitle = "EG:" + VendorGroup.FinanceEnterpriseGroup +" VG:" + VendorGroup +" Vendor:"+ Vendor
					trigger PayablesService.VendorGroupService PA service
						resume on error
						title is "<LocalTitle>"
						Criteria
							VendorGroup.FinanceEnterpriseGroup
							VendorGroup
						Variables
							ActionCode
							include persistent fields from VendorGroup
							include persistent fields from Vendor
							include persistent fields from Vendor.VendorClass
							include persistent fields from Vendor.first VendorContactRel.VendorContact
							include persistent fields from Vendor.CurrentAddressRel.VendorAddress



							include persistent fields from Vendor.BankEntity
							VendorGroup.FinanceEnterpriseGroup
								variable name is FinEnterpriseGroup
							LocalBODCurrentTimeStamp.OutputBODCurrentTimeStamp
								variable name is CurrentTimeStamp
							VendorGroup.FinanceEnterpriseGroup
								variable name is FinanceEnterpriseGroup

				LocalTitle = "Process:EG:" + VendorGroup.FinanceEnterpriseGroup +" VG:" + VendorGroup +" Vendor:"+ Vendor
				trigger PayablesService.ProcessVendorGroupService PA service
					resume on error
					title is "<LocalTitle>"
					Criteria
						VendorGroup.FinanceEnterpriseGroup
						VendorGroup
					Variables
						ActionCode
						include persistent fields from VendorGroup
						include persistent fields from Vendor
						include persistent fields from Vendor.VendorClass
						include persistent fields from Vendor.CurrentAddressRel.VendorAddress
						include persistent fields from Vendor.BankEntity
						VendorGroup.FinanceEnterpriseGroup
							variable name is FinEnterpriseGroup
						LocalBODCurrentTimeStamp.OutputBODCurrentTimeStamp
							variable name is CurrentTimeStamp
						VendorGroup.FinanceEnterpriseGroup
							variable name is FinanceEnterpriseGroup
		InitiatePayablesProcess is an Instance Action
			restricted
			Parameters
				PayablesService
				Criterion1			is Alpha size 15	
				Criterion2			is Alpha size 15
				Criterion3			is Alpha size 15
				FilterKey			is Alpha size 100
				FilterValue			is Alpha size 100
				PayablesCompany
				PrmVendor						is like Vendor
				PrmVendorLocation				is like VendorLocation
				PrmVendorContact				is like VendorContact
				PrmPayablesInvoice				is like PayablesInvoice
				PrmPayablesInvoiceDistribution	is like PayablesInvoiceDistribution
				PrmPayablesInvoicePayment		is like PayablesInvoicePayment
				PrmPurchaseOrder				is like PurchaseOrder
				ActionCode
				ResumeOnError		is Boolean
			Parameter Rules
				PayablesService
					required
				FilterKey
					if (FilterValue entered)
						required
			Local Fields
				LocalTitle 				is Alpha size 255
				DerivedLink 			is Alpha size up to 1000
				Vendor
				VendorLocation
				VendorContact
				PayablesInvoice
				PayablesInvoiceDistribution
				PayablesInvoicePayment
				PurchaseOrder

			Action Rules
				Vendor 						= PrmVendor
				VendorLocation 				= PrmVendorLocation
				VendorContact				= PrmVendorContact
				PayablesInvoice				= PrmPayablesInvoice
				PayablesInvoiceDistribution	= PrmPayablesInvoiceDistribution
				PayablesInvoicePayment		= PrmPayablesInvoicePayment
				PurchaseOrder				= PrmPurchaseOrder







				LocalTitle = "EG:" + VendorGroup.FinanceEnterpriseGroup +" VG:" + VendorGroup +" Vendor:" + Vendor

				if (PayablesInvoice entered)
					DerivedLink = PayablesInvoice.PayablesInvoiceLinkBack
				else
					DerivedLink = blank

				LocalBODCurrentTimeStamp.CurrentTimeStamp = current timestamp

				if (ResumeOnError)
					if (FilterValue entered)
						trigger PayablesService PA service
							resume on error
							title is "<LocalTitle>"
							Criteria
								VendorGroup.FinanceEnterpriseGroup
								PayablesCompaniesRel.Company
								Criterion3
							category filter is FilterValue
								variable name is FilterKey
							Variables
								ActionCode
								include persistent fields from PayablesCompany
								include persistent fields from VendorGroup
								include persistent fields from Vendor
								include persistent fields from Vendor.VendorClass
								include persistent fields from Vendor.first VendorContactRel.VendorContact
								include persistent fields from Vendor.CurrentAddressRel.VendorAddress
								include persistent fields from VendorLocation
								include persistent fields from VendorContact
								include persistent fields from VendorContact.CurrentAddressRel.VendorAddress
								include persistent fields from PayablesInvoice
								include persistent fields from PayablesInvoiceDistribution
								include persistent fields from PayablesInvoicePayment
								include persistent fields from Vendor.BankEntity
								include persistent fields from PurchaseOrder
								VendorGroup.FinanceEnterpriseGroup
									variable name is FinEnterpriseGroup
								PayablesInvoice.AmountOutOfBalance
									variable name is AmountOutOfBalance

								PayablesInvoicePayment.OpenBasePayment
									variable name is PayablesInvoicePaymentOpenBasePayment
								PayablesInvoicePayment.OpenTransactionPayment
									variable name is PayablesInvoicePaymentOpenTransactionPayment
								PayablesInvoicePayment.BaseNetPayment
									variable name is PayablesInvoicePaymentBaseNetPayment
								PayablesInvoicePayment.TransactionNetPayment
									variable name is PayablesInvoicePaymentTransactionNetPayment
								PayablesInvoicePayment.PaymentStatus
									variable name is PayablesInvoicePaymentPaymentStatus
								PayablesInvoicePayment.BankStatus
									variable name is PayablesInvoicePaymentBankStatus
								PayablesInvoicePayment.NoReinstate
									variable name is PayablesInvoicePaymentNoReinstate
								PayablesInvoicePayment.PaidDocumentDate
									variable name is PayablesInvoicePaymentPaidDocumentDate
								PayablesInvoicePayment.DraftAccrued
									variable name is PayablesInvoicePaymentDraftAccrued
								PayablesInvoicePayment.ApInvoiceDate
									variable name is PayablesInvoicePaymentApInvoiceDate
								PayablesInvoicePayment.ApPoNumber
									variable name is PayablesInvoicePaymentApPoNumber
								PayablesInvoicePayment.ApInvoiceType
									variable name is PayablesInvoicePaymentApInvoiceType
								PayablesInvoicePayment.ApBaseInvoice
									variable name is PayablesInvoicePaymentApBaseInvoice
								PayablesInvoicePayment.ApFormatNumber
									variable name is PayablesInvoicePaymentApFormatNumber

								LocalBODCurrentTimeStamp.OutputBODCurrentTimeStamp
									variable name is CurrentTimeStamp
								VendorGroup.FinanceEnterpriseGroup
									variable name is FinanceEnterpriseGroup
								PayablesCompaniesRel.Company.GeneralLedgerCompany.AccountingEntity
									variable name is AccountingEntity
								PayablesCompaniesRel.Company
									variable name is PayablesCompany
							URLs
								"<DerivedLink>"
					else
						trigger PayablesService PA service
							resume on error
							title is "<LocalTitle>"
							Criteria
								VendorGroup.FinanceEnterpriseGroup
								PayablesCompaniesRel.Company.GeneralLedgerCompany.AccountingEntity
								Criterion3
							Variables
								ActionCode
								include persistent fields from PayablesCompany
								include persistent fields from VendorGroup
								include persistent fields from Vendor
								include persistent fields from Vendor.VendorClass
								include persistent fields from Vendor.first VendorContactRel.VendorContact
								include persistent fields from Vendor.CurrentAddressRel.VendorAddress
								include persistent fields from VendorLocation
								include persistent fields from VendorContact
								include persistent fields from VendorContact.CurrentAddressRel.VendorAddress
								include persistent fields from PayablesInvoice
								include persistent fields from PayablesInvoiceDistribution
								include persistent fields from PayablesInvoicePayment
								include persistent fields from Vendor.BankEntity
								include persistent fields from PurchaseOrder
								VendorGroup.FinanceEnterpriseGroup
									variable name is FinEnterpriseGroup
								Vendor.BankEntity.BranchName
									variable name is BEBranchName
								PayablesInvoice.AmountOutOfBalance
									variable name is AmountOutOfBalance

								PayablesInvoicePayment.OpenBasePayment
									variable name is PayablesInvoicePaymentOpenBasePayment
								PayablesInvoicePayment.OpenTransactionPayment
									variable name is PayablesInvoicePaymentOpenTransactionPayment
								PayablesInvoicePayment.BaseNetPayment
									variable name is PayablesInvoicePaymentBaseNetPayment
								PayablesInvoicePayment.TransactionNetPayment
									variable name is PayablesInvoicePaymentTransactionNetPayment
								PayablesInvoicePayment.PaymentStatus
									variable name is PayablesInvoicePaymentPaymentStatus
								PayablesInvoicePayment.BankStatus
									variable name is PayablesInvoicePaymentBankStatus
								PayablesInvoicePayment.NoReinstate
									variable name is PayablesInvoicePaymentNoReinstate
								PayablesInvoicePayment.PaidDocumentDate
									variable name is PayablesInvoicePaymentPaidDocumentDate
								PayablesInvoicePayment.DraftAccrued
									variable name is PayablesInvoicePaymentDraftAccrued
								PayablesInvoicePayment.ApInvoiceDate
									variable name is PayablesInvoicePaymentApInvoiceDate
								PayablesInvoicePayment.ApPoNumber
									variable name is PayablesInvoicePaymentApPoNumber
								PayablesInvoicePayment.ApInvoiceType
									variable name is PayablesInvoicePaymentApInvoiceType
								PayablesInvoicePayment.ApBaseInvoice
									variable name is PayablesInvoicePaymentApBaseInvoice
								PayablesInvoicePayment.ApFormatNumber
									variable name is PayablesInvoicePaymentApFormatNumber

								LocalBODCurrentTimeStamp.OutputBODCurrentTimeStamp
									variable name is CurrentTimeStamp
								VendorGroup.FinanceEnterpriseGroup
									variable name is FinanceEnterpriseGroup
								PayablesCompaniesRel.Company.GeneralLedgerCompany.AccountingEntity
									variable name is AccountingEntity
								PayablesCompaniesRel.Company
									variable name is PayablesCompany
							URLs
								"<DerivedLink>"
				else
					if (FilterValue entered)
						trigger PayablesService PA service
							title is "<LocalTitle>"
							Criteria
								VendorGroup.FinanceEnterpriseGroup
								PayablesCompaniesRel.Company.GeneralLedgerCompany.AccountingEntity
								Criterion3
							category filter is FilterValue
								variable name is FilterKey
							Variables
								ActionCode
								include persistent fields from PayablesCompany
								include persistent fields from VendorGroup
								include persistent fields from Vendor
								include persistent fields from Vendor.VendorClass
								include persistent fields from Vendor.first VendorContactRel.VendorContact
								include persistent fields from Vendor.CurrentAddressRel.VendorAddress
								include persistent fields from VendorLocation
								include persistent fields from VendorContact
								include persistent fields from PayablesInvoice
								include persistent fields from PayablesInvoiceDistribution
								include persistent fields from PayablesInvoicePayment
								include persistent fields from Vendor.BankEntity
								include persistent fields from PurchaseOrder
								VendorGroup.FinanceEnterpriseGroup
									variable name is FinEnterpriseGroup
								Vendor.BankEntity.BranchName
									variable name is BEBranchName

								PayablesInvoicePayment.OpenBasePayment
									variable name is PayablesInvoicePaymentOpenBasePayment
								PayablesInvoicePayment.OpenTransactionPayment
									variable name is PayablesInvoicePaymentOpenTransactionPayment
								PayablesInvoicePayment.BaseNetPayment
									variable name is PayablesInvoicePaymentBaseNetPayment
								PayablesInvoicePayment.TransactionNetPayment
									variable name is PayablesInvoicePaymentTransactionNetPayment
								PayablesInvoicePayment.PaymentStatus
									variable name is PayablesInvoicePaymentPaymentStatus
								PayablesInvoicePayment.BankStatus
									variable name is PayablesInvoicePaymentBankStatus
								PayablesInvoicePayment.NoReinstate
									variable name is PayablesInvoicePaymentNoReinstate
								PayablesInvoicePayment.PaidDocumentDate
									variable name is PayablesInvoicePaymentPaidDocumentDate
								PayablesInvoicePayment.DraftAccrued
									variable name is PayablesInvoicePaymentDraftAccrued
								PayablesInvoicePayment.ApInvoiceDate
									variable name is PayablesInvoicePaymentApInvoiceDate
								PayablesInvoicePayment.ApPoNumber
									variable name is PayablesInvoicePaymentApPoNumber
								PayablesInvoicePayment.ApInvoiceType
									variable name is PayablesInvoicePaymentApInvoiceType
								PayablesInvoicePayment.ApBaseInvoice
									variable name is PayablesInvoicePaymentApBaseInvoice
								PayablesInvoicePayment.ApFormatNumber
									variable name is PayablesInvoicePaymentApFormatNumber

								LocalBODCurrentTimeStamp.OutputBODCurrentTimeStamp
									variable name is CurrentTimeStamp
								VendorGroup.FinanceEnterpriseGroup
									variable name is FinanceEnterpriseGroup
								PayablesCompaniesRel.Company.GeneralLedgerCompany.AccountingEntity
									variable name is AccountingEntity
								PayablesCompaniesRel.Company
									variable name is PayablesCompany

							URLs
								"<DerivedLink>"
					else
						trigger PayablesService PA service
							title is "<LocalTitle>"
							Criteria
								VendorGroup.FinanceEnterpriseGroup
								PayablesCompaniesRel.Company.GeneralLedgerCompany.AccountingEntity
								Criterion3
							Variables
								ActionCode
								include persistent fields from PayablesCompany
								include persistent fields from VendorGroup
								include persistent fields from Vendor
								include persistent fields from Vendor.VendorClass
								include persistent fields from Vendor.first VendorContactRel.VendorContact
								include persistent fields from Vendor.CurrentAddressRel.VendorAddress
								include persistent fields from VendorLocation
								include persistent fields from VendorContact
								include persistent fields from PayablesInvoice
								include persistent fields from PayablesInvoiceDistribution
								include persistent fields from PayablesInvoicePayment
								include persistent fields from Vendor.BankEntity
								include persistent fields from PurchaseOrder
								VendorGroup.FinanceEnterpriseGroup
									variable name is FinEnterpriseGroup
								Vendor.BankEntity.BranchName
									variable name is BEBranchName

								PayablesInvoicePayment.OpenBasePayment
									variable name is PayablesInvoicePaymentOpenBasePayment
								PayablesInvoicePayment.OpenTransactionPayment
									variable name is PayablesInvoicePaymentOpenTransactionPayment
								PayablesInvoicePayment.BaseNetPayment
									variable name is PayablesInvoicePaymentBaseNetPayment
								PayablesInvoicePayment.TransactionNetPayment
									variable name is PayablesInvoicePaymentTransactionNetPayment
								PayablesInvoicePayment.PaymentStatus
									variable name is PayablesInvoicePaymentPaymentStatus
								PayablesInvoicePayment.BankStatus
									variable name is PayablesInvoicePaymentBankStatus
								PayablesInvoicePayment.NoReinstate
									variable name is PayablesInvoicePaymentNoReinstate
								PayablesInvoicePayment.PaidDocumentDate
									variable name is PayablesInvoicePaymentPaidDocumentDate
								PayablesInvoicePayment.DraftAccrued
									variable name is PayablesInvoicePaymentDraftAccrued
								PayablesInvoicePayment.ApInvoiceDate
									variable name is PayablesInvoicePaymentApInvoiceDate
								PayablesInvoicePayment.ApPoNumber
									variable name is PayablesInvoicePaymentApPoNumber
								PayablesInvoicePayment.ApInvoiceType
									variable name is PayablesInvoicePaymentApInvoiceType
								PayablesInvoicePayment.ApBaseInvoice
									variable name is PayablesInvoicePaymentApBaseInvoice
								PayablesInvoicePayment.ApFormatNumber
									variable name is PayablesInvoicePaymentApFormatNumber

								LocalBODCurrentTimeStamp.OutputBODCurrentTimeStamp
									variable name is CurrentTimeStamp
								VendorGroup.FinanceEnterpriseGroup
									variable name is FinanceEnterpriseGroup
								PayablesCompaniesRel.Company.GeneralLedgerCompany.AccountingEntity
									variable name is AccountingEntity
								PayablesCompaniesRel.Company
									variable name is PayablesCompany
							URLs
								"<DerivedLink>"

		UpdateAPInvoiceAutomationCubes is a Set Action
			restricted
			completion message is "UpdateAnalyticCubeSubmitted"
			Parameters

				UpdatePayablesInvoice				is Boolean
				PayablesInvoiceOption				is a CubeUpdateOption
				UpdatePayablesInvoiceDistribution	is Boolean
				PayablesInvoiceDistributionOption	is a CubeUpdateOption
				UpdatePayablesInvoicePayment		is Boolean
				PayablesInvoicePaymentOption		is a CubeUpdateOption
				
			Parameter Rules



				UpdatePayablesInvoice
					initial value is true
				PayablesInvoiceOption
					initial value is 1
				UpdatePayablesInvoiceDistribution
					initial value is true
				PayablesInvoiceDistributionOption
					initial value is 1
				UpdatePayablesInvoicePayment
					initial value is true
				PayablesInvoicePaymentOption
					initial value is 1

			Action Rules
				Set Rules
					Exit Rules
						if (UpdatePayablesInvoice)	
							if (PayablesInvoiceOption.Refresh)
								invoke Refresh PayablesInvoiceAnalyticCubeRel in background
							else
								invoke Reload PayablesInvoiceAnalyticCubeRel in background
						if (UpdatePayablesInvoiceDistribution)	
							if (PayablesInvoiceDistributionOption.Refresh)
								invoke Refresh PayablesInvoiceDistributionAnalyticCubeRel in background
							else
								invoke Reload PayablesInvoiceDistributionAnalyticCubeRel in background
						if (UpdatePayablesInvoicePayment)	
							if (PayablesInvoicePaymentOption.Refresh)
								invoke Refresh PayablesInvoicePaymentAnalyticCubeRel in background
							else
								invoke Reload PayablesInvoicePaymentAnalyticCubeRel in background

		JournalizeDistributionsForGroup is an Instance Action 
			restricted
			Parameters
				PrmEnterpriseGroup		is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
				PrmJournalizeGroup      is like JournalizeGroup
				PrmCBJournalizeGroup    is like JournalizeGroup
				PrmJournalizeGroupDescription is a Description
				PrmPayGroup				is like PayGroup				
				PrmRunProgram			is a RunProgram					
				PrmProcessGroup			is like PayablesProcessGroup	
			Action Rules
				if (PrmJournalizeGroup entered)
					if (PrmEnterpriseGroup.FundAccounting		
					and PrmPayGroup entered)
						LocalPayGroup			= PrmPayGroup
						LocalRunProgram			= PrmRunProgram
						LocalProcessGroup		= PrmProcessGroup
						invoke JournalizeDistributionsForGroup PayablesInvoiceDistribution
							run after PayablesProcessingMonitorRel.AsyncId
							invoked.PrmEnterpriseGroup		= PrmEnterpriseGroup
							invoked.PrmJournalizeGroup		= PrmJournalizeGroup
							invoked.PrmDescription			= PrmJournalizeGroupDescription
					else
						invoke JournalizeDistributionsForGroup PayablesInvoiceDistribution
							invoked.PrmEnterpriseGroup		= PrmEnterpriseGroup
							invoked.PrmJournalizeGroup		= PrmJournalizeGroup
							invoked.PrmDescription			= PrmJournalizeGroupDescription
				if (PrmCBJournalizeGroup entered)
					if (PrmEnterpriseGroup.FundAccounting		
					and PrmPayGroup entered)
						LocalPayGroup			= PrmPayGroup
						LocalRunProgram			= PrmRunProgram
						LocalProcessGroup		= PrmProcessGroup
						invoke JournalizeDistributionsForGroup CashLedgerGLDistribution
							run after PayablesProcessingMonitorRel.AsyncId
							invoked.PrmCashManagementGroup	= PrmEnterpriseGroup
							invoked.PrmJournalizeGroup		= PrmCBJournalizeGroup
							invoked.PrmDescription			= PrmJournalizeGroupDescription
					else
						invoke JournalizeDistributionsForGroup CashLedgerGLDistribution
							invoked.PrmCashManagementGroup	= PrmEnterpriseGroup
							invoked.PrmJournalizeGroup		= PrmCBJournalizeGroup
							invoked.PrmDescription			= PrmJournalizeGroupDescription
				if (PrmEnterpriseGroup.FundAccounting
				and !PrmRunProgram.InvoiceReinstatement
				and PrmPayGroup entered)
					LocalPayGroup			= PrmPayGroup
					LocalRunProgram			= PrmRunProgram
					LocalProcessGroup		= PrmProcessGroup
					invoke UpdateCashCodeFundBalances CashCodeFundConsolidatedUpdate
						run after PayablesProcessingMonitorRel.AsyncId
						invoked.PrmCashManagementGroup		= PrmEnterpriseGroup
						invoked.PrmPayGroup					= PrmPayGroup

		ValidateOFAC is an Instance Action
			valid when (VendorGroup.ValidateOFAC)
			restricted
			Parameters
				Name				is Alpha size 50
				Address				is Alpha size 50
				City				is Alpha size 50
				State				is Alpha size 50
				Country				is Alpha size 50
				PostalCode			is Alpha size 50
			Local Fields
			Action Rules
				OFACWebService.Reference			= UniqueID
				OFACWebService.Name					= Name
				OFACWebService.Addressess			= Address
				OFACWebService.City					= City
				OFACWebService.State				= State
				OFACWebService.Country				= Country
				OFACWebService.PostalCode			= PostalCode
				OFACWebService.CompareThreshold		= VendorGroup.OFACCompareThreshold
				constraint (!OFACWebService.HasOFACResults)
					"OFACResultsExceedThreshold"

		SendNotificationNoRecordsForVendorStatement is an Instance Action
			restricted
			Local Fields
				LocalActor							is an Actor
			Action Rules
				LocalActor = actor

				send notification
					to LocalActor
					description is "NoRecordsToProcessForVendorStatementVendorGroup_<VendorGroup>"
					priority is high
					detail is "NoRecordsToProcessForVendorStatement.PleaseCheckTheInvoicesAndParametersToProcessAndRunTheBatchProgramAgain."


		UploadUS1099IDMTemplate is a Set Action
			default label is untranslatable
			restricted

			Local Fields
				LocalAsyncId is an AsyncActionRequest

			Instance Selection
				where (EnableUS1099IDMForms)

			Action Rules
				Instance Rules
					invoke UploadUS1099IDMTemplates DefaultIDMTemplate in background group (US1099IDMTemplateUploadBackgroundGroup)
						run after LocalAsyncId
						assign async action request id to LocalAsyncId
						resume on error
						invoked.PrmFinanceEnterpriseGroup = VendorGroup.FinanceEnterpriseGroup
						invoked.PrmVendorGroup			  = VendorGroup

		UpdatePreviousUS1099IDMTemplates is an Instance Action
			default label is untranslatable
			restricted

		ForceUploadUS1099IDMTemplate is an Instance Action
			default label is "ReloadUS1099IDMTemplate"
			completion message is "ReloadingUS1099IDMTemplates.PleaseClickOnRefresh."
			valid when (ForceUploadIsValid)
			Parameters
				PrmConfirmation is Boolean
				
			Action Rules
				invoke UploadUS1099IDMTemplates DefaultIDMTemplate in background group (US1099IDMTemplateUploadBackgroundGroup)
					resume on error
					invoked.ForceUpload = true
					invoked.PrmFinanceEnterpriseGroup = VendorGroup.FinanceEnterpriseGroup
					invoked.PrmVendorGroup			  = VendorGroup
					
		
		UploadUS1099IDMTemplatePerInstance is an Instance Action					
			default label is untranslatable
			restricted

						
	Action Exit Rules
		if (VendorGroup.FinanceEnterpriseGroup.BODTrigger and !LocalBODtrigger)
			if (!action type.Delete)
				if (action != "UpdateBODIdFields" and action!= "TriggerSupplierPartyMaster" and action!="InitiatePayablesProcess"
				and action!= "UpdatePeriodEndDate" and action!= "SetHoldCodesAfterCreate" and action!= "UpdateAPInvoiceAutomationCubes"
				and action!= "JournalizeDistributionsForGroup" and action!= "ValidateOFAC" and action!= "SendNotificationNoRecordsForVendorStatement") 
					if (bod id.VariationID < 1)
						ActionCode	= ActionCode.Create
					else
						ActionCode	= ActionCode.Update
					increment bod id.VariationID
					LocalBODCurrentTimeStamp.CurrentTimeStamp = current timestamp
					include TriggerVendorGroupCDServiceRules

					LocalBODtrigger = true




