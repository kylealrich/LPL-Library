PfiWorkunitCountDisplay is a BusinessClass
    default label is "WorkUnitCountDisplay"
    owned by pfi
    store using com.lawson.rdtech.framework.pfi.WorkunitCountDisplayStorage

    Ontology
        symbolic key is PfiWorkunitCountDisplay

    Patterns
        disable AsOfDateProcessing
        disable Auditing
        disable EffectiveDated
        disable UniqueID
        implements ReadOnly

    Derived Fields

        WorkUnitStatusString is a DerivedField
            type is Alpha size 20
            default label is "WorkUnitStatus"
            if (PfiWorkunitCountDisplay.WorkUnitStatus.NotReady)
                return NotReadyMessage
            else
            if (PfiWorkunitCountDisplay.WorkUnitStatus.Ready)
                return ReadyMessage
            else
            if (PfiWorkunitCountDisplay.WorkUnitStatus.Processing)
                return ProcessingMessage
            else
            if (PfiWorkunitCountDisplay.WorkUnitStatus.Failed)
                return FailedMessage
            else
            if (PfiWorkunitCountDisplay.WorkUnitStatus.Completed)
                return CompletedMessage
            else
            if (PfiWorkunitCountDisplay.WorkUnitStatus.Canceling)
                return CancelingMessage
            else
            if (PfiWorkunitCountDisplay.WorkUnitStatus.Canceled)
                return CanceledMessage
            else
            if (PfiWorkunitCountDisplay.WorkUnitStatus.Waiting)
                return WaitingMessage
            return InvalidStatusMessage

        NotReadyMessage is a MessageField
            restricted
            "Not_Ready"

        ReadyMessage is a MessageField
            restricted
            "Ready"

        ProcessingMessage is a MessageField
            restricted
            "Processing"

        FailedMessage is a MessageField
            restricted
            "Failed"

        CompletedMessage is a MessageField
            restricted
            "Completed"

        CancelingMessage is a MessageField
            restricted
            "Canceling"

        CanceledMessage is a MessageField
            restricted
            "Canceled"

        WaitingMessage is a MessageField
            restricted
            "Waiting"

        InvalidStatusMessage is a MessageField
            restricted
            "Invalid_Status"

        WorkunitStatusCount is a DerivedField
            type is Numeric size 12
            default label is "WorkUnitStatusCount"
            if (PfiWorkunitCountDisplay.WorkUnitStatus.NotReady)
                return NotReadyCount
            else
            if (PfiWorkunitCountDisplay.WorkUnitStatus.Ready)
                return ReadyCount
            else
            if (PfiWorkunitCountDisplay.WorkUnitStatus.Processing)
                return ProcessingCount
            else
            if (PfiWorkunitCountDisplay.WorkUnitStatus.Failed)
                return FailedCount
            else
            if (PfiWorkunitCountDisplay.WorkUnitStatus.Completed)
                return CompletedCount
            else
            if (PfiWorkunitCountDisplay.WorkUnitStatus.Canceling)
                return CancelingCount
            else
            if (PfiWorkunitCountDisplay.WorkUnitStatus.Canceled)
                return CanceledCount
            else
            if (PfiWorkunitCountDisplay.WorkUnitStatus.Waiting)
                return WaitingCount
            return 0

        NotReadyCount is a DerivedField
            type is Numeric size 12
            if (NotReadyRel.exists)
                return instance count of NotReadyRel
            return 0

        ReadyCount is a DerivedField
            type is Numeric size 12
            if (ReadyRel.exists)
                return instance count of ReadyRel
            return 0

        ProcessingCount is a DerivedField
            type is Numeric size 12
            if (ProcessingRel.exists)
                return instance count of ProcessingRel
            return 0

        FailedCount is a DerivedField
            type is Numeric size 12
            if (FailedRel.exists)
                return instance count of FailedRel
            return 0

        CompletedCount is a DerivedField
            type is Numeric size 12
            if (CompletedRel.exists)
                return instance count of CompletedRel
            return 0

        CancelingCount is a DerivedField
            type is Numeric size 12
            if (CancelingRel.exists)
                return instance count of CancelingRel
            return 0

        CanceledCount is a DerivedField
            type is Numeric size 12
            if (CanceledRel.exists)
                return instance count of CanceledRel
            return 0

        WaitingCount is a DerivedField
            type is Numeric size 12
            if (WaitingRel.exists)
                return instance count of WaitingRel

    Local Fields

        LocalWorkUnitStatus is a PfiWorkunitStatus

    Relations

        NotReadyRel
            one-to-many relation to PfiWorkunit
            Field Mapping uses ByStatusWorkunitLive
                related.Status = LocalWorkUnitStatus.NotReady

        ReadyRel
            one-to-many relation to PfiWorkunit
            Field Mapping uses ByStatusWorkunitLive
                related.Status = LocalWorkUnitStatus.Ready

        ProcessingRel
            one-to-many relation to PfiActiveWorkUnits
            Field Mapping uses symbolic key

        FailedRel
            one-to-many relation to PfiWorkunit
            Field Mapping uses ByStatusWorkunitLive
                related.Status = LocalWorkUnitStatus.Failed

        CompletedRel
            one-to-many relation to PfiWorkunit
            Field Mapping uses ByStatusWorkunitLive
                related.Status = LocalWorkUnitStatus.Completed

        CancelingRel
            one-to-many relation to PfiWorkunit
            Field Mapping uses ByStatusWorkunitLive
                related.Status = LocalWorkUnitStatus.Canceling

        CanceledRel
            one-to-many relation to PfiWorkunit
            Field Mapping uses ByStatusWorkunitLive
                related.Status = LocalWorkUnitStatus.Canceled

        WaitingRel
            one-to-many relation to PfiWorkunit
            Field Mapping uses ByStatusWorkunitLive
                related.Status = LocalWorkUnitStatus.Waiting

        WorkunitStateRel
            one-to-many relation to PfiWorkunit
            Field Mapping uses ByStatusWorkunitLive
                related.Status = PfiWorkunitCountDisplay.WorkUnitStatus
            Instance Selection
                where (related.IsActionPending = false and related.IsActionPendingInServer = false)
