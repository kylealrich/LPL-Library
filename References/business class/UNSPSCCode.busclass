UNSPSCCode is a BusinessClass
    owned by ic
    prefix is IIC
    classic name is UNSPSCCODE

    Ontology
        symbolic key is UNSPSCCode
            classic set name is IICSET1
            classic name for UNSPSCCode.UNSPSCSegment is ICSEGMENT
            classic name for UNSPSCCode.UNSPSCFamily is ICFAMILY
            classic name for UNSPSCCode.UNSPSCClass is ICCLASS
            classic name for UNSPSCCode.UNSPSCCommodity is ICCOMMODITY

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields

        DescriptionLevel is Numeric size 1
            classic name is DESC-LEVEL
            States
                SegmentDescription   value is 1
                FamilyDescription    value is 2
                ClassDescription     value is 3
                CommodityDescription value is 4
        ShortDescription is Alpha up to 100
			default label is "Title"
            classic name is ICCODE-SDESC
		LongDescription  is Text
			default label is "Definition"
			classic name is ICCODE-LDESC
			text searchable
        InUse            is Boolean
            classic name is ICCODE-ACTIVE

	Local Fields
		
		LocalUNSPSCSegment		is like UNSPSCSegment
		LocalUNSPSCFamily		is like UNSPSCFamily
		LocalUNSPSCClass		is like UNSPSCClass
		LocalUNSPSCCommodity	is like UNSPSCCommodity
		LocalContractTierGroup
		LocalContractImportTierGroup
		LocalContractRebate
		
	Derived Fields
		UNSPSCCodeDisplay is a DerivedField
			type is Alpha 8
			default label is "UNSPSCCode"
			return UNSPSCCode.UNSPSCSegment + UNSPSCCode.UNSPSCFamily + UNSPSCCode.UNSPSCClass + UNSPSCCode.UNSPSCCommodity

    Conditions

        IsActiveClass
            classic name is ACTIVECLASS
            restricted
            when (DescriptionLevel.ClassDescription
            and   InUse)

        IsActiveCommodity
            classic name is ACTIVECOMMODIT
            restricted
            when (DescriptionLevel.CommodityDescription
            and   InUse)

        IsActiveFamily
            classic name is ACTIVEFAMILY
            restricted
            when (DescriptionLevel.FamilyDescription
            and   InUse)

        IsActiveSegment
            classic name is ACTIVESEGMENT
            restricted
            when (DescriptionLevel.SegmentDescription
            and   InUse)

        IsAllClass
            classic name is ALLCLASS
            restricted
            when (DescriptionLevel.ClassDescription)

        IsAllCommodity
            classic name is ALLCOMMODITY
            restricted
            when (DescriptionLevel.CommodityDescription)

        IsAllFamily
            classic name is ALLFAMILY
            restricted
            when (DescriptionLevel.FamilyDescription)

        IsAllSegment
            classic name is ALLSEGMENT
            restricted
            when (DescriptionLevel.SegmentDescription)
            
        SegmentLevel
        	restricted
			when (UNSPSCCode.UNSPSCSegment  != "00"
           	and   UNSPSCCode.UNSPSCFamily    = "00"
           	and   UNSPSCCode.UNSPSCClass     = "00"
           	and   UNSPSCCode.UNSPSCCommodity = "00")
		FamilyLevel
			restricted
			when (UNSPSCCode.UNSPSCSegment  != "00"
           	and   UNSPSCCode.UNSPSCFamily   != "00"
           	and   UNSPSCCode.UNSPSCClass     = "00"
           	and   UNSPSCCode.UNSPSCCommodity = "00")
		ClassLevel
			restricted
			when (UNSPSCCode.UNSPSCSegment   != "00"
           	and   UNSPSCCode.UNSPSCFamily    != "00"
           	and   UNSPSCCode.UNSPSCClass     != "00"
           	and   UNSPSCCode.UNSPSCCommodity  = "00")
		CommodityLevel
			restricted
			when (UNSPSCCode.UNSPSCSegment   != "00"
           	and   UNSPSCCode.UNSPSCFamily    != "00"
           	and   UNSPSCCode.UNSPSCClass     != "00"
           	and   UNSPSCCode.UNSPSCCommodity != "00")

		ItemGroupExist
			restricted
			when (ItemGroup exist)
		UNSPSCSegmentExist
			restricted
			when (UNSPSCCode.UNSPSCSegment entered)
		UNSPSCFamilyExist
			restricted
			when (UNSPSCCode.UNSPSCFamily entered)
		UNSPSCClassExist
			restricted
			when (UNSPSCCode.UNSPSCClass entered)
		UNSPSCCommodityExist
			restricted
			when (UNSPSCCode.UNSPSCCommodity entered)

    Relations

        ItemGTINsRel
            classic name is ICITEMGTIN
            one-to-many relation to ItemGTIN
            Field Mapping uses Set5
                related.ItemGroup = ItemGroup
            Instance Selection
                where (related.UNSPSCCode.UNSPSCSegment = UNSPSCCode.UNSPSCSegment
                and   related.UNSPSCCode.UNSPSCFamily = UNSPSCCode.UNSPSCFamily
                and   related.UNSPSCCode.UNSPSCClass = UNSPSCCode.UNSPSCClass
                and   related.UNSPSCCode.UNSPSCCommodity = UNSPSCCode.UNSPSCCommodity)

        ItemsRel
            classic name is ITEMCODETOITEM
            one-to-many relation to Item
            Field Mapping uses Set10
                related.ItemGroup 		= ItemGroup
				related.UNSPSCCode	 	= UNSPSCCode
 
		ParentRecordRel
			one-to-one relation to UNSPSCCode
			Field Mapping uses symbolic key
				related.ItemGroup					= ItemGroup
				related.UNSPSCCode.UNSPSCSegment	= LocalUNSPSCSegment
				related.UNSPSCCode.UNSPSCFamily		= LocalUNSPSCFamily
				related.UNSPSCCode.UNSPSCClass		= LocalUNSPSCClass
				related.UNSPSCCode.UNSPSCCommodity	= LocalUNSPSCCommodity
				
				
		ContractTierQualifierCodeRel
    		one-to-many relation to ContractTierQualifierCode
            Field Mapping uses  symbolic key
          		related.ContractGroup		  = LocalContractTierGroup.ContractGroup
           		related.Contract			  = LocalContractTierGroup.Contract
           		related.ContractTier		  = LocalContractTierGroup.ContractTier
           		related.ContractTierQualifier = LocalContractTierGroup.ContractTierQualifier
           	Instance Selection
           		where (related.UnspscCode = UNSPSCCode)
           		
  		Level1TierChildrenRel
    		one-to-many relation to ContractTierQualifierCode
            Field Mapping uses  symbolic key
          		related.ContractGroup		  = LocalContractTierGroup.ContractGroup
           		related.Contract			  = LocalContractTierGroup.Contract
           		related.ContractTier		  = LocalContractTierGroup.ContractTier
           		related.ContractTierQualifier = LocalContractTierGroup.ContractTierQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment   = UNSPSCCode.UNSPSCSegment)
           		and    (related.UnspscCode.UNSPSCFamily    != "00"
           		or      related.UnspscCode.UNSPSCClass     != "00"
           		or      related.UnspscCode.UNSPSCCommodity != "00"))
           		
    	Level2TierChildrenRel
    		one-to-many relation to ContractTierQualifierCode
            Field Mapping uses  symbolic key
          		related.ContractGroup		  = LocalContractTierGroup.ContractGroup
           		related.Contract			  = LocalContractTierGroup.Contract
           		related.ContractTier		  = LocalContractTierGroup.ContractTier
           		related.ContractTierQualifier = LocalContractTierGroup.ContractTierQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment    = UNSPSCCode.UNSPSCSegment
           		and     related.UnspscCode.UNSPSCFamily     = UNSPSCCode.UNSPSCFamily)
           		and    (related.UnspscCode.UNSPSCClass     != "00"
           		or      related.UnspscCode.UNSPSCCommodity != "00"))
           		
    	Level3TierChildrenRel
    		one-to-many relation to ContractTierQualifierCode
            Field Mapping uses  symbolic key
          		related.ContractGroup		  = LocalContractTierGroup.ContractGroup
           		related.Contract			  = LocalContractTierGroup.Contract
           		related.ContractTier		  = LocalContractTierGroup.ContractTier
           		related.ContractTierQualifier = LocalContractTierGroup.ContractTierQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment   = UNSPSCCode.UNSPSCSegment
           		and     related.UnspscCode.UNSPSCFamily    = UNSPSCCode.UNSPSCFamily
           		and     related.UnspscCode.UNSPSCClass     = UNSPSCCode.UNSPSCClass)
           		and    (related.UnspscCode.UNSPSCCommodity != "00"))

    	Level2TierParentRel
    		one-to-many relation to ContractTierQualifierCode
            Field Mapping uses  symbolic key
          		related.ContractGroup		  = LocalContractTierGroup.ContractGroup
           		related.Contract			  = LocalContractTierGroup.Contract
           		related.ContractTier		  = LocalContractTierGroup.ContractTier
           		related.ContractTierQualifier = LocalContractTierGroup.ContractTierQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment    = UNSPSCCode.UNSPSCSegment)
           		and    (related.UnspscCode.UNSPSCFamily     = "00"
           		and     related.UnspscCode.UNSPSCClass      = "00"
           		and     related.UnspscCode.UNSPSCCommodity  = "00"))
           		
    	Level3TierParentRel
    		one-to-many relation to ContractTierQualifierCode
            Field Mapping uses  symbolic key
          		related.ContractGroup		  = LocalContractTierGroup.ContractGroup
           		related.Contract			  = LocalContractTierGroup.Contract
           		related.ContractTier		  = LocalContractTierGroup.ContractTier
           		related.ContractTierQualifier = LocalContractTierGroup.ContractTierQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment   = UNSPSCCode.UNSPSCSegment
           		and     related.UnspscCode.UNSPSCFamily    = UNSPSCCode.UNSPSCFamily)
           		and    (related.UnspscCode.UNSPSCClass     = "00"
           		and     related.UnspscCode.UNSPSCCommodity = "00"))
           		
    	Level4TierParentRel
    		one-to-many relation to ContractTierQualifierCode
            Field Mapping uses  symbolic key
          		related.ContractGroup		  = LocalContractTierGroup.ContractGroup
           		related.Contract			  = LocalContractTierGroup.Contract
           		related.ContractTier		  = LocalContractTierGroup.ContractTier
           		related.ContractTierQualifier = LocalContractTierGroup.ContractTierQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment   = UNSPSCCode.UNSPSCSegment
           		and     related.UnspscCode.UNSPSCFamily    = UNSPSCCode.UNSPSCFamily
           		and     related.UnspscCode.UNSPSCClass     = UNSPSCCode.UNSPSCClass)
           		and    (related.UnspscCode.UNSPSCCommodity = "00"))
           		
    	ContractImportTierQualifierCodeRel
    		one-to-many relation to ContractImportTierQualCode
            Field Mapping uses  symbolic key
          		related.ContractGroup		        = LocalContractImportTierGroup.ContractGroup
           		related.ContractImport			    = LocalContractImportTierGroup.ContractImport
           		related.ContractImportTier		    = LocalContractImportTierGroup.ContractImportTier
           		related.ContractImportTierQualifier = LocalContractImportTierGroup.ContractImportTierQualifier
           	Instance Selection
           		where (related.UnspscCode = UNSPSCCode)
           		
  		Level1ImportTierChildrenRel
    		one-to-many relation to ContractImportTierQualCode
            Field Mapping uses  symbolic key
          		related.ContractGroup		        = LocalContractImportTierGroup.ContractGroup
           		related.ContractImport			    = LocalContractImportTierGroup.ContractImport
           		related.ContractImportTier		    = LocalContractImportTierGroup.ContractImportTier
           		related.ContractImportTierQualifier = LocalContractImportTierGroup.ContractImportTierQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment   = UNSPSCCode.UNSPSCSegment)
           		and    (related.UnspscCode.UNSPSCFamily    != "00"
           		or      related.UnspscCode.UNSPSCClass     != "00"
           		or      related.UnspscCode.UNSPSCCommodity != "00"))
           		
    	Level2ImportTierChildrenRel
    		one-to-many relation to ContractImportTierQualCode
            Field Mapping uses  symbolic key
          		related.ContractGroup		        = LocalContractImportTierGroup.ContractGroup
           		related.ContractImport			    = LocalContractImportTierGroup.ContractImport
           		related.ContractImportTier		    = LocalContractImportTierGroup.ContractImportTier
           		related.ContractImportTierQualifier = LocalContractImportTierGroup.ContractImportTierQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment    = UNSPSCCode.UNSPSCSegment
           		and     related.UnspscCode.UNSPSCFamily     = UNSPSCCode.UNSPSCFamily)
           		and    (related.UnspscCode.UNSPSCClass     != "00"
           		or      related.UnspscCode.UNSPSCCommodity != "00"))
           		
    	Level3ImportTierChildrenRel
    		one-to-many relation to ContractImportTierQualCode
            Field Mapping uses  symbolic key
          		related.ContractGroup		        = LocalContractImportTierGroup.ContractGroup
           		related.ContractImport			    = LocalContractImportTierGroup.ContractImport
           		related.ContractImportTier		    = LocalContractImportTierGroup.ContractImportTier
           		related.ContractImportTierQualifier = LocalContractImportTierGroup.ContractImportTierQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment   = UNSPSCCode.UNSPSCSegment
           		and     related.UnspscCode.UNSPSCFamily    = UNSPSCCode.UNSPSCFamily
           		and     related.UnspscCode.UNSPSCClass     = UNSPSCCode.UNSPSCClass)
           		and    (related.UnspscCode.UNSPSCCommodity != "00"))

    	Level2ImportTierParentRel
    		one-to-many relation to ContractImportTierQualCode
            Field Mapping uses  symbolic key
          		related.ContractGroup		        = LocalContractImportTierGroup.ContractGroup
           		related.ContractImport			    = LocalContractImportTierGroup.ContractImport
           		related.ContractImportTier		    = LocalContractImportTierGroup.ContractImportTier
           		related.ContractImportTierQualifier = LocalContractImportTierGroup.ContractImportTierQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment    = UNSPSCCode.UNSPSCSegment)
           		and    (related.UnspscCode.UNSPSCFamily     = "00"
           		and     related.UnspscCode.UNSPSCClass      = "00"
           		and     related.UnspscCode.UNSPSCCommodity  = "00"))
           		
    	Level3ImportTierParentRel
    		one-to-many relation to ContractImportTierQualCode
            Field Mapping uses  symbolic key
          		related.ContractGroup		        = LocalContractImportTierGroup.ContractGroup
           		related.ContractImport			    = LocalContractImportTierGroup.ContractImport
           		related.ContractImportTier		    = LocalContractImportTierGroup.ContractImportTier
           		related.ContractImportTierQualifier = LocalContractImportTierGroup.ContractImportTierQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment   = UNSPSCCode.UNSPSCSegment
           		and     related.UnspscCode.UNSPSCFamily    = UNSPSCCode.UNSPSCFamily)
           		and    (related.UnspscCode.UNSPSCClass     = "00"
           		and     related.UnspscCode.UNSPSCCommodity = "00"))
           		
    	Level4ImportTierParentRel
    		one-to-many relation to ContractImportTierQualCode
            Field Mapping uses  symbolic key
          		related.ContractGroup		        = LocalContractImportTierGroup.ContractGroup
           		related.ContractImport			    = LocalContractImportTierGroup.ContractImport
           		related.ContractImportTier		    = LocalContractImportTierGroup.ContractImportTier
           		related.ContractImportTierQualifier = LocalContractImportTierGroup.ContractImportTierQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment   = UNSPSCCode.UNSPSCSegment
           		and     related.UnspscCode.UNSPSCFamily    = UNSPSCCode.UNSPSCFamily
           		and     related.UnspscCode.UNSPSCClass     = UNSPSCCode.UNSPSCClass)
           		and    (related.UnspscCode.UNSPSCCommodity = "00"))
    	
    	ContractRebateQualifierCodeRel
    		one-to-many relation to ContractRebateQualifierCode
            Field Mapping uses symbolic key
          		related.ContractGroup		    = LocalContractRebate.ContractGroup
           		related.Contract			    = LocalContractRebate.Contract
           		related.ContractRebateType		= LocalContractRebate.ContractRebateType
				related.ContractRebate			= blank
           		related.ContractRebateQualifier = LocalContractRebate.ContractRebateQualifier
           	Instance Selection
           		where (related.UnspscCode = UNSPSCCode)

  		Level1RebateChildrenRel
    		one-to-many relation to ContractRebateQualifierCode
            Field Mapping uses symbolic key
          		related.ContractGroup		    = LocalContractRebate.ContractGroup
           		related.Contract			    = LocalContractRebate.Contract
           		related.ContractRebateType		= LocalContractRebate.ContractRebateType
				related.ContractRebate			= blank
           		related.ContractRebateQualifier = LocalContractRebate.ContractRebateQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment   = UNSPSCCode.UNSPSCSegment)
           		and    (related.UnspscCode.UNSPSCFamily    != "00"
           		or      related.UnspscCode.UNSPSCClass     != "00"
           		or      related.UnspscCode.UNSPSCCommodity != "00"))
           		
    	Level2RebateChildrenRel
    		one-to-many relation to ContractRebateQualifierCode
            Field Mapping uses symbolic key
          		related.ContractGroup		    = LocalContractRebate.ContractGroup
           		related.Contract			    = LocalContractRebate.Contract
           		related.ContractRebateType		= LocalContractRebate.ContractRebateType
				related.ContractRebate			= blank
           		related.ContractRebateQualifier = LocalContractRebate.ContractRebateQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment    = UNSPSCCode.UNSPSCSegment
           		and     related.UnspscCode.UNSPSCFamily     = UNSPSCCode.UNSPSCFamily)
           		and    (related.UnspscCode.UNSPSCClass     != "00"
           		or      related.UnspscCode.UNSPSCCommodity != "00"))
           		
    	Level3RebateChildrenRel
    		one-to-many relation to ContractRebateQualifierCode
            Field Mapping uses symbolic key
          		related.ContractGroup		    = LocalContractRebate.ContractGroup
           		related.Contract			    = LocalContractRebate.Contract
           		related.ContractRebateType		= LocalContractRebate.ContractRebateType
				related.ContractRebate			= blank
           		related.ContractRebateQualifier = LocalContractRebate.ContractRebateQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment   = UNSPSCCode.UNSPSCSegment
           		and     related.UnspscCode.UNSPSCFamily    = UNSPSCCode.UNSPSCFamily
           		and     related.UnspscCode.UNSPSCClass     = UNSPSCCode.UNSPSCClass)
           		and    (related.UnspscCode.UNSPSCCommodity != "00"))

    	Level2RebateParentRel
    		one-to-many relation to ContractRebateQualifierCode
            Field Mapping uses symbolic key
          		related.ContractGroup		    = LocalContractRebate.ContractGroup
           		related.Contract			    = LocalContractRebate.Contract
           		related.ContractRebateType		= LocalContractRebate.ContractRebateType
				related.ContractRebate			= blank
           		related.ContractRebateQualifier = LocalContractRebate.ContractRebateQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment    = UNSPSCCode.UNSPSCSegment)
           		and    (related.UnspscCode.UNSPSCFamily     = "00"
           		and     related.UnspscCode.UNSPSCClass      = "00"
           		and     related.UnspscCode.UNSPSCCommodity  = "00"))
           		
    	Level3RebateParentRel
    		one-to-many relation to ContractRebateQualifierCode
            Field Mapping uses symbolic key
          		related.ContractGroup		    = LocalContractRebate.ContractGroup
           		related.Contract			    = LocalContractRebate.Contract
           		related.ContractRebateType		= LocalContractRebate.ContractRebateType
				related.ContractRebate			= blank
           		related.ContractRebateQualifier = LocalContractRebate.ContractRebateQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment   = UNSPSCCode.UNSPSCSegment
           		and     related.UnspscCode.UNSPSCFamily    = UNSPSCCode.UNSPSCFamily)
           		and    (related.UnspscCode.UNSPSCClass     = "00"
           		and     related.UnspscCode.UNSPSCCommodity = "00"))
           		
    	Level4RebateParentRel
    		one-to-many relation to ContractRebateQualifierCode
            Field Mapping uses symbolic key
          		related.ContractGroup		    = LocalContractRebate.ContractGroup
           		related.Contract			    = LocalContractRebate.Contract
           		related.ContractRebateType		= LocalContractRebate.ContractRebateType
				related.ContractRebate			= blank
           		related.ContractRebateQualifier = LocalContractRebate.ContractRebateQualifier
           	Instance Selection
           		where ((related.UnspscCode.UNSPSCSegment   = UNSPSCCode.UNSPSCSegment
           		and     related.UnspscCode.UNSPSCFamily    = UNSPSCCode.UNSPSCFamily
           		and     related.UnspscCode.UNSPSCClass     = UNSPSCCode.UNSPSCClass)
           		and    (related.UnspscCode.UNSPSCCommodity = "00"))
           		
        ContractLineTierMemberQualRel
    		one-to-many relation to ContractLineTierMemberQual
            Field Mapping uses ByTierQual
          		related.ContractGroup		  = LocalContractTierGroup.ContractGroup
           		related.Contract			  = LocalContractTierGroup.Contract
           		related.Tier		  		  = LocalContractTierGroup.ContractTier
           		related.ContractTierQualifier = LocalContractTierGroup.ContractTierQualifier
           	Instance Selection
           		where (related.ItemCodesUsed = false)
				
    Sets

        Set3
            indexed
            Instance Selection
                where (IsActiveFamily)
            Sort Order
                ItemGroup
                UNSPSCCode.UNSPSCSegment
                UNSPSCCode.UNSPSCFamily


    Field Rules


		UNSPSCCode
			if (UNSPSCCode.UNSPSCFamily entered
			and UNSPSCCode.UNSPSCFamily != "00")
				LocalUNSPSCSegment		= UNSPSCCode.UNSPSCSegment
				LocalUNSPSCFamily		= "00"
				LocalUNSPSCClass		= "00"
				LocalUNSPSCCommodity	= "00"
				constraint (ParentRecordRel exists)
					"SegmentLevelDoesNotExist"

			if (UNSPSCCode.UNSPSCClass entered
			and UNSPSCCode.UNSPSCClass != "00")
				LocalUNSPSCSegment		= UNSPSCCode.UNSPSCSegment
				LocalUNSPSCFamily		= UNSPSCCode.UNSPSCFamily
				LocalUNSPSCClass		= "00"
				LocalUNSPSCCommodity	= "00"
				constraint (ParentRecordRel exists)
					"FamilyLevelDoesNotExist"

			if (UNSPSCCode.UNSPSCCommodity entered
			and UNSPSCCode.UNSPSCCommodity != "00")
				LocalUNSPSCSegment		= UNSPSCCode.UNSPSCSegment
				LocalUNSPSCFamily		= UNSPSCCode.UNSPSCFamily
				LocalUNSPSCClass		= UNSPSCCode.UNSPSCClass
				LocalUNSPSCCommodity	= "00"
				constraint (ParentRecordRel exists)
					"ClassLevelDoesNotExist"

		DescriptionLevel
			if (UNSPSCCode.UNSPSCCommodity entered and UNSPSCCode.UNSPSCCommodity != "00")
				DescriptionLevel = 4
			else
			if (UNSPSCCode.UNSPSCClass entered and UNSPSCCode.UNSPSCClass != "00")
				DescriptionLevel = 3
			else
			if (UNSPSCCode.UNSPSCFamily entered and UNSPSCCode.UNSPSCFamily != "00")
				DescriptionLevel = 2
			else
				DescriptionLevel = 1

		ShortDescription
			required

	Actions
		
		Create is a Create Action

		Update is an Update Action

		Delete is a Delete Action
		
		AttachToTierQualifier is an Instance Action
			Parameters
				ContractGroup
				Contract
				ContractTier
				ContractTierQualifier 
			Parameter Rules
				ContractGroup 
					required
				Contract
					required
				ContractTier
					required
				ContractTierQualifier
					required
			
			Action Rules
				constraint (Contract.NotClosed)
    				"CannotAdd;ContractIsClosed"						
				LocalContractTierGroup.ContractGroup 		 = ContractGroup
				LocalContractTierGroup.Contract 			 = Contract
				LocalContractTierGroup.ContractTier 		 = ContractTier
				LocalContractTierGroup.ContractTierQualifier = ContractTierQualifier
				if (SegmentLevel)
					constraint (!Level1TierChildrenRel exists) 
						"CannotAdd;TierQualifierCodesExistByFamilyOrClassOrCommodity"
				else
				if (FamilyLevel)
					constraint (!Level2TierChildrenRel exists) 
						"CannotAdd;TierQualifierCodeRecordAlreadyExistsByClassOrCommodity"
					constraint (!Level2TierParentRel exists)  
						"CannotAdd;TierQualifierCodeRecordAlreadyExistsBySegment"
				else
				if (ClassLevel)
					constraint (!Level3TierChildrenRel exists) 
						"CannotAdd;TierQualifierCodeRecordAlreadyExistsByCommodity"
					constraint (!Level2TierParentRel exists and !Level3TierParentRel exists)  
						"CannotAdd;TierQualifierCodeRecordAlreadyExistsBySegmentOrFamily"
				else
				if (CommodityLevel)
					constraint (!Level2TierParentRel exists and !Level3TierParentRel exists and !Level4TierParentRel exists)  
						"CannotAdd;TierQualifierCodeRecordAlreadyExistsBySegmentOrFamilyOrClass"
						
				if (!ContractTierQualifierCodeRel exists)
					invoke Create ContractTierQualifierCode
						invoked.Contract			  = Contract
						invoked.ContractGroup		  = ContractGroup
						invoked.ContractTier		  = ContractTier
						invoked.ContractTierQualifier = ContractTierQualifier
						invoked.UnspscCode  	  	  = UNSPSCCode
						invoked.ItemCategory		  = 4
    	
    	AttachToImportTierQualifier is an Instance Action
			Parameters
				ContractGroup
				ContractImport
				ContractImportTier
				ContractImportTierQualifier 
			Parameter Rules
				ContractGroup 
					required
				ContractImport
					required
				ContractImportTier
					required
				ContractImportTierQualifier
					required
			
			Action Rules
				LocalContractImportTierGroup.ContractGroup 		         = ContractGroup
				LocalContractImportTierGroup.ContractImport 			 = ContractImport
				LocalContractImportTierGroup.ContractImportTier 		 = ContractImportTier
				LocalContractImportTierGroup.ContractImportTierQualifier = ContractImportTierQualifier
				if (SegmentLevel)
					constraint (!Level1ImportTierChildrenRel exists) 
						"CannotAdd;TierQualifierCodesExistByFamilyOrClassOrCommodity"
				else
				if (FamilyLevel)
					constraint (!Level2ImportTierChildrenRel exists) 
						"CannotAdd;TierQualifierCodeRecordAlreadyExistsByClassOrCommodity"
					constraint (!Level2ImportTierParentRel exists)  
						"CannotAdd;TierQualifierCodeRecordAlreadyExistsBySegment"
				else
				if (ClassLevel)
					constraint (!Level3ImportTierChildrenRel exists) 
						"CannotAdd;TierQualifierCodeRecordAlreadyExistsByCommodity"
					constraint (!Level2ImportTierParentRel exists and !Level3TierParentRel exists)  
						"CannotAdd;TierQualifierCodeRecordAlreadyExistsBySegmentOrFamily"
				else
				if (CommodityLevel)
					constraint (!Level2ImportTierParentRel exists and !Level3ImportTierParentRel exists and !Level4ImportTierParentRel exists)  
						"CannotAdd;TierQualifierCodeRecordAlreadyExistsBySegmentOrFamilyOrClass"
						
				if (!ContractImportTierQualifierCodeRel exists)
					invoke Create ContractImportTierQualCode
						invoked.ContractImport			    = ContractImport
						invoked.ContractGroup		        = ContractGroup
						invoked.ContractImportTier  		= ContractImportTier
						invoked.ContractImportTierQualifier	= ContractImportTierQualifier
						invoked.UnspscCode  	  	  		= UNSPSCCode
						invoked.ItemCategory		  		= 4

		AttachToRebateQualifier is an Instance Action
			Parameters
				ContractGroup
				Contract
   				ContractRebateType			
   				ContractRebate				
   				ContractRebateQualifier
			Parameter Rules
				ContractGroup 
					required
				Contract
					required
				ContractRebateType
					required
				ContractRebate
					required
				ContractRebateQualifier
					required
			
			Action Rules
				constraint (Contract.CanAmend)
    				"ContractStatusMustBeDraftAddendumOrAmendmentToModifyRebateQualifiers"					
    			constraint (ContractRebate.Active)
    				"ContractRebateMustBeActiveToAddRebateQualifierCodes"
				LocalContractRebate.ContractGroup 		    = ContractGroup
				LocalContractRebate.Contract	            = Contract
				LocalContractRebate.ContractRebateType      = ContractRebateType
				LocalContractRebate.ContractRebateQualifier = ContractRebateQualifier			
				if (SegmentLevel)
					constraint (!Level1RebateChildrenRel exists) 
						"CannotAdd;RebateQualifierCodesExistByFamilyOrClassOrCommodity"
				else
				if (FamilyLevel)
					constraint (!Level2RebateChildrenRel exists) 
						"CannotAdd;RebateQualifierCodeRecordAlreadyExistsByClassOrCommodity"
					constraint (!Level2RebateParentRel exists)  
						"CannotAdd;RebateQualifierCodeRecordAlreadyExistsBySegment"
				else
				if (ClassLevel)
					constraint (!Level3RebateChildrenRel exists) 
						"CannotAdd;RebateQualifierCodeRecordAlreadyExistsByCommodity"
					constraint (!Level2RebateParentRel exists and !Level3RebateParentRel exists)  
						"CannotAdd;RebateQualifierCodeRecordAlreadyExistsBySegmentOrFamily"
				else
				if (CommodityLevel)
					constraint (!Level2RebateParentRel exists and !Level3RebateParentRel exists and !Level4RebateParentRel exists)  
						"CannotAdd;RebateQualifierCodeRecordAlreadyExistsBySegmentOrFamilyOrClass"
						
				if (!ContractRebateQualifierCodeRel exists)
					invoke Create ContractRebateQualifierCode
						invoked.ContractGroup		    = ContractGroup
						invoked.Contract			    = Contract
						invoked.ContractRebateType		= ContractRebateType
						invoked.ContractRebateQualifier = ContractRebateQualifier
						invoked.UnspscCode  	  	    = UNSPSCCode
						invoked.ItemCategory		    = 4
				
		
