FinishedGoodsBurden is a BusinessClass
    owned by ic
    prefix is IBR
    classic name is ICFGBRDN

    Ontology
        symbolic key is FinishedGoodsBurden
            classic set name is IBRSET1
            classic name is SEQ
            classic name for InventoryLocation is LOCATION

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields
        BurdenCode
        Vendor
        FlatAmount                is an InternationalAmount
            classic name is EST-AMT
        AmountPerUnit             is an InternationalAmount
            classic name is EST-AMT-PER-U
        PerBurdenUnitQuantity     is Decimal size 13.2
            classic name is EST-QTY
        PerBurdenUnitMultiplier   is Decimal size 4.1
            classic name is EST-MULT
        PercentageOfInventoryCost is Percent size 5.2
            classic name is EST-PCT
        CostTolerancePercentage
            classic name is COST-TOL-PCT
        ZeroCost                  is Boolean
            classic name is ZERO-COST-FL
        AlternateUnitOfMeasure    is a UnitOfMeasure
            classic name is EST-UOM

    Conditions
        HasVendor
            classic name is VENDOR-ENTERED
            restricted
            when (Vendor entered)

    Relations
        PayablesCompanyRel
            classic name is APCOMPANY
            one-to-one relation to PayablesCompany
            valid when (HasVendor)
            Field Mapping uses symbolic key
                related.Company = Company
                
    	FinishedGoodsBurdenCommentsRel is a FinishedGoodsBurdenComment set
    		
    	BurdenCodeCommentsRel
    		one-to-many relation to BurdenCodeComment
    		Field Mapping uses symbolic key
				related.Company = Company
				related.InventoryLocation = InventoryLocation
				related.BurdenCode = BurdenCode
				
	Derived Fields
		ContextMessageEntityType is a StringField
			type is Alpha 30
			restricted
			"InforProductionOrder"

		ContextMessageText is a MessageField
			restricted
			"FinishedGoodsBurden<FinishedGoodsBurden>"

	Field Rules

		Vendor
			default to BurdenCode.Vendor
			
		AmountPerUnit
			if (BurdenCode.BurdenType.FlatAmount)
				cannot be entered	
					"CannotEnterAmountPerUnitForFlatAmountBurdens"							
			if (BurdenCode.BurdenType.AmountPerFinishedGoodsUnit)
				cannot be entered	
					"CannotEnterAmountPerUnitForPerFinishedGoodUnitBurden"					
			if (BurdenCode.BurdenType.PercentOfFinishedGoodsInventoryCost)
				cannot be entered	
					"CannotEnterAmountPerUnitForPercentageOfInventoryCostBurden"			
					
		PercentageOfInventoryCost
			if (BurdenCode.BurdenType.FlatAmount)
				cannot be entered	
					"CannotEnterPercentForFlatAmountBurdens"								
			if (BurdenCode.BurdenType.AmountPerFinishedGoodsUnit)
				cannot be entered	
					"CannotEnterPercentForPerFinishedGoodUnitBurden"						
			if (BurdenCode.BurdenType.AmountPerBurdenUnit)
				cannot be entered	
					"CannotEnterPercentForPerBurdenUnitBurden"								
					  
		PerBurdenUnitQuantity		
			if (BurdenCode.BurdenType.FlatAmount)
				cannot be entered	
					"CannotEnterPerBurdenUnitQuantityForFlatAmountBurdens"					
			if (BurdenCode.BurdenType.AmountPerFinishedGoodsUnit)
				cannot be entered	
					"CannotEnterPerBurdenUnitQuantityForPerFinishedGoodUnitBurden"			
			if (BurdenCode.BurdenType.PercentOfFinishedGoodsInventoryCost)
				cannot be entered	
					"CannotEnterPerBurdenUnitQuantityForPercentageOfInventoryCostBurden"	
					
		PerBurdenUnitMultiplier		
			if (BurdenCode.BurdenType.FlatAmount)
				cannot be entered	
					"CannotEnterPerBurdenUnitMultiplierForFlatAmountBurdens"				
			if (BurdenCode.BurdenType.AmountPerFinishedGoodsUnit)
				cannot be entered	
					"CannotEnterPerBurdenUnitMultiplierForPerFinishedGoodUnitBurden"		
			if (BurdenCode.BurdenType.PercentOfFinishedGoodsInventoryCost)
				cannot be entered	
					"CannotEnterPerBurdenUnitMultiplierForPercentageOfInventoryCostBurden"	
					
		AlternateUnitOfMeasure
			if (BurdenCode.BurdenType.FlatAmount)
				cannot be entered	
					"CannotEnterU\O\MForFlatAmountBurdens"									
			if (BurdenCode.BurdenType.PercentOfFinishedGoodsInventoryCost)
				cannot be entered	
					"CannotEnterU\O\MForPercentageOfInventoryCostBurden"					
			if (BurdenCode.BurdenType.AmountPerBurdenUnit)
				cannot be entered	
					"CannotEnterU\O\MForPerBurdenUnitBurden"								
							
		FlatAmount
			if (BurdenCode.BurdenType.AmountPerFinishedGoodsUnit)
				cannot be entered	
					"CannotEnterFlatAmountForPerFinishedGoodUnitBurden"						
			if (BurdenCode.BurdenType.PercentOfFinishedGoodsInventoryCost)
				cannot be entered	
					"CannotEnterFlatAmountForPercentageOfInventoryCostBurden"				
			if (BurdenCode.BurdenType.AmountPerBurdenUnit)
				cannot be entered	
					"CannotEnterFlatAmountForPerBurdenUnitBurden"							
			
		ZeroCost
			if (CostTolerancePercentage entered)
				cannot be entered	
					"ZeroCostCannotBeSelectedIfToleranceIsEntered"							
						
				
				
	Actions
		Create is a Create Action 
			Exit Rules
				if (BurdenCode entered)
					for each BurdenCodeCommentsRel
						invoke Create FinishedGoodsBurdenComment
							fill in fields from each
							invoked.FinishedGoodsBurden = FinishedGoodsBurden
							invoked.Item = Item 
							invoked.FinishedGoodsBurdenComment = each.BurdenCodeComment
		
		Update is an Update Action

			Exit Rules
				if (BurdenCode changed)
					invoke Delete FinishedGoodsBurdenCommentsRel
					for each BurdenCodeCommentsRel 
						invoke Create FinishedGoodsBurdenComment
							fill in fields from each
							invoked.FinishedGoodsBurden = FinishedGoodsBurden
							invoked.Item = Item 
							invoked.FinishedGoodsBurdenComment = each.BurdenCodeComment
							
		Delete is a Delete Action				
				
				
				
				
				
