ContractStatusCount is a BusinessClass
    owned by po
    prefix is CSTC

    Ontology
    	symbolic key is ContractStatusCount

    Patterns
		implements EffectiveDated
    	implements Auditing
    	
    Persistent Fields
    
	Derived Fields

		DraftMessage is a MessageField
			restricted
			"Draft"
			
		ReleasedMessage is a MessageField
			restricted
			"Released"
			
		NegotiationMessage is a MessageField
			restricted
			"Negotiation"
			
		FinalApprovalMessage is a MessageField
			restricted
			"FinalApproval"
			
		ReadyToActivateMessage is a MessageField
			restricted
			"ReadyToActivate"
	
		InactiveMessage is a MessageField
			restricted
			"Inactive"
			
		AddendumMessage is a MessageField
			restricted
			"Addendum"
			
		AmendmentMessage is a MessageField
			restricted
			"Amendment"
			
		ClosedMessage is a MessageField
			restricted
			"Closed"
			
		ActiveMessage is a MessageField
			restricted
			"Active"
		
		DraftType is a StringField
			type is Alpha 20
			restricted
			DraftMessage
			"-" 
			Count

		ReleasedType is a StringField
			type is Alpha 20
			restricted
			ReleasedMessage
			"-" 
			Count

		NegotiationType is a StringField
			type is Alpha 20
			restricted
			NegotiationMessage
			"-" 
			Count

		FinalApprovalType is a StringField
			type is Alpha 20
			restricted
			FinalApprovalMessage
			"-" 
			Count

		ReadyToActivateType is a StringField
			type is Alpha 20
			restricted
			ReadyToActivateMessage
			"-" 
			Count

		InactiveType is a StringField
			type is Alpha 20
			restricted
			InactiveMessage
			"-" 
			Count

		AddendumType is a StringField
			type is Alpha 20
			restricted
			AddendumMessage
			"-" 
			Count

		AmendmentType is a StringField
			type is Alpha 20
			restricted
			AmendmentMessage
			"-" 
			Count

		ClosedType is a StringField
			type is Alpha 20
			restricted
			ClosedMessage
			"-" 
			Count
			
		ActiveType is a StringField
			type is Alpha 20
			restricted
			ActiveMessage
			"-"
			Count
			
		Type is a ConditionalField
			type is Alpha 20
			if (ContractStatusCount.Active)
				ActiveType
			else
			if (ContractStatusCount.Draft)
				DraftType			
			else
			if (ContractStatusCount.Released)
				ReleasedType			
			else
			if (ContractStatusCount.Negotiation)
				NegotiationType	
			else
			if (ContractStatusCount.FinalApproval)
				FinalApprovalType			
			else
			if (ContractStatusCount.ReadyToActivate)
				ReadyToActivateType			
			else
			if (ContractStatusCount.Inactive)
				InactiveType			
			else
			if (ContractStatusCount.Addendum)
				AddendumType			
			else
			if (ContractStatusCount.Amendment)
				AmendmentType			
			else

				ClosedType	

		StringType is a StringField
			type is Alpha 30
			Type
			" "
			"Group:"
			ContractGroup
		
		Count is a ComputeField
			type is Numeric 5
			(instance count of ContractStatusRel)
		
	Conditions
		ProcessedContracts
			restricted
			when (ContractStatusCount.Active
			or    ContractStatusCount.Inactive
			or    ContractStatusCount.Closed)
			
		NotProcessedContracts
			restricted
			when (ContractStatusCount.Draft
			or    ContractStatusCount.Released
			or    ContractStatusCount.Negotiation
			or    ContractStatusCount.FinalApproval
			or    ContractStatusCount.ReadyToActivate
			or    ContractStatusCount.Addendum
			or    ContractStatusCount.Amendment)
	
	Relations
		ContractStatusRel is a Contract set
			Instance Selection
				where (related.ContractStatus = ContractStatusCount
				and    !related.ContractTemplate)
	
	Actions
		Create is an Action
			restricted
		Update is an Action
			restricted
		Delete is an Action 
			restricted
