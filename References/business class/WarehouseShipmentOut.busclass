WarehouseShipmentOut is a BusinessClass
    owned by wh
    prefix is WSO
    classic name is WHSHPMTOUT

    Ontology
        symbolic key is WarehouseShipmentOut
            classic set name is WSOSET1
            classic name for InventoryLocation is LOCATION
            classic name for WarehouseShipment is SHIPMENT-NBR

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields

        InterfaceStatus             is Numeric size 1
            classic name is INTERFACE-STS
        DemandSystemCode
            classic name is SYSTEM-CD
        DocumentNumber              is a DemandDocument
            classic name is DOC-NBR
        DemandDocumentType
            classic name is DOC-TYPE
        ProcessLevel                is a PayablesProcessLevel
        WarehouseBatch
            classic name is BATCH-NBR
        Status                      is Numeric size 1
        CustomerPurchaseOrder
            classic name is CUST-PO-NBR
        OperatorID					is an Operator 
        	holds pii
            classic name is OPR-CODE
        Destination
        Customer
        CustomerShipTo              is a ShipTo
            classic name is CUST-SHIP-TO
        RequestingLocation
            classic name is REQ-LOCATION
        ShipToName                  is a VendorName 
        	holds pii
        ShipToAddress               is a PostalAddressV2	
        	holds pii
            classic name for ShipToAddress.DeliveryAddress.AddressLine1 is SHIP-TO-ADDR1
            classic name for ShipToAddress.DeliveryAddress.AddressLine2 is SHIP-TO-ADDR2
            classic name for ShipToAddress.DeliveryAddress.AddressLine3 is SHIP-TO-ADDR3
            classic name for ShipToAddress.DeliveryAddress.AddressLine4 is SHIP-TO-ADDR4
            classic name for ShipToAddress.Municipality is SHIP-TO-CITY
            classic name for ShipToAddress.StateProvince is SHIP-TO-STATE
            classic name for ShipToAddress.PostalCode is SHIP-TO-ZIP
            classic name for ShipToAddress.Country is TO-CNTRY-CD
            classic name for ShipToAddress.Region is SHIP-TO-REGION
        BillToName                  is a VendorName 
        	holds pii
        BillToAddress               is a PostalAddressV2	
        	holds pii
            classic name for BillToAddress.DeliveryAddress.AddressLine1 is BILL-TO-ADDR1
            classic name for BillToAddress.DeliveryAddress.AddressLine2 is BILL-TO-ADDR2
            classic name for BillToAddress.DeliveryAddress.AddressLine3 is BILL-TO-ADDR3
            classic name for BillToAddress.DeliveryAddress.AddressLine4 is BILL-TO-ADDR4
            classic name for BillToAddress.Municipality is BILL-TO-CITY
            classic name for BillToAddress.StateProvince is BILL-TO-STATE
            classic name for BillToAddress.PostalCode is BILL-TO-ZIP
            classic name for BillToAddress.Country is BILL-CTRY-CD
            classic name for BillToAddress.Region is BILL-REGION
        PhoneNumber                            is a TelephoneNumber 
        	holds pii
            classic name for PhoneNumber.SubscriberNumber is PHONE-NMBR
        RequirePickingFeedback      is Boolean
            classic name is PICKING-REQ
        RequirePackingFeedback      is Boolean
            classic name is PACKING-REQ
        OrderDate                   is Date
        PrintDate                   is Date
        PickDate                    is Date
        PackDate                    is Date
        ShipDate                    is Date
        GeneralLedgerDate           is Date
            classic name is GL-DATE
            default label is "GlobalLedgerDate"
        RouteHeader
            classic name for RouteHeader.Date is EST-DEL-DATE
        Vendor
        BasedOnPurchaseOrderReceipt is Boolean
            classic name is PO-FLAG
        RouteStop
            classic name is STOP
        BillOfLading
            classic name is BOL-NBR
        Carrier                     is a Vendor
        ShippingMethod
            classic name is METHOD
        TransactionId
            classic name is TRANS-ID
        RequireFreight              is AlphaUpper size 1
            classic name is FREIGHT-REQ
        FreightCode
        FrtChgCurr                  is an InternationalAmount
        ShipmentCartons
            classic name is WHS-CARTONS
        StockVolume
            classic name is CUBIC-FEET
        StockWeight
            classic name is WEIGHT
        PackingList                 is Boolean
            classic name is PACK-LIST-FL
        PrintPOD                    is Boolean
            classic name is POD-PRT-FL
        PODReturnDate               is Date
            classic name is POD-RETRN-DT
        InvcPrefix                  is an InvoicePrefix
        InvoiceNumber
            classic name is INVC-NUMBER
        ToECCountry
            classic name is TO-EC-CTRY
        ToISOCountry
            classic name is TO-ISO-CTRY
        BillECCountry
            classic name is BILL-EC-CTRY
        BillISOCountry
            classic name is BILL-ISO-CTRY
        CompanyCustomer

    Sets
        Set3
            indexed
            Sort Order
                Company
                InventoryLocation
                WarehouseBatch
                WarehouseShipment
	
	Relations
		WarehouseShipmentLineOutRel
			one-to-many relation to WarehouseShipmentLineOut
			Field Mapping uses symbolic key
				related.Company				= Company
				related.InventoryLocation	= InventoryLocation
				related.WarehouseShipment	= WarehouseShipment
			Instance Selection
				include deleted records
	Actions
        Create is a Create Action
            restricted
            
		Purge is a Purge Action
			restricted
		
		WarehouseShipmentInterfacePurge is a Set Action
			restricted
			Parameters
				PrmCompany				is an InventoryCompany
				PrmLocation				is an InventoryLocation
					default label is "Location"
				PrmSystemCode		 	is AlphaUpper size 2
					default label is "DocumentSource"
					States
						CustomerOrders value is "OE"
						Requisitions   value is "RQ"
				PrmBeginDate			is Date	
					default label is "BeginDate"
				PrmEndDate				is Date
					default label is "EndDate"
				PrmPurgeOption								is Numeric 1
						default label is "PurgeOption"
						States
							PurgeRecords 	value is 1
							ReportOnly		value is 2
			Parameter Rules	
			Instance Selection
				include deleted records
				where  (Company				=	PrmCompany
				and		InventoryLocation	=	PrmLocation
				and		InterfaceStatus		=	1)
			Local Fields
				LocalLineNumber							is like LineNumber
				LocalActor								is an Actor
				LocalShipmentOutCount					is Numeric 12
				LocalShipmentCommentOutCount			is Numeric 12
				LocalShipmentLineOut					is Numeric 12
				LocalNotification						is LPLText
				LocalNewLine							is LPLText
    			LocalTab								is LPLText
			Rule Blocks
				InvokeToWarehouseShipmentCommentOut
					LocalShipmentCommentOutCount+=1
					if(PrmPurgeOption.PurgeRecords)
						invoke WarehouseShipmentCommentOutPurge WarehouseShipmentCommentOut
							invoked.PrmCompany						= Company
							invoked.PrmDemandCompany				= Company
							invoked.PrmSystemCode					= DemandSystemCode
							invoked.PrmDocumentNumber				= DocumentNumber
							invoked.PrmLineNumber					= LocalLineNumber
							invoked.PrmShipmentNumber				= WarehouseShipment
					
			Action Rules
				Set Rules
					Exit Rules
			    		LocalNewLine 	= "\u000a"  
			    		LocalTab		= "\u0009"
			    		LocalNotification += "Company: "+PrmCompany+LocalNewLine+"Location: "+PrmLocation+"PrmSystemCode: "+PrmSystemCode+"BeginDate: "+PrmBeginDate+"EndDate: "+PrmEndDate
			    		LocalNotification += "ShipmentOut: "+LocalShipmentOutCount+"ShipmentCommentOut"+LocalShipmentCommentOutCount+"ShipmentLineOut"+LocalShipmentLineOut
						LocalActor = actor
						send notification
							to LocalActor
							description is "InventoryPurgeDetailsFor_Company<PrmCompany>"
							priority is high
							detail is "Date&Time:<current timestamp><LocalNewLine>\Username:<actor><LocalNewLine>\<LocalNotification>"
				Instance Rules
						if (PrmBeginDate not entered and PrmEndDate not entered)
							if (PrmSystemCode not entered
							or DemandSystemCode = PrmSystemCode)
								LocalShipmentLineOut+= instance count of WarehouseShipmentLineOutRel
								if(PrmPurgeOption.PurgeRecords)
									invoke Purge WarehouseShipmentLineOutRel
								LocalLineNumber = 0
								include InvokeToWarehouseShipmentCommentOut
								LocalLineNumber = 999999
								include InvokeToWarehouseShipmentCommentOut
								LocalShipmentOutCount+=1
								if(PrmPurgeOption.PurgeRecords)
									invoke Purge				
						if (WarehouseShipmentOut.CreationDate date >= PrmBeginDate 
						and WarehouseShipmentOut.CreationDate date <= PrmEndDate)
							if (PrmSystemCode not entered
							or DemandSystemCode = PrmSystemCode)
								LocalShipmentLineOut+= instance count of WarehouseShipmentLineOutRel
								if(PrmPurgeOption.PurgeRecords)
									invoke Purge WarehouseShipmentLineOutRel
								LocalLineNumber = 0
								include InvokeToWarehouseShipmentCommentOut
								LocalLineNumber = 999999
								include InvokeToWarehouseShipmentCommentOut
								LocalShipmentOutCount+=1
								if(PrmPurgeOption.PurgeRecords)
									invoke Purge
