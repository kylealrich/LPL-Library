RequestingReportGroupLocation is a BusinessClass
    owned by ic
    prefix is RGPL

    Ontology
        symbolic key is RequestingReportGroupLocation

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields

        TotalGroup is Numeric size 3

    Local Fields
		LocalProcurementGroup	is like ProcurementGroup
		LocalParticipantGroup   is like ParticipantGroup    
        
    Conditions
    
    	LocationActive
    		restricted
    		when (RequestingLocation.Active)
    		
    Relations
    	RequestingLocationRel
    		one-to-many relation to RequestingLocation
    		Field Mapping uses symbolic key
    			related.Company	= Company

        ParticipantGroupLineRel 
            one-to-many relation to ParticipantGroupLine  
            Field Mapping uses ByLocReqLocSet
                related.ProcurementGroup                                    = LocalProcurementGroup
                related.ParticipantGroup                                    = LocalParticipantGroup 
                related.ParticipantGroupLine.ParticipantLocation.Company    = Company 
                related.ParticipantGroupLine.ParticipantLocation.Location   = RequestingLocation

        ParticipantGroupLineReqLocation
            one-to-many relation to ParticipantGroupLine  
            Field Mapping uses ByLocReqLocSet
                related.ProcurementGroup                                            = LocalProcurementGroup
                related.ParticipantGroup                                            = LocalParticipantGroup 
                related.ParticipantGroupLine.ParticipantLocation.Company            = Company 
                related.ParticipantGroupLine.ParticipantLocation.Location           = blank 
                related.ParticipantGroupLine.ParticipantLocation.RequestingLocation = RequestingLocation

    Sets

        Set2
            indexed
            Sort Order
                Company
                RequestingReportGroup
                TotalGroup
                RequestingLocation

	Field Rules

    
	Actions
		Create is a Create Action
			Action Rules 

				if (RequestingReportGroup.ParticipantGroupReportGroupRel exists)
					for each RequestingReportGroup.ParticipantGroupReportGroupRel
						LocalProcurementGroup	= each.ProcurementGroup 
						LocalParticipantGroup   = each.ParticipantGroup
						if (ParticipantGroupLineRel !exists
						and ParticipantGroupLineReqLocation !exists)
							invoke Create ParticipantGroupLine 
                            	invoked.ProcurementGroup	                              	            = LocalProcurementGroup
								invoked.ParticipantGroup								 	            = LocalParticipantGroup
								invoked.ParticipantGroupLine.ParticipantLocation.Company	            = Company	
								invoked.ParticipantGroupLine.ParticipantLocation.RequestingLocation 	= RequestingLocation	
		
        Update is an Update Action
	
        Delete is a Delete Action
        
