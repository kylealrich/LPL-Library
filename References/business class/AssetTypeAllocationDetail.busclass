AssetTypeAllocationDetail is a BusinessClass
    owned by am
    prefix is AXL
    classic name is AMTYPALLOX

    Ontology
        symbolic key is AssetTypeAllocationDetail
            classic set name is AXLSET1
            classic name for AssetType.Type is ASSET-TYPE
            classic name for AssetTypeAllocation.SequenceNumber is SEQUENCE-NBR


    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields
		AccountingUnit		is a FinanceCodeBlockNoAccountFull
			default label is "AllocationDimensions"
            classic name for AccountingUnit.AccountingUnit is ACCT-UNIT
            
        AllocationPercent
            classic name is ALLOC-PERCENT
            
	Conditions
		IsUnreleased
			when (AssetTypeAllocation.Status.Unreleased)

	Field Rules
		AccountingUnit
			required
				"AllocationDimensionsAreRequired"

		AllocationPercent
			constraint (AllocationPercent >= 0%)
				"AllocationPercentageCannotBeNegative"

	Sets

	Actions
		Create is a Create Action
			valid when (IsUnreleased)
			Action Rules
				AssetTypeAllocation.SequenceNumber = 1

		Update is an Update Action
			valid when (IsUnreleased)
			Action Rules

				constraint (AssetTypeAllocation.Status.Unreleased)
					"CannotChangeReleasedAllocations"                         
					
				if (AssetTypeAllocation.EndDate entered)
					constraint (AssetTypeAllocation.EndDate >= current corporate date)
						"CannotChangePastAllocations"                           
		Delete is a Delete Action            
			valid when (IsUnreleased)
			Action Rules
				constraint (AssetTypeAllocation.Status.Unreleased)
					"UnreleaseAllocationPriorToDeletingDetail"         
