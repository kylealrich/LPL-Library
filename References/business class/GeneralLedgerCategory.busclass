GeneralLedgerCategory is a BusinessClass
	default label is "InventoryLocationAccountGroup"
    owned by ic
    prefix is ICA
    classic name is ICCATEGORY

    Ontology
        symbolic key is GeneralLedgerCategory
            classic set name is ICASET1
            classic name is GL-CATEGORY
            classic name for InventoryLocation is LOCATION

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields

        Active                           is Boolean
            classic name is ACTIVE-STATUS
        Description
        InUse                            is Boolean
            classic name is USED-FL















        Default                          is Boolean
        InventoryAccount                 is a FinanceCodeBlockFull
            sql prefix is IVA
            classic name for InventoryAccount.AccountingUnit is INV-ACCT-UNIT
            classic name for InventoryAccount.GeneralLedgerChartAccount is INV-ACCOUNT
        ReceiptAccount                   is a FinanceCodeBlockFull
            classic name for ReceiptAccount.AccountingUnit is REC-ACCT-UNIT
            classic name for ReceiptAccount.GeneralLedgerChartAccount is REC-ACCOUNT
        IssueAccount                     is a FinanceCodeBlock
            classic name for IssueAccount.AccountingUnit is ISS-ACCT-UNIT
            classic name for IssueAccount.GeneralLedgerChartAccount is ISS-ACCOUNT
        AdjustmentAccount                is a FinanceCodeBlockFull
            classic name for AdjustmentAccount.AccountingUnit is ADJ-ACCT-UNIT
            classic name for AdjustmentAccount.GeneralLedgerChartAccount is ADJ-ACCOUNT
        CostVarianceAccount              is a FinanceCodeBlockFull
            classic name for CostVarianceAccount.AccountingUnit is VAR-ACCT-UNIT
            classic name for CostVarianceAccount.GeneralLedgerChartAccount is VAR-ACCOUNT
        IntransitAccount                 is a FinanceCodeBlockFull
            sql prefix is ITA
            classic name for IntransitAccount.AccountingUnit is INT-ACCT-UNIT
            classic name for IntransitAccount.GeneralLedgerChartAccount is INT-ACCOUNT
        PhysicalInventoryVarianceAccount is a FinanceCodeBlockFull
            classic name for PhysicalInventoryVarianceAccount.AccountingUnit is PHY-ACCT-UNIT
            classic name for PhysicalInventoryVarianceAccount.GeneralLedgerChartAccount is PHY-ACCOUNT
        AddOnCostAccount                 is a FinanceCodeBlockFull
            classic name for AddOnCostAccount.AccountingUnit is ADD-ACCT-UNIT
            classic name for AddOnCostAccount.GeneralLedgerChartAccount is ADD-ACCOUNT
        ShrinkageAccount                 is a FinanceCodeBlockFull
            classic name for ShrinkageAccount.AccountingUnit is SHK-ACCT-UNIT
            classic name for ShrinkageAccount.GeneralLedgerChartAccount is SHK-ACCOUNT

	Context Fields
		AuditDateRange		is a DateRange
		
	Attach Rules
		constraint (Active)
			"InventoryLocationAccountGroup<GeneralLedgerCategory>MustBeActive"

    Conditions

        IsActive
        	restricted
            when (Active)





        IsInactive
        	restricted
            when (not Active)
        
        RecordExists
        	restricted
        	when (GeneralLedgerCategory exists)
        ReconciliationSubSystemBalanceRelExists
    		when (ReconciliationSubSystemBalanceRel exists)

    Relations












		AnotherDefaultAccountGroupRel
    		one-to-many relation to GeneralLedgerCategory
    		Field Mapping uses symbolic key
    			related.Company				= Company
    			related.InventoryLocation	= InventoryLocation
    		Instance Selection
    			where (related.Default
    			and	   related.GeneralLedgerCategory not = GeneralLedgerCategory) 	

		ReconciliationSubSystemBalanceRel
			one-to-many relation to ReconciliationAccount
			Field Mapping uses ByGeneralLedgerChartAccount
				related.ReconciliationManagementGroup						= Company.FinanceEnterpriseGroup
				related.ReconciliationCodeBlock.GeneralLedgerChartAccount	= InventoryAccount.GeneralLedgerChartAccount
				related.ReconciliationCodeBlock.AccountingEntity			= InventoryAccount.ToAccountingEntity
			Instance Selection
				where(related.ReconciliationAccountType.Inventory)

    Field Rules

        Active
            default to true

        Description
            required
            
		Default
			if (Default changed
			and Default = true)
				constraint (Active)
					"CannotSetInactiveAccountGroupAsDefault"
					
				if (AnotherDefaultAccountGroupRel exists)
					confirmation required
 						"Warning,DefaultAccountGroupWillBeChangedFrom<first AnotherDefaultAccountGroupRel.GeneralLedgerCategory>To<GeneralLedgerCategory>;Proceed?"
 					invoke ResetDefaultAccountGroup AnotherDefaultAccountGroupRel  	
					
		
		InventoryAccount
			required

		ReceiptAccount
			required

		IssueAccount
			required
			
			if (GeneralLedgerCategory.InventoryLocation.UseGLCategoryIssueAccountingUnitAsDefault.Yes)
				constraint (IssueAccount.AccountingUnit entered)
					"MustHaveAnAccountingUnitWhenInventoryLocationIndicatesItIsNeeded"

		AdjustmentAccount
			required

		CostVarianceAccount
			required

		IntransitAccount
			required

		PhysicalInventoryVarianceAccount
			required

		AddOnCostAccount
			required

		ShrinkageAccount
			required
            
	Actions
		Create is a Create Action

		Update is an Update Action

		Delete is a Delete Action

		ResetDefaultAccountGroup is an Instance Action
			restricted
			
			Action Rules
				Default = false
