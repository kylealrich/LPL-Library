CompanyCustomerBalanceActivity is a BusinessClass
	owned by ar
	prefix is CCACT

	Ontology
		symbolic key is CompanyCustomerBalanceActivity

	Patterns
		implements StaticJava
		disable AuditIndex

	Persistent Fields
		CreationDate						is TimeStamp
			default label is "UpdateDateAndTime"
		BalanceType				is Numeric size 2
			States
				Invoicing			value is 1
				Payment				value is 2
				Application			value is 3
				Chargeback			value is 4
				Discount			value is 5
				OverShort			value is 6
				Transfer			value is 7
				Grouping			value is 8 
				RTMPayment			value is 9
				FinanceCharge		value is 10
				BillofExchange		value is 11
				Conversion			value is 12
				MarkedAsPaid		value is 13	
				OverApplied 		value is 14
				TaxWithholding		value is 15	
		Balance						is an InternationalAmount
		ChangeAmount				is an InternationalAmount
		UpdatedBalance				is an InternationalAmount
		Reference					is a Title

	Context Fields
		DateRange

	Field Rules
		CreationDate
			default to current timestamp

	Relations
		GeneralLedgerCompanyRel	
			one-to-one relation to GeneralLedgerCompany
			Field Mapping uses symbolic key
				related.Company		= Company

		CompanySecurityGroupMemberRel	
			one-to-one relation to GeneralLedgerCompanyGroupMember
			Field Mapping uses symbolic key
				related.GeneralLedgerCompanyGroup	= actor.context.CompanySecurityGroup.FinanceDimensionStructure
				related.Company						= Company


	Conditions
		WithinSearchDateRange
			restricted
			when (DateRange not entered
			or   (DateRange entered
			and   CompanyCustomerBalanceActivity.CreationDate within DateRange))

		IsValidForActorContext
			restricted
			when (GeneralLedgerCompanyRel.FinanceEnterpriseGroup = actor.context.FinanceEnterpriseGroup)	

		SecurityGroupAllowsAccess	
			when (actor.context.CompanySecurityGroup = blank
			or	CompanySecurityGroupMemberRel exists)


	Actions
		Create is a Create Action

		Update is an Update Action

		Delete is a Delete Action
