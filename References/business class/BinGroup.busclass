BinGroup is a BusinessClass
    owned by ic
    prefix is BGR
    classic name is BINGROUP

    Ontology
        symbolic key is BinGroup
            classic set name is BGRSET1
            classic name for InventoryLocation is LOCATION

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields

        Description
        LastBinSequence is Numeric size 6
            classic name is BIN-SEQ

	Derived Fields
	 	ParLocationMsg		is a MessageField   
			"Warning:_BinsFor_Par_LocationMustBeMaintainedIn_Par_LocationScreen"
		
	
	Conditions
		RecordExists
			restricted
        	when (BinGroup exists)
	
    Relations

        BinGroupDetailsRel
            classic name is BINGRPDTL
            one-to-many relation to BinGroupDetail
            delete cascades
            Field Mapping uses symbolic key
                related.Company           = Company
                related.InventoryLocation = InventoryLocation
                related.BinGroup          = BinGroup

	Actions
		Create is a Create Action
			Action Rules
				constraint (not InventoryLocation.LocationType.ParLocation)
					"CannotCreateBinGroupsForParLocation"				
    	
    	CreateBinGroup is a Create Action 
			default label is "Create"
			restricted

		Update is an Update Action
			
		Delete is a Delete Action
			Action Rules
				constraint (not InventoryLocation.LocationType.ParLocation)
					"CannotDeleteBinGroupsForParLocation"				

    	DeleteBinGroup is a Delete Action 
			restricted

    Sets

        Set2
            indexed
            Sort Order
                Company
                BinGroup
                InventoryLocation

FileCreationLogic.BinGroup is a BusinessClass

	Persistent Fields
	
	Local Fields
					
	Relations
		
	Derived Fields
		BinGroupHash is a NativeField
			type is Numeric 8
			restricted	
				
	Actions
	
		GeneratePreviewRecordsForRunGroup is a Set Action
			restricted
			synchronized on untranslatable:"BinGroup_GeneratePreviewRecordsForRunGroup_<FinanceEnterpriseGroupPrm>_<PrmRunGroup>"
			
			Parameters
				FinanceEnterpriseGroupPrm		is a FinanceEnterpriseGroup
				FileCreationSetupPrm	is a FileCreationSetup
				BeginTimeStamp			is TimeStamp
				EndTimeStamp			is TimeStamp
				AllRecords				is Boolean
				PrmNumberOfRunGroups	is Numeric 3
				PrmRunGroup				is Numeric 3
				
			Local Fields
				LocalBinGroupGroupSelection		is a BinGroup group in subject FileCreationBinGroup
			Instance Selection
				where (Company.FinanceEnterpriseGroup = FinanceEnterpriseGroupPrm
				and    (PrmNumberOfRunGroups <= 1
				or      BinGroupHash % PrmNumberOfRunGroups = PrmRunGroup)
				and	   (AllRecords
				or	    (update stamp > BeginTimeStamp
				and	     update stamp <= EndTimeStamp)))

			Action Rules
				Instance Rules
					LocalBinGroupGroupSelection = FileCreationSetupPrm.EligibilityGroup
					if (LocalBinGroupGroupSelection not entered
					or	BinGroup within LocalBinGroupGroupSelection)
						invoke Create FileCreationRecord
							invoked.FinanceEnterpriseGroup		= FinanceEnterpriseGroupPrm
							invoked.FileCreationSetup	= FileCreationSetupPrm
							invoked.Key1				= Company
							invoked.Key2				= InventoryLocation
							invoked.Key3				= BinGroup
							invoked.SystemTimeStamp		= EndTimeStamp
							invoked.EffectiveDate		= system current corporate date
							invoked.Status				= 1
