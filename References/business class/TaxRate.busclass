TaxRate is a BusinessClass
    owned by tx
    prefix is TXRA


    Ontology
        symbolic key is TaxRate


            name for EffectDate is EffectiveDate


    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields

        Rate          		is a ChrgRate
        SecondaryRate       is a ChrgRate
        DiscretionaryAmount is a TaxableAmt
            classic name is DISCRETION-AMT

	Field Rules
		FinanceEnterpriseGroup
			default to TaxCode.FinanceEnterpriseGroup 
			
    Derived Fields

        TaxName is a StringField
            type is Alpha size 30
            TaxRate.TaxCode.Description

    Conditions

        IsNoProdTaxCt
        	restricted
            when (TaxRate.ProductTaxCategory not entered)

        IsProdCatg
        	restricted
            when (TaxRate.ProductTaxCategory entered)

    Sets

        Set2
            indexed
            Instance Selection
                where (IsProdCatg)
            Sort Order
            	FinanceEnterpriseGroup	
               	TaxCode
               	ProductTaxCategory
                TaxRate
                EffectiveDate descending

        Set3
            indexed
            Instance Selection
                where (IsNoProdTaxCt)
            Sort Order
           	 	FinanceEnterpriseGroup	
               	TaxCode
               	ProductTaxCategory
                TaxRate
                EffectiveDate descending

		Set4
            indexed
            Sort Order
           	 	FinanceEnterpriseGroup	
               	TaxCode
                EffectiveDate descending
                ProductTaxCategory
                TaxRate
                
    Actions
        Create is a Create Action
			Entrance Rules
		    	constraint (!TaxCode.TaxType.CalculatedRate)
		    		"CannotEnterTaxRateForACalculatedRateTypeTaxCode"
		Update is an Update Action
			Action Rules
					
		Delete is a Delete Action		    		
