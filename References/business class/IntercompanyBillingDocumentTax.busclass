IntercompanyBillingDocumentTax is a BusinessClass
	owned by intercobilling
	prefix is ICBTX
	sql name is "ICBDocumentTax"

	Ontology
		symbolic key is IntercompanyBillingDocumentTax

	Persistent Fields
		CalculatedFor					is Numeric 1
			States
				ReceivableInvoice			value is 1
				PayablesInvoice				value is 2
		ReceivableVATTreatment			is Numeric 1
			States
				NotVAT						value is 0
				StandardRated				value is 1	
				ZeroRated					value is 2	
				Exempt						value is 3	
				OutsideScope				value is 4	
		PayableForeignVATTreatment		is Numeric 1
			States
				NoForeignVATClaim			value is 0
				100PercentRecovery			value is 1
				FixedPercentRecovery		value is 2
		ForeignRecoveryPercent			is Percent 6.3	
		PayableDomesticVATTreatment		is Numeric 1
			States
				NoReverseCharge				value is 0
				FullyRecoverable			value is 1
				FixedPercentRecovery		value is 2
				VariablePercentRecovery		value is 3
				NoRecovery					value is 4
		DomesticRecoryPercent			is Percent 6.3	
		TaxAmount						is an InternationalAmount
		TaxRate							is Percent 7.5
		TaxableAmount					is an InternationalAmount	        

		IsService						is Boolean

		InvoiceTextCode					is a InvoiceTextCodesArray	 		
		RecoverablePercent  			is a TaxRateValue
		RecoverableAmount 				is an InternationalAmount
		UnrecoverableAmount  			is an InternationalAmount
		ForeignOrDomestic				is Numeric 1
			States
				Domestic				value is 0
				Foreign					value is 1
		ProcessType						is Numeric 1
			States
				NonVAT					value is 0
				VAT						value is 1
		TaxCodeAccount					is a FinanceCodeBlock
		LandCost						is Boolean 
		AccruedOrInvoiced				is AlphaUpper 1	
			States
				Accrued		    value is "A"
				Invoiced		value is "I"

		VATInputTaxAmount				is an InternationalAmount	
		RecoverableTaxAreaId			is like TaxCode 
		RecoverableJurisLevel 			is a VertexJurisdictionLevel
  		RecoverableImpositionType 		is a VertexImpositionType
  		RecoverableDate  				is Date
		BlockingOverridePercent  		is a Percent	 
		PartialExemptRecvblOvrdPct 		is a Percent	 
		Imposition						is a VertexImpositionType
		RateClassificationText			is a RateClassification
		ReturnedTaxType					is a VertexTaxType  
		InputOutputType					is a VertexInputOutputType	
		VertexVATType					is a VatType

		CustomerTaxCode					is like TaxCode
		VendorTaxCode					is like TaxCode
		
	Derived Fields
		DerivedTotalAmount is a DerivedField
			type is like InternationalAmount
			return (IntercompanyBillingDocumentLine.ExtendedAmount + TaxAmount)
			
		DerivedTaxCode is a DerivedField
			type is like TaxCode
			if (CalculatedFor.ReceivableInvoice)
				return CustomerTaxCode
			else
				return VendorTaxCode







				
	Conditions
		TaxTypeIsVAT
			when (IntercompanyBillingDocumentLine.ProcessType.VAT) 			 					 
																					
	Actions
        Create is a Create Action
			restricted
        				
		Update is an Update Action
			restricted
		
        Delete is a Purge Action
			restricted
