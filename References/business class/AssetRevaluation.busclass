AssetRevaluation is a BusinessClass
    owned by am
    prefix is RVL
	classic name is AMASSETRVL

    Ontology
        symbolic key is AssetRevaluation
            classic set name is RVLSET1
            classic name is PROCESS-SEQ

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields
        AssetDetailAccount         			is a FinanceCodeBlock
        	classic name is COMPANY                     			
            classic name is ACCT-UNIT
            classic name is ACTIVITY
            classic name is ACCT-CATEGORY
    	Book
        Description
        TagNumber
            classic name is TAG-NBR
        Status                      		
        RevaluedCostBase                	is an InternationalAmount
        	classic name is RVL-TOT-CSTBAS
        RevaluedTaxBase                		is an InternationalAmount
        	classic name is RVL-TOT-TAXBAS
        RevaluedCostTransaction         	is an InternationalAmount
        	classic name is RVL-TOT-CSTTRN
        RevaluedTaxTransaction         		is an InternationalAmount
        	classic name is RVL-TOT-TAXTRN
        RevalueDate                     	is TimeStamp
        	classic name is RVL-DATE
        OriginalCostBase                	is an InternationalAmount
        	classic name is ORG-TOT-CSTBAS
        OriginalTaxBase                		is an InternationalAmount
        	classic name is ORG-TOT-TAXBAS
        OriginalCostTransaction        		is an InternationalAmount
        	classic name is ORG-TOT-CSTTRN
        	
        OriginalTaxTransaction            	is an InternationalAmount
        	classic name is ORG-TOT-TAXTRN
        RevalueAmount                  		is an InternationalAmount
        	classic name is RVL-AMOUNT
        RevaluePercent              		is a Percent
        	classic name is RVL-PRECENT
        RevalueType                     	is Numeric size 1
        	classic name is RVL-TYPE
        AssetLease
        AssetGroup
        AssetCategory
        Simulated                   		is AlphaUpper size 1
        WorkInProcess               		is Boolean
            classic name is WORK-IN-PROC
        TaxExempt                   		is Boolean
        Used                        		is Boolean
        BaseNumberOfDecimals
            classic name is BASE-ND
        TransactionNumberOfDecimals 		is a CurrencyNumberOfDecimals
            classic name is TRAN-ND
		AssetType							is like AssetType
        AssetLocation
            classic name is LOCATION-NAME
        AssetDivision
            classic name is DIVISION
        Currency							is a FromCurrency
            classic name is CURRENCY-CODE
        LastAssetItemPurchaseDate   		is Date
            classic name is ITEM-LAST-DATE
        LastSequenceNumber          		is a Sequence
            classic name is ITEM-LAST-SEQ
            disable Auditing
        SelectName                  		is like MassSelection
        CreationDate                		is TimeStamp
        Operator							is an Actor


	Field Rules
        CreationDate                		
			default to current timestamp

	Relations
		AssetBookRevaluationsRel is an AssetBookRevaluation set
	
		AssetTransactionsRel is an AssetTransaction set
		
		AssetBookTransactionsRel is an AssetBookTransaction set
		
		AmortizationTransactionsRel is an AssetTransaction set
			Instance Selection
				where (related.AssetAccountType = "RVA") 
				
		AmortizationBookTransactionsRel is an AssetBookTransaction set		
			Instance Selection
				where (related.AssetAccountType = "RVA") 
						
	Conditions
		AssetTransactionsExist
			when (AssetTransactionsRel exists)
		
		AssetBookTransactionsExist
			when (AssetBookTransactionsRel exists)
			
		AmortizeRevaluation
			when (Asset.AssetType.AmortizeRevaluation)	
			
	Derived Fields
		TotalAmortized is a DerivedField
			type is like InternationalAmount
			return (TotalAmortizationPostingEntries + TotalAmortizationBookTransactionsRel)

		TotalAmortizationPostingEntries is a DerivedField
			type is like InternationalAmount
			return (sum AmortizationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)

		TotalAmortizationBookTransactionsRel is a DerivedField
			type is like InternationalAmount
			return (sum AmortizationBookTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
		
    Sets
        Set1
            indexed
            Sort Order
				FinanceEnterpriseGroup
                Asset
                AssetRevaluation

        Set3
            indexed
            Sort Order
                Asset
                AssetRevaluation
                RevalueType

	Actions
		Create is a Create Action
		
		CreateImpairment is a Create Action

		
		ReleaseImpairment is an Instance Action
			Action Rules
				Status = "R"
			
			
			
		Update is an Update Action
		
		Delete is a Delete Action
