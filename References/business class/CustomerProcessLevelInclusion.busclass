CustomerProcessLevelInclusion is a BusinessClass
    owned by ar
    prefix is CUT
    classic name is ARCUSTTOTS

    Ontology
        symbolic key is CustomerProcessLevelInclusion
            classic set name is CUTSET1
            classic name for CustomerProcessLevelInclusion.ReceivableProcessLevel is PROCESS-LEVEL

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields

        IncludeProcessLevel is Boolean
            classic name is PL-EXCL-FL

    Relations

        ArcustomerRel
            one-to-one relation to CompanyCustomer
            required
            Field Mapping uses symbolic key
                related.Company  = Company
                related.Customer = Customer

        CustomernameRel
            one-to-one relation to Customer
            required
            Field Mapping uses symbolic key
                related.CustomerGroup = Company.CustomerGroupField.CustomerGroup	
                related.Customer      = ArcustomerRel.Customer


        CustomerProcessLevelInclusionRel
            one-to-many relation to CustomerProcessLevelInclusion
            Field Mapping uses symbolic key
                related.Company  				= Company
                related.Customer 				= Customer


    Actions
        Create is a Create Action
			Exit Rules
        		if (IncludeProcessLevel) 
					invoke Update ArcustomerRel
						invoked.ProcessLevelRestrictions = true 			
        Update is an Update Action
			Exit Rules
        		if (IncludeProcessLevel) 
					invoke Update ArcustomerRel
						invoked.ProcessLevelRestrictions = true 
        		if (!IncludeProcessLevel
        		and all CustomerProcessLevelInclusionRel.IncludeProcessLevel = false) 
					invoke Update ArcustomerRel
						invoked.ProcessLevelRestrictions = false

        Delete is a Delete Action
			Exit Rules
				if (!CustomerProcessLevelInclusionRel exists) 
					invoke Update ArcustomerRel
						invoked.ProcessLevelRestrictions = false
				if (all CustomerProcessLevelInclusionRel.IncludeProcessLevel = false) 
					invoke Update ArcustomerRel
						invoked.ProcessLevelRestrictions = false
						
		Purge is a Purge Action
    		restricted
