ProjectStructureValidationResult is a BusinessClass
    sql name is "ProjStructValRslt"
    owned by Projects
    prefix is PSVR

    Ontology
    	symbolic key is ProjectStructureValidationResult
    		
	Patterns
		disable Auditing
 		disable EffectiveDated
		disable AsOfDateProcessing

    Persistent Fields
    	TestType			is Numeric size 1
    		States
    			Invoice				value is 1
    			Revenue				value is 2
    			LaborDistribution	value is 3
    			IndirectBurden		value is 4
		RunTime				is TimeStamp
		Actor
		RunGroup			is like ProjectIndirectBurdenRunGroup
		Contract			is like ProjectContract
		Invoice				is like ProjectContractInvoice
		Schedule			is like ProjectLaborSchedule
		Period				is like ProjectSchedulePeriod

	Derived Fields
		TestResult is a DerivedField
			type is MessageField
			if (ProjectStructureValidationError set exists)
				return "ErrorsFound"
			else
				return "NoErrorsFound"

    Conditions
    	ErrorsExist
    		when (ProjectStructureValidationError set exists)
    		
    	InvoiceOrRevenue
    		when (TestType.Invoice
    		or    TestType.Revenue)

    Relations
		ProjectContractRel
			one-to-one relation to Project
			Field Mapping uses ByDisplayProject
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.DisplayProject			= Contract
				related.DimensionStructure		= FinanceEnterpriseGroup.EnterpriseProjectStructure
	Sets
		ByRunTime
			Sort Order
				FinanceEnterpriseGroup
				RunTime descending
				ProjectStructureValidationResult

		ByContractAndInvoice
			Sort Order
				FinanceEnterpriseGroup
				Contract
				Invoice
				RunTime descending
				ProjectStructureValidationResult
					
    Field Rules
    	Actor
    		default to actor

	Actions
		Create is a Create Action
			restricted

		Delete is a Delete Action
			
		Update is an Update Action
			restricted
			
