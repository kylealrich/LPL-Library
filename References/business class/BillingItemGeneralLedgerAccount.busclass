BillingItemGeneralLedgerAccount is a BusinessClass
    owned by bl
    prefix is OSA
    sql name is BItemGeneralLedgerAccount
    classic name is OESLSACCT
    default label is "BillingItemGlobalLedgerAccount"

    Ontology
        symbolic key is BillingItemGeneralLedgerAccount
            classic set name is OSASET1
            classic name for BillingItemGeneralLedgerAccount.BillingProcessLevel is PROCESS-LEVEL
            classic name for BillingItemGeneralLedgerAccount.MajorSalesClass is SALES-MAJCL
            classic name for BillingItemGeneralLedgerAccount.MinorSalesClass is SALES-MINCL

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields





        ProfitMargin         is Percent size 4.2
            classic name is PROF-MARGIN
        ProfitMarginHoldCode is a ReceivableHoldCode
            classic name is PROF-HOLD-CD
        SalesAccount         is a FinanceCodeBlock
            classic name for SalesAccount.AccountingUnit is SLS-ACCT-UNIT
            classic name for SalesAccount.GeneralLedgerChartAccount is SLS-ACCOUNT
        ExpenseAccount       is a FinanceCodeBlock
            classic name for ExpenseAccount.AccountingUnit is EXP-ACCT-UNIT
            classic name for ExpenseAccount.GeneralLedgerChartAccount is EXP-ACCOUNT
        COGSAccount          is a FinanceCodeBlock
            classic name for COGSAccount.AccountingUnit is CGS-ACCT-UNIT
            classic name for COGSAccount.GeneralLedgerChartAccount is CGS-ACCOUNT
        VarianceAccount      is a FinanceCodeBlock
            classic name for VarianceAccount.AccountingUnit is VAR-ACCT-UNIT
            classic name for VarianceAccount.GeneralLedgerChartAccount is VAR-ACCOUNT

    Conditions

        IsCostOfGoods
        	restricted
            when (COGSAccount.AccountingUnit entered
            or    COGSAccount.GeneralLedgerChartAccount entered)


        IsExpenses
        	restricted
            when (ExpenseAccount.AccountingUnit entered
            or    ExpenseAccount.GeneralLedgerChartAccount entered)


        IsMinorclass
        	restricted
            when (BillingItemGeneralLedgerAccount.MinorSalesClass entered)

        IsProfitPercentageHold
        	restricted
            when (ProfitMarginHoldCode entered)

        IsProfitMargin
        	restricted
            when (ProfitMargin entered)

        IsSales
        	restricted
            when (SalesAccount.AccountingUnit entered
            or    SalesAccount.GeneralLedgerChartAccount entered)


        IsVariance
        	restricted
            when (VarianceAccount.AccountingUnit entered
            or    VarianceAccount.GeneralLedgerChartAccount entered)


    Relations

       
        InventorycompanyRel
            one-to-one relation to InventoryCompany
            required
            Field Mapping uses symbolic key
                related.Company = Company

        HoldcodeRel
            one-to-one relation to ReceivableHoldCode
            valid when (IsProfitPercentageHold)
            required
            Field Mapping uses symbolic key
                related.CustomerGroup      = Company.CustomerGroupField.CustomerGroup
                related.ReceivableHoldCode = ProfitMarginHoldCode

        HoldcodesRel
            one-to-one relation to ReceivableHoldCode
            valid when (IsProfitPercentageHold)
            required
            Field Mapping uses symbolic key
                related.CustomerGroup      = Company.CustomerGroupField.CustomerGroup
                related.ReceivableHoldCode = ProfitMarginHoldCode

        MajorClassRel
            one-to-one relation to MajorClass
            required
            Field Mapping uses symbolic key
                related.ItemGroup  = InventorycompanyRel.ItemGroup
                related.ClassType  = "S"
                related.MajorClass = BillingItemGeneralLedgerAccount.MajorSalesClass

        MinorClassRel
            one-to-one relation to MinorClass
            valid when (IsMinorclass)
            required
            Field Mapping uses symbolic key
                related.ItemGroup  = InventorycompanyRel.ItemGroup
                related.ClassType  = "S"
                related.MajorClass = BillingItemGeneralLedgerAccount.MajorSalesClass
                related.MinorClass = BillingItemGeneralLedgerAccount.MinorSalesClass

	Field Rules
		BillingItemGeneralLedgerAccount
			constraint (BillingItemGeneralLedgerAccount.BillingProcessLevel entered)
				"ProcessLevelIsRequired"
			constraint (BillingItemGeneralLedgerAccount.MajorSalesClass entered)
				"SalesMajorClassIsRequired"
		
		SalesAccount
			required
		
		ExpenseAccount
			required
		
		COGSAccount
			required
		 	
		VarianceAccount
			required		
			
		ProfitMargin
			constraint (ProfitMarginHoldCode entered)
				"MustEnterHoldCodeWhenProfitMarginIsNotZero"
		ProfitMarginHoldCode
			constraint (ProfitMargin entered)
				"CannotEnterHoldCodeWhenProfitMarginIsZero"
					
	Actions
		Create is a Create Action
		
		Delete is a Delete Action
		
		Update is an Update Action			
				
				
