PurchaseOrderPutAwayLines is a BusinessClass
	owned by po
	prefix is POPL
	sql name is PurOrdPutAwayLne
	classic name is POPALNE
	
	Ontology
		symbolic key is PurchaseOrderPutAwayLines
	
	Patterns
		implements StaticJava
		
	Persistent Fields
		PurchaseOrder
	
	Conditions
		HasLinesWithSpecialHandling
			when (PurchaseOrderReceiptLine.DerivedSpecialHandlingCode entered)

	Derived Fields
		ItemRequiresSpecialHandling is a DerivedField
			type is Alpha 3
			if (HasLinesWithSpecialHandling)
				return "Yes"
			return "No"

	Relations
		PurchaseOrderTransactionDetailsRel  
            one-to-many relation to PurchaseOrderTransactionDetail
            Field Mapping uses symbolic key
                related.Company = Company
            Instance Selection
                where (related.PurchaseOrderTransactionDetail.PurchaseTransactionDocumentType.Receiving
                and   related.PurchaseOrderTransactionDetail.DocumentNumberNumeric = PurchaseOrderReceiptLine.PurchaseOrderReceipt
                and   related.PurchaseOrderTransactionDetail.LineNumber = PurchaseOrderReceiptLine
                and	 (related.Lot entered
                or	  related.Sublot entered
                or	  related.Bin entered
                or	  related.Serial entered))
                
                
        PurchaseOrderReceiptCommentForIDMRel	
        	one-to-many relation to PurchaseOrderReceiptComment       
         	Field Mapping uses ByCommentType
   				related.Company				 = Company
				related.PurchaseOrderReceipt = PurchaseOrderReceiptLine.PurchaseOrderReceipt
			Instance Selection
    			where (related.CommentType.PrintOnInternalDocuments
    			or     related.CommentType.PrintOnDeliveryTicket)  


        PurchaseOrderReceiptLineCommentForIDMRel is a PurchaseOrderReceiptLineComment set   
			Instance Selection
    			where (related.CommentType.PrintOnInternalDocuments
    			or     related.CommentType.PrintOnDeliveryTicket) 
																
	Field Rules
	
	Actions
		Create is a Create Action
			restricted
			
		Update is an Update Action
			restricted
			
		Delete is a Delete Action
			restricted

		DeletePurchaseOrderPutAwayLines is a Set Action
			default label is untranslatable
			restricted
			Parameters
				PrmCompany	  	is like PurchasingCompany
				PrmActor 		is like Actor
				PrmRunBatchID	is like IDMPID

			Instance Selection
				where (Company = PrmCompany 
				and	   PurchaseOrderPutAway.CurrentUser = PrmActor
				and	   PurchaseOrderPutAway.RunBatchID 	= PrmRunBatchID)
			
			Action Rules
				Empty Set Rules
					invoke DeletePurchaseOrderPutAway PurchaseOrderPutAway
						invoked.PrmCompany 	  = PrmCompany
						invoked.PrmRunBatchID = PrmRunBatchID
						invoked.PrmActor 	  = PrmActor	
						
				Set Rules
					Exit Rules
						invoke DeletePurchaseOrderPutAway PurchaseOrderPutAway
							invoked.PrmCompany 	  = PrmCompany
							invoked.PrmRunBatchID = PrmRunBatchID
							invoked.PrmActor 	  = PrmActor	
			
				Instance Rules
					invoke Delete
					
