AssetTransactionDetail is a BusinessClass
	owned by am
	prefix is ATD
	Ontology
		symbolic key is AssetTransactionDetail

	Patterns
		disable Auditing
		disable EffectiveDated
		
	Persistent Fields
		AssetCompany
		Asset
		Book
		AssetTransaction
		AssetBookTransaction
		RecordType								is Numeric 2
			States
				Transaction						value is 1
				Asset							value is 2
		CompanyGroup							is a  GeneralLedgerCompanyGroup
		AssetProcess							
		OriginatingAsset						is like Asset
		
	Conditions

		AssetDetailRecord
			when (RecordType.Asset)

		PostingTransactions
			when (AssetTransaction entered)
		
		NonPostingTransactions
			when (AssetBookTransaction entered)
			
	Relations

		AssetRel
			one-to-one relation to Asset
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.Asset						= Asset	
		
		AssetBatchUpdateResultRel
			one-to-one relation to AssetBatchUpdateResult
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.AssetBatchUpdateResult	= AssetBatchUpdateResult

	Sets
		Set1
			Sort Order
				FinanceEnterpriseGroup
				AssetBatchUpdateResult
				RecordType
				AssetTransactionDetail
				
		ByAssetCompanyResult
			Sort Order
				FinanceEnterpriseGroup
				AssetCompany
				AssetBatchUpdateResult
				RecordType
				AssetTransactionDetail
				
		ByCompanyGroup
			Sort Order
				FinanceEnterpriseGroup
				CompanyGroup
				AssetBatchUpdateResult
				RecordType
				AssetTransactionDetail
				
		ForSumAmount
			Sort Order
				FinanceEnterpriseGroup
				AssetCompany
				Asset
				AssetProcess
				AssetTransactionDetail
				AssetBatchUpdateResult
		
		ByBookCompanyAsset
			Sort Order
				FinanceEnterpriseGroup
				Book
				AssetCompany
				Asset
				AssetProcess
				AssetTransactionDetail
				AssetBatchUpdateResult	
			Instance Selection
				where (PostingTransactions)		
		
		ByPostingBook	
			Sort Order
				FinanceEnterpriseGroup
				AssetBatchUpdateResult
				RecordType
				AssetTransactionDetail
			Instance Selection
				where (PostingTransactions)
		
		ByNonPostingBook
			Sort Order
				FinanceEnterpriseGroup
				AssetBatchUpdateResult
				RecordType
				AssetTransactionDetail
			Instance Selection
				where (NonPostingTransactions)
				
	Derived Fields
	
		DerivedJournalizeGroup is a DerivedField
			type is AlphaUpper 30
			return AssetTransaction.GLTransactionDetailRel.JournalizeGroup
		
		OutputNumberOfDecimals is a DerivedField
			type is Numeric 1
			if (Book.PostCurrency.Book)
				return Book.Currency.NumberOfDecimals
			else
				return Asset.Currency.NumberOfDecimals		
		AssetTransactionCreditAmount is a DerivedField
			type is like InternationalAmount
				precision is OutputNumberOfDecimals
			default label is "CreditAmount"
			if (AssetTransaction.TransactionAmount < 0)
				return AssetTransaction.TransactionAmount
		
		AssetTransactionDebitAmount is a DerivedField
			type is like InternationalAmount
				precision is OutputNumberOfDecimals
			default label is "DebitAmount"
			if (AssetTransaction.TransactionAmount > 0)
				return AssetTransaction.TransactionAmount	
		
		ConstantValue1 is a ComputeField
			type is Numeric 1
			(1+0)		
			
		AssetTransactionBookCreditAmount is a DerivedField
			type is like InternationalAmount
				precision is Book.Currency.NumberOfDecimals
			default label is "Credit"
			if (AssetTransaction.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount < 0)
				return AssetTransaction.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount
		
		AssetTransactionBookDebitAmount is a DerivedField
			type is like InternationalAmount
				precision is Book.Currency.NumberOfDecimals
			default label is "Debit"
			if (AssetTransaction.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount > 0)
				return AssetTransaction.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount

		AssetBookTransactionCreditAmount is a DerivedField
			type is like InternationalAmount
			default label is "Credit"
			if (AssetBookTransaction.TransactionAmount < 0)
				return AssetBookTransaction.TransactionAmount
		
		AssetBookTransactionDebitAmount is a DerivedField
			type is like InternationalAmount
			default label is "Debit"
			if (AssetBookTransaction.TransactionAmount > 0)
				return AssetBookTransaction.TransactionAmount	
		
		AssetBookTransactionBookCreditAmount is a DerivedField
			type is like InternationalAmount
			default label is "Credit"
			if (AssetBookTransaction.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount < 0)
				return AssetBookTransaction.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount
		
		AssetBookTransactionBookDebitAmount is a DerivedField
			type is like InternationalAmount
			default label is "Debit"
			if (AssetBookTransaction.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount > 0)
				return AssetBookTransaction.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount	
				
	Actions
	
		Create is a Create Action
			restricted
			
		Delete is a Delete Action
			restricted
			
		Update is an Update Action
			restricted
			
		Purge is a Purge Action
			restricted
			
