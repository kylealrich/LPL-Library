ProjectJurisdictionCode is a BusinessClass
    owned by Projects
    prefix is PJRD

	Ontology
		symbolic key is ProjectJurisdictionCode
        		
	Persistent Fields
		Description		
	    LastInvoiceNumber			is Numeric 7
	    	disable Auditing	    
				
	Conditions
		EligibleToDelete
			restricted
			when (FinanceDimension2 set not exists
			and   ProjectContractInvoice set not exists)

	Derived Fields
		LastUsedInvoiceNumber is a DerivedField
			type is Numeric size 7
			for each ProjectContractInvoice set
				if (each.JurisdictionInvoiceNumber > LastUsedInvoiceNumber)
					LastUsedInvoiceNumber = each.JurisdictionInvoiceNumber
			return LastUsedInvoiceNumber
			
	Relations
	
	Field Rules
		Description 
			required

		LastInvoiceNumber
			if (LastUsedInvoiceNumber entered)
				required
			constraint (LastInvoiceNumber >= LastUsedInvoiceNumber)
				"LastInvoiceNumberCannotBeLessThan<LastUsedInvoiceNumber>"
				
	Actions 
		Create is a Create Action
										
		Update is an Update Action 
								
		Delete is a Delete Action
			valid when (EligibleToDelete)
			Entrance Rules
				constraint (FinanceDimension2 set not exists)
					"CannotDelete;ProjectJurisdictionCodeIsAssignedToA<FinanceEnterpriseGroup.FinanceDimension2Label>"					
				constraint (ProjectContractInvoice set not exists)
					"CannotDelete;ProjectJurisdictionCodeIsAssignedToAProjectContractInvoice"			
