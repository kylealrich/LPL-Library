PurchaseOrderResultHeading is a BusinessClass
	owned by po
	prefix is PORH
	
	Ontology
		symbolic key is PurchaseOrderResultHeading

	Patterns
		disable AuditIndex
		disable Auditing
		disable EffectiveDated
		
	Persistent Fields
		PurchasingCompany						is like PurchasingCompany
		PurchaseOrderReceipt					is like PurchaseOrderReceipt		
		InventoryCompany						is like InventoryCompany
		RequestingLocation						is like RequestingLocation
		InventoryLocation						is like InventoryLocation
		PurchaseOrder							is like PurchaseOrder
		SourceDocumentOrigin
		SourceDocumentNumeric
		ErrorMessage							is Alpha size 150

		IsBackorder								is Boolean
		
	Field Rules
	
	Relations
		PurchaseOrderRel
			one-to-one relation to PurchaseOrder
			Field Mapping uses symbolic key
				related.Company					= PurchasingCompany
				related.PurchaseOrder			= PurchaseOrder
				
		PurchaseOrderReceiptRel
			one-to-one relation to PurchaseOrderReceipt
			Field Mapping uses symbolic key
				related.Company					= PurchasingCompany
				related.PurchaseOrderReceipt	= PurchaseOrderReceipt
	
		RequisitionRel
			one-to-one relation to Requisition
			Field Mapping uses symbolic key
				related.Company			= InventoryCompany
				related.Requisition		= SourceDocumentNumeric
				
		PurchaseOrderReceiptCommentsRel
			one-to-many relation to PurchaseOrderReceiptComment
			Field Mapping uses ByCommentType
				related.Company				 = PurchasingCompany
				related.PurchaseOrderReceipt = PurchaseOrderReceipt
			Instance Selection
				where (related.CommentType.PrintOnInternalDocuments
				or     related.CommentType.PrintOnDeliveryTicket)
				
		PurchaseOrderReceiptDeliveryCommentsRel
			one-to-many relation to PurchaseOrderReceiptComment
			Field Mapping uses ByCommentType
				related.Company				 = PurchasingCompany
				related.PurchaseOrderReceipt = PurchaseOrderReceipt
			Instance Selection
				where (related.CommentType.PrintOnInternalDocuments
				or     related.CommentType.PrintOnDeliveryTicket)
		
		PurchaseOrderBackorderCommentsRel
    		one-to-many relation to PurchaseOrderComment
    		Field Mapping uses ByCommentType
    			related.Company							= PurchasingCompany
    			related.PurchaseOrder					= PurchaseOrder
    		Instance Selection
    			where	(related.CommentType.PrintOnPurchaseOrder
    			or		 related.CommentType.PrintOnPurchaseOrderTrailer)
    			
    	PurchaseOrderResultDetailsRel
			one-to-many relation to PurchaseOrderResultDetail
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup			= FinanceEnterpriseGroup
				related.PurchaseOrderResult				= PurchaseOrderResult
				related.PurchaseOrderResultHeading		= PurchaseOrderResultHeading

		PurchaseOrderResultDetailsWithSpecialHandlingRel
			one-to-many relation to PurchaseOrderResultDetail
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup			= FinanceEnterpriseGroup
				related.PurchaseOrderResult				= PurchaseOrderResult
				related.PurchaseOrderResultHeading		= PurchaseOrderResultHeading
			Instance Selection
				where (related.HasSpecialHandling)

	Derived Fields
		DisplayPurchaseOrderAndPOCode is a MessageField
			"<PurchaseOrder>__-__<PurchaseOrderRel.POCode>"
			
	Conditions
	    DeliveryCommentsExist
            when (PurchaseOrderReceiptDeliveryCommentsRel exists)
       
        BackorderCommentsExist
			when (PurchaseOrderBackorderCommentsRel exists)				
	
		HasSpecialHandling
			when (PurchaseOrderResultDetailsWithSpecialHandlingRel exists)

		HasPOCode
			restricted
			when (PurchaseOrderRel.POCode entered)		
				
