ReceivablePaymentCashDetailImport is a BusinessClass
	owned by ar
	prefix is RPCDI
	sql name is RPCashDetailImport

	Ontology
		symbolic key is ReceivablePaymentCashDetailImport
			sql name is RPCashDetailImport

	Patterns
		disable AuditIndex
		disable Auditing 
		disable EffectiveDated
		disable DataTranslations

	Persistent Fields
		RunGroup
		Company								is a ReceivableCompany
		BatchNumber							is like ReceivablePaymentHeader
		PaymentSeq							is a Sequence
		CashFinanceCodeBlock				is a FinanceCodeBlock
			default label is "FinanceStructure"
		TransactionAmount					is an InternationalAmount

	Transient Fields
		TransientCashFinanceCodeBlock		is a FinanceCodeBlockFull
		TransientRNAFinanceCodeBlock		is a FinanceCodeBlockFull
		TransientCashCode					is a CashCode
		TransientCompanyCashCode			is a CompanyCashCode
		TransientRNACode					is a ReceivableGeneralLedgerCode
		TransientBypassCodeBlockValidation	is Boolean

	Local Fields
		LocalSetFinanceCodeBlockComponents			is a SetFinanceCodeBlockComponents
		LocalAnswer									is Boolean
		LocalGLAccount								is a FinanceCodeBlock
		TransientAdditionalDimensionsCodeBlock		is a FinanceCodeBlock

	Field Rules
		RunGroup
			required
		
		Company
			required




		TransactionAmount
			required
				"Transaction_\AmountIsRequiredOnCashDetails"

	Relations
		ReceivablePaymentImportRel
			one-to-many relation to ReceivablePaymentImport
			Field Mapping uses ByRunGroup
				related.RunGroup			= RunGroup
				related.Company				= Company
				related.BatchNumber			= BatchNumber
				related.PaymentSeq			= PaymentSeq

	Sets
		ByRunGroup
			indexed
			Sort Order
				RunGroup
				Company
				BatchNumber
				PaymentSeq
				ReceivablePaymentCashDetailImport

	Actions				
		Create is a Create Action
			Action Rules
				constraint (ReceivablePaymentImportRel exists)
					"Receivable_\Payment_\ImportRecordNotFoundFor_\Run_\Group<RunGroup>_\Company<Company>_\Batch_\Number<BatchNumber>_\Payment_\Seq<PaymentSeq>"

		Update is an Update Action
			Action Rules
				constraint (ReceivablePaymentImportRel exists)
					"Receivable_\Payment_\ImportRecordNotFoundFor_\Run_\Group<RunGroup>_\Company<Company>_\Batch_\Number<BatchNumber>_\Payment_\Seq<PaymentSeq>"

		FastUpdate is an Update Action
			restricted
			bypass field rules

		Delete is a Delete Action

		FastDelete is a Delete Action
			restricted
			bypass relational integrity rules

		ValidateFinanceCodeBlock is an Update Action
			restricted
			Action Rules
				if (not TransientBypassCodeBlockValidation)
					initialize LocalSetFinanceCodeBlockComponents
					LocalSetFinanceCodeBlockComponents.InputFinanceCodeBlock				= CashFinanceCodeBlock
					LocalSetFinanceCodeBlockComponents.DefaultFinanceCodeBlock				= TransientCompanyCashCode.CashAccount
					LocalAnswer = LocalSetFinanceCodeBlockComponents.SetIndividualFields
					TransientCashFinanceCodeBlock = LocalSetFinanceCodeBlockComponents.OutputFinanceCodeBlock
					
					if (Company.DetailedRNADistributions)
						initialize LocalGLAccount
						if (Company.DetailFinanceStructureOptions.ToAccountingEntity)
							LocalGLAccount.ToAccountingEntity = TransientCashFinanceCodeBlock.ToAccountingEntity
						if (Company.DetailFinanceStructureOptions.AccountingUnit)
							LocalGLAccount.AccountingUnit = TransientCashFinanceCodeBlock.AccountingUnit
						if (Company.DetailFinanceStructureOptions.Project)
							LocalGLAccount.Project = TransientCashFinanceCodeBlock.Project
						if (Company.DetailFinanceStructureOptions.FinanceDimension1)
							LocalGLAccount.FinanceDimension1 = TransientCashFinanceCodeBlock.FinanceDimension1
						if (Company.DetailFinanceStructureOptions.FinanceDimension2)
							LocalGLAccount.FinanceDimension2 = TransientCashFinanceCodeBlock.FinanceDimension2
						if (Company.DetailFinanceStructureOptions.FinanceDimension3)
							LocalGLAccount.FinanceDimension3 = TransientCashFinanceCodeBlock.FinanceDimension3
						if (Company.DetailFinanceStructureOptions.FinanceDimension4)
							LocalGLAccount.FinanceDimension4 = TransientCashFinanceCodeBlock.FinanceDimension4
						if (Company.DetailFinanceStructureOptions.FinanceDimension5)
							LocalGLAccount.FinanceDimension5 = TransientCashFinanceCodeBlock.FinanceDimension5
						if (Company.DetailFinanceStructureOptions.FinanceDimension6)
							LocalGLAccount.FinanceDimension6 = TransientCashFinanceCodeBlock.FinanceDimension6
						if (Company.DetailFinanceStructureOptions.FinanceDimension7)
							LocalGLAccount.FinanceDimension7 = TransientCashFinanceCodeBlock.FinanceDimension7
						if (Company.DetailFinanceStructureOptions.FinanceDimension8)
							LocalGLAccount.FinanceDimension8 = TransientCashFinanceCodeBlock.FinanceDimension8
						if (Company.DetailFinanceStructureOptions.FinanceDimension9)
							LocalGLAccount.FinanceDimension9 = TransientCashFinanceCodeBlock.FinanceDimension9
						if (Company.DetailFinanceStructureOptions.FinanceDimension10)
							LocalGLAccount.FinanceDimension10 = TransientCashFinanceCodeBlock.FinanceDimension10

						TransientAdditionalDimensionsCodeBlock 	= LocalGLAccount

						initialize LocalSetFinanceCodeBlockComponents
						LocalSetFinanceCodeBlockComponents.InputFinanceCodeBlock				= TransientRNACode.DistributionAccount
						LocalSetFinanceCodeBlockComponents.DefaultFinanceCodeBlock				= TransientAdditionalDimensionsCodeBlock
						LocalAnswer = LocalSetFinanceCodeBlockComponents.SetIndividualFields
						TransientRNAFinanceCodeBlock = LocalSetFinanceCodeBlockComponents.OutputFinanceCodeBlock
