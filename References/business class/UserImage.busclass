UserImage is a BusinessClass
    owned by repository
    prefix is usig
    framework type is LPLConfiguration

	Patterns
		disable EffectiveDated
		disable AsOfDateProcessing
		implements DynamicCreation
		implements AuditLogEntryActions
				
    Ontology
        symbolic key is UserImage
    
    Persistent Fields
    	Status 			is Numeric size 1
			States
				Active				value is 0
				Inactive			value is 1
    	Image			is BinaryObject
        ImageFileName   is FileName size 50
    	Description 	is a ConfigDescription
    	PreferredHeight	is Numeric size 4
    	PreferredWidth	is Numeric size 4
    	MimeType
            default label is "MIME_Type"
    
    Derived Fields
        DefaultImageFileName is a NativeField
            type is FileName size 50
    	
	Field Rules
		Image
			required
			
		MimeType
			default to Image mime type
		

   	Actions
    	Create is a Create Action



		Update is an Update Action


    				
    	Delete is a Delete Action
    		Action Rules


    			
    	Activate is an Instance Action
    		valid when (not Status.Active)
    		Action Rules
   				Status = Status.Active



    			
    	Deactivate is an Instance Action
    		valid when (not Status.Inactive)
    		Action Rules
    			Status = Status.Inactive



    			
   	



        FixBlankFileNamesAndMimeTypes is a Set Action
            default label is "FixBlankFileNamesAndMIME_Types"
			Action Rules
				Instance Rules
                    MimeType = Image mime type
                    if (ImageFileName = "")
                        ImageFileName = DefaultImageFileName
			
	Sets
		ByUserImage
			Sort Order
				UserImage
				ImageFileName
				Description
				
		ByUniqueID
			Sort Order
				UniqueID
