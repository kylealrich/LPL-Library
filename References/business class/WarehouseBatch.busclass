WarehouseBatch is a BusinessClass
    owned by wh
    prefix is WHB
    classic name is WHBATCH

    Ontology
        symbolic key is WarehouseBatch
            classic set name is WHBSET1
            classic name is BATCH-NBR
            classic name for InventoryLocation is LOCATION

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields

        FirstShipment   is a WarehouseShipment
            classic name is FIRST-SHIP-NBR
            delete ignored
        LastShipment    is a WarehouseShipment
            classic name is LAST-SHIP-NBR
            delete ignored
        StockWeight
            classic name is WEIGHT
        StockVolume
            classic name is CUBIC-FEET
        NumberOfCartons
            classic name is CARTONS
        Route
        
    Local Fields
    	IDMGenerateDocument
		IDMJob
		LocalDeliveryData			is Boolean
		LocalIncludeCost			is Boolean
		LocalAllocateDetail			is Boolean
		LocalIncludeBackorder		is AlphaUpper 1
			States
				DoNotPrintBackorders value is "N"
                    default label is "Do not print Backorders"
                IncludeBackorders    value is "Y"
		LocalIncludeKillDetail		is AlphaUpper 1
			States
				Yes     value is "Y"
                No      value is "N"
                Partial value is "P"
        LocalExpectedShipDate			is Date
        LocalDocumentSource			is AlphaUpper 2
        	States
        		CustomerOrders value is "OE"
        		Requisitions   value is "RQ"
        LocalAllocationPurpose		is AlphaUpper 1
        	States
        		SpeedPicking        value is "S"
        		ConsolidatedPicking value is "C"
        LocalForcePreferredBin		is AlphaUpper size 1
    		States
        		YesPreferredBin   value is "Y"
           			default label is "Yes (Preferred Bin)"
        		NoNonPreferredBin value is "N"
            		default label is "No (Non-preferred Bin)"
        LocalReprintBatch				is Alpha 6
        LocalReprintShipment			is Alpha 10
        LocalSourceDocument1			is Alpha 10
        LocalSourceDocument2			is Alpha 10
        LocalSourceDocument3			is Alpha 10
        LocalSourceDocument4			is Alpha 10
        LocalSourceDocument5			is Alpha 10
        LocalSourceDocument6			is Alpha 10
        LocalSourceDocument7			is Alpha 10
        LocalSourceDocument8			is Alpha 10
        LocalSourceDocument9			is Alpha 10
        LocalSourceDocument10			is Alpha 10
        LocalSourceDocument11			is Alpha 10
        LocalSourceDocument12			is Alpha 10
        LocalRequestingLocation		is like RequestingLocation
        LocalCustomer					is Alpha 9
        LocalItem						is like Item
        LocalProcessType				is like WarehouseProcessType
        LocalFromAllocationPriority	is Alpha 2
        LocalToAllocationPriority		is Alpha 2
        LocalShipTo					is Alpha 4
        LocalCarrier					is Alpha 9
        LocalRouteDay					is like DayOfWeek
        LocalRoute					is Alpha 4
        LocalRouteStop				is Alpha 4
        LocalAllRoute					is AlphaUpper size 1
            States
                None          value is "N"
                AllRoutes     value is "A"
                SpecificRoute value is "S"
        LocalSkipInsufficientDetails	is AlphaUpper size 1
            States
                Yes value is "Y"
                No  value is "N"
        LocalPrintOption			is Numeric size 1
        	States
				ByShipmentDocumentLine                 value is 1
					default label is "By Shipment - Document Line"
				ByShipmentBinLotSerial                 value is 2
					default label is "By Shipment - Bin/Lot/Serial"
				ByShipmentBinLotSerialRequisitionBased value is 3
					default label is "By Shipment - Bin/Lot/Serial (Requisition Based)"
				ByBinItemUomLotSerial                  value is 4
					default label is "By Bin - Item/UOM/Lot/Serial"
		LocalFullFileName is Alpha 150
		LocalShipmentSequence is Numeric 3
		LocalSourceSequence is Numeric 1
		LocalPrintRequester			is AlphaUpper size 1
			States
				Yes value is "Y"
				No  value is "N"
		LocalIDMPrinter				is like IDMPrinter
		LocalShipmentNumber			is like WarehouseShipment
		
	Conditions
		IncludeBackorderOnReport
			when (LocalIncludeBackorder.IncludeBackorders)
			
		IncludeAllKillDetailsOnReport
			when (LocalIncludeKillDetail.Yes)
		
		IncludePartialKillDetailsOnReport
			when (LocalIncludeKillDetail.Partial)
			
	Rule Blocks
		SetIDMAttribute
			initialize LocalShipmentSequence

			if (LocalPrintOption.ByBinItemUomLotSerial)
				for each ShipmentsForPickListRel
			 		if (LocalShipmentSequence < 100)
			 			LocalShipmentSequence += 1
			 			IDMAttributes.MultiValue1.IDMAttributeValueOccurs.IDMAttributeValue[LocalShipmentSequence] = each.WarehouseShipment
			 		else
			 			end for each
			 	
			IDMAttributes.MultiValue1.IDMAttributeName  = "WarehouseShipment"
			
			initialize LocalSourceSequence
			if (LocalPrintOption.ByBinItemUomLotSerial)
				for each distinct WarehouseDemand.DemandSystemCode in ShipmentsForPickListRel
					if (LocalSourceSequence < 10)
						LocalSourceSequence += 1
						IDMAttributes.MultiValue2.IDMAttributeValueOccurs.IDMAttributeValue[LocalSourceSequence] = each.WarehouseDemand.DemandSystemCode
			 		else
			 			end for each
			 	
			IDMAttributes.MultiValue2.IDMAttributeName  = "SourceDocument"
		
	Derived Fields
		DerivedCurrentDate is a DerivedField
			type is TimeStamp
			return current timestamp
			
		DerivedReprintedFlag is a DerivedField 
			type is Alpha 20
			if(first WarehousePickListPrintIDMRel.ReprintNumber > 1)
				return "Reprinted Document"
				
		DerivedExpectedShipDate is a DerivedField
			type is Date
			return LocalExpectedShipDate
			
		DerivedDocumentSource is a DerivedField
			type is Alpha 30
			if (LocalDocumentSource entered)
				if (LocalDocumentSource.CustomerOrders)
					return "Customer Order"
				else
					return "Requisition"
			else
				return "Requisition And Customer Order"
				
		DerivedPrintOption is a DerivedField
			type is Alpha 50
			if (LocalPrintOption.ByShipmentDocumentLine)
				return "By Shipment - Document Line"
			else
			if (LocalPrintOption.ByShipmentBinLotSerial)
				return "By Shipment - Bin/Lot/Serial"
			else
			if (LocalPrintOption.ByShipmentBinLotSerialRequisitionBased)
				return "By Shipment - Bin/Lot/Serial (Requisition Based)"
			else
				return "By Bin - Item/UOM/Lot/Serial"
				
		DerivedAllocateDetailParameter is a DerivedField
			type is Alpha 3
			if (LocalAllocateDetail)
				return "Yes"
			else
				return "No"
				
		DerivedIncludeCostParameter is a DerivedField
			type is Alpha 3
			if (LocalIncludeCost)
				return "Yes"
			else
				return "No"
				
		DerivedPrintDeliveryData is a DerivedField
			type is Alpha 3
			if (LocalDeliveryData)
				return "Yes"
			return "No"
			
		DerivedAllocationPurpose is a DerivedField
			type is Alpha 22
			if (LocalAllocationPurpose entered)
				if (LocalAllocationPurpose.SpeedPicking)
					return "Speed Picking"
				else
				if (LocalAllocationPurpose.ConsolidatedPicking)
					return "Consolidated Picking"
					
		DerivedForcePreferredBin is a DerivedField
			type is Alpha 3
			if (LocalForcePreferredBin entered)
				if (LocalForcePreferredBin.YesPreferredBin)
					return "Yes"
				else
					return "No"
					
		DerivedIncludeBackorder is a DerivedField
			type is Alpha 50
			if (LocalIncludeBackorder entered)
				if (LocalIncludeBackorder.DoNotPrintBackorders)
					return "Do Not Print Backorders"
				else
					return "Include Backorders"
					
		DerivedIncludeKillDetail is a DerivedField
			type is Alpha 10
			if (LocalIncludeKillDetail entered)
				if (LocalIncludeKillDetail.Yes)
					return "Yes"
				else
				if (LocalIncludeKillDetail.No)
					return "No"
				else
					return "Partial"
					
		DerivedReprintShipment is a DerivedField
			type is Alpha 10
			if (LocalReprintShipment != 0)
				return LocalReprintShipment
				
		DerivedReprintBatch is a DerivedField
			type is Alpha 6
			if (LocalReprintBatch != 0)
				return LocalReprintBatch
				
		DerivedSourceDocument1	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument1 != 0)
				return LocalSourceDocument1
			
		DerivedSourceDocument2	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument2 != 0)
				return LocalSourceDocument2
			
		DerivedSourceDocument3	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument3 != 0)
				return LocalSourceDocument3
			
		DerivedSourceDocument4	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument4 != 0)
				return LocalSourceDocument4
			
		DerivedSourceDocument5	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument5 != 0)
				return LocalSourceDocument5
			
		DerivedSourceDocument6	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument6 != 0)
				return LocalSourceDocument6
			
		DerivedSourceDocument7	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument7 != 0)
				return LocalSourceDocument7
			
		DerivedSourceDocument8	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument8 != 0)
				return LocalSourceDocument8
			
		DerivedSourceDocument9	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument9 != 0)
				return LocalSourceDocument9
			
		DerivedSourceDocument10	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument10 != 0)
				return LocalSourceDocument10
			
		DerivedSourceDocument11	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument11 != 0)
				return LocalSourceDocument11
			
		DerivedSourceDocument12	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument12 != 0)
				return LocalSourceDocument12
				
		DerivedSourceDocuments is a StringField
			type is Alpha 135
			DerivedSourceDocument1
			" "
			DerivedSourceDocument2
			" "
			DerivedSourceDocument3
			" "
			DerivedSourceDocument4
			" "
			DerivedSourceDocument5
			" "
			DerivedSourceDocument6
			" "
			DerivedSourceDocument7
			" "
			DerivedSourceDocument8
			" "
			DerivedSourceDocument9
			" "
			DerivedSourceDocument10
			" "
			DerivedSourceDocument11
			" "
			DerivedSourceDocument12
			
		DerivedRequestingLocation is a DerivedField
			type is like RequestingLocation
			return LocalRequestingLocation
			
		DerivedItem is a DerivedField
			type is like Item
			return LocalItem
			
		DerivedShipTo is a DerivedField
			type is Alpha 4
			if (LocalShipTo != 0)
				return LocalShipTo
				
		DerivedSkipInsufficientDetails is a DerivedField
			type is Alpha 5
			if (LocalSkipInsufficientDetails entered)
				if (LocalSkipInsufficientDetails.Yes)
					return "Yes"
				else
					return "No"
					
		DerivedCustomer is a DerivedField
			type is Alpha 9
			if (LocalCustomer != 0)
				return LocalCustomer
				
		DerivedProcessType is a DerivedField
			type is like WarehouseProcessType
			return LocalProcessType
			
		DerivedCarrierFilter is a DerivedField
			type is Alpha 9
			if (LocalCarrier != 0)
				return LocalCarrier
				
		DerivedRouteDay is a DerivedField
			type is Alpha 9
			if (LocalRouteDay entered)
				if (LocalRouteDay.Sunday)
					return "Sunday"
				else
				if (LocalRouteDay.Monday)
					return "Monday"
				else
				if (LocalRouteDay.Tuesday)
					return "Tuesday"
				else
				if (LocalRouteDay.Wednesday)
					return "Wednesday"
				else
				if (LocalRouteDay.Thursday)
					return "Thursday"
				else
				if (LocalRouteDay.Friday)
					return "Friday"
				else
					return "Saturday"
			
		DerivedRouteFilter is a DerivedField
			type is Alpha 4
			if (LocalRoute != 0)
				return LocalRoute
			
		DerivedRouteStopFilter is a DerivedField
			type is Alpha 4
			if (LocalRouteStop != 0)
				return LocalRouteStop
				
		DerivedFromAllocationPriority is a DerivedField
			type is Alpha 2
			if (LocalFromAllocationPriority != 0)
				return LocalFromAllocationPriority
			
		DerivedToAllocationPriority is a DerivedField
			type is Alpha 2
			if (LocalToAllocationPriority != 0)
				return LocalToAllocationPriority
				
		DerivedBatchIncludeBackorder is a DerivedField
			type is Boolean
			if (LocalIncludeBackorder.IncludeBackorders)
				return true
				
		DerivedBatchIncludeKillDetail is a DerivedField
			type is Boolean
			if (LocalIncludeKillDetail.Yes)
				return true
				
		DerivedBatchIncludePartialKill	is a DerivedField
			type is Boolean
			if (LocalIncludeKillDetail.Partial)
				return true
				
		DerivedFileName is a StringField
			type is  Alpha size 100
			"Warehouse Pick List "
			Company
			"-"
			InventoryLocation
			"-"
			WarehouseBatch


		DerivedPrintRequester is a DerivedField
			type is Alpha 3
			if (LocalPrintRequester.Yes)
				return "Yes"
			else
				return "No"
				
		DerivedIDMPrinter	is a DerivedField
			type is like IDMPrinter
			return LocalIDMPrinter
			
		DerivedIDMCurrentDate is a DerivedField
			type is Date
			return current corporate date
			
		DerivedIDMCurrentTime is a DerivedField
			type is Time
			return current corporate time
		
    Relations

        ShipmentRel
            one-to-many relation to WarehouseShipment
            Field Mapping uses Set4
                related.Company           = Company
                related.InventoryLocation = InventoryLocation
                related.WarehouseBatch    = WarehouseBatch

        ShipmentallRel
            one-to-many relation to WarehouseShipment
            Field Mapping uses Set5
                related.Company           = Company
                related.InventoryLocation = InventoryLocation
                related.WarehouseBatch    = WarehouseBatch
		
		WarehousePickListPrintIDMRel
            one-to-many relation to WarehousePickListPrintIDM
            Field Mapping uses symbolic key
                related.Company           = Company
                related.InventoryLocation = InventoryLocation
            Instance Selection

				where (related.WarehouseShipment.DerivedIDMBatchNumber = WarehouseBatch)
                
        ShipmentLineDetailByBinItemUOMRel
			one-to-many relation to WarehousePickListPrintDetail
			Field Mapping uses ByBinItemUOMLotSerial
				related.Company										= Company
				related.InventoryLocation							= InventoryLocation
			Instance Selection	
				where (related.WarehouseShipment.WarehouseBatch		= WarehouseBatch)
				
		ShipmentsForPickListRel
            one-to-many relation to WarehouseShipment
            Field Mapping uses Set5
                related.Company           = Company
                related.InventoryLocation = InventoryLocation
                related.WarehouseBatch    = WarehouseBatch
                
        UserDefaultPrinterRel
			one-to-one relation to UserDefaultPrinter
			Field Mapping uses symbolic key
				related.UserDefaultPrinter.Actor	= actor
				
		WarehousePickListPrintIDMHeaderRel
            one-to-one relation to WarehousePickListPrintIDM
            Field Mapping uses symbolic key
                related.Company           = Company
                related.InventoryLocation = InventoryLocation
                related.WarehouseShipment = LocalShipmentNumber

		WarehousePickListPrintLineRel
			one-to-many relation to WarehousePickListPrintLine
			Field Mapping uses symbolic key
				related.Company			  = Company
				related.InventoryLocation = InventoryLocation
			Instance Selection
				where (related.WarehouseShipment.WarehouseBatch = WarehouseBatch)	

		LineWithNoComponentSpecialHandlingRel
			one-to-many relation to WarehouseShipmentLine
			Field Mapping uses symbolic key
				related.Company					= Company
				related.InventoryLocation		= InventoryLocation
			Instance Selection
				where (related.WarehouseShipment.WarehouseBatch = WarehouseBatch
				and related.HasSpecialHandling
				and not related.HasLineComponent)

		LineComponentWithSpecialHandlingRel
			one-to-many relation to WarehouseShipmentLineComponent
			Field Mapping uses symbolic key
				related.Company					= Company
				related.InventoryLocation		= InventoryLocation
			Instance Selection
				where (related.WarehouseShipment.WarehouseBatch = WarehouseBatch
				and related.HasSpecialHandling)

		
	Actions
		Create is a Create Action
			restricted
			
		Update is an Update Action
			restricted
			
		Delete is a Delete Action
			restricted
					
		PrintWarehousePickList is an Instance Action
			restricted
			run in background
			Parameters
				PrmPrintOption				is Numeric size 1
					States
		                ByShipmentDocumentLine                 value is 1
		                    default label is "By Shipment-Document Line"
		                ByShipmentBinLotSerial                 value is 2
		                    default label is "By Shipment-Bin/Lot/Serial"
		                ByShipmentBinLotSerialRequisitionBased value is 3
		                    default label is "By Shipment-Bin/Lot/Serial (Requisition Based)"
		                ByBinItemUomLotSerial                  value is 4
		                    default label is "By Bin-Item/UOM/Lot/Serial"
		        PrmIncludeCost				is Boolean
		        PrmDeliveryData				is Boolean
		        PrmAllocateDetail			is Boolean
				PrmReprintShipment			is a WarehouseShipment
				PrmIncludeBackorders		is AlphaUpper 1
					States
						DoNotPrintBackorders value is "N"
                    		default label is "Do not print Backorders"
                		IncludeBackorders    value is "Y"
				PrmIncludeKillDetails		is AlphaUpper 1
					States
						Yes     value is "Y"
                		No      value is "N"
                		Partial value is "P"
                PrmExpectedShipDate			is Date
                PrmDocumentSource			is AlphaUpper 2
                	States
                		CustomerOrders value is "OE"
                		Requisitions   value is "RQ"
                PrmAllocationPurpose		is AlphaUpper 1
                	States
                		SpeedPicking        value is "S"
                		ConsolidatedPicking value is "C"
                PrmForcePreferredBin		is AlphaUpper size 1
            		States
                		YesPreferredBin   value is "Y"
                   			default label is "Yes (Preferred Bin)"
                		NoNonPreferredBin value is "N"
                    		default label is "No (Non-preferred Bin)"
                PrmReprintBatch				is Numeric 6
                PrmSourceDocument1			is like DemandDocument
                PrmSourceDocument2			is like DemandDocument
                PrmSourceDocument3			is like DemandDocument
                PrmSourceDocument4			is like DemandDocument
                PrmSourceDocument5			is like DemandDocument
                PrmSourceDocument6			is like DemandDocument
                PrmSourceDocument7			is like DemandDocument
                PrmSourceDocument8			is like DemandDocument
                PrmSourceDocument9			is like DemandDocument
                PrmSourceDocument10			is like DemandDocument
                PrmSourceDocument11			is like DemandDocument
                PrmSourceDocument12			is like DemandDocument
                PrmRequestingLocation		is like RequestingLocation
                PrmCustomer					is like Customer
                PrmItem						is like Item
                PrmProcessType				is like WarehouseProcessType
                PrmFromAllocationPriority	is Numeric 2
                PrmToAllocationPriority		is Numeric 2
                PrmShipTo					is like CustomerShipTo
                PrmCarrier					is like Vendor
                PrmRouteDay					is like DayOfWeek
                PrmRoute					is like Route
                PrmRouteStop				is Numeric size 4
                PrmAllRoute					is AlphaUpper size 1
		            States
		                None          value is "N"
		                AllRoutes     value is "A"
		                SpecificRoute value is "S"
		        PrmSkipInsufficientDetails	is AlphaUpper size 1     
		            States
		                Yes value is "Y"
		                No  value is "N"
		        PrmIDMPrinter				is an IDMPrinter
		        PrmPrintRequester			is AlphaUpper size 1
					States
						Yes value is "Y"
						No  value is "N"
				PrmWarehousePickListPrintIDM is a WarehousePickListPrintIDM
				PrmConsolidateFile			is Boolean
				
			Parameter Rules
    			PrmPrintOption
    				required
    				
				PrmIDMPrinter
					initial value is UserDefaultPrinterRel.IDMPrinter
					
	    	Local Fields
	    		AsyncId			is an AsyncActionRequest
    		
    		Entrance Rules
				if (PrmReprintShipment entered)
					if (PrmReprintShipment.WarehousePickListPrintIDMHeaderRel not exists)
						invoke CreatePickListRecord WarehousePickListPrintIDM
							invoked.Company 			= Company
							invoked.InventoryLocation   = InventoryLocation
							invoked.WarehouseShipment	= PrmReprintShipment
					PrmWarehousePickListPrintIDM = PrmReprintShipment
				else
					invoke CreateWarehousePicklistPrintIDM WarehouseShipment in background
						assign async action request id to AsyncId
						invoked.ParamCompany 			= Company
						invoked.ParamInventoryLocation  = InventoryLocation
						invoked.ParamWarehouseBatch		= WarehouseBatch
			
    		Action Rules
    			if (Company.UseIDM)
	    			if (PrmReprintShipment entered
	    			and not PrmPrintOption.ByBinItemUomLotSerial)
	    				if (PrmPrintOption.ByShipmentDocumentLine)
	    					invoke CreateWarehousePickListPrintOne PrmWarehousePickListPrintIDM in background
	    						run after AsyncId
								invoked.PrmAllocateDetail		= PrmAllocateDetail
								invoked.PrmIncludeBackorders	= PrmIncludeBackorders
								invoked.PrmIncludeKillDetails	= PrmIncludeKillDetails
								invoked.PrmExpectedShipDate		= PrmExpectedShipDate
								invoked.PrmDocumentSource		= PrmDocumentSource
								invoked.PrmAllocationPurpose	= PrmAllocationPurpose
								invoked.PrmForcePreferredBin	= PrmForcePreferredBin
								invoked.PrmReprintBatch			= PrmReprintBatch
								invoked.PrmReprintShipment		= PrmReprintShipment
								invoked.PrmSourceDocument1		= PrmSourceDocument1
								invoked.PrmSourceDocument2		= PrmSourceDocument2
								invoked.PrmSourceDocument3		= PrmSourceDocument3
								invoked.PrmSourceDocument4		= PrmSourceDocument4
								invoked.PrmSourceDocument5		= PrmSourceDocument5
								invoked.PrmSourceDocument6		= PrmSourceDocument6
								invoked.PrmSourceDocument7		= PrmSourceDocument7
								invoked.PrmSourceDocument8		= PrmSourceDocument8
								invoked.PrmSourceDocument9		= PrmSourceDocument9
								invoked.PrmSourceDocument10		= PrmSourceDocument10
								invoked.PrmSourceDocument11		= PrmSourceDocument11
								invoked.PrmSourceDocument12		= PrmSourceDocument12
								invoked.PrmRequestingLocation	= PrmRequestingLocation
								invoked.PrmCustomer				= PrmCustomer
								invoked.PrmItem					= PrmItem
								invoked.PrmProcessType			= PrmProcessType
								invoked.PrmFromAllocationPriority = PrmFromAllocationPriority
								invoked.PrmToAllocationPriority	= PrmToAllocationPriority
								invoked.PrmShipTo				= PrmShipTo
								invoked.PrmCarrier				= PrmCarrier
								invoked.PrmRouteDay				= PrmRouteDay
								invoked.PrmRoute				= PrmRoute
								invoked.PrmRouteStop			= PrmRouteStop
								invoked.PrmAllRoute				= PrmAllRoute
								invoked.PrmSkipInsufficientDetails = PrmSkipInsufficientDetails
								invoked.PrmPrintOption			= PrmPrintOption
								invoked.PrmIncludeCost			= PrmIncludeCost
								invoked.PrmDeliveryData 		= PrmDeliveryData
								invoked.PrmIDMPrinter			= PrmIDMPrinter
								invoked.PrmPrintRequester		= PrmPrintRequester	    					
	    				else
	    				if (PrmPrintOption.ByShipmentBinLotSerial)
	    					invoke CreateWarehousePickListPrintTwo PrmWarehousePickListPrintIDM in background
	    						run after AsyncId
								invoked.PrmIncludeBackorders	= PrmIncludeBackorders
								invoked.PrmIncludeKillDetails	= PrmIncludeKillDetails
								invoked.PrmExpectedShipDate		= PrmExpectedShipDate
								invoked.PrmDocumentSource		= PrmDocumentSource
								invoked.PrmAllocationPurpose	= PrmAllocationPurpose
								invoked.PrmForcePreferredBin	= PrmForcePreferredBin
								invoked.PrmReprintBatch			= PrmReprintBatch
								invoked.PrmReprintShipment		= PrmReprintShipment
								invoked.PrmSourceDocument1		= PrmSourceDocument1
								invoked.PrmSourceDocument2		= PrmSourceDocument2
								invoked.PrmSourceDocument3		= PrmSourceDocument3
								invoked.PrmSourceDocument4		= PrmSourceDocument4
								invoked.PrmSourceDocument5		= PrmSourceDocument5
								invoked.PrmSourceDocument6		= PrmSourceDocument6
								invoked.PrmSourceDocument7		= PrmSourceDocument7
								invoked.PrmSourceDocument8		= PrmSourceDocument8
								invoked.PrmSourceDocument9		= PrmSourceDocument9
								invoked.PrmSourceDocument10		= PrmSourceDocument10
								invoked.PrmSourceDocument11		= PrmSourceDocument11
								invoked.PrmSourceDocument12		= PrmSourceDocument12
								invoked.PrmRequestingLocation	= PrmRequestingLocation
								invoked.PrmCustomer				= PrmCustomer
								invoked.PrmItem					= PrmItem
								invoked.PrmProcessType			= PrmProcessType
								invoked.PrmFromAllocationPriority = PrmFromAllocationPriority
								invoked.PrmToAllocationPriority	= PrmToAllocationPriority
								invoked.PrmShipTo				= PrmShipTo
								invoked.PrmCarrier				= PrmCarrier
								invoked.PrmRouteDay				= PrmRouteDay
								invoked.PrmRoute				= PrmRoute
								invoked.PrmRouteStop			= PrmRouteStop
								invoked.PrmAllRoute				= PrmAllRoute
								invoked.PrmSkipInsufficientDetails = PrmSkipInsufficientDetails
								invoked.PrmPrintOption			= PrmPrintOption
								invoked.PrmIncludeCost			= PrmIncludeCost
								invoked.PrmDeliveryData 		= PrmDeliveryData
								invoked.PrmIDMPrinter			= PrmIDMPrinter
								invoked.PrmPrintRequester		= PrmPrintRequester	    					
	    				else
	    				if (PrmPrintOption.ByShipmentBinLotSerialRequisitionBased)
		    				invoke CreateWarehousePickListPrintThree PrmWarehousePickListPrintIDM in background
		    					run after AsyncId
								invoked.PrmAllocateDetail		= PrmAllocateDetail
								invoked.PrmIncludeCost			= PrmIncludeCost
								invoked.PrmDeliveryData 		= PrmDeliveryData
								invoked.PrmIncludeBackorders	= PrmIncludeBackorders
								invoked.PrmIncludeKillDetails	= PrmIncludeKillDetails
								invoked.PrmExpectedShipDate		= PrmExpectedShipDate
								invoked.PrmDocumentSource		= PrmDocumentSource
								invoked.PrmAllocationPurpose	= PrmAllocationPurpose
								invoked.PrmForcePreferredBin	= PrmForcePreferredBin
								invoked.PrmReprintBatch			= PrmReprintBatch
								invoked.PrmReprintShipment		= PrmReprintShipment
								invoked.PrmSourceDocument1		= PrmSourceDocument1
								invoked.PrmSourceDocument2		= PrmSourceDocument2
								invoked.PrmSourceDocument3		= PrmSourceDocument3
								invoked.PrmSourceDocument4		= PrmSourceDocument4
								invoked.PrmSourceDocument5		= PrmSourceDocument5
								invoked.PrmSourceDocument6		= PrmSourceDocument6
								invoked.PrmSourceDocument7		= PrmSourceDocument7
								invoked.PrmSourceDocument8		= PrmSourceDocument8
								invoked.PrmSourceDocument9		= PrmSourceDocument9
								invoked.PrmSourceDocument10		= PrmSourceDocument10
								invoked.PrmSourceDocument11		= PrmSourceDocument11
								invoked.PrmSourceDocument12		= PrmSourceDocument12
								invoked.PrmRequestingLocation	= PrmRequestingLocation
								invoked.PrmCustomer				= PrmCustomer
								invoked.PrmItem					= PrmItem
								invoked.PrmProcessType			= PrmProcessType
								invoked.PrmFromAllocationPriority = PrmFromAllocationPriority
								invoked.PrmToAllocationPriority	= PrmToAllocationPriority
								invoked.PrmShipTo				= PrmShipTo
								invoked.PrmCarrier				= PrmCarrier
								invoked.PrmRouteDay				= PrmRouteDay
								invoked.PrmRoute				= PrmRoute
								invoked.PrmRouteStop			= PrmRouteStop
								invoked.PrmAllRoute				= PrmAllRoute
								invoked.PrmSkipInsufficientDetails = PrmSkipInsufficientDetails
								invoked.PrmPrintOption			= PrmPrintOption
								invoked.PrmIDMPrinter			= PrmIDMPrinter
								invoked.PrmPrintRequester		= PrmPrintRequester
					else
						if (PrmPrintOption.ByBinItemUomLotSerial)
							invoke CreateWarehousePickListPrintFour in background
								run after AsyncId
								invoked.PrmPrintOption 			= PrmPrintOption
								invoked.PrmAllocateDetail		= PrmAllocateDetail
								invoked.PrmIncludeCost  		= PrmIncludeCost
								invoked.PrmDeliveryData 		= PrmDeliveryData
								invoked.PrmIncludeBackorders	= PrmIncludeBackorders
								invoked.PrmIncludeKillDetails	= PrmIncludeKillDetails
								invoked.PrmExpectedShipDate		= PrmExpectedShipDate
								invoked.PrmDocumentSource		= PrmDocumentSource
								invoked.PrmAllocationPurpose	= PrmAllocationPurpose
								invoked.PrmForcePreferredBin	= PrmForcePreferredBin
								invoked.PrmReprintBatch			= PrmReprintBatch
								invoked.PrmReprintShipment		= PrmReprintShipment
								invoked.PrmSourceDocument1		= PrmSourceDocument1
								invoked.PrmSourceDocument2		= PrmSourceDocument2
								invoked.PrmSourceDocument3		= PrmSourceDocument3
								invoked.PrmSourceDocument4		= PrmSourceDocument4
								invoked.PrmSourceDocument5		= PrmSourceDocument5
								invoked.PrmSourceDocument6		= PrmSourceDocument6
								invoked.PrmSourceDocument7		= PrmSourceDocument7
								invoked.PrmSourceDocument8		= PrmSourceDocument8
								invoked.PrmSourceDocument9		= PrmSourceDocument9
								invoked.PrmSourceDocument10		= PrmSourceDocument10
								invoked.PrmSourceDocument11		= PrmSourceDocument11
								invoked.PrmSourceDocument12		= PrmSourceDocument12
								invoked.PrmRequestingLocation	= PrmRequestingLocation
								invoked.PrmCustomer				= PrmCustomer
								invoked.PrmItem					= PrmItem
								invoked.PrmProcessType			= PrmProcessType
								invoked.PrmFromAllocationPriority = PrmFromAllocationPriority
								invoked.PrmToAllocationPriority	= PrmToAllocationPriority
								invoked.PrmShipTo				= PrmShipTo
								invoked.PrmCarrier				= PrmCarrier
								invoked.PrmRouteDay				= PrmRouteDay
								invoked.PrmRoute				= PrmRoute
								invoked.PrmRouteStop			= PrmRouteStop
								invoked.PrmAllRoute				= PrmAllRoute
								invoked.PrmSkipInsufficientDetails	= PrmSkipInsufficientDetails
								invoked.PrmIDMPrinter			= PrmIDMPrinter
								invoked.PrmPrintRequester		= PrmPrintRequester
						else
							invoke GenerateWarehousePicklistForAllShipment WarehouseShipment in background
								run after AsyncId
								invoked.ParamCompany				 = Company			
								invoked.ParamInventoryLocation		 = InventoryLocation		
								invoked.ParamWarehouseBatch			 = WarehouseBatch		
								invoked.ParamPrintOption 			 = PrmPrintOption
								invoked.ParamAllocateDetail			 = PrmAllocateDetail
								invoked.ParamIncludeCost  			 = PrmIncludeCost
								invoked.ParamDeliveryData 			 = PrmDeliveryData
								invoked.ParamIncludeBackorders		 = PrmIncludeBackorders
								invoked.ParamIncludeKillDetails		 = PrmIncludeKillDetails
								invoked.ParamExpectedShipDate		 = PrmExpectedShipDate
								invoked.ParamDocumentSource			 = PrmDocumentSource
								invoked.ParamAllocationPurpose		 = PrmAllocationPurpose
								invoked.ParamForcePreferredBin		 = PrmForcePreferredBin
								invoked.ParamReprintBatch			 = PrmReprintBatch
								invoked.ParamReprintShipment		 = PrmReprintShipment
								invoked.ParamSourceDocument1		 = PrmSourceDocument1
								invoked.ParamSourceDocument2		 = PrmSourceDocument2
								invoked.ParamSourceDocument3		 = PrmSourceDocument3
								invoked.ParamSourceDocument4		 = PrmSourceDocument4
								invoked.ParamSourceDocument5		 = PrmSourceDocument5
								invoked.ParamSourceDocument6		 = PrmSourceDocument6
								invoked.ParamSourceDocument7		 = PrmSourceDocument7
								invoked.ParamSourceDocument8		 = PrmSourceDocument8
								invoked.ParamSourceDocument9		 = PrmSourceDocument9
								invoked.ParamSourceDocument10		 = PrmSourceDocument10
								invoked.ParamSourceDocument11		 = PrmSourceDocument11
								invoked.ParamSourceDocument12		 = PrmSourceDocument12
								invoked.ParamRequestingLocation		 = PrmRequestingLocation
								invoked.ParamCustomer				 = PrmCustomer
								invoked.ParamItem					 = PrmItem
								invoked.ParamProcessType			 = PrmProcessType
								invoked.ParamFromAllocationPriority  = PrmFromAllocationPriority
								invoked.ParamToAllocationPriority	 = PrmToAllocationPriority
								invoked.ParamShipTo					 = PrmShipTo
								invoked.ParamCarrier				 = PrmCarrier
								invoked.ParamRouteDay				 = PrmRouteDay
								invoked.ParamRoute					 = PrmRoute
								invoked.ParamRouteStop			     = PrmRouteStop
								invoked.ParamAllRoute			     = PrmAllRoute
								invoked.ParamSkipInsufficientDetails = PrmSkipInsufficientDetails
								invoked.ParamIDMPrinter				 = PrmIDMPrinter
								invoked.ParamPrintRequester			 = PrmPrintRequester
								invoked.ParamConsolidateFile		 = PrmConsolidateFile
									
		CreateWarehousePickListPrintFour is an Instance Action
			restricted
			Parameters
				PrmIncludeCost				is Boolean
				PrmDeliveryData				is Boolean
				PrmAllocateDetail			is Boolean
				PrmIncludeBackorders		is AlphaUpper 1
					States
						DoNotPrintBackorders value is "N"
                    		default label is "Do not print Backorders"
                		IncludeBackorders    value is "Y"
				PrmIncludeKillDetails		is AlphaUpper 1
					States
						Yes     value is "Y"
                		No      value is "N"
                		Partial value is "P"
                PrmExpectedShipDate			is Date
                PrmDocumentSource			is AlphaUpper 2
                	States
                		CustomerOrders value is "OE"
                		Requisitions   value is "RQ"
                PrmAllocationPurpose		is AlphaUpper 1
                	States
                		SpeedPicking        value is "S"
                		ConsolidatedPicking value is "C"
                PrmForcePreferredBin		is AlphaUpper size 1
            		States
                		YesPreferredBin   value is "Y"
                   			default label is "Yes (Preferred Bin)"
                		NoNonPreferredBin value is "N"
                    		default label is "No (Non-preferred Bin)"
                PrmReprintBatch				is Numeric 6
                PrmReprintShipment			is a WarehouseShipment
                PrmSourceDocument1			is like DemandDocument
                PrmSourceDocument2			is like DemandDocument
                PrmSourceDocument3			is like DemandDocument
                PrmSourceDocument4			is like DemandDocument
                PrmSourceDocument5			is like DemandDocument
                PrmSourceDocument6			is like DemandDocument
                PrmSourceDocument7			is like DemandDocument
                PrmSourceDocument8			is like DemandDocument
                PrmSourceDocument9			is like DemandDocument
                PrmSourceDocument10			is like DemandDocument
                PrmSourceDocument11			is like DemandDocument
                PrmSourceDocument12			is like DemandDocument
                PrmRequestingLocation		is like RequestingLocation
                PrmCustomer					is like Customer
                PrmItem						is like Item
                PrmProcessType				is like WarehouseProcessType
                PrmFromAllocationPriority	is Numeric 2
                PrmToAllocationPriority		is Numeric 2
                PrmShipTo					is like CustomerShipTo
                PrmCarrier					is like Vendor
                PrmRouteDay					is like DayOfWeek
                PrmRoute					is like Route
                PrmRouteStop				is Numeric size 4
                PrmAllRoute					is AlphaUpper size 1
		            States
		                None          value is "N"
		                AllRoutes     value is "A"
		                SpecificRoute value is "S"
		        PrmSkipInsufficientDetails	is AlphaUpper size 1     
		            States
		                Yes value is "Y"
		                No  value is "N"
		        PrmPrintOption				is Numeric size 1
        			States
						ByShipmentDocumentLine                 value is 1
							default label is "By Shipment - Document Line"
						ByShipmentBinLotSerial                 value is 2
							default label is "By Shipment - Bin/Lot/Serial"
						ByShipmentBinLotSerialRequisitionBased value is 3
							default label is "By Shipment - Bin/Lot/Serial (Requisition Based)"
						ByBinItemUomLotSerial                  value is 4
							default label is "By Bin - Item/UOM/Lot/Serial"
				PrmIDMPrinter				is an IDMPrinter
				PrmPrintRequester			is AlphaUpper size 1
					States
						Yes value is "Y"
						No  value is "N"
				
			Local Fields
    			IDMAttributes
			
			Action Rules

				initialize LocalAllocateDetail	
				LocalAllocateDetail = true
				
				LocalIncludeCost 				= PrmIncludeCost
				LocalIncludeBackorder  = PrmIncludeBackorders
				LocalIncludeKillDetail = PrmIncludeKillDetails
				
				LocalIncludeBackorder	= PrmIncludeBackorders
				LocalIncludeKillDetail	= PrmIncludeKillDetails
				LocalExpectedShipDate	= PrmExpectedShipDate
				LocalDocumentSource		= PrmDocumentSource
				LocalAllocationPurpose	= PrmAllocationPurpose
				LocalForcePreferredBin	= PrmForcePreferredBin
				LocalReprintBatch		= PrmReprintBatch
				LocalReprintShipment	= PrmReprintShipment
				LocalSourceDocument1	= PrmSourceDocument1
				LocalSourceDocument2	= PrmSourceDocument2
				LocalSourceDocument3	= PrmSourceDocument3
				LocalSourceDocument4	= PrmSourceDocument4
				LocalSourceDocument5	= PrmSourceDocument5
				LocalSourceDocument6	= PrmSourceDocument6
				LocalSourceDocument7	= PrmSourceDocument7
				LocalSourceDocument8	= PrmSourceDocument8
				LocalSourceDocument9	= PrmSourceDocument9
				LocalSourceDocument10	= PrmSourceDocument10
				LocalSourceDocument11	= PrmSourceDocument11
				LocalSourceDocument12	= PrmSourceDocument12
				LocalRequestingLocation	= PrmRequestingLocation
				LocalCustomer			= PrmCustomer
				LocalItem				= PrmItem
				LocalProcessType		= PrmProcessType
				LocalFromAllocationPriority	= PrmFromAllocationPriority
				LocalToAllocationPriority	= PrmToAllocationPriority
				LocalShipTo				= PrmShipTo
				LocalCarrier			= PrmCarrier
				LocalRouteDay			= PrmRouteDay
				LocalRoute				= PrmRoute
				LocalRouteStop			= PrmRouteStop
				LocalAllRoute			= PrmAllRoute
				LocalSkipInsufficientDetails = PrmSkipInsufficientDetails
				LocalPrintOption		= PrmPrintOption
				LocalDeliveryData 		= PrmDeliveryData
				LocalPrintRequester		= PrmPrintRequester
				
				for each WarehousePickListPrintIDMRel
					invoke Update each
						invoked.ReprintNumber += 1
				
				initialize IDMGenerateDocument
				
				IDMGenerateDocument.IDMXMLDefinition.Busclass											= reference to this instance
				IDMGenerateDocument.IDMXMLDefinition.ListName											= "WarehousePickListPrintForIDMList"
				IDMGenerateDocument.IDMXMLDefinition.DocumentName										= "WHPLPByBinItemUOMLotSerial"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].RelationName			= "WarehousePickListPrintLineRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].ListName 			= "WarehousePickListPrintShipmentLineForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].LevelSection1		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].ListTag				= "PickListPrintLines"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].ItemTag				= "PickListPrintLine"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].RelationName			= "WarehousePickListPrintLineItemRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].ListName 			= "WarehousePickListPrintShipmentLineForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].ListTag				= "LineIsNotKitItems"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].ItemTag				= "LineIsNotKitItem"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].RelationName			= "WarehouseShipmentLineComponentRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].ListName 			= "WarehouseShipmentLineComponentIDMList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].LevelSection2		= 2
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].ListTag				= "LineComponents"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].ItemTag				= "LineComponent"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].RelationName			= "LineItemCommentsRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].ListName 			= "ItemCommentIDMList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].LevelSection2		= 3
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].ListTag				= "LineItemComments"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].ItemTag				= "LineItemComment"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].RelationName			= "WarehousePickListPrintIDMRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].ListName 			= "WarehousePickListPrintIDMList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].LevelSection1		= 2
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].ListTag				= "ShipmentDetails"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].ItemTag				= "ShipmentDetail"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].RelationName			= "LinesWithInsufficientDetailCheckRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].ListName 			= "ColumnHeaderCheckList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].LevelSection1		= 2
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].ListTag				= "InsufficientDetailsHeader"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].ItemTag				= "InsufficientDetailHeader"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].RelationName			= "WarehousePickListPrintLineNoDetailRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].ListName 			= "WarehousePickListPrintShipmentLineForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].LevelSection1		= 2
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].LevelSection2		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].LevelSection3		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].ListTag				= "PickListPrintLinesNoDetail"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].ItemTag				= "PickListPrintLineNoDetail"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].RelationName			= "PrintOptionFourBackorderedItemsCheckRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].ListName 			= "ColumnHeaderCheckList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].LevelSection1		= 2
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].LevelSection2		= 2
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].ListTag				= "BackorderedItemsHeader"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].ItemTag				= "BackorderedItemHeader"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].RelationName			= "ShipmentBackordersRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].ListName 			= "BackorderedItemDetailsForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].LevelSection1		= 2
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].LevelSection2		= 2
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].LevelSection3		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].ListTag				= "BackorderedItems"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].ItemTag				= "BackorderedItem"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].RelationName		= "PrintOptionFourKilledItemsCheckRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].ListName 			= "ColumnHeaderCheckList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].LevelSection1		= 2
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].LevelSection2		= 3
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].ListTag				= "KilledItemsHeader"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].ItemTag				= "KilledItemHeader"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].RelationName		= "RequisitionKilledItemsRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].ListName 			= "RequisitionLineForPickListPrintIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].LevelSection1		= 2
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].LevelSection2		= 3
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].LevelSection3		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].ListTag				= "KilledItems"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].ItemTag				= "KilledItem"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].RelationName		= "LineWithNoComponentSpecialHandlingRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].ListName 			= "WarehouseShipmentLineWithSpecialHandlingForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].LevelSection1		= 3
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].ListTag				= "SpecialHandlingLines"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].ItemTag				= "SpecialHandlingLine"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].RelationName		= "LineComponentWithSpecialHandlingRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].ListName 			= "LineComponentSpecialHandlingIDMList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].LevelSection1		= 4
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].ListTag				= "LineComponentSpecialHandlingLines"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].ItemTag				= "LineComponentSpecialHandlingLine"
				
				
				initialize IDMAttributes
 				IDMAttributes.SingleValue.IDMAttribute[1].IDMAttributeName  	= "Company"
				IDMAttributes.SingleValue.IDMAttribute[1].IDMAttributeValue  	= Company
				IDMAttributes.SingleValue.IDMAttribute[2].IDMAttributeName  	= "InventoryLocation"
				IDMAttributes.SingleValue.IDMAttribute[2].IDMAttributeValue  	= InventoryLocation
				IDMAttributes.SingleValue.IDMAttribute[3].IDMAttributeName  	= "CompanyName"
				IDMAttributes.SingleValue.IDMAttribute[3].IDMAttributeValue  	= Company.Name

				include SetIDMAttribute
				
				IDMGenerateDocument.IDMAttributes		= IDMAttributes
				IDMGenerateDocument.TemplateUniqueId	= Company.PickListPrintByBinItemUOMLotSerialTemplate.IDMUniqueId
				IDMGenerateDocument.DocumentType		= "FSM_WarehousePickList"
    			IDMGenerateDocument.FileName			= DerivedFileName + Company.PickListPrintByBinItemUOMLotSerialTemplate.DerivedOutputFormat

				if (PrmIDMPrinter entered)
					IDMGenerateDocument.IDMPrinter		= PrmIDMPrinter 
    			
    			initialize LocalFullFileName
    			LocalFullFileName = IDMGenerateDocument.FileName
    			
    			IDMGenerateDocument.IDMAccessControlList = "CSFDefined"
    			
    			invoke CreateFromGenerateDocument IDMJob
    				invoked.Actor				= actor
    				invoked.Description			= "Warehouse Pick List Print"
    				invoked.IDMGenerateDocument	= IDMGenerateDocument
