ContractGPODistributor is a BusinessClass
	owned by po
	
	prefix is CGXX
	
	Ontology
		symbolic key is ContractGPODistributor
	
	Patterns
        disable AuditIndex
		disable Auditing 
       	disable EffectiveDated	
	
	Persistent Fields
		GPOContractNumber                                                       
		ContractImportGPOMembership           	                                
		ItemSupplier                          is a GPOSupplierID                
		MarkupPercent                         is Decimal size 7.4               
		StartDate                             is Date
		EndDate                               is Date

	    ManufacturerSupplier                  is like Supplier                                          


		PreferredVendor                       is Boolean                          
		HealthTrustCOID                       is like ContractImportGPOMembership 



		SecondaryDistributorIndicator         is Boolean                          
		RecordModifiedTimestamp               is Alpha 20                         
		
	Conditions
		
		SupplierMapped
			restricted
			when (SupplierMappedRel exists)

		NoContractNumber
			restricted
			when (GPOContractNumber !entered)
			
		ManufacturerSupplierEntered
			restricted
			when (ManufacturerSupplier entered)
			
		NoContractNumberManufacturerEntered
			restricted
			when (NoContractNumber
			and   ManufacturerSupplierEntered)
	
	Relations
	
		SupplierMappedRel
			one-to-many relation to ContractImportGPOSupplier
			Field Mapping uses BySupplierFirst
				related.ContractImportGPOSupplier = ItemSupplier	
			Instance Selection
				where (related.SupplierMapped)			
	

	Sets
		ByGPOContractMemberSupplierNumber
			Sort Order
				GPOContractNumber
				ContractImportGPOMembership
				ItemSupplier
				
		ByMember
			Sort Order
				ContractImportGPOMembership
				ContractGPODistributor
				
		BySupplierOnly
			Sort Order
				ItemSupplier
				ContractImportGPOMembership
				ContractGPODistributor
			Instance Selection
				where (NoContractNumber)
		
		ByManufacturerSupplierOnly
			Sort Order
				ItemSupplier
				ManufacturerSupplier
				ContractImportGPOMembership
				ContractGPODistributor
			Instance Selection
				where (NoContractNumberManufacturerEntered)

		BySupplier
			Sort Order
				GPOContractNumber
				ItemSupplier
				ContractGPODistributor

	Field Rules
	
	Actions
	
		Create is a Create Action
			restricted
		
		Update is an Update Action
			restricted
		
		Delete is a Delete Action
			restricted
		
		MassDelete is a Set Action
			disable checkpoint
			
			Action Rules
				
				Instance Rules
					invoke Purge
				
		FixGPOContractNumber is a Set Action
			default label is untranslatable
			restricted
			
			Instance Selection
				where (GPOContractNumber = "NULL")

			Action Rules
				
				Instance Rules
					initialize GPOContractNumber

		Purge is a Purge Action
			restricted	
			

	
