AccountingUnit is a BusinessClass
    owned by GeneralLedger
    prefix is GLAU
	representative text is "<DerivedRepresentativeText>"   

 
    Ontology
        symbolic key is AccountingUnit
   			
    Patterns
        implements BODId
        implements StaticJava
        disable AuditIndex
		implements ChildHierarchy
			children are AccountingUnitChildrenRel
			child set is AccountingUnitHierarchyRel
				child is AccountingUnit
			top node when (AccountingUnitType.Node)
			descendants are DescendantsRel
		implements InlineUserFields
			size is 3000
			           	  
   	Context Fields
		ContextAccountingUnit			is an AccountingUnitContextValue 
		AccountingUnitStructure
		InvokedByUnusedStructure
		AllocationContext
		BypassActiveCodeBlockEdit
#ifdef module integration
		FSMInboundBODTracker
#endif
#ifdef module ap
		PayablesCompany		
		PayablesInvoice		
#endif

    Persistent Fields
		Description
		AccountingUnitType
		DisplayAccountingUnit			is like AccountingUnit
			translatable			
		Active
		SequenceNumber					is Numeric 7
    	OldSystemAccountingUnit			is Boolean
    	OldIsAZoneAccountingUnit		is Boolean
    	OldZoneAccountingUnit			is like AccountingUnit
    	OldEntityZoneAccountingUnit		is Boolean
    	OldDefaultZoneAccountingUnit	is Boolean
    	BudgetIdentifier
    	IsTopNode						is Boolean    	
    	Level							is Numeric 3					 
		ParentAccountingUnit			is like AccountingUnit           
		DimensionStructure				is like AccountingUnitStructure  
		AddressCode
		FundType						
 		
	Transient Fields
		TransientContextAccountingUnit  is an AccountingUnitContextValue
			derive value from AccountingUnit
		ParentDimension					is an AccountingUnit
			derive value from AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode
    	SystemAccountingUnit			is Boolean
    		derive value from DerivedSystemAccountingUnit
    	InterEntityAccountingUnit		is Boolean
    		derive value from DerivedInterEntityAccountingUnit
    	IsAZoneAccountingUnit			is Boolean
    		derive value from DerivedIsAZoneAccountingUnit
    	ZoneAccountingUnit				is an AccountingUnit
    		derive value from DerivedZoneAccountingUnit
    	EntityZoneAccountingUnit		is Boolean
    		derive value from DerivedEntityZoneAccountingUnit
    	DefaultZoneAccountingUnit		is Boolean
    		derive value from DerivedDefaultZoneAccountingUnit
    	IncludeInBudgetEdit			is Boolean
    		derive value from DerivedIncludeInBudgetEdit    		
 		SkipHierarchy					is Boolean
		InvokedByCreateWithin			is Boolean
		SkipPropagate					is Boolean
		NewAccountingUnit		 		is like AccountingUnit
		BypassNewStructureNotification  is Boolean
		BypassUpdateStructure			is Boolean
		CreateAccountingUnitType		is Numeric 1
			States
	    		Summary	value is 2
	    		Posting	value is 1				
			derive value from AccountingUnitType
		TransientIncludeOrExclude       is Boolean
		TransientIsAZoneAccountingUnit	is Boolean	
	    TransientIncludeInBudgetEdit    is Boolean	
								   				
	Conditions
		PostingAccountingUnit
			restricted
			when (AccountingUnitType.Posting)
		SummaryAccountingUnit
			restricted
			when (AccountingUnitType.Summary)
		SummaryOrPostingAccountingUnit
			restricted
			when (!AccountingUnitType.Node)
		MovableSummaryOrPostingAccountingUnit
			restricted
			when (!AccountingUnitType.Node
			and   !ZoneAccountingUnit = AccountingUnit
			and   !EntityZoneAccountingUnit)			
		CanDefineZones
			restricted
			when (AccountingEntity.AccountingUnitZoneBalancing)
		IsAchild
			restricted
			when (AccountingUnitInContextStructureRel exists)
		AcctUnitDescendants 
			restricted
			when (AccountingUnitType.Posting
			and   !IsAZoneAccountingUnit			
			and  (AccountingUnit 	= ContextAccountingUnit
			or    DescendantOfContextAccountingUnitRel exists))
		EligibleParent
			restricted
			when (DimensionStructure = AccountingUnitStructure
			and   AccountingUnitType.Summary
			and   AccountingUnit    != ContextAccountingUnit
			and   AccountingUnit    != ContextAccountingUnitRel.DerivedParentAccountingUnit
			and   !DescendantOfContextAccountingUnit)
		ZoneAcctUnit
			restricted
			when (IsADerivedZoneAccountingUnit)
		RecordExists
			restricted
			when (AccountingUnit exists)
		HasChildren
			restricted
			when (AccountingUnitHierarchyRel exists)
		IsASystemAccountingUnit
			restricted
			when (SystemAccountingUnit)
		NodeAccountingUnit
			restricted
			when (AccountingUnitType.Node)
		SummaryAccountingUnitOrNodeInAccountingUnitStructure
			restricted
			when ((AccountingUnit != ContextAccountingUnit)
			and   (DimensionStructure = AccountingUnitStructure
			and   (AccountingUnitType.Node)
			or    (AccountingUnitType.Summary
			and    HelperListAccountingUnitRel exists)))
		SummaryOrPostingInStructure
			restricted
			when (SummaryOrPostingAccountingUnit
			and   (!AccountingUnitType.Entity)
			and   AccountingUnitInContextStructureRel exists)
		SummaryInStructure
			restricted
			when (DimensionStructure = AccountingUnitStructure
			and   AccountingUnitType.Summary
			and   AccountingUnit != ContextAccountingUnit
			and   AccountingUnitInContextStructureRel exists
			and   HelperListAccountingUnitRel exists)
		HelperListAccountingUnit
			restricted
			when (AccountingUnitType.Posting
			and  !HelperListAccountingUnitRel exists)
		NotUsedInHierarchy
			restricted
			when (AccountingUnitType.Posting
			and   !AccountingUnitInContextStructureRel exists)
		NotUsedInAStructure
			restricted
			when (AccountingUnitType.Posting
			and   !AccountingUnitHierarchy(AccountingUnit) set exists)
		SummaryWithinTopNode
			restricted
			when (!AccountingUnitType.Posting
			and   DimensionStructure = AccountingUnitStructure)	
		SummaryInEnterpriseStructure
			restricted
			when (AccountingUnitType.Summary
			and   DimensionStructure = FinanceEnterpriseGroup.EnterpriseAUStructure)
		AncestorIsAZone
			restricted
			when (IsAZoneAccountingUnit
			and	  ParentDimension.ZoneAccountingUnit entered)



		FutureChanges
			restricted
			when (this instance.has future changes)
		EligibleToRemove
			restricted
			when ((!AccountingUnitType.Posting)
			and   (!AccountingUnitChildrenRel exists))		
		EligibleToDelete
			restricted
			when (AccountingUnitType.Posting

			and  !UsedByATransaction)
		SystemPostingAccountingUnit
			when (AccountingUnitType.Posting
			and   SystemAccountingUnit)			

#ifdef module ad
		ADBPostingAccountingUnits
			restricted
			when (ADBAccountMasterRel exists
			and   AccountingUnitType.Posting)
#endif

		RemovePostingAccountingUnit
			restricted
			when (AccountingUnitType.Posting
			and  !ZoneAccountingUnit = AccountingUnit)
		ActionCreate
			when (action = "create")
		ActionUpdate
			when (!action = "create"
			and	!action = "Delete")
		ActionDelete
			when (action = "Delete")
		FinanceEnterpriseGroupUpdate
			when (!FinanceEnterpriseGroup = old FinanceEnterpriseGroup)
		AccountingEntityUpdate
			when (!AccountingEntity = old AccountingEntity)
		AccountingUnitTypeUpdate
			when (!AccountingUnitType = old AccountingUnitType)
		AccountingUnitUpdate
			when (!AccountingUnit = old AccountingUnit)
		DisplayAccountingUnitUpdate
			when (!DisplayAccountingUnit = old DisplayAccountingUnit)
		DescriptionUpdate
			when (!Description = old Description)
		ActiveUpdate
			when (!Active = old Active)
		BudgetIdentifierUpdate
			when (!BudgetIdentifier = old BudgetIdentifier)
		AddressCodeUpdate
			when (!AddressCode = old AddressCode)
		SequenceNumberUpdate
			when (!SequenceNumber = old SequenceNumber)
		LevelUpdate
			when (!Level = old Level)
		IsTopNodeUpdate
			when (!IsTopNode = old IsTopNode)
		ParentAccountingUnitUpdate
			when (!ParentAccountingUnit = old ParentAccountingUnit)
		DimensionStructureUpdate
			when (!DimensionStructure = old DimensionStructure)					
		ActivePostingAccountingUnit
			when (PostingAccountingUnit
			and Active)
		UsedForFundAccounting 
			when (FinanceEnterpriseGroup.FundAccounting = true
			and   FinanceEnterpriseGroup.FundDimension.AccountingUnit)

#ifdef module ap
		VendorAccountRestrictionsExist		
			when (VendorAccountRestrictionRel exists)
#endif

		SecurityGroupAllowsAccess
			when ((FinanceEnterpriseGroup.AccountingUnitSelected = false)
			or    (actor.context.AccountingUnitSecurityGroup = "")
			or    (actor.context.AccountingUnitSecurityGroup != ""
			and   (AccountingUnitType.Node
			or     BypassActiveCodeBlockEdit
			or    (SecurityGroupDetailRel exists
			and   !SecurityGroupDetailRel.CreatedForHierarchyAccess))))

		SecurityGroupAllowsMaintenance
			when (LocalSecurityGroupAllowsMaintenance)
				
	Local Fields
		LocalSecurityGroupAllowsMaintenance is Boolean
		UseInputValue					is Boolean
		RecordAdded						is Boolean
		BudgetIdentifierArray
		I1								is Numeric 2
		I2								is Numeric 2
		ActionCode
		Service							is Alpha size 30
		LocalParentAccountingUnit		is an AccountingUnit	
		LocalAccountingUnit				is an AccountingUnit
		LocalReportAccountingUnit		is an AccountingUnit
		LocalChildAccountingUnit		is an AccountingUnit
		LocalEntityNode					is an AccountingUnit
		TopNodeFound					is Boolean
		ZoneWithinNode					is Boolean
		LevelCalcAccountingUnit			is an AccountingUnit
		LocalLevel						is Numeric 3
		LocalStructure					is an AccountingUnitStructure
		NewEntity						is like AccountingEntity
		LocalUpdateAccountingUnit		is an AccountingUnit
		SystemAccountingUnitDefined		is Boolean
		DefaultZoneAccountingUnitDefined is Boolean
		EntityZoneAccountingUnitDefined is Boolean
		LocalBODCurrentTimeStamp		is a BODCurrentTimeStamp
		LocalInvokedByUnusedStructure	is Boolean
		CopyStructureMode				is Boolean
		LocalNativeLPLBODTrigger		is Boolean				
		LocalMainUserTemplate			is Alpha 250
		LocalCodeBlockRelation			is a CodeBlockRelation
		LocalKeyFromValue				is Alpha 200
		LocalKeyToValue					is Alpha 200
		TemplatesWithIdentifierCount							is Numeric 6

		LocalFinanceEnterpriseGroup		is like FinanceEnterpriseGroup
		LocalAccountingUnitStructure	is like AccountingUnitStructure
		LocalDisplayAccountingUnit		is like AccountingUnit
#ifdef module integration
		NewBODTracker  					is a FSMInboundBODTracker view
#endif
		LocalFSMInboundBODTracker		is Numeric 15
		Error            				is Boolean
	    ErrorMessage     				is Alpha 300
	    LocalBODTrigger					is Boolean
	    LocalConfigurationParameter		is Alpha size up to 200
		LocalAEAlreadyExecuted			is Boolean
		LocalCrossAccountingEntity		is Alpha size 20
	    
	Derived Fields
		DerivedSecurityGroupAllowsAccess is a DerivedField
			type is Boolean
			if (AccountingUnitType.Node)
				LocalSecurityGroupAllowsMaintenance = true
				return true
			if (ActorSecurityGroup not entered)
				LocalSecurityGroupAllowsMaintenance = true
				return true
			if (SecurityGroupDetailRel exists)
				if (parentcontext.name != "AccountAnalysisSettings")
					if (!SecurityGroupDetailRel.CreatedForHierarchyAccess)
						LocalSecurityGroupAllowsMaintenance = true
					return true
				else
					if (!SecurityGroupDetailRel.CreatedForHierarchyAccess)
						return true	
			return false	
		ContextMessageText is a MessageField
			restricted
			"AccountingUnit<AccountingUnit>"

  		DerivedRepresentativeText	is a DerivedField
			type is Alpha 120
			restricted
			if (IsTopNode)
				return Description
			else				
				return DerivedRepresentativeTextString
		DerivedRepresentativeTextString is a StringField	
			type is Alpha 120
			restricted
			DisplayAccountingUnit
			" - "
			Description
		DerivedShadowCount 				is a DerivedField
			type is Numeric 8
			restricted
			return (instance count of AccountingUnitShadow(SummaryAccountingUnit) set)
			
   		DerivedSystemAccountingUnit		is a DerivedField
   			type is Boolean
   			restricted
    		if (UseInputValue)
    			return false
    		else
    		    return AccountingUnitInContextStructureRel.SystemAccountingUnit
   		DerivedInterEntityAccountingUnit	is a DerivedField
   			type is Boolean
   			restricted
    		if (UseInputValue)
    			return false
    		else
    		    return AccountingUnitInContextStructureRel.InterEntityAccountingUnit
    	DerivedIsAZoneAccountingUnit	is a DerivedField
    		type is Boolean
    		restricted
    		if (UseInputValue)
    			return false
    		else
    			return AccountingUnitInContextStructureRel.IsAZoneAccountingUnit
    	DerivedZoneAccountingUnit		is a DerivedField
    		type is like AccountingUnit
    		restricted
			if (UseInputValue)
				return blank
			else    		
    			return AccountingUnitInContextStructureRel.ZoneAccountingUnit
    	IsADerivedZoneAccountingUnit		is a DerivedField
    		type is  Boolean
    		restricted
			if (UseInputValue)
				return false
			else    		
    			return AccountingUnitInEnterpriseStructureRel.IsAPostingZoneAccountingUnit
    	DerivedEntityZoneAccountingUnit	is a DerivedField
    		type is Boolean
    		restricted
    		if (UseInputValue)
    			return false
    		else
    			return AccountingUnitInContextStructureRel.EntityZoneAccountingUnit
    	DerivedDefaultZoneAccountingUnit is a DerivedField
    		type is Boolean
    		restricted
    		if (UseInputValue)
    			return false
    		else
    			return AccountingUnitInContextStructureRel.DefaultZoneAccountingUnit
		DerivedIncludeInBudgetEdit is a DerivedField
			type is Boolean
			restricted
    		if (UseInputValue)
    			return false
    		else
    			return AccountingUnitInContextStructureRel.IncludeInBudgetEdit		
		AccountingUnitString		is a StringField
			type is AlphaRight 25
			restricted
			AccountingUnit 	
		DerivedParentDisplayAccountingUnit is a DerivedField
			type is like AccountingUnit
			LocalParentAccountingUnit = AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode
			if (LocalParentAccountingUnit != DerivedTopNode)
				return LocalParentAccountingUnit.DisplayAccountingUnit
		DerivedParentDescription is a DerivedField
			type is like Description
			LocalParentAccountingUnit = AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode
			if (LocalParentAccountingUnit != DerivedTopNode)			
				return LocalParentAccountingUnit.Description			
		DerivedParentAccountingUnit  is a DerivedField
			type is like AccountingUnit
			restricted
			if (action type.Create)
				return ParentAccountingUnit	
			else		
				return AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode	
		DerivedSequenceNumber		 is a DerivedField
			type is AlphaRight 7
			restricted
			return DerivedAlphaSequence[2:8]
		DerivedAlphaSequence		 is a DerivedField
			type is AlphaRight 8
			restricted
			return (10000000 + SequenceNumber)
		StructureAccountingUnitExists is a DerivedField
			type is Boolean
			restricted
			if (AccountingUnitInContextStructureRel exists)
				return true
		DerivedTopNode				is a DerivedField
			type is like AccountingUnit
			restricted
			return AccountingUnitStructure.AccountingUnitTopNodeGroup.DimensionNode
		LocalStructureDerivedTopNode				is a DerivedField
			type is like AccountingUnit
			restricted
			return LocalStructure.AccountingUnitTopNodeGroup.DimensionNode			
		DerivedTopNodeEntity		is a DerivedField
			type is like AccountingEntity
			restricted
			return AccountingUnitStructure.AccountingUnitTopNodeGroup.DimensionEntity
		LocalStructureDerivedTopNodeEntity		is a DerivedField
			type is like AccountingEntity
			restricted
			return LocalStructure.AccountingUnitTopNodeGroup.DimensionEntity
		DerivedEntityNode			is a DerivedField
			type is like AccountingUnit		
			restricted		
			return first EntityNodeRel.AccountingUnit
		SummaryNodeString	    	is a StringField
			type is AlphaUpper 25
			restricted
			AccountingUnitStructure.StructureSequence
			"_"
			NewAccountingUnit
		ParentNodeString	    	is a StringField
			type is AlphaUpper 25
			restricted
			AccountingUnitStructure.StructureSequence
			"_"
			NewAccountingUnit			
		LikeSummaryPrefix			is a StringField
			type is AlphaUpper 15
			restricted
			AccountingUnitStructure.StructureSequence
			"_*"
		EntityNodeString			is a StringField
			type is AlphaUpper 25
			restricted
			AccountingUnitStructure.StructureSequence
			"_"
			NewEntity
			"_ENTITY"
		LocalStructureEntityNodeString is a StringField
			type is AlphaUpper 25
			restricted
			LocalStructure.StructureSequence
			"_"
			NewEntity
			"_ENTITY"			
		EntityNodeMinusPrefix		is a StringField
			type is AlphaUpper 25	
			restricted		
			NewEntity
			"_ENTITY"
		DerivedNewParentAccountingUnit  is a DerivedField
			type is like AccountingUnit
			restricted
			return UpdateAccountingUnitHierarchyRel.ParentNodeGroup.DimensionNode	
		DescendantOfContextAccountingUnit is a DerivedField
			type is Boolean
			if (DescendantOfContextAccountingUnitRel exists)
				return true
		ActorSecurityGroup is a DerivedField
			type is like AccountingUnitSecurityGroup
			return actor.context.AccountingUnitSecurityGroup

#ifdef module integration
		DerivedDelimiter is a DerivedField
			type is Alpha size 5
			restricted
			LocalConfigurationParameter	= "Generic_Delimiter"
			if(FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
					
		DerivedTenantID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter	= "tenantID"
			if(FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedReleaseID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter	= "releaseID"
			if(FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedLogicalID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter	= "logicalID"
			if(FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedVersionID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter	= "VersionID"
			if(FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedappProdline is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter	= "appProdline"
			if(FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedConfigFEG is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter	= "IsMultipleFEG"
			if(FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
					
		DerivedConfigDocID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter	= "RequiredCleanDocumentID"
			if(FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		BODVariationID is a DerivedField
			type is Alpha 25
			restricted
			return bod id.VariationID
			
		DerivedBODCurrentTimeStamp is a DerivedField
			type is Alpha size 20
			restricted
			DerivedBODCurrentTimeStamp = system current timestamp
			return DerivedBODCurrentTimeStamp
			
		DerivedBODFormattedCurrentTimeStamp is a DerivedField
			type is Alpha size 30
			restricted
			return DerivedBODCurrentTimeStamp[1:4] + "-" + DerivedBODCurrentTimeStamp[5:6] + "-" + DerivedBODCurrentTimeStamp[7:8] + "T" + DerivedBODCurrentTimeStamp[9:10] + ":" + DerivedBODCurrentTimeStamp[11:12] + ":" + DerivedBODCurrentTimeStamp[13:14] + "Z"
		
		DerivedCrossAE is a DerivedField
			type is Alpha size 50
			restricted
			if (DerivedConfigFEG = "Y")
				return FinanceEnterpriseGroup + DerivedDelimiter + AccountingEntity
			else
				return AccountingEntity
				
		DerivedAECrossAccountingEntity is a DerivedField
			type is Alpha size 50
			restricted
			if(LocalAEAlreadyExecuted != true)
				LocalAEAlreadyExecuted = true
				if (FSMBODAECrossReferenceDetailRel.DestinationValue entered)
					LocalCrossAccountingEntity =  FSMBODAECrossReferenceDetailRel.DestinationValue
				else
					LocalCrossAccountingEntity =  DerivedCrossAE
				return LocalCrossAccountingEntity
			else
				return LocalCrossAccountingEntity
		
		DerivedAccountingEntity is a DerivedField
			type is Alpha 50
			restricted
			if (DerivedConfigDocID = "" or DerivedConfigDocID = "N")
				return FinanceEnterpriseGroup + DerivedDelimiter + AccountingEntity
			else
			if (DerivedConfigDocID = "Y")
				return DerivedAECrossAccountingEntity
		
		DerivedBODActionCode is a DerivedField
			type is Alpha 10
			restricted
			if (action type.Create or ActionCode.Create)
				return "Add"
			else 
				return "Replace"
		
		DerivedBODRevision is a DerivedField
			type is Alpha 25
			restricted
			return ""
					
		DerivedBODFormattedId is a DerivedField
			type is Alpha 100
			restricted
			return "infor-nid:" + DerivedTenantID + ":" +DerivedAccountingEntity + ":"  + ":" + AccountingUnit+ ":" + DerivedBODRevision +"?CodeDefinition&verb=Sync&TrackerID="+LocalFSMInboundBODTracker
		
		DerivedBODStatusCode is a DerivedField
			type is Alpha 10
			restricted
			if(action type.Delete or ActionCode.Delete)
				return "Deleted"
			else 
			if (Active= "yes")
				return  "Open"
			else
				return "Closed"
				
		DerivedBODCostCenter is a DerivedField
			type is Numeric 2
			restricted
			return FinanceEnterpriseGroup.BODCostCenter
			
		DerivedCodeListID is a DerivedField
			type is Alpha 20
			restricted
			if (DerivedBODCostCenter =0)
				return "Cost Centers"
			else
				return "Accounting Unit"
		
		DerivedPostingType is a DerivedField
			type is Alpha 10
			restricted
			if(AccountingUnitType = 1)
				return "true"
			else 
				return "false"
			
		DerivedCodeLabel is a DerivedField
			type is Alpha 25
			restricted
			return FinanceEnterpriseGroup.AccountingUnitLabel
			
		DerivedCodeType is a DerivedField
			type is Alpha 25
			restricted
			if (AccountingUnitType = 4)
				return "Entity"
			else 
			if (AccountingUnitType = 1)
				return "Posting"
			else 
			if (AccountingUnitType = 2)
				return "Summary"
			else 
			if (AccountingUnitType = 3)
				return "Node" 
					
		DerivedAccountingUnitRequired is a DerivedField
			type is Alpha 5
			restricted 
			return FinanceEnterpriseGroup.AccountingUnitRequired
			
		DerivedLastupdateBy is a DerivedField
			type is Alpha size 60
			restricted
			return update stamp.actor
			
		DerivedBODUpdateTimeStamp is a DerivedField
			type is Alpha size 25
			restricted
			DerivedBODUpdateTimeStamp = update stamp.timestamp
			return DerivedBODUpdateTimeStamp
			
		DerivedBODFormattedUpdateTimeStamp is a DerivedField
			type is Alpha size 30
			restricted
			return DerivedBODUpdateTimeStamp[1:4] + "-" + DerivedBODUpdateTimeStamp[5:6] + "-" + DerivedBODUpdateTimeStamp[7:8] + "T" + DerivedBODUpdateTimeStamp[9:10] + ":" + DerivedBODUpdateTimeStamp[11:12] + ":" + DerivedBODUpdateTimeStamp[13:14] + "Z"
		
		AccountingUnitXMLBOD is a DerivedField
			type is XMLDocument
	        restricted
	        if (DerivedConfigDocID = "Y")
	        	return template.IONSyncCodeDefination_CleanDocId_AccountingUnit_ST document for this instance
	        else
	        	return template.IONSyncCodeDefination_AccountingUnit_ST document for this instance
	        
	    DerivedSystemOfRecord is a DerivedField
	    	type is Alpha 10
	    	restricted
	    	return 0
#endif


		DerivedEntityAccountingUnit	is a StringField
			type is Alpha 40
			restricted
			AccountingEntity
			"-"
			AccountingUnit

	Relations
		ContextAccountingUnitRel
			one-to-one relation to AccountingUnit
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.AccountingEntity		= AccountingEntity
				related.AccountingUnit			= ContextAccountingUnit	
		AccountingUnitChildrenRel
			one-to-many relation to AccountingUnit
			disable subset select on dependent relation			
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.AccountingEntity		= AccountingUnitHierarchyRel.AccountingEntity
				related.AccountingUnit 			= AccountingUnitHierarchyRel.AccountingUnit
		NotInAccountingUnitStructureRel		
			one-to-many relation to AccountingUnit
			Field Mapping uses LeafRecords
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
			Instance Selection
				where (related.NotUsedInHierarchy)
		AccountingUnitHierarchyRel
			one-to-many relation to AccountingUnitHierarchy
			Field Mapping uses ByParentAccountingUnit
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.ParentNodeGroup.DimensionEntity = AccountingEntity
				related.ParentNodeGroup.DimensionNode   = AccountingUnit
		AccountingUnitInContextStructureRel
			one-to-one relation to AccountingUnitHierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 	= FinanceEnterpriseGroup
				related.AccountingUnitStructure = AccountingUnitStructure
				related.AccountingEntity		= AccountingEntity
				related.AccountingUnit		    = AccountingUnit
		AccountingUnitInEnterpriseStructureRel
			one-to-one relation to AccountingUnitHierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 	= FinanceEnterpriseGroup
				related.AccountingUnitStructure = FinanceEnterpriseGroup.EnterpriseAUStructure
				related.AccountingEntity		= AccountingEntity
				related.AccountingUnit		    = AccountingUnit				
		MemberOfAnotherStructureRel
			one-to-many relation to AccountingUnitHierarchy
			Field Mapping uses BySubordinateAccountingUnit
				related.FinanceEnterpriseGroup 	= FinanceEnterpriseGroup
				related.AccountingEntity		= AccountingEntity
				related.AccountingUnit		    = AccountingUnit
			Instance Selection
				where (related.AccountingUnitStructure != AccountingUnitStructure)						
		SystemAccountingUnitRel
			one-to-many relation to AccountingUnitHierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 	= FinanceEnterpriseGroup
				related.AccountingUnitStructure = AccountingUnitStructure 
				related.AccountingEntity		= AccountingEntity
			Instance Selection
				where (related.SystemAccountingUnit
				and    related.AccountingUnit	!= AccountingUnit)
		InterEntityAccountingUnitRel
			one-to-many relation to AccountingUnitHierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 	= FinanceEnterpriseGroup
				related.AccountingUnitStructure = AccountingUnitStructure 
				related.AccountingEntity		= AccountingEntity
			Instance Selection
				where (related.InterEntityAccountingUnit
				and    related.AccountingUnit	!= AccountingUnit)
		DefaultZoneAccountingUnitRel
			one-to-many relation to AccountingUnitHierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 	= FinanceEnterpriseGroup
				related.AccountingUnitStructure = AccountingUnitStructure 
				related.AccountingEntity		= AccountingEntity
			Instance Selection
				where (related.DefaultZoneAccountingUnit
				and    related.AccountingUnit	!= AccountingUnit)
		EntityZoneAccountingUnitRel
			one-to-many relation to AccountingUnitHierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 	= FinanceEnterpriseGroup
				related.AccountingUnitStructure = AccountingUnitStructure 
				related.AccountingEntity		= AccountingEntity
			Instance Selection
				where (related.EntityZoneAccountingUnit
				and    related.AccountingUnit	!= AccountingUnit)
		NotifyBudgetTemplateRel
			one-to-many relation to BudgetTemplate
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup         = FinanceEnterpriseGroup
			Instance Selection
				where (related.NotifyOnAccountingUnit
				and    related.AccountingUnitStructure = AccountingUnitStructure)
		NotifyBudgetTemplateRemoveRel
			one-to-many relation to BudgetTemplate
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup         = FinanceEnterpriseGroup
			Instance Selection
				where (related.NotifyOnAccountingUnitRemove
				and    related.AccountingUnitStructure = AccountingUnitStructure)
		TemplatesWithIdentifierRel
			one-to-many relation to BudgetTemplate
			Field Mapping uses ByStatus
				related.FinanceEnterpriseGroup    		= FinanceEnterpriseGroup 
				related.Status 							= 2 
			Instance Selection
				where (related.AccountingUnitStructure	= AccountingUnitStructure
				and related.AccountingUnitIdentifier	= old BudgetIdentifier)		
		DescendantOfContextAccountingUnitRel
			one-to-one relation to AccountingUnitShadow
			Field Mapping uses BySummaryAccountingUnit
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup

				related.SummaryEntity				= AccountingEntity				
				related.SummaryAccountingUnit		= ContextAccountingUnit
				related.AccountingEntity			= AccountingEntity
				related.AccountingUnit				= AccountingUnit
		HelperListAccountingUnitRel
			one-to-many relation to AccountingUnitHierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.AccountingUnitStructure		= AccountingUnitStructure
				related.AccountingEntity			= AccountingEntity				
				related.AccountingUnit				= AccountingUnit 
		ParentRel
			one-to-one relation to AccountingUnitHierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.AccountingUnitStructure		= AccountingUnitStructure
				related.AccountingEntity			= AccountingEntity				
				related.AccountingUnit 				= AccountingUnit
		UnusedLeafRel
			one-to-many relation to AccountingUnit
			Field Mapping uses LeafRecords
				related.FinanceEnterpriseGroup 		= FinanceEnterpriseGroup 
		SubordinateInLocalStructureRel
			one-to-one relation to AccountingUnitHierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.AccountingUnitStructure		= LocalStructure
				related.AccountingEntity			= AccountingEntity				
				related.AccountingUnit				= AccountingUnit										
		AccountingUnitHierarchyDefaultRel
			one-to-one relation to AccountingUnitHierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup  	= FinanceEnterpriseGroup
				related.AccountingUnitStructure 	= AccountingUnitStructure
				related.AccountingEntity			= AccountingEntity				
				related.AccountingUnit 				= LocalAccountingUnit 															
		NextLevelChildRecordsRel
			one-to-many relation to AccountingUnitHierarchy
			Field Mapping uses ChildrenInStructure
				related.FinanceEnterpriseGroup			= FinanceEnterpriseGroup
				related.AccountingUnitStructure			= AccountingUnitStructure
				related.ParentNodeGroup.DimensionEntity = AccountingEntity				
				related.ParentNodeGroup.DimensionNode   = AccountingUnit 
		IncludedInStructuresRel 
			one-to-many relation to AccountingUnitStructure
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.AccountingUnitStructure		= AccountingUnitHierarchy(AccountingUnit) set.AccountingUnitStructure 								
		SiblingsRel
			one-to-many relation to AccountingUnitHierarchy
			Field Mapping uses ChildrenInStructure
				related.FinanceEnterpriseGroup			= FinanceEnterpriseGroup
				related.AccountingUnitStructure			= AccountingUnitStructure
				related.ParentNodeGroup.DimensionEntity = AccountingEntity				
				related.ParentNodeGroup.DimensionNode	= DerivedParentAccountingUnit			
		AccountingUnitShadowRel
			one-to-many relation to AccountingUnitShadow
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.AccountingUnitStructure		= AccountingUnitStructure
				related.AccountingEntity			= AccountingEntity				
				related.AccountingUnit				= LocalAccountingUnit				
		CodeBlockRelationRel
			one-to-one relation to CodeBlockRelation
			Field Mapping uses ByFromTo
	            related.FinanceEnterpriseGroup = FinanceEnterpriseGroup
                related.FromField			   = 1
                related.ToField				   = 2							
		EntityNodeRel
			one-to-many relation to AccountingUnit
			Field Mapping uses ByDimensionStructure
				related.FinanceEnterpriseGroup 	= FinanceEnterpriseGroup
				related.DimensionStructure     	= AccountingUnitStructure
				related.AccountingUnitType      = 4
				related.AccountingEntity        = AccountingEntity
		LocalStructureEntityNodeRel
			one-to-many relation to AccountingUnit
			Field Mapping uses ByDimensionStructure
				related.FinanceEnterpriseGroup 	= FinanceEnterpriseGroup
				related.DimensionStructure     	= LocalStructure
				related.AccountingUnitType      = 4
				related.AccountingEntity        = AccountingEntity				
		UpdateAccountingUnitHierarchyRel
			one-to-one relation to AccountingUnitHierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup  	= FinanceEnterpriseGroup
				related.AccountingUnitStructure 	= AccountingUnitStructure
				related.AccountingEntity			= AccountingEntity				
				related.AccountingUnit 				= LocalUpdateAccountingUnit 															
		
		DefinedZonesForEntityRel
			one-to-many relation to AccountingUnitHierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup  	= FinanceEnterpriseGroup
				related.AccountingUnitStructure 	= AccountingUnitStructure
				related.AccountingEntity			= AccountingEntity	
			Instance Selection
				where (related.IsAZoneAccountingUnit)
							
		EnterpriseSystemAcctUnitRel
			one-to-one relation to AccountingUnitHierarchy
			Field Mapping uses BySystemAccountingUnitInStructure
				related.FinanceEnterpriseGroup  = FinanceEnterpriseGroup
				related.AccountingUnitStructure = FinanceEnterpriseGroup.EnterpriseAUStructure
				related.AccountingEntity        = AccountingEntity

		EnterpriseDefaultZoneAcctUnitRel
			one-to-one relation to AccountingUnitHierarchy
			Field Mapping uses ByDefaultZoneAccountingUnitInStructure
				related.FinanceEnterpriseGroup  = FinanceEnterpriseGroup
				related.AccountingUnitStructure = FinanceEnterpriseGroup.EnterpriseAUStructure
				related.AccountingEntity        = AccountingEntity

		EnterpriseEntityZoneAcctUnitRel
			one-to-one relation to AccountingUnitHierarchy
			Field Mapping uses ByEntityZoneAccountingUnitInStructure
				related.FinanceEnterpriseGroup  = FinanceEnterpriseGroup
				related.AccountingUnitStructure = FinanceEnterpriseGroup.EnterpriseAUStructure
				related.AccountingEntity        = AccountingEntity
				 				
		AnyAccountingUnitShadowRel is a AccountingUnitShadow(AccountingUnit) set
#ifdef module ad
		ADBAccountMasterRel
			one-to-many relation to ADBAccountMaster
			Field Mapping uses ByAccountingUnitAccount
				related.FinanceEnterpriseGroup      = FinanceEnterpriseGroup
				related.AccountingEntity		 	= AccountingEntity 								
				related.AccountingUnit 				= AccountingUnit 								
#endif

		DescendantsRel
			one-to-many relation to AccountingUnit
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup = FinanceEnterpriseGroup
				related.AccountingEntity	   = ShadowDescendantsRel.AccountingEntity
				related.AccountingUnit		   = ShadowDescendantsRel.AccountingUnit



		ShadowDescendantsRel
			one-to-many relation to AccountingUnitShadow
			Field Mapping uses BySummaryAccountingUnit
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup

				related.SummaryEntity				= AccountingEntity
				related.SummaryAccountingUnit	    = AccountingUnit	
		DisplayAccountingUnitRel
			one-to-many relation to AccountingUnit
			Field Mapping uses ByDisplayAccountingUnit
				related.FinanceEnterpriseGroup 		= FinanceEnterpriseGroup
				related.AccountingEntity			= AccountingEntity
				related.DisplayAccountingUnit		= DisplayAccountingUnit
			Instance Selection
				where ((related.DimensionStructure = LocalStructure
				or      related.DimensionStructure = blank)	
				and    (related.UniqueID != UniqueID))

#ifdef module ap
		VendorAccountRestrictionRel		
			one-to-many relation to VendorAccountRestriction
			Field Mapping uses symbolic key
				related.VendorGroup					= PayablesInvoice.Vendor.VendorGroup
				related.Vendor						= PayablesInvoice.Vendor
			Instance Selection
				where (related.AccountingEntity = AccountingEntity
				and    related.AccountingUnit = AccountingUnit
				or    (related.AccountingUnit !entered))
#endif

		SecurityGroupDetailRel
			one-to-one relation to AccountingUnitSecurityGroupDetail
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 		= FinanceEnterpriseGroup
				related.AccountingUnitSecurityGroup = actor.context.AccountingUnitSecurityGroup
				related.AccountingEntity			= AccountingEntity
				related.AccountingUnit				= AccountingUnit
				

#ifdef module integration
		FSMBODConfigurationParameterRel
    		one-to-one relation to FSMBODConfigurationParameter
    		Field Mapping uses symbolic key
    			related.FSMBODConfigurationParameter	= LocalConfigurationParameter
		
		FSMBODAECrossReferenceDetailRel
			one-to-many relation to FSMBODCrossReferenceDetail
			Field Mapping uses symbolic key
            	related.FSMBODCrossReference.SourceField 		= "CSFAE"
            	related.FSMBODCrossReference.DestinationField 	= "DESTAE"
            Instance Selection
				where (related.SourceValue	= DerivedCrossAE )
		
		FSMBODConfigurationRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 1
            	related.FSMBODConfiguration.Noun 		= "CodeDefinition"
            	related.FSMBODConfiguration.Direction 	= 1
		
		FSMInboundBODTrackerRel
            one-to-one relation to FSMInboundBODTracker
            Field Mapping uses symbolic key
                related.FSMInboundBODTracker	= LocalFSMInboundBODTracker
#endif


		CodeBlockRelationDetailFromToRel
			one-to-one relation to CodeBlockRelationDetail
			Field Mapping uses ByKeyValues
				related.FinanceEnterpriseGroup				= FinanceEnterpriseGroup
				related.CodeBlockRelation					= LocalCodeBlockRelation
				related.KeyFromValue						= LocalKeyFromValue
				related.KeyToValue							= LocalKeyToValue

		AccountingUnitSummaryRel
			one-to-many relation to AccountingUnit
			Field Mapping uses ByDimensionStructure
				related.FinanceEnterpriseGroup 	= FinanceEnterpriseGroup
				related.DimensionStructure 		= AccountingUnitStructure
			Instance Selection
				where (related.AccountingUnitType.Summary)
		
		DisplayAccountingUnitRel1
			one-to-many relation to AccountingUnit
			Field Mapping uses ByDisplayAccountingUnit
				related.FinanceEnterpriseGroup 		= LocalFinanceEnterpriseGroup
				related.AccountingEntity			= NewEntity
				related.DisplayAccountingUnit 		= LocalDisplayAccountingUnit
			Instance Selection
				where ((related.DimensionStructure = LocalAccountingUnitStructure
				or      related.DimensionStructure = blank)	
				and    (related.UniqueID != UniqueID))
		
		SystemAccountingUnitRel1
			one-to-many relation to AccountingUnitHierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 	= LocalFinanceEnterpriseGroup
				related.AccountingUnitStructure = LocalAccountingUnitStructure
				related.AccountingEntity		= NewEntity
			Instance Selection
				where (related.SystemAccountingUnit
				and    (related.UniqueID != UniqueID))

	Sets
				
		LeafRecords
			Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
			Instance Selection
				where (AccountingUnitType.Posting)
		ByDimensionStructure
			Sort Order
				FinanceEnterpriseGroup
				DimensionStructure
				AccountingUnitType
				AccountingEntity
				AccountingUnit	
		ByDisplayAccountingUnit
			Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				DisplayAccountingUnit
				DimensionStructure				
				
	Field Rules
		AccountingUnit
			if (action type.Create)
				if (FinanceEnterpriseGroup.AccountingUnitRegularExpression entered
				and AccountingUnitType.Posting)
					constraint (AccountingUnit matches FinanceEnterpriseGroup.AccountingUnitRegularExpression)
						"InvalidFormatFor<FinanceEnterpriseGroup.AccountingUnitLabel>"
		Description
			required
		AccountingUnitType


			default to CreateAccountingUnitType
			cannot be changed
				"CannotChangeAccountingUnitType"

			required






		Active
			initial value is true
			if (SystemAccountingUnit)
				Active = true			
			if (InterEntityAccountingUnit)
				Active = true			
		SystemAccountingUnit
			constraint (AccountingUnitType.Posting)
				"MustBeAPostingType<FinanceEnterpriseGroup.AccountingUnitLabel>"		
			constraint (!SystemAccountingUnitRel exists)
				"<first SystemAccountingUnitRel.DisplayAccountingUnit>IsAlreadyDesignatedAsSystem<FinanceEnterpriseGroup.AccountingUnitLabel>"


		InterEntityAccountingUnit
			constraint (AccountingUnitType.Posting)
				"MustBeAPostingType<FinanceEnterpriseGroup.AccountingUnitLabel>"		
			constraint (!InterEntityAccountingUnitRel exists)
				"<first InterEntityAccountingUnitRel.DisplayAccountingUnit>IsAlreadyDesignatedAsInter<FinanceEnterpriseGroup.AccountingEntityLabel>_<FinanceEnterpriseGroup.AccountingUnitLabel>"
		IsAZoneAccountingUnit
    		if (!CanDefineZones)
    			IsAZoneAccountingUnit = false
    		else			
				LocalUpdateAccountingUnit	= ParentAccountingUnit
				LocalAccountingUnit			= UpdateAccountingUnitHierarchyRel.ZoneAccountingUnit
				constraint (!LocalAccountingUnit entered)
					"CannotBeAZone,WhenAncestorIsAZone"
				constraint (ZoneAccountingUnit entered)
					"ZoneAccountingUnitIsRequired"

				if (ParentDimension entered)
					constraint (ZoneAccountingUnit != ParentDimension.ZoneAccountingUnit)
						"<FinanceEnterpriseGroup.AccountingUnitLabel>CannotBeAZone"
		ZoneAccountingUnit
    		if (!CanDefineZones)
    			ZoneAccountingUnit = blank
			else    						
				constraint (ZoneAccountingUnit.AccountingUnitType.Posting)
					"ZoneAccountingUnitMustBePostingType"			



				if (ZoneAccountingUnit entered 
				and IsAZoneAccountingUnit) 
					LocalAccountingUnit = ZoneAccountingUnit			
					TopNodeFound   		   = false
					ZoneWithinNode		   = false
					while (!TopNodeFound)
						if (LocalAccountingUnit = AccountingUnit)
							TopNodeFound   = true
							ZoneWithinNode = true
						else
						if (LocalAccountingUnit.AccountingUnitType.Entity
						or  LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode.AccountingUnitType.Node
						or !LocalAccountingUnit.AccountingUnitInContextStructureRel exists)
							TopNodeFound = true
						else	
							LocalAccountingUnit = LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode	
					constraint (ZoneWithinNode)
						"OnlyDescendantsCanBeZone<FinanceEnterpriseGroup.AccountingUnitLabel>"
    	DefaultZoneAccountingUnit
    		if (!CanDefineZones)
    			DefaultZoneAccountingUnit = false
    		else    	
				constraint (!DefaultZoneAccountingUnitRel exists)
					"<first DefaultZoneAccountingUnitRel.DisplayAccountingUnit>AlreadyDesignatedAsDefaultZone<FinanceEnterpriseGroup.AccountingUnitLabel>"
				if (DefinedZonesForEntityRel exists)
					constraint (IsAZoneAccountingUnit)
						"OnlyAZoneCanBeDefaultZone<FinanceEnterpriseGroup.AccountingUnitLabel>"
    	EntityZoneAccountingUnit
    		if (!CanDefineZones)
    			EntityZoneAccountingUnit = false
			else    			    	
				constraint (AccountingUnitType.Posting)
					"EntityZoneAccountingUnitMustBePostingType"    	

				constraint (!EntityZoneAccountingUnitRel exists)
					"<first EntityZoneAccountingUnitRel.DisplayAccountingUnit>AlreadyDesignatedAsEntityZone<FinanceEnterpriseGroup.AccountingUnitLabel>"
				constraint (!IsAZoneAccountingUnit)
					"EntityZoneCannotBeAZone<FinanceEnterpriseGroup.AccountingUnitLabel>"

				NewEntity		 			= AccountingEntity
				constraint (EntityNodeString = DerivedParentAccountingUnit)
					"EntityZoneAccountingUnitCannotBeAChild"

		SequenceNumber
			autosequence using FinanceEnterpriseGroup.AccountingUnitLastSeq
			if (old SequenceNumber entered)
				cannot be changed
					"SequenceNumberCannotBeChanged"
		BudgetIdentifier
			constraint (AccountingUnitType.Summary)
				"BudgetIdentifierOnlyValidForSummaryAccountingUnits"
			if (BudgetIdentifier changed)
				if (BudgetIdentifier entered)
					LocalAccountingUnit = AccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode			
					TopNodeFound   				   = false
					while (!TopNodeFound)
						if (LocalAccountingUnit.AccountingUnitType.Entity)
							TopNodeFound = true
						else
							constraint (BudgetIdentifier != LocalAccountingUnit.BudgetIdentifier) 
								"BudgetIdentifier<BudgetIdentifier>AlreadyInUseBy<LocalAccountingUnit.DisplayAccountingUnit>"
							if (LocalAccountingUnit.AccountingUnitType.Entity
							or  LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode.AccountingUnitType.Node
							or !LocalAccountingUnit.AccountingUnitInContextStructureRel exists)
								TopNodeFound = true
							else
								LocalAccountingUnit = LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode
					BudgetIdentifierArray.BudgetIdentifier[1] = BudgetIdentifier				
					invoke EditDescendantsBudgetIdentifier
						invoked.PrmBudgetIdentifierArray = BudgetIdentifierArray
						invoked.PrmBudgetIdentifierCount = 1
				else
					TemplatesWithIdentifierCount		= instance count of TemplatesWithIdentifierRel
					if (TemplatesWithIdentifierCount	= 1)
						confirmation required
							"BudgetTemplate<first TemplatesWithIdentifierRel.BudgetTemplate>RefersToBudgetIdentifier<old BudgetIdentifier>.Proceed?"
					else
					if (TemplatesWithIdentifierCount > 1)
						TemplatesWithIdentifierCount -= 1
						if (TemplatesWithIdentifierCount = 1)
							confirmation required
								"BudgetTemplate<first TemplatesWithIdentifierRel.BudgetTemplate>And<last TemplatesWithIdentifierRel.BudgetTemplate>ReferToBudgetIdentifier<old BudgetIdentifier>.Proceed?"					
						else
							confirmation required
								"BudgetTemplate<first TemplatesWithIdentifierRel.BudgetTemplate>And<TemplatesWithIdentifierCount>OtherTemplatesReferToBudgetIdentifier<old BudgetIdentifier>.Proceed?"					
					
				invoke NotifyChangeIdentifierAccountingUnit NotifyBudgetTemplateRel
					invoked.PrmAccountingEntity		= AccountingEntity
					invoked.PrmAccountingUnit		= AccountingUnit
					invoked.PrmOldIdentifier		= old BudgetIdentifier
		
		IncludeInBudgetEdit
			constraint (AccountingUnitType.Posting)
				"NotValidForSummaryDimension"

		DisplayAccountingUnit
			default to AccountingUnit
			if (!CopyStructureMode)
				LocalStructure = AccountingUnitStructure
				constraint (!DisplayAccountingUnitRel exists)
					"DisplayValueAlreadyExistsFor<first DisplayAccountingUnitRel.AccountingUnit>"
					
	Action Exit Rules
		if (FinanceEnterpriseGroup.BODTrigger and !LocalBODTrigger)
			Service		= "AccountingUnitService"
			if (action type.Create)
				ActionCode	= ActionCode.Create				
			else
				ActionCode	= ActionCode.Update
			increment bod id.VariationID
		
		

	Attach Rules
		if (AccountingUnitType.Posting)
			if (!parentcontext.name = "GeneralLedgerTotal"
			and !parentcontext.name = "AccountingUnitHierarchy"
			and !parentcontext.name = "AccountingUnitShadow"
			and !parentcontext.name = "AccountingUnitStructure"
			and !parentcontext.name = "AccountingUnit"
			and !parentcontext.name = "AccountAnalysisSettings"
			and !parentcontext.name = "BudgetGroup"
			and !parentcontext.name = "BudgetTemplateMember"
			and !parentcontext.name = "BudgetTemplatePending"
			and !parentcontext.name = "BudgetTemplateRemove"
			and !parentcontext.name = "BudgetChange"
			and !parentcontext.name = "BudgetImport"
			and !parentcontext.name = "CodeBlockRelationDetail"
			and !parentcontext.name = "CodeBlockRelationRule"
			and !parentcontext.name = "ReconciliationAccount"
			and !parentcontext.name = "ContractLineDistribution"
			and !parentcontext.name = "AllocationLineSourceValue"
			and !parentcontext.name = "AllocationLineValue"			
			and !parentcontext.name = "AllocationLineSingleOverride"
			and !parentcontext.name = "AllocationLineTempOverride"
			and !parentcontext.name = "AllocationRunWeightDetail"
			and !parentcontext.name = "GLReport"
			and !parentcontext.name = "GLReportGrouping"
			and !parentcontext.name = "GLReportGroupingDetail"
			and !parentcontext.name = "GLReportFilterDimension"
			and !parentcontext.name = "GLColumnFilterDimension"
#ifdef module am
			and !parentcontext.name = "AssetTransactionSummary"
			and !parentcontext.name = "AssetTransactionBeginningBalance"
#endif
			and !BypassActiveCodeBlockEdit)
				constraint (Active)
					"CannotAttachAnInactive<AccountingUnit>_<FinanceEnterpriseGroup.AccountingUnitLabel>"

		
	Rule Blocks
		TriggerAccountingUnit
			trigger Service PA service
				resume on error
				title is "EG:<FinanceEnterpriseGroup>AE:<AccountingEntity>AU:<AccountingUnit>"
				Criteria
					FinanceEnterpriseGroup
					AccountingEntity
					AccountingUnit
				Variables
					ActionCode
					include persistent fields from FinanceEnterpriseGroup
					include persistent fields from AccountingEntity
					include persistent fields from AccountingUnit
					include user fields from AccountingUnit
					DerivedParentDisplayAccountingUnit
					DerivedParentDescription
					DerivedParentAccountingUnit
					LocalBODCurrentTimeStamp.OutputBODCurrentTimeStamp
						variable name is CurrentTimeStamp	
						
		TriggerBODForCreateOrUpdate
			if (FinanceEnterpriseGroup.BODTrigger)
				Service		= "AccountingUnitService"
				if (action type.Create)
					ActionCode	= ActionCode.Create				
				else
					ActionCode	= ActionCode.Update
				increment bod id.VariationID
				LocalBODCurrentTimeStamp.CurrentTimeStamp = current timestamp
				include TriggerAccountingUnit



				
							
		CheckValidContext	
			if (AccountingUnitStructure.UnusedDimensionStructure)
				constraint (InvokedByUnusedStructure
				or			LocalInvokedByUnusedStructure)
					"ActionNotValidForThisStructure"	
	
		CreateShadowForAccountingUnit
			LocalChildAccountingUnit = LocalAccountingUnit
			TopNodeFound  	 	     = false
			invoke Delete AccountingUnitShadowRel
			while (!TopNodeFound)
				invoke Create AccountingUnitShadow
					invoked.FinanceEnterpriseGroup 	= FinanceEnterpriseGroup
					invoked.AccountingUnitStructure = AccountingUnitStructure
					invoked.AccountingEntity		= AccountingEntity
					invoked.AccountingUnit		    = LocalChildAccountingUnit
					invoked.AccountingUnitType		= LocalChildAccountingUnit.AccountingUnitType
					invoked.SummaryEntity			= LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionEntity
					invoked.SummaryAccountingUnit   = LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode

				if (LocalAccountingUnit.AccountingUnitType.Summary)
					invoke SetLevel LocalAccountingUnit
				if (LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode.AccountingUnitType.Node)
					TopNodeFound        = true
				else
					LocalAccountingUnit = LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode			
		
		CheckEntityNode

			if (!EntityNodeRel exists)
				LocalEntityNode      = EntityNodeString	
				invoke CreateCopy
					invoked.FinanceEnterpriseGroup 		= FinanceEnterpriseGroup
					invoked.DimensionStructure    	 	= AccountingUnitStructure
					invoked.AccountingUnitType     		= 4
					invoked.AccountingEntity      	 	= AccountingEntity						
					invoked.AccountingUnit				= LocalEntityNode
					invoked.Description					= AccountingEntity.Name 
					invoked.DisplayAccountingUnit		= EntityNodeMinusPrefix
					invoked.ParentAccountingUnit 		= DerivedTopNode 
				invoke Create AccountingUnitHierarchy
					invoked.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
					invoked.AccountingUnitStructure		= AccountingUnitStructure
					invoked.AccountingEntity			= AccountingEntity
					invoked.AccountingUnit		    	= LocalEntityNode
					invoked.ParentNodeGroup.DimensionEntity	= DerivedTopNodeEntity							
					invoked.ParentNodeGroup.DimensionNode   = DerivedTopNode 
					invoked.DisplayAccountingUnit		= EntityNodeMinusPrefix		

		CheckSystemDimensions
			if (AccountingUnitStructure = FinanceEnterpriseGroup.EnterpriseAUStructure)
				if (EnterpriseSystemAcctUnitRel exists)
					SystemAccountingUnitDefined	= true
				if (EnterpriseDefaultZoneAcctUnitRel exists)
					DefaultZoneAccountingUnitDefined = true
				if (EnterpriseEntityZoneAcctUnitRel exists)
					EntityZoneAccountingUnitDefined = true
				
				invoke SetSystemDimensionFlags AccountingEntity
					invoked.PrmSystemAccountingUnitDefined	    = SystemAccountingUnitDefined
					invoked.PrmDefaultZoneAccountingUnitDefined = DefaultZoneAccountingUnitDefined
					invoked.PrmEntityZoneAccountingUnitDefined  = EntityZoneAccountingUnitDefined
 
		DeleteRules
			if (FinanceEnterpriseGroup.BODTrigger)
				if (AccountingUnitStructure.IsEnterpriseStructure)
					Service			= "AccountingUnitService"
					ActionCode		= ActionCode.Delete
					increment bod id.VariationID
					LocalBODCurrentTimeStamp.CurrentTimeStamp = current timestamp
					include TriggerAccountingUnit



								
	Apply Pending Effective Rules
		if (FinanceEnterpriseGroup.BODTrigger and !LocalBODTrigger)
			Service		= "AccountingUnitService"
			if (action type.Create)
				ActionCode	= ActionCode.Create				
			else
				ActionCode	= ActionCode.Update
			increment bod id.VariationID
			LocalBODCurrentTimeStamp.CurrentTimeStamp = current timestamp
			include TriggerAccountingUnit



	
	Audit Entry Rules
		if(not audit period.Future)
			if (FinanceEnterpriseGroup.BODTrigger and !LocalBODTrigger)
				Service		= "AccountingUnitService"
				if (!action type.Delete)
					if (action type.Create)
						ActionCode	= ActionCode.Create				
					else
						ActionCode	= ActionCode.Update
					LocalBODCurrentTimeStamp.CurrentTimeStamp = current timestamp
					include TriggerAccountingUnit



								
    Actions
		Create is a Create Action
		
			Field Rules
			
				ParentAccountingUnit
					if (!AccountingUnitType.Node)
						if (AccountingUnitType.Entity)
							default to DerivedTopNode
						else
							default to EntityNodeString	
										
			Entrance Rules
				if ((!AccountingUnitType.Node)
				and (!AccountingUnitType.Entity))
					include CheckValidContext
				
				if (!AccountingUnitType entered)
					AccountingUnitType = CreateAccountingUnitType
					constraint (AccountingUnitType entered)
						"AccountingUnitTypeIsRequired"
							
				NewEntity   		 = AccountingEntity	
				if (ParentAccountingUnit entered)
					if  (ParentAccountingUnit != DerivedTopNode
					and	 ParentAccountingUnit != EntityNodeString)
						LocalAccountingUnit = ParentAccountingUnit
						constraint (LocalAccountingUnit exists)
							"ParentAccountingUnit<ParentAccountingUnit>DoesNotExist"
												
				if (!IsTopNode
				and !AccountingUnitType.Entity)
					include CheckEntityNode
			
				constraint (AccountingUnit entered)
					"AccountingUnitIsRequired"
				
				constraint(AccountingUnit != "TOP_NODE")
					"DisplayValueAlreadyExists_TOP_NODE"	
					

												
				if (!IsTopNode)
					if (AccountingUnitType.Summary)
						NewAccountingUnit 		= AccountingUnit
						AccountingUnit			= SummaryNodeString				
						DisplayAccountingUnit	= NewAccountingUnit
				
			Action Rules
						 
				if (IsTopNode
				or  AccountingUnitType.Summary
				or  AccountingUnitType.Entity)
					Active						= true
					DimensionStructure			= AccountingUnitStructure
					
				if (AccountingUnitType.Entity)
					Level						= 1
										
				if (AccountingUnitType.Posting
				and IsAZoneAccountingUnit)
					ZoneAccountingUnit = AccountingUnit 

			Exit Rules
				if (DefaultZoneAccountingUnit)
					if (ZoneAccountingUnit	= blank
					and AccountingUnitType.Posting)
						ZoneAccountingUnit	= AccountingUnit			
	
				if (!SkipHierarchy)
					invoke Create AccountingUnitHierarchy
						invoked.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
						invoked.AccountingUnitStructure		= AccountingUnitStructure
						invoked.AccountingEntity			= AccountingEntity
						invoked.AccountingUnit				= AccountingUnit
						invoked.ParentNodeGroup.DimensionNode       = ParentAccountingUnit
						if (AccountingUnitType.Entity)
							invoked.ParentNodeGroup.DimensionEntity = DerivedTopNodeEntity
						else
						if (!AccountingUnitType.Node)
							invoked.ParentNodeGroup.DimensionEntity = AccountingEntity 
						invoked.DisplayAccountingUnit		= DisplayAccountingUnit
				    	invoked.SystemAccountingUnit		= SystemAccountingUnit	
				    	invoked.IsAZoneAccountingUnit		= IsAZoneAccountingUnit
				    	invoked.ZoneAccountingUnit			= ZoneAccountingUnit
				    	invoked.EntityZoneAccountingUnit 	= EntityZoneAccountingUnit
			    		invoked.DefaultZoneAccountingUnit	= DefaultZoneAccountingUnit
			    		invoked.IncludeInBudgetEdit         = IncludeInBudgetEdit 							
				    	invoked.InterEntityAccountingUnit	= InterEntityAccountingUnit	
			
				if (!IsTopNode)
					if (AccountingUnitType.Summary)
						invoke SetLevel
					LocalAccountingUnit = AccountingUnit
					include CreateShadowForAccountingUnit
					if (AccountingUnitType.Posting)
						initialize ParentAccountingUnit

				if (AccountingUnitType.Posting)
					invoke SystemCreate CodeBlockRelationDetail
						resume on error
			            invoked.FinanceEnterpriseGroup				= FinanceEnterpriseGroup
			            invoked.CodeBlockRelation					= CodeBlockRelationRel.CodeBlockRelation
			            invoked.AccountingEntity					= AccountingEntity
			            invoked.AccountingUnit						= AccountingUnit					
			    


			    
			    include CheckSystemDimensions


			    if (AccountingUnitType.Posting
			    and !BypassNewStructureNotification)
					invoke NotifyNewStructureComponent FinanceEnterpriseGroup
						invoked.PrmNewAccountingEntity				= AccountingEntity
						invoked.PrmNewAccountingUnit				= AccountingUnit
			            															
		CreateCopy is a Create Action
			restricted
            Field Rules

                
            Action Rules

            	CopyStructureMode = true
            	
            	if (!ParentAccountingUnit entered)
            		ParentAccountingUnit = DerivedTopNode
            		 
   				if (AccountingUnitType.Posting)
					initialize ParentAccountingUnit
   
   			Exit Rules



			    		
		CreateNoRules is a Create Action
			restricted
			bypass field rules
			
			Entrance Rules
				include CheckValidContext
			Exit Rules

				
		Update is an Update Action

			Local Fields
				LocalIsAZoneAccountingUnit	is Boolean

			Action Rules
				TransientIsAZoneAccountingUnit = IsAZoneAccountingUnit
				if (IsAZoneAccountingUnit)
					invoke CheckSiblingForZone AccountingUnit	
				
				LocalIsAZoneAccountingUnit	= DerivedIsAZoneAccountingUnit
				UseInputValue = true

				if (LocalIsAZoneAccountingUnit
				and !IsAZoneAccountingUnit)
					ParentDimension		= DerivedParentAccountingUnit
					ZoneAccountingUnit	= ParentDimension.ZoneAccountingUnit
				if (AccountingUnitType.Posting
				and IsAZoneAccountingUnit)
					ZoneAccountingUnit = AccountingUnit 
				if (AccountingUnitType.Posting)
					initialize ParentAccountingUnit

			Exit Rules
				if (DefaultZoneAccountingUnit)
					if (ZoneAccountingUnit	= blank
					and AccountingUnitType.Posting)
						ZoneAccountingUnit	= AccountingUnit	
									
				if (!BypassUpdateStructure)
					invoke UpdateStructure
				
				include CheckSystemDimensions

					
		UpdateStructure is an Instance Action
			restricted
			Action Rules
	
				invoke Update AccountingUnitInContextStructureRel 
			    	invoked.EntityZoneAccountingUnit 	= EntityZoneAccountingUnit							
					invoked.DisplayAccountingUnit		= DisplayAccountingUnit
					invoked.AccountingUnitType			= AccountingUnitType

			    	if(TransientIncludeOrExclude)
						invoked.IncludeInBudgetEdit         = TransientIncludeInBudgetEdit
						invoked.IsAZoneAccountingUnit		= TransientIsAZoneAccountingUnit
					else
		    			invoked.IncludeInBudgetEdit     = IncludeInBudgetEdit 	
		    			invoked.IsAZoneAccountingUnit	= IsAZoneAccountingUnit
		    			invoked.SystemAccountingUnit	= SystemAccountingUnit
		    			invoked.DefaultZoneAccountingUnit = DefaultZoneAccountingUnit
						invoked.ZoneAccountingUnit			= ZoneAccountingUnit
						invoked.InterEntityAccountingUnit	= InterEntityAccountingUnit	
						
		UpdateAccountingUnit is an Instance Action
			restricted
			Parameters
				PrmZoneAccountingUnit		is a AccountingUnit
					default label is "ZoneAccountingUnit"
			
			Local Fields
				ZoneChanged					is Boolean
			
			Action Rules
				ZoneChanged 				= false
				if (ZoneAccountingUnit != PrmZoneAccountingUnit)
					ZoneChanged				= true
					ZoneAccountingUnit		= PrmZoneAccountingUnit

			Exit Rules
				for each NextLevelChildRecordsRel

					invoke UpdateAccountingUnitHierarchy each.AccountingUnit.AccountingUnitInContextStructureRel 
						invoked.PrmZoneAccountingUnit = ZoneAccountingUnit
				if (ZoneChanged)
					include TriggerBODForCreateOrUpdate
					
		Delete is a Delete Action
			valid when (EligibleToDelete)
			confirmation required
				"<AccountingUnit>WillBeDeleted."
				
			Entrance Rules 
				constraint (AccountingUnit != ZoneAccountingUnit)
					"CannotDelete<FinanceEnterpriseGroup.AccountingUnitLabel>"

				invoke Delete AccountingUnitHierarchy(AccountingUnit) set
				invoke Delete AccountingUnitHierarchy(AccountingUnit) set 
				include DeleteRules	
			Exit Rules
				if (!AccountingUnitType.Entity)
					if (first EntityNodeRel.EligibleToRemove)
						invoke RemoveEntityNodeFromStructure first EntityNodeRel 

#ifdef module integration
		SendAccountingUnitBODNativeLPL is an Instance Action
			restricted
			Entrance Rules
			Parameters
			Action Rules
				send ion bod
					bod is AccountingUnitXMLBOD
					bod type is "Sync.CodeDefinition"
					accounting entity is DerivedAccountingEntity
					document id is AccountingUnit
					variation id is	BODVariationID	
						
		TriggerAccountingUnitNativeLPLBOD is an Instance Action
			restricted
			Entrance Rules
			Parameters
				RestartFlag is Boolean
			Action Rules
				if (DerivedConfigDocID = "Y")
					LocalMainUserTemplate = "IONSyncCodeDefination_CleanDocId_AccountingUnit_ST"
				else
					LocalMainUserTemplate = "IONSyncCodeDefination_AccountingUnit_ST"
				invoke NativeLPLBODTriggerChecks FSMBODConfigurationRel
					invoked.PrmVerb 					= 1
					invoked.PrmNoun						= "CodeDefinition"
					invoked.PrmDirection				= 1
					invoked.PrmTriggerFrom				= "AccountingUnit"
					invoked.PrmFinanceEnterpriseGroup	= FinanceEnterpriseGroup
					invoked.PrmAccountingEntity			= AccountingEntity
					invoked.PrmMainUserTemplate			= LocalMainUserTemplate
				LocalNativeLPLBODTrigger = FSMBODConfigurationRel.NativeLPLBODTrigger
				LocalBODTrigger 		= true
				if(FinanceEnterpriseGroup.BODTrigger and LocalNativeLPLBODTrigger)
					if(FSMInboundBODTracker not entered)
						invoke Create FSMInboundBODTracker
							assign result to NewBODTracker
							invoked.Verb 					= 1
							invoked.Noun 					= "CodeDefinition"					
							invoked.BODDocumentID			= AccountingUnit
							invoked.BODVariationID			= BODVariationID
							invoked.BODID					= DerivedBODFormattedId
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
							invoked.Direction				= 1
							invoked.Reference1				= AccountingEntity
							invoked.BODAccountingEntity		= DerivedAccountingEntity
							invoked.Reference2				= "AccountingUnit"
							initialize invoked.Error			
							initialize invoked.ErrorMessage					
						LocalFSMInboundBODTracker	= NewBODTracker.FSMInboundBODTracker
					else
						LocalFSMInboundBODTracker		= FSMInboundBODTracker
						invoke Update FSMInboundBODTrackerRel
							invoked.FinanceEnterpriseGroup  = FinanceEnterpriseGroup
							invoked.BODDocumentID			= AccountingUnit
							invoked.BODVariationID			= BODVariationID
							invoked.BODID					= DerivedBODFormattedId
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.Direction				= 1
							invoked.Reference1				= AccountingEntity
							invoked.BODAccountingEntity		= DerivedAccountingEntity
							invoked.Reference2				= "AccountingUnit"
							initialize invoked.Error			
							initialize invoked.ErrorMessage
					invoke SendAccountingUnitBODNativeLPL
						resume on error
							Error            							= true
							ErrorMessage     							= error message
					if(Error)
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 								= Error
							invoked.ErrorMessage 						= ErrorMessage
							invoked.Status								= 2
							invoked.CloseDate							= system current timestamp
							invoked.BODID								= DerivedBODFormattedId
							invoked.BODXML								= AccountingUnitXMLBOD
					else
						invoke Update FSMInboundBODTrackerRel
							invoked.Status									= 3
							invoked.CloseDate								= system current timestamp
							invoked.BODID									= DerivedBODFormattedId
							invoked.BODXML									= AccountingUnitXMLBOD	
#endif	














































		
		DeleteAll is a Delete Action
			restricted
			Entrance Rules
				include DeleteRules
			Exit Rules

		DeleteAllDimensionsInStructure	is a Set Action
			restricted
			Parameters
				PrmFinanceEnterpriseGroup	is a FinanceEnterpriseGroup
				PrmAccountingUnitStructure	is like AccountingUnitStructure
			Local Fields
				LocalActor 						is an Actor  
			Instance Selection
				where(FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and DimensionStructure = PrmAccountingUnitStructure)
			Action Rules
				Empty Set Rules	
					LocalActor = actor
					send notification
						to LocalActor
						description is "AccountingUnitStructureDeleteCompletedFor:<PrmAccountingUnitStructure>"
						detail is "AccountingUnitStructureDeleteCompletedFor:<PrmAccountingUnitStructure>"	
				Set Rules
                	Exit Rules
						LocalActor = actor
						send notification
							to LocalActor
							description is "AccountingUnitStructureDeleteCompletedFor:<PrmAccountingUnitStructure>"
							detail is "AccountingUnitStructureDeleteCompletedFor:<PrmAccountingUnitStructure>"	
				Instance Rules
					invoke DeleteAll

		AddPostingAccountingUnitToStructure is an Instance Action
			valid when (AccountingUnitType.Posting)
			Parameters
				PrmStructure						is an AccountingUnitStructure
					default label is "Structure"
				PrmParentAccountingUnit				is an AccountingUnit
					default label is "ParentAccountingUnit"

			Local Fields
				LocalEntityNodeString		is like AccountingUnit
				LocalAlphaSequence			is Alpha 4
				
			Parameter Rules
				PrmStructure
					required
					LocalStructure			= PrmStructure
					constraint (!SubordinateInLocalStructureRel exists)
						"AlreadyExistsInStructure"
					if (PrmStructure = FinanceEnterpriseGroup.UnusedAUStructure)
						constraint (InvokedByUnusedStructure)
							"ActionNotValidForThisStructure"						
					LocalAlphaSequence		= PrmStructure.StructureSequence
					LocalEntityNodeString 	= LocalAlphaSequence + "_" + AccountingEntity + "_ENTITY"											
				
				PrmParentAccountingUnit
					NewEntity 		= AccountingEntity
					constraint (PrmParentAccountingUnit != AccountingUnit)
						"CannotCreateWithinSelf"
					constraint (!PrmParentAccountingUnit.AccountingUnitType.Posting)	
						"CannotBePostingLevel"				
		
			Action Rules
				LocalStructure = PrmStructure
				
				if (!LocalStructureEntityNodeRel exists)
					LocalEntityNode      = LocalStructureEntityNodeString	
					invoke CreateCopy
						invoked.FinanceEnterpriseGroup 		= FinanceEnterpriseGroup
						invoked.DimensionStructure    	 	= LocalStructure
						invoked.AccountingUnitType     		= 4
						invoked.AccountingEntity      	 	= AccountingEntity						
						invoked.AccountingUnit				= LocalEntityNode
						invoked.Description					= AccountingEntity.Name 
						invoked.DisplayAccountingUnit		= EntityNodeMinusPrefix
						invoked.ParentAccountingUnit 		= LocalStructureDerivedTopNode 
					invoke Create AccountingUnitHierarchy
						invoked.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
						invoked.AccountingUnitStructure		= LocalStructure
						invoked.AccountingEntity			= AccountingEntity
						invoked.AccountingUnit		    	= LocalEntityNode
						invoked.ParentNodeGroup.DimensionEntity	= LocalStructureDerivedTopNodeEntity							
						invoked.ParentNodeGroup.DimensionNode   = LocalStructureDerivedTopNode 
						invoked.DisplayAccountingUnit		= EntityNodeMinusPrefix		

				if (!PrmParentAccountingUnit entered)
					PrmParentAccountingUnit = LocalStructureEntityNodeString
							
				LocalStructure = PrmStructure
				constraint (!DisplayAccountingUnitRel exists)
					"DisplayValueAlreadyExistsFor<first DisplayAccountingUnitRel.AccountingUnit>"				
				
				if (AccountingUnitType.Posting)
					initialize ParentAccountingUnit
				else
					ParentAccountingUnit = PrmParentAccountingUnit
				invoke Create AccountingUnitHierarchy
					invoked.FinanceEnterpriseGroup	 = FinanceEnterpriseGroup
					invoked.AccountingUnitStructure  = PrmStructure
					invoked.AccountingEntity		 = AccountingEntity
					invoked.ParentNodeGroup.DimensionEntity = AccountingEntity
					invoked.ParentNodeGroup.DimensionNode   = PrmParentAccountingUnit
					invoked.AccountingUnit			 = AccountingUnit
					invoked.DisplayAccountingUnit	 = AccountingUnit
					invoked.ZoneAccountingUnit		 = PrmParentAccountingUnit.ZoneAccountingUnit


				invoke BuildShadowFileForAccountingUnit PrmStructure
					invoked.PrmFinanceEnterpriseGroup 		= FinanceEnterpriseGroup
					invoked.PrmAccountingEntity			    = AccountingEntity
					invoked.PrmAccountingUnit			    = AccountingUnit

		AddPostingToSummary is an Instance Action

			Action Rules
				include CheckValidContext
				include CheckEntityNode
				
				LocalStructure = AccountingUnitStructure
				constraint (!DisplayAccountingUnitRel exists)
					"DisplayValueAlreadyExistsFor<first DisplayAccountingUnitRel.AccountingUnit>"				
				
				if (AccountingUnitType.Posting)
					initialize ParentAccountingUnit
				else
					ParentAccountingUnit = ContextAccountingUnit
				invoke Create AccountingUnitHierarchy
					invoked.FinanceEnterpriseGroup	 = FinanceEnterpriseGroup
					invoked.AccountingUnitStructure  = AccountingUnitStructure
					invoked.AccountingEntity		 = AccountingEntity
					invoked.ParentNodeGroup.DimensionEntity = AccountingEntity
					invoked.ParentNodeGroup.DimensionNode   = ContextAccountingUnit
					invoked.AccountingUnit			 = AccountingUnit
					invoked.DisplayAccountingUnit	 = AccountingUnit
					invoked.ZoneAccountingUnit		 = ContextAccountingUnitRel.ZoneAccountingUnit
				LocalAccountingUnit = AccountingUnit					
				include CreateShadowForAccountingUnit
				
		CreateChildWithin is an Instance Action
			default label is "CreateChildAccountingUnit"
			valid when (AccountingUnitType.Summary)
			allow user fields as parameters
			Parameters
				NewAccountingUnitType		is Numeric 1
					States
						Summary				value is 2
						Posting				value is 1
				NewAccountingUnit	 		is like AccountingUnit 
				NewDisplayAccountingUnit 	is like AccountingUnit
				NewDescription 	 	 		is a Description
				NewBudgetIdentifier			is a BudgetIdentifier
				NewActive					is Boolean
				NewAddressCode				is a AddressCode
			Parameter Rules
				NewAccountingUnitType
					required
				NewAccountingUnit
					required		
				NewDescription		
					required
				NewDisplayAccountingUnit
					default to NewAccountingUnit
				NewBudgetIdentifier
					if (NewAccountingUnitType.Posting)
						cannot be entered
				NewActive
					initial value is true
					
			Action Rules
				include CheckValidContext
					
			Exit Rules
				invoke Create
					fill in user fields from parameters
					invoked.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
					invoked.AccountingUnitType			= NewAccountingUnitType
					invoked.AccountingEntity			= AccountingEntity
					invoked.AccountingUnit				= NewAccountingUnit
					invoked.Description   		  		= NewDescription
					invoked.DisplayAccountingUnit	  	= NewDisplayAccountingUnit
					invoked.ParentAccountingUnit		= AccountingUnit
					invoked.BudgetIdentifier			= NewBudgetIdentifier
					invoked.Active					    = NewActive					
					invoked.ZoneAccountingUnit		    = AccountingUnit.ZoneAccountingUnit					
					invoked.SkipPropagate		  		= true 
					invoked.InvokedByCreateWithin 		= true
					invoked.AddressCode						= NewAddressCode
					
		Move is an Instance Action
			valid when (MovableSummaryOrPostingAccountingUnit)
			
			Parameters
				PrmContextAccountingUnit is an AccountingUnitContextValue
				NewParent 				 is an AccountingUnit
							
			Parameter Rules
				PrmContextAccountingUnit
					initial value is AccountingUnit
				NewParent
					default to DerivedEntityNode
					required
					constraint (NewParent != AccountingUnit)
						"CannotMoveToSelf"
					constraint (NewParent.AccountingUnitType.Summary
					or			NewParent.AccountingUnitType.Entity)
						"ParentMustBeASummaryNode"
					constraint (NewParent.DimensionStructure = AccountingUnitStructure)
						"ParentDoesNotBelongToThisStructure"
					constraint (NewParent != DerivedParentAccountingUnit)
						"ParentAccountingUnitIsAlready<NewParent.Description>"	

					TopNodeFound = false
					LocalAccountingUnit = NewParent
					while (!TopNodeFound)
						constraint (AccountingUnit != LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode)
							"<AccountingUnit>MayNotBeMovedToADescendantOfItsOwnBranch" 
						if (LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode.AccountingUnitType.Node)
							TopNodeFound = true
						else
							LocalAccountingUnit = LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode	
					constraint (NewParent != NewParent.ZoneAccountingUnit)
						"ZoneAccountingUnit<NewParent>CannotBeASummaryLevel"						

					constraint (AccountingUnit != ZoneAccountingUnit)
						"ZoneAccountingUnitCannotBeMoved"	

					constraint (!EntityZoneAccountingUnit)
						"CannotMoveEntityZone<FinanceEnterpriseGroup.AccountingUnitLabel>"

			Local Fields
				OldParent is like AccountingUnit
																		
			Entrance Rules
				include CheckValidContext
				
				OldParent				  = DerivedParentAccountingUnit


			Action Rules
				if (AccountingUnitType.Posting)
					initialize ParentAccountingUnit
				else
					ParentAccountingUnit  	  = NewParent
				invoke Update AccountingUnitInContextStructureRel
					invoked.ParentNodeGroup.DimensionNode	= NewParent
					invoked.ZoneAccountingUnit				= NewParent.ZoneAccountingUnit					
					if (NewParent = DerivedTopNode)
						invoked.ParentNodeGroup.DimensionEntity = AccountingUnitStructure.AccountingUnitTopNodeGroup.DimensionEntity
					else
						invoked.ParentNodeGroup.DimensionEntity = AccountingEntity

			Exit Rules
 				LocalAccountingUnit = AccountingUnit
				include CreateShadowForAccountingUnit
				if (AccountingUnitType.Summary)		
					TopNodeFound = false
					while (!TopNodeFound)
						if (LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode.AccountingUnitType.Summary)
							if (BudgetIdentifier entered)	
								constraint (BudgetIdentifier != LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode.BudgetIdentifier)
									"BudgetIdentifier<BudgetIdentifier>AlreadyInUseBy<LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode.DisplayAccountingUnit>"  
							if (LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode.BudgetIdentifier entered)
								I1 += 1
								BudgetIdentifierArray.BudgetIdentifier[I1] = LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode.BudgetIdentifier				

						if (LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode.AccountingUnitType.Node)
							TopNodeFound = true
						else
							LocalAccountingUnit = LocalAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode	
						
					invoke WalkDownHierarchy
						invoked.PrmBudgetIdentifierArray = BudgetIdentifierArray	
						invoked.PrmBudgetIdentifierCount = I1					
				
				invoke NotifyMoveAccountingUnit NotifyBudgetTemplateRel
					invoked.PrmAccountingEntity	 = AccountingEntity
					invoked.PrmAccountingUnit	 = AccountingUnit
					invoked.PrmOldParent      	 = OldParent
					invoked.PrmNewParent		 = NewParent
				include TriggerBODForCreateOrUpdate
							
		WalkDownHierarchy is an Instance Action
			restricted
			
			Parameters
				PrmBudgetIdentifierArray	is a BudgetIdentifierArray
					default label is "BudgetIdentifierArray"
				PrmBudgetIdentifierCount	is Numeric 3
					default label is "BudgetIdentifierCount"
							
			Action Rules
				invoke SetLevel
				
				for each AccountingUnitChildrenRel
 					LocalAccountingUnit = each.AccountingUnit
					include CreateShadowForAccountingUnit							
					if (each.AccountingUnitType.Summary)
						if (PrmBudgetIdentifierArray entered)
							if (each.BudgetIdentifier entered)
								I2 = 1
								while (I2 <= PrmBudgetIdentifierCount)
									constraint (PrmBudgetIdentifierArray.BudgetIdentifier[I2] != each.BudgetIdentifier)
										"BudgetIdentifier<each.BudgetIdentifier>AlreadyInUseBy<each.DisplayAccountingUnit>" 
									I2 += 1 					
						invoke WalkDownHierarchy each.AccountingUnit	
							invoked.PrmBudgetIdentifierArray = PrmBudgetIdentifierArray	
							invoked.PrmBudgetIdentifierCount = PrmBudgetIdentifierCount							
				
		CheckSiblingForZone is an Instance Action
			restricted
			Action Rules
				for each AccountingUnitChildrenRel
					constraint (!each.AccountingUnit.IsAZoneAccountingUnit)
						"CannotBeAZone,WhenDescendantIsAZone"

					invoke CheckSiblingForZone each.AccountingUnit	

		EditDescendantsBudgetIdentifier is an Instance Action
			restricted
			
			Parameters
				PrmBudgetIdentifierArray	is a BudgetIdentifierArray
					default label is "BudgetIdentifierArray"
				PrmBudgetIdentifierCount	is Numeric 3
					default label is "BudgetIdentifierCount"
					
			Action Rules
				
				for each AccountingUnitChildrenRel
					if (each.AccountingUnitType.Summary)
						if (each.BudgetIdentifier entered)
							I2 = 1
							while (I2 <= PrmBudgetIdentifierCount)
								constraint (PrmBudgetIdentifierArray.BudgetIdentifier[I2] != each.BudgetIdentifier)
									"BudgetIdentifier<each.BudgetIdentifier>AlreadyInUseBy<each.DisplayAccountingUnit>" 
								I2 += 1 					
						invoke EditDescendantsBudgetIdentifier each.AccountingUnit
							invoked.PrmBudgetIdentifierArray = PrmBudgetIdentifierArray	
							invoked.PrmBudgetIdentifierCount = PrmBudgetIdentifierCount	

		RemoveBranch	is an Instance Action
			valid when (AccountingUnitType.Summary)
			disable multiple instance selection
			confirmation required
				"ThisWillRemoveTheEntireBranchOfTheHierarchy"			
			
			Action Rules
				constraint (DerivedShadowCount < 1000)
					"BranchIsTooLargeToRemove"
							
				invoke RecursiveRemove
				
		RecursiveRemove is an Instance Action
			restricted
			
			Action Rules
				if (AccountingUnitType.Summary)
					for each AccountingUnitChildrenRel
						invoke RecursiveRemove each
					invoke RemoveSummaryFromStructure
				else
					invoke RemoveFromStructure
											
		RemoveFromStructure is an Instance Action
			valid when (RemovePostingAccountingUnit)
			
			Local Fields
				OldParent is like AccountingUnit
																		
			Action Rules
				include CheckValidContext
				
				constraint (AccountingUnit != ZoneAccountingUnit)
					"CannotRemove<AccountingUnit>_<FinanceEnterpriseGroup.AccountingUnitLabel>"	

				OldParent = DerivedParentAccountingUnit
				invoke NotifyRemoveAccountingUnit NotifyBudgetTemplateRemoveRel
					invoked.PrmAccountingEntity = AccountingEntity
					invoked.PrmAccountingUnit	= AccountingUnit
					invoked.PrmOldParent 		= OldParent
				invoke Delete AccountingUnitInContextStructureRel
				LocalAccountingUnit = AccountingUnit
				invoke Delete AccountingUnitShadowRel
			Exit Rules
			
		RemoveSummaryFromStructure is a Delete Action
			valid when (EligibleToRemove)
			
			Local Fields
				OldParent is like AccountingUnit
																		
			Entrance Rules
				include CheckValidContext
				
				constraint (AccountingUnit != ZoneAccountingUnit)
					"CannotRemove<AccountingUnit>_<FinanceEnterpriseGroup.AccountingUnitLabel>"	

				constraint (!AccountingUnitHierarchyRel exists)
					"CannotRemove,ChildrenExist"
				OldParent = DerivedParentAccountingUnit
				invoke NotifyRemoveAccountingUnit NotifyBudgetTemplateRemoveRel
					invoked.PrmAccountingEntity = AccountingEntity
					invoked.PrmAccountingUnit	= AccountingUnit
					invoked.PrmOldParent 		= OldParent
				invoke Delete AccountingUnitInContextStructureRel
				LocalAccountingUnit = AccountingUnit
				invoke Delete AccountingUnitShadowRel		
				include DeleteRules

		RemoveEntityNodeFromStructure is a Delete Action
			restricted
			
			Local Fields
				OldParent is like AccountingUnit
																		
			Entrance Rules
				
				constraint (AccountingUnit != ZoneAccountingUnit)
					"CannotRemove<AccountingUnit>_<FinanceEnterpriseGroup.AccountingUnitLabel>"	

				constraint (!AccountingUnitHierarchyRel exists)
					"CannotRemove,ChildrenExist"
				OldParent = DerivedParentAccountingUnit
				invoke NotifyRemoveAccountingUnit NotifyBudgetTemplateRemoveRel
					invoked.PrmAccountingEntity = AccountingEntity
					invoked.PrmAccountingUnit	= AccountingUnit
					invoked.PrmOldParent 		= OldParent
				invoke Delete AccountingUnitInContextStructureRel
				LocalAccountingUnit = AccountingUnit
				invoke Delete AccountingUnitShadowRel		
				include DeleteRules
																	
		AddAccountingUnitToStructures is an Instance Action
			valid when (AccountingUnitType.Posting)
			
			Parameters
				LikeAccountingUnit is an AccountingUnit
				
			Parameter Rules
				LikeAccountingUnit
					required
					constraint (LikeAccountingUnit.AccountingUnitType.Posting)
						"MustBePostingType"
						
			Action Rules
				for each LikeAccountingUnit.AccountingUnitHierarchy(AccountingUnit) set
					LocalStructure = each.AccountingUnitStructure
					if (!each.AccountingUnitStructure.UnusedDimensionStructure)
						if (!SubordinateInLocalStructureRel exists)
							constraint (!DisplayAccountingUnitRel exists)
								"DisplayValueAlreadyExistsFor<first DisplayAccountingUnitRel.AccountingUnit>"												
							invoke Create AccountingUnitHierarchy
								invoked.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
								invoked.AccountingUnitStructure		= each.AccountingUnitStructure
								invoked.AccountingEntity			= each.AccountingEntity
								invoked.AccountingUnit 				= AccountingUnit
								invoked.ParentNodeGroup				= each.ParentNodeGroup							
								invoked.DisplayAccountingUnit		= AccountingUnit
								invoked.AccountingUnitType			= AccountingUnitType							
								invoked.ZoneAccountingUnit			= each.ZoneAccountingUnit
								
						invoke BuildShadowFileForAccountingUnit each.AccountingUnitStructure
							invoked.PrmFinanceEnterpriseGroup 		= FinanceEnterpriseGroup
							invoked.PrmAccountingEntity			    = AccountingEntity
							invoked.PrmAccountingUnit			    = AccountingUnit		

		SetLevel is an Instance Action
			restricted
			
			Action Rules	
				if (!AccountingUnitType.Posting)
					LevelCalcAccountingUnit = AccountingUnit
					LocalLevel		        = 0
					while (!LevelCalcAccountingUnit = DerivedTopNode) 
						LevelCalcAccountingUnit	    = LevelCalcAccountingUnit.AccountingUnitInContextStructureRel.ParentNodeGroup.DimensionNode
						LocalLevel			   		+= 1
					Level 					   		= LocalLevel
					ParentAccountingUnit    		= DerivedParentAccountingUnit									

		UpdateLevel is an Instance Action
			restricted
			
			Parameters
				PrmLevel				  is Numeric 3
					default label is "Level"
				PrmParentAccountingUnit	  is like AccountingUnit
					default label is "ParentAccountingUnit"
				
			Action Rules
				if (!AccountingUnitType.Posting)	
					Level				 = PrmLevel
					ParentAccountingUnit = PrmParentAccountingUnit	
							
		SetIncludeBudgetEditOnPostingDimensions is an Instance Action
			valid when (SummaryAccountingUnit)
			
			Parameters
				IncludeOrExclude	is Numeric 1
					States
						Include		value is 1
						Exclude		value is 2
			
			Parameter Rules
				IncludeOrExclude
					required
					
			Action Rules
			
				for each AccountingUnitShadow(SummaryAccountingUnit) set
					if (each.AccountingUnitType.Posting)
						invoke Update each.AccountingUnit
							invoked.TransientIncludeOrExclude = true
							if (IncludeOrExclude.Include)
								invoked.IncludeInBudgetEdit = true
								invoked.TransientIncludeInBudgetEdit = true
							else
								invoked.IncludeInBudgetEdit = false
								invoked.TransientIncludeInBudgetEdit = false
							 
		
		UpdateBODIdFields is an Instance Action
			restricted
			Parameters
				PrmAccountingEntity  is Alpha size 22
					default label is "AccountingEntity"
				PrmLocation          is Alpha size 22
					default label is "Location"
				PrmDocumentID        is Alpha size 100
					default label is "DocumentID"
				PrmRevision          is Alpha size 22
					default label is "Revision"
				PrmSystemOfRecord    is Alpha size 1
					default label is "SystemOfRecord"
			Action Rules
				if (bod id.AccountingEntity != PrmAccountingEntity)
					bod id.AccountingEntity 	= PrmAccountingEntity
				if (bod id.Location != PrmLocation)
					bod id.Location				= PrmLocation
				if (bod id.DocumentID != PrmDocumentID)
					bod id.DocumentID			= PrmDocumentID
				if (bod id.Revision != PrmRevision)
					bod id.Revision				= PrmRevision
				if (bod id.SystemOfRecord != PrmSystemOfRecord)
					bod id.SystemOfRecord		= PrmSystemOfRecord
				
        FixupSequenceNumbers is a Set Action
            restricted

            Parameters
                PrmFinanceEnterpriseGroup              is a FinanceEnterpriseGroup
                	default label is "FinanceEnterpriseGroup"
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup)
            Action Rules
                Instance Rules
                    if (SequenceNumber = 0 )
                        increment FinanceEnterpriseGroup.AccountingUnitLastSeq                    
                        SequenceNumber = FinanceEnterpriseGroup.AccountingUnitLastSeq

        FixupDisplayAccountingUnit is a Set Action
            restricted

            Parameters
                PrmFinanceEnterpriseGroup              is a FinanceEnterpriseGroup
                	default label is "FinanceEnterpriseGroup"
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
                and    AccountingUnitType.Posting)
            Action Rules
                Instance Rules
                	DisplayAccountingUnit = AccountingUnit
                	
		RebuildOrganizationPairs is a Set Action
			restricted
			Parameters
			Instance Selection
				where (FinanceEnterpriseGroup = FinanceEnterpriseGroup
				and    AccountingUnitType.Posting)
				
			Action Rules
			
				Instance Rules
					if (CodeBlockRelationRel exists)
						invoke SystemCreate CodeBlockRelationDetail
							resume on error
				            invoked.FinanceEnterpriseGroup            = FinanceEnterpriseGroup
				            invoked.CodeBlockRelation                 = CodeBlockRelationRel.CodeBlockRelation
				            invoked.AccountingEntity                  = AccountingEntity
				            invoked.AccountingUnit                    = AccountingUnit
					
		RenameSummaryNodes is a Set Action
			restricted
			
			Parameters	
				PrmFinanceEnterpriseGroup 	is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
				PrmAccountingUnitStructure	is an AccountingUnitStructure
					default label is "AccountingUnitStructure"
				
			Instance Selection
				where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and    AccountingUnitType.Summary)
			
			Local Fields
				NewAccountingUnitValue		is like AccountingUnit
				NewParentValue				is like AccountingUnit
				NewDisplayAccountingUnit	is like AccountingUnit
				
			Action Rules
				
				Instance Rules
					if (!AccountingUnit like LikeSummaryPrefix)
						NewAccountingUnit 	    	= AccountingUnit	
						NewDisplayAccountingUnit 	= AccountingUnit				
						NewAccountingUnitValue  	= SummaryNodeString
						if (ParentAccountingUnit entered)
							NewAccountingUnit   	= ParentAccountingUnit
							NewParentValue 			= ParentNodeString
						else
							initialize NewParentValue
						invoke Delete
						invoke CreateNoRules
							fill in fields from this instance
							invoked.AccountingUnit		    = NewAccountingUnitValue
							invoked.ParentAccountingUnit    = NewParentValue
							invoked.DisplayAccountingUnit   = NewDisplayAccountingUnit
							invoked.DimensionStructure		= PrmAccountingUnitStructure
					
		ConvertToChildHierarchy is a Set Action
			restricted
			
			Parameters
				PrmFinanceEnterpriseGroup 	is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
				PrmAccountingUnitStructure	is an AccountingUnitStructure
					default label is "AccountingUnitStructure"
				
			Instance Selection
				where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup)
			
			Local Fields
				CurrentEntityNode			is like AccountingUnit
				
			Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
				
			Action Rules
				FinanceEnterpriseGroup Set Rules
				
				AccountingEntity Set Rules
					Entrance Rules
						NewEntity		  = AccountingEntity
						LocalEntityNode   = EntityNodeString
						CurrentEntityNode = LocalEntityNode
						invoke Create
							invoked.FinanceEnterpriseGroup = FinanceEnterpriseGroup
							invoked.AccountingEntity	   = AccountingEntity
							invoked.AccountingUnit		   = LocalEntityNode
							invoked.AccountingUnitType	   = 4
							invoked.DimensionStructure	   = PrmAccountingUnitStructure
							invoked.Description			   = AccountingEntity.Name 	
							invoked.DisplayAccountingUnit  = EntityNodeMinusPrefix
					 
				Instance Rules
					if (AccountingUnitType.Summary)
						if (!ParentAccountingUnit entered)
							ParentAccountingUnit 		  = CurrentEntityNode
						DimensionStructure       		  = PrmAccountingUnitStructure
					else
						if (AccountingUnitType.Posting)
							if (!ParentAccountingUnit entered)
								ParentAccountingUnit      = CurrentEntityNode
							else
								NewAccountingUnit 		  = ParentAccountingUnit
								ParentAccountingUnit 	  = SummaryNodeString	
							DisplayAccountingUnit	  	  = AccountingUnit
				
					if (!AccountingUnitType.Node
					and !AccountingUnitType.Entity)
						invoke Create AccountingUnitHierarchy
							invoked.FinanceEnterpriseGroup 	     = FinanceEnterpriseGroup
							invoked.AccountingUnitStructure      = PrmAccountingUnitStructure
							invoked.AccountingEntity			 = AccountingEntity
							invoked.AccountingUnit		   	     = AccountingUnit
							invoked.DisplayAccountingUnit	     = DisplayAccountingUnit
							invoked.ParentNodeGroup.DimensionEntity = AccountingEntity
							invoked.ParentNodeGroup.DimensionNode   = ParentAccountingUnit
							invoked.AccountingUnitType		     = AccountingUnitType
							invoked.SystemAccountingUnit	     = OldSystemAccountingUnit
							invoked.IsAZoneAccountingUnit        = OldIsAZoneAccountingUnit
							invoked.ZoneAccountingUnit			 = OldZoneAccountingUnit
							invoked.EntityZoneAccountingUnit 	 = OldEntityZoneAccountingUnit
							invoked.DefaultZoneAccountingUnit	 = OldDefaultZoneAccountingUnit
					    	invoked.InterEntityAccountingUnit	= InterEntityAccountingUnit	
						if (AccountingUnitType.Posting)
							initialize ParentAccountingUnit
							initialize Level
							initialize DimensionStructure

		ExportToUpload is an Instance Action
			restricted

			Parameters
				PrmFinanceEnterpriseGroup  is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
				PrmAccountingUnitStructure is an AccountingUnitStructure
					default label is "AccountingUnitStructure"
				PrmRunGroup				   is AlphaUpper 30
					default label is "RunGroup"
				PrmSingleRecordOnly		   is Boolean
				
			Local Fields
				RecordCount			is Numeric 4								

			Action Rules
				if (!AccountingUnitType.Node
				and !AccountingUnitType.Entity)
					NewEntity			= AccountingEntity
					invoke Create AccountingUnitUpload
						fill in fields from this instance
						fill in fields from AccountingUnitInContextStructureRel
						invoked.AccountingUnitStructure 	  = AccountingUnitStructure
						invoked.AccountingUnitUpload.RunGroup = PrmRunGroup
						invoked.RecordType				 = AccountingUnitType
						if (ParentDimension = EntityNodeString)
							invoked.ParentAccountingUnit 	= blank
							invoked.SequenceAccountingUnit	= AccountingUnit
						else
							invoked.ParentAccountingUnit 			= DerivedParentDisplayAccountingUnit
							invoked.ParentSequenceAccountingUnit 	= DerivedParentAccountingUnit
							invoked.SequenceAccountingUnit			= AccountingUnit
						if (AccountingUnitType.Summary)
							invoked.AccountingUnit      	= DisplayAccountingUnit

				if ((!PrmSingleRecordOnly)
				and (!AccountingUnitType.Posting))
					for each AccountingUnitChildrenRel
						invoke ExportToUpload each in foreground
							invoked.PrmFinanceEnterpriseGroup		 = PrmFinanceEnterpriseGroup
							invoked.PrmAccountingUnitStructure		 = PrmAccountingUnitStructure
							invoked.PrmRunGroup						 = PrmRunGroup
						RecordCount += 1
						if (RecordCount = 100)
							commit transaction
							RecordCount = 0				
					commit transaction								

		UpdateDescription is an Instance Action
			restricted
			
			Parameters
				PrmDescription			is a Description
					default label is "Description"
				
			Action Rules
				Description				= PrmDescription
			Exit Rules
				include TriggerBODForCreateOrUpdate
											
		CleanupUnusedAccountingUnits is a Set Action
			restricted
			
			Instance Selection
				where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and    NotUsedInAStructure)

			Parameters
				PrmFinanceEnterpriseGroup  is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
				PrmAccountingUnitStructure is an AccountingUnitStructure
					default label is "AccountingUnitStructure"
									
			Parameter Rules
				PrmFinanceEnterpriseGroup
					required
				PrmAccountingUnitStructure
					required
					constraint (PrmAccountingUnitStructure.UnusedDimensionStructure)
						"ActionNotValidForStructure<PrmAccountingUnitStructure>"
						
			Action Rules
				Instance Rules
					LocalInvokedByUnusedStructure = true
					include CheckEntityNode					
					invoke AddPostingAccountingUnitToStructure
						invoked.PrmStructure      		= PrmAccountingUnitStructure
						invoked.PrmParentAccountingUnit = DerivedEntityNode			
						
		BODDataInitialLoadAccountingUnitCriteria1 is a Set Action
			restricted
			Parameters
				PrmFEG			is a FinanceEnterpriseGroup
				PrmFromAccountingEntity		is an AccountingEntity
				PrmToAccountingEntity		is an AccountingEntity
				PrmFromAccountingUnit		is an AccountingUnit
					context of PrmFromAccountingEntity
				PrmToAccountingUnit			is an AccountingUnit
					context of PrmFromAccountingEntity
			Parameter Rules
			Instance Selection
				where  (((PrmFEG entered
				and		  PrmFEG = FinanceEnterpriseGroup)
				or		  PrmFEG not entered)				
				and    ((PrmFromAccountingEntity entered
				and		 PrmFromAccountingEntity <= AccountingEntity)
				or		 PrmFromAccountingEntity not entered)	
				and    ((PrmToAccountingEntity entered
				and		 PrmToAccountingEntity >= AccountingEntity)
				or		 PrmToAccountingEntity not entered)					
				and		(Active = true))
			Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
				
			Action Rules	
				FinanceEnterpriseGroup Set Rules							
				Instance Rules	
					if (FinanceEnterpriseGroup.BODTrigger)
						Service			= "AccountingUnitService"
						ActionCode	= ActionCode.Create
						increment bod id.VariationID
						LocalBODCurrentTimeStamp.CurrentTimeStamp = current timestamp
						include TriggerAccountingUnit



									
		BODDataInitialLoadAccountingUnitCriteria2 is a Set Action
			restricted
			Parameters
				PrmFEG			is a FinanceEnterpriseGroup
				PrmFromAccountingEntity		is an AccountingEntity
				PrmToAccountingEntity		is an AccountingEntity
				PrmFromAccountingUnit		is an AccountingUnit
					context of PrmFromAccountingEntity
				PrmToAccountingUnit			is an AccountingUnit
					context of PrmFromAccountingEntity
			Parameter Rules
			Instance Selection
				where  (((PrmFEG entered
				and		  PrmFEG = FinanceEnterpriseGroup)
				or		  PrmFEG not entered)				
				and    ((PrmFromAccountingEntity entered
				and		 PrmFromAccountingEntity = AccountingEntity)
				or		 PrmFromAccountingEntity not entered)	
				and    ((PrmFromAccountingUnit entered
				and		 PrmFromAccountingUnit <= AccountingUnit)
				or		 PrmFromAccountingUnit not entered)		
				and    ((PrmToAccountingUnit entered
				and		 PrmToAccountingUnit >= AccountingUnit)
				or		 PrmToAccountingUnit not entered)					
				and		(Active = true))
			Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
				
			Action Rules	
				FinanceEnterpriseGroup Set Rules							
				Instance Rules	
					if (FinanceEnterpriseGroup.BODTrigger)
						Service			= "AccountingUnitService"
						ActionCode	= ActionCode.Create
						increment bod id.VariationID
#ifdef module integration	
						if (bod id.AccountingEntity != DerivedAccountingEntity)
                    		bod id.AccountingEntity  = DerivedAccountingEntity
                		if (bod id.DocumentID != AccountingUnit)
                    		bod id.DocumentID = AccountingUnit
						if (bod id.SystemOfRecord != DerivedSystemOfRecord)
							bod id.SystemOfRecord = DerivedSystemOfRecord
#endif
						LocalBODCurrentTimeStamp.CurrentTimeStamp = current timestamp
						include TriggerAccountingUnit



																																								




		CreateOrDeleteUnitByGrpRelFromUnitToBlank is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingUnitRule	        is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingUnitRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyFromValue			= DerivedEntityAccountingUnit
					LocalKeyToValue				= blank
					if(PrmDeleteFlag)
						invoke Delete CodeBlockRelationDetailFromToRel
					else
						invoke Update CodeBlockRelationDetailFromToRel
							invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
							invoked.CodeBlockRelation                   = PrmCodeBlockRelation
							invoked.AccountingEntity					= AccountingEntity
							invoked.AccountingUnit						= AccountingUnit 
							invoked.DefaultToValue                      = PrmDefaultToValue
					increment LocalCommitCounter
					if (LocalCommitCounter > 50)
						commit transaction
						initialize LocalCommitCounter

		CreateOrDeleteUnitByGrpRelFromUnitToAccount is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingUnitRule    		is an AccountingUnit group
                PrmAccountRule					is a GeneralLedgerChartAccount group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingUnitRule
				PrmAccountRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalAccountingUnitArray		is an AccountingUnitArray
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalArrayCounter > 0)
							invoke CreateOrDeleteAccByGrpRelFromUnitToAccount GeneralLedgerChartAccount
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
								invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingEntity
                            	invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingUnit
								invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
                            	invoked.PrmAccountRule           		= PrmAccountRule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit
					else
						invoke CreateOrDeleteAccByGrpRelFromUnitToAccount GeneralLedgerChartAccount
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
							invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingEntity
							invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingUnit
							invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
							invoked.PrmAccountRule           		= PrmAccountRule
							invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
							invoked.PrmUniqueID						= PrmUniqueID
						initialize LocalAccountingUnitArray
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit

		CreateOrDeleteUnitByGrpRelFromUnitToProject is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingUnitRule    		is an AccountingUnit group
                PrmProjectRule					is a Project group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingUnitRule
				PrmProjectRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalAccountingUnitArray		is an AccountingUnitArray
            Instance Selection
            	where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalArrayCounter > 0)
							invoke CreateOrDeleteProjByGrpRelFromUnitToProject Project
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
								invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingEntity
                            	invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingUnit
								invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
                            	invoked.PrmProjectRule           		= PrmProjectRule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit
					else
						invoke CreateOrDeleteProjByGrpRelFromUnitToProject Project
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
							invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingEntity
							invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingUnit
							invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
							invoked.PrmProjectRule           		= PrmProjectRule
							invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
							invoked.PrmUniqueID						= PrmUniqueID
						initialize LocalAccountingUnitArray
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit

		CreateOrDeleteUnitByGrpRelFromUnitToDimension1 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingUnitRule    		is an AccountingUnit group
                PrmDimension1Rule				is a FinanceDimension1 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingUnitRule
				PrmDimension1Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalAccountingUnitArray		is an AccountingUnitArray
            Instance Selection
            	where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim1ByGrpRelFromUnitToDimension1 FinanceDimension1
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
								invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingEntity
                            	invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingUnit
								invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
                            	invoked.PrmDimension1Rule           	= PrmDimension1Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit
					else
						invoke CreateOrDeleteDim1ByGrpRelFromUnitToDimension1 FinanceDimension1
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
							invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingEntity
							invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingUnit
							invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
							invoked.PrmDimension1Rule           	= PrmDimension1Rule
							invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
							invoked.PrmUniqueID						= PrmUniqueID
						initialize LocalAccountingUnitArray
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit

		CreateOrDeleteUnitByGrpRelFromUnitToDimension2 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingUnitRule    		is an AccountingUnit group
                PrmDimension2Rule				is a FinanceDimension2 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingUnitRule
				PrmDimension2Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalAccountingUnitArray		is an AccountingUnitArray
            Instance Selection
            	where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim2ByGrpRelFromUnitToDimension2 FinanceDimension2
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
								invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingEntity
                            	invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingUnit
								invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
                            	invoked.PrmDimension2Rule           	= PrmDimension2Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit
					else
						invoke CreateOrDeleteDim2ByGrpRelFromUnitToDimension2 FinanceDimension2
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
							invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingEntity
							invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingUnit
							invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
							invoked.PrmDimension2Rule           	= PrmDimension2Rule
							invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
							invoked.PrmUniqueID						= PrmUniqueID
						initialize LocalAccountingUnitArray
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit

		CreateOrDeleteUnitByGrpRelFromUnitToDimension3 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingUnitRule    		is an AccountingUnit group
                PrmDimension3Rule				is a FinanceDimension3 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingUnitRule
				PrmDimension3Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalAccountingUnitArray		is an AccountingUnitArray
            Instance Selection
            	where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim3ByGrpRelFromUnitToDimension3 FinanceDimension3
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
								invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingEntity
                            	invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingUnit
								invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
                            	invoked.PrmDimension3Rule           	= PrmDimension3Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit
					else
						invoke CreateOrDeleteDim3ByGrpRelFromUnitToDimension3 FinanceDimension3
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
							invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingEntity
							invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingUnit
							invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
							invoked.PrmDimension3Rule           	= PrmDimension3Rule
							invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
							invoked.PrmUniqueID						= PrmUniqueID
						initialize LocalAccountingUnitArray
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit

		CreateOrDeleteUnitByGrpRelFromUnitToDimension4 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingUnitRule    		is an AccountingUnit group
                PrmDimension4Rule				is a FinanceDimension4 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingUnitRule
				PrmDimension4Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalAccountingUnitArray		is an AccountingUnitArray
            Instance Selection
            	where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim4ByGrpRelFromUnitToDimension4 FinanceDimension4
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
								invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingEntity
                            	invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingUnit
								invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
                            	invoked.PrmDimension4Rule           	= PrmDimension4Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit
					else
						invoke CreateOrDeleteDim4ByGrpRelFromUnitToDimension4 FinanceDimension4
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
							invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingEntity
							invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingUnit
							invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
							invoked.PrmDimension4Rule           	= PrmDimension4Rule
							invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
							invoked.PrmUniqueID						= PrmUniqueID
						initialize LocalAccountingUnitArray
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit

		CreateOrDeleteUnitByGrpRelFromUnitToDimension5 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingUnitRule    		is an AccountingUnit group
                PrmDimension5Rule				is a FinanceDimension5 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingUnitRule
				PrmDimension5Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalAccountingUnitArray		is an AccountingUnitArray
            Instance Selection
            	where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim5ByGrpRelFromUnitToDimension5 FinanceDimension5
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
								invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingEntity
                            	invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingUnit
								invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
                            	invoked.PrmDimension5Rule           	= PrmDimension5Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit
					else
						invoke CreateOrDeleteDim5ByGrpRelFromUnitToDimension5 FinanceDimension5
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
							invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingEntity
							invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingUnit
							invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
							invoked.PrmDimension5Rule           	= PrmDimension5Rule
							invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
							invoked.PrmUniqueID						= PrmUniqueID
						initialize LocalAccountingUnitArray
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit
						
		CreateOrDeleteUnitByGrpRelFromUnitToDimension6 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingUnitRule    		is an AccountingUnit group
                PrmDimension6Rule				is a FinanceDimension6 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingUnitRule
				PrmDimension6Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalAccountingUnitArray		is an AccountingUnitArray
            Instance Selection
            	where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim6ByGrpRelFromUnitToDimension6 FinanceDimension6
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
								invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingEntity
                            	invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingUnit
								invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
                            	invoked.PrmDimension6Rule           	= PrmDimension6Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit
					else
						invoke CreateOrDeleteDim6ByGrpRelFromUnitToDimension6 FinanceDimension6
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
							invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingEntity
							invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingUnit
							invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
							invoked.PrmDimension6Rule           	= PrmDimension6Rule
							invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
							invoked.PrmUniqueID						= PrmUniqueID
						initialize LocalAccountingUnitArray
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit
						
		CreateOrDeleteUnitByGrpRelFromUnitToDimension7 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingUnitRule    		is an AccountingUnit group
                PrmDimension7Rule				is a FinanceDimension7 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingUnitRule
				PrmDimension7Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalAccountingUnitArray		is an AccountingUnitArray
            Instance Selection
            	where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim7ByGrpRelFromUnitToDimension7 FinanceDimension7
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
								invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingEntity
                            	invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingUnit
								invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
                            	invoked.PrmDimension7Rule           	= PrmDimension7Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit
					else
						invoke CreateOrDeleteDim7ByGrpRelFromUnitToDimension7 FinanceDimension7
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
							invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingEntity
							invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingUnit
							invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
							invoked.PrmDimension7Rule           	= PrmDimension7Rule
							invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
							invoked.PrmUniqueID						= PrmUniqueID
						initialize LocalAccountingUnitArray
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit

		CreateOrDeleteUnitByGrpRelFromUnitToDimension8 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingUnitRule    		is an AccountingUnit group
                PrmDimension8Rule				is a FinanceDimension8 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingUnitRule
				PrmDimension8Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalAccountingUnitArray		is an AccountingUnitArray
            Instance Selection
            	where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim8ByGrpRelFromUnitToDimension8 FinanceDimension8
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
								invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingEntity
                            	invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingUnit
								invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
                            	invoked.PrmDimension8Rule           	= PrmDimension8Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit
					else
						invoke CreateOrDeleteDim8ByGrpRelFromUnitToDimension8 FinanceDimension8
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
							invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingEntity
							invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingUnit
							invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
							invoked.PrmDimension8Rule           	= PrmDimension8Rule
							invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
							invoked.PrmUniqueID						= PrmUniqueID
						initialize LocalAccountingUnitArray
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit

		CreateOrDeleteUnitByGrpRelFromUnitToDimension9 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingUnitRule    		is an AccountingUnit group
                PrmDimension9Rule				is a FinanceDimension9 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingUnitRule
				PrmDimension9Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalAccountingUnitArray		is an AccountingUnitArray
            Instance Selection
            	where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim9ByGrpRelFromUnitToDimension9 FinanceDimension9
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
								invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingEntity
                            	invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingUnit
								invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
                            	invoked.PrmDimension9Rule           	= PrmDimension9Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit
					else
						invoke CreateOrDeleteDim9ByGrpRelFromUnitToDimension9 FinanceDimension9
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
							invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingEntity
							invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingUnit
							invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
							invoked.PrmDimension9Rule           	= PrmDimension9Rule
							invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
							invoked.PrmUniqueID						= PrmUniqueID
						initialize LocalAccountingUnitArray
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit

		CreateOrDeleteUnitByGrpRelFromUnitToDimension10 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingUnitRule    		is an AccountingUnit group
                PrmDimension10Rule				is a FinanceDimension10 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingUnitRule
				PrmDimension10Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalAccountingUnitArray		is an AccountingUnitArray
            Instance Selection
            	where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim10ByGrpRelFromUnitToDimension10 FinanceDimension10
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
								invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingEntity
                            	invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[1].AccountingUnit
								invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
                            	invoked.PrmDimension10Rule           	= PrmDimension10Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit
					else
						invoke CreateOrDeleteDim10ByGrpRelFromUnitToDimension10 FinanceDimension10
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
							invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmAccountingEntity				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingEntity
							invoked.PrmAccountingUnit				= LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter-1].AccountingUnit
							invoked.PrmAccountingUnitArray    		= LocalAccountingUnitArray
							invoked.PrmDimension10Rule           	= PrmDimension10Rule
							invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
							invoked.PrmUniqueID						= PrmUniqueID
						initialize LocalAccountingUnitArray
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity = AccountingEntity
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit = AccountingUnit
						LocalAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit = DerivedEntityAccountingUnit


		CreateOrDeleteUnitByGrpRelFromBlankToUnit is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingUnitRule	        is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingUnitRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyFromValue			= blank
					LocalKeyToValue				= DerivedEntityAccountingUnit
					if(PrmDeleteFlag)
						invoke Delete CodeBlockRelationDetailFromToRel
					else
						invoke Update CodeBlockRelationDetailFromToRel
							invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
							invoked.CodeBlockRelation                   = PrmCodeBlockRelation
							invoked.AccountingEntity					= AccountingEntity
							invoked.AccountingUnit						= AccountingUnit 
							invoked.DefaultToValue                      = PrmDefaultToValue
					increment LocalCommitCounter
					if (LocalCommitCounter > 50)
						commit transaction
						initialize LocalCommitCounter

		CreateOrDeleteUnitByGrpRelFromEntityToUnit is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingEntity				is like AccountingEntity
                PrmAccountingEntityArray		is like AccountingEntityArray
                PrmAccountingUnitRule	        is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingEntity
				PrmAccountingUnitRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyToValue				= AccountingUnit
					if(PrmDeleteFlag)
						while (PrmAccountingEntityArray.AccountingEntity[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmAccountingEntityArray.AccountingEntity[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmAccountingEntityArray.AccountingEntity[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmAccountingEntityArray.AccountingEntity[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.AccountingEntity           			= PrmAccountingEntityArray.AccountingEntity[LocalArrayCounter]
								invoked.AccountingUnit						= AccountingUnit    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteUnitByGrpRelFromAccountToUnit is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccount					    is like GeneralLedgerChartAccount
                PrmAccountArray					is like AccountArray
                PrmAccountingUnitRule	        is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccount
				PrmAccountingUnitRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyToValue				= DerivedEntityAccountingUnit
					if(PrmDeleteFlag)
						while (PrmAccountArray.GeneralLedgerChartAccount[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmAccountArray.GeneralLedgerChartAccount[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmAccountArray.GeneralLedgerChartAccount[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmAccountArray.GeneralLedgerChartAccount[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.GeneralLedgerChartAccount			= PrmAccountArray.GeneralLedgerChartAccount[LocalArrayCounter]
								invoked.AccountingEntity					= AccountingEntity
								invoked.AccountingUnit						= AccountingUnit    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteUnitByGrpRelFromProjectToUnit is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmProject					    is like Project
                PrmProjectArray					is like ProjectArray
                PrmAccountingUnitRule	        is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmProject
				PrmAccountingUnitRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyToValue				= DerivedEntityAccountingUnit
					if(PrmDeleteFlag)
						while (PrmProjectArray.Project[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmProjectArray.Project[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmProjectArray.Project[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmProjectArray.Project[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Project           					= PrmProjectArray.Project[LocalArrayCounter]
								invoked.AccountingEntity					= AccountingEntity
								invoked.AccountingUnit						= AccountingUnit    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteUnitByGrpRelFromDimension1ToUnit is a Set Action
			restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension1				    is like FinanceDimension1
                PrmDimension1Array				is like FinanceDimension1Array
                PrmAccountingUnitRule	        is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension1
				PrmAccountingUnitRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyToValue				= DerivedEntityAccountingUnit
					if(PrmDeleteFlag)
						while (PrmDimension1Array.FinanceDimension1[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension1Array.FinanceDimension1[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension1Array.FinanceDimension1[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension1Array.FinanceDimension1[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension1		  					= PrmDimension1Array.FinanceDimension1[LocalArrayCounter]
								invoked.AccountingEntity					= AccountingEntity
								invoked.AccountingUnit						= AccountingUnit    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteUnitByGrpRelFromDimension2ToUnit is a Set Action
			restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension2				    is like FinanceDimension2
                PrmDimension2Array				is like FinanceDimension2Array
                PrmAccountingUnitRule	        is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension2
				PrmAccountingUnitRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyToValue				= DerivedEntityAccountingUnit
					if(PrmDeleteFlag)
						while (PrmDimension2Array.FinanceDimension2[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension2Array.FinanceDimension2[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension2Array.FinanceDimension2[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension2Array.FinanceDimension2[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension2		  					= PrmDimension2Array.FinanceDimension2[LocalArrayCounter]
								invoked.AccountingEntity					= AccountingEntity
								invoked.AccountingUnit						= AccountingUnit    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
								
		CreateOrDeleteUnitByGrpRelFromDimension3ToUnit is a Set Action
			restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension3				    is like FinanceDimension3
                PrmDimension3Array				is like FinanceDimension3Array
                PrmAccountingUnitRule	        is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension3
				PrmAccountingUnitRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyToValue				= DerivedEntityAccountingUnit
					if(PrmDeleteFlag)
						while (PrmDimension3Array.FinanceDimension3[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension3Array.FinanceDimension3[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension3Array.FinanceDimension3[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension3Array.FinanceDimension3[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension3		  					= PrmDimension3Array.FinanceDimension3[LocalArrayCounter]
								invoked.AccountingEntity					= AccountingEntity
								invoked.AccountingUnit						= AccountingUnit    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteUnitByGrpRelFromDimension4ToUnit is a Set Action
			restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension4				    is like FinanceDimension4
                PrmDimension4Array				is like FinanceDimension4Array
                PrmAccountingUnitRule	        is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension4
				PrmAccountingUnitRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyToValue				= DerivedEntityAccountingUnit
					if(PrmDeleteFlag)
						while (PrmDimension4Array.FinanceDimension4[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension4Array.FinanceDimension4[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension4Array.FinanceDimension4[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension4Array.FinanceDimension4[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension4		  					= PrmDimension4Array.FinanceDimension4[LocalArrayCounter]
								invoked.AccountingEntity					= AccountingEntity
								invoked.AccountingUnit						= AccountingUnit    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteUnitByGrpRelFromDimension5ToUnit is a Set Action
			restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension5				    is like FinanceDimension5
                PrmDimension5Array				is like FinanceDimension5Array
                PrmAccountingUnitRule	        is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension5
				PrmAccountingUnitRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyToValue				= DerivedEntityAccountingUnit
					if(PrmDeleteFlag)
						while (PrmDimension5Array.FinanceDimension5[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension5Array.FinanceDimension5[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension5Array.FinanceDimension5[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension5Array.FinanceDimension5[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension5		  					= PrmDimension5Array.FinanceDimension5[LocalArrayCounter]
								invoked.AccountingEntity					= AccountingEntity
								invoked.AccountingUnit						= AccountingUnit    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
		
		CreateOrDeleteUnitByGrpRelFromDimension6ToUnit is a Set Action
			restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension6				    is like FinanceDimension6
                PrmDimension6Array				is like FinanceDimension6Array
                PrmAccountingUnitRule	        is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension6
				PrmAccountingUnitRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyToValue				= DerivedEntityAccountingUnit
					if(PrmDeleteFlag)
						while (PrmDimension6Array.FinanceDimension6[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension6Array.FinanceDimension6[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension6Array.FinanceDimension6[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension6Array.FinanceDimension6[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension6		  					= PrmDimension6Array.FinanceDimension6[LocalArrayCounter]
								invoked.AccountingEntity					= AccountingEntity
								invoked.AccountingUnit						= AccountingUnit    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteUnitByGrpRelFromDimension7ToUnit is a Set Action
			restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension7				    is like FinanceDimension7
                PrmDimension7Array				is like FinanceDimension7Array
                PrmAccountingUnitRule	        is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension7
				PrmAccountingUnitRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyToValue				= DerivedEntityAccountingUnit
					if(PrmDeleteFlag)
						while (PrmDimension7Array.FinanceDimension7[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension7Array.FinanceDimension7[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension7Array.FinanceDimension7[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension7Array.FinanceDimension7[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension7		  					= PrmDimension7Array.FinanceDimension7[LocalArrayCounter]
								invoked.AccountingEntity					= AccountingEntity
								invoked.AccountingUnit						= AccountingUnit    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
		
		CreateOrDeleteUnitByGrpRelFromDimension8ToUnit is a Set Action
			restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension8				    is like FinanceDimension8
                PrmDimension8Array				is like FinanceDimension8Array
                PrmAccountingUnitRule	        is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension8
				PrmAccountingUnitRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyToValue				= DerivedEntityAccountingUnit
					if(PrmDeleteFlag)
						while (PrmDimension8Array.FinanceDimension8[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension8Array.FinanceDimension8[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension8Array.FinanceDimension8[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension8Array.FinanceDimension8[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension8		  					= PrmDimension8Array.FinanceDimension8[LocalArrayCounter]
								invoked.AccountingEntity					= AccountingEntity
								invoked.AccountingUnit						= AccountingUnit    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteUnitByGrpRelFromDimension9ToUnit is a Set Action
			restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension9				    is like FinanceDimension9
                PrmDimension9Array				is like FinanceDimension9Array
                PrmAccountingUnitRule	        is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension9
				PrmAccountingUnitRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyToValue				= DerivedEntityAccountingUnit
					if(PrmDeleteFlag)
						while (PrmDimension9Array.FinanceDimension9[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension9Array.FinanceDimension9[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension9Array.FinanceDimension9[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension9Array.FinanceDimension9[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension9		  					= PrmDimension9Array.FinanceDimension9[LocalArrayCounter]
								invoked.AccountingEntity					= AccountingEntity
								invoked.AccountingUnit						= AccountingUnit    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteUnitByGrpRelFromDimension10ToUnit is a Set Action
			restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension10				    is like FinanceDimension10
                PrmDimension10Array				is like FinanceDimension10Array
                PrmAccountingUnitRule	        is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension10
				PrmAccountingUnitRule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	AccountingUnit within PrmAccountingUnitRule
                and	AccountingUnitType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				AccountingEntity
				AccountingUnit
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyToValue				= DerivedEntityAccountingUnit
					if(PrmDeleteFlag)
						while (PrmDimension10Array.FinanceDimension10[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension10Array.FinanceDimension10[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension10Array.FinanceDimension10[LocalArrayCounter] entered)
							LocalKeyFromValue			= PrmDimension10Array.FinanceDimension10[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension10		  					= PrmDimension10Array.FinanceDimension10[LocalArrayCounter]
								invoked.AccountingEntity					= AccountingEntity
								invoked.AccountingUnit						= AccountingUnit    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter



		RequestNewAccountingUnit is a Create RequestAction
			action comment required
			request action process is RequestNewFEGDimensions
			request action linkback webapp is FinancialBusinessAnalyst
			allow user fields as parameters
			Parameters
				RequesterActor				is an Actor
			 	RequestedBy					is Alpha 100
	 			RequesterPhone				is a Telephone
			 	RequesterEmail				is an EmailAddress
				RequestPriority				is Numeric 1
					States
						High				value is 1
						Medium				value is 2
						Low					value is 3
				NeededBy					is Date				
				FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"	
				AccountingEntity
					default label is "AccountingEntity"
				CreateAccountingUnitType	is Numeric 1
					States
			    		Summary	value is 2
			    		Posting	value is 1
				AccountingUnitType
				AccountingUnitStructure
				DisplayAccountingUnit			is like AccountingUnit
					translatable
				PrmAccountingUnit				is like AccountingUnit
				ParentAccountingUnit			is a AccountingUnit
				Description
				BudgetIdentifier
				Active
				SystemAccountingUnit			is Boolean
				InterEntityAccountingUnit		is Boolean
					default label is "InterAccountingEntityAccountingUnit"
				IncludeInBudgetEdit				is Boolean
				AddressCode

			Parameter Rules
				RequestPriority
					required
				NeededBy
					required
				RequesterActor
					initial value is actor
					default to actor
				RequestedBy
					initial value is RequesterActor.PersonName.GivenName + " " + RequesterActor.PersonName.FamilyName
					default to RequesterActor.PersonName.GivenName + " " + RequesterActor.PersonName.FamilyName
				RequesterPhone
					initial value is RequesterActor.ContactInfo.TelephoneNumber
					default to RequesterActor.ContactInfo.TelephoneNumber
				RequesterEmail
					initial value is RequesterActor.ContactInfo.EmailAddress
					default to RequesterActor.ContactInfo.EmailAddress				
				AccountingUnitType
					default to CreateAccountingUnitType
					cannot be changed
						"CannotChangeAccountingUnitType"
					required
				AccountingUnitStructure
					initial value is first AccountingUnitSummaryRel.DimensionStructure
					default to first AccountingUnitSummaryRel.DimensionStructure
				DisplayAccountingUnit
					default to PrmAccountingUnit
				PrmAccountingUnit
					required
						"Field<FinanceEnterpriseGroup.AccountingUnitLabel>Required"
					if (FinanceEnterpriseGroup.AccountingUnitRegularExpression entered
					and AccountingUnitType.Posting)
						constraint (PrmAccountingUnit matches FinanceEnterpriseGroup.AccountingUnitRegularExpression)
							"InvalidFormatFor<FinanceEnterpriseGroup.AccountingUnitLabel>"
					LocalStructure = AccountingUnitStructure
					LocalFinanceEnterpriseGroup 	= FinanceEnterpriseGroup
					LocalAccountingUnitStructure 	= AccountingUnitStructure
					LocalDisplayAccountingUnit		= DisplayAccountingUnit
					NewEntity						= AccountingEntity
					constraint (!DisplayAccountingUnitRel1 exists)
						"DisplayValueAlreadyExistsFor<first DisplayAccountingUnitRel1.AccountingUnit>"
				Description
					required
				Active
					initial value is true
					if (SystemAccountingUnit)
						Active = true			
					if (InterEntityAccountingUnit)
						Active = true			
				SystemAccountingUnit
					LocalFinanceEnterpriseGroup 	= FinanceEnterpriseGroup
					LocalAccountingUnitStructure 	= AccountingUnitStructure
					NewEntity						= AccountingEntity
					constraint (AccountingUnitType.Posting)
						"MustBeAPostingType<FinanceEnterpriseGroup.AccountingUnitLabel>"		
					constraint (!SystemAccountingUnitRel1 exists)
						"<first SystemAccountingUnitRel1.DisplayAccountingUnit>IsAlreadyDesignatedAsSystem<FinanceEnterpriseGroup.AccountingUnitLabel>"		
				InterEntityAccountingUnit
					constraint (AccountingUnitType.Posting)
						"MustBeAPostingType<FinanceEnterpriseGroup.AccountingUnitLabel>"		
					constraint (!InterEntityAccountingUnitRel exists)
						"<first InterEntityAccountingUnitRel.DisplayAccountingUnit>IsAlreadyDesignatedAsInter<FinanceEnterpriseGroup.AccountingEntityLabel>_<FinanceEnterpriseGroup.AccountingUnitLabel>"
				IncludeInBudgetEdit
					constraint (AccountingUnitType.Posting)
						"NotValidForSummaryDimension"
			
			Entrance Rules
				LocalFinanceEnterpriseGroup 	= FinanceEnterpriseGroup
				LocalAccountingUnitStructure = AccountingUnitStructure
				LocalDisplayAccountingUnit = DisplayAccountingUnit
				
			Action Rules
				invoke Create this instance
					fill in user fields from parameters	
					invoked.FinanceEnterpriseGroup 		= FinanceEnterpriseGroup
					invoked.AccountingEntity			= AccountingEntity
					invoked.AccountingUnitType			= AccountingUnitType
					invoked.AccountingUnit				= PrmAccountingUnit
					invoked.ParentAccountingUnit		= ParentAccountingUnit
					invoked.DisplayAccountingUnit		= DisplayAccountingUnit
					invoked.Description					= Description
					invoked.BudgetIdentifier			= BudgetIdentifier
					invoked.Active						= Active
					invoked.InterEntityAccountingUnit	= InterEntityAccountingUnit
					invoked.SystemAccountingUnit		= SystemAccountingUnit
					invoked.IncludeInBudgetEdit			= IncludeInBudgetEdit
					invoked.AddressCode					= AddressCode
					invoked.ZoneAccountingUnit		    = ParentAccountingUnit.ZoneAccountingUnit
