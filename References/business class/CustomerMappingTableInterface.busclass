CustomerMappingTableInterface is a BusinessClass
    owned by ar
    prefix is CTB

    Ontology
        symbolic key is CustomerMappingTableInterface

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields
		CustomerGroup
        Customer
        InterfacedCustomer
        	default label is "ExternalCustomer"
        Name 					is a VendorName 
        	holds pii
        SearchName

    Sets

        ByCustomer
            indexed
            Sort Order
                CustomerGroup
                Customer

        ByInterfacedCustomer
            indexed
            Sort Order
                CustomerGroup
                InterfacedCustomer

    Field Rules

		CustomerGroup
			required
		
        Customer
            required
        
        InterfacedCustomer
        	required
        	    
    Actions
    
    	Create is a Create Action
    		restricted
    		
    	Update is an Update Action
    		restricted
    		
    	Delete is a Delete Action
    		restricted

		Anonymize is an Instance Action	
			restricted
			Action Rules
				Name		= Customer
				SearchName	= Customer
			
			Exit Rules
				invoke Create AnonymizeLog
					invoked.FinanceEnterpriseGroup			= CustomerGroup.CustomerBusinessGroup.FinanceEnterpriseGroup
					invoked.Status							= 1
					invoked.AffectedBusinessClass			= "AR12"
					invoked.CustomerGroup					= CustomerGroup
					invoked.Customer						= Customer
					invoked.CustomerMappingTableInterface	= CustomerMappingTableInterface
			
	    PurgeAuditLog is an Instance Action	
	    	restricted
	        Action Rules
				invoke purge audit log entries
				 
          	Exit Rules
				invoke Create AnonymizeLog
					invoked.FinanceEnterpriseGroup			= CustomerGroup.CustomerBusinessGroup.FinanceEnterpriseGroup
					invoked.Status							= 2
					invoked.AffectedBusinessClass			= "AR12"
					invoked.CustomerGroup					= CustomerGroup
					invoked.Customer						= Customer
					invoked.CustomerMappingTableInterface	= CustomerMappingTableInterface
