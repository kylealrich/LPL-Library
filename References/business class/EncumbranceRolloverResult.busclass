EncumbranceRolloverResult is a BusinessClass
	owned by GeneralLedger
	prefix is GLER		
	default label is "GlobalLedgerEncumbranceRollover"

	Ontology
		symbolic key is EncumbranceRolloverResult

	Patterns
		disable AuditIndex
		disable Auditing 
		disable EffectiveDated
		disable DataTranslations

	Persistent Fields
		RunTime								is TimeStamp
		BasisEndDate						is Date
		RollOverStatus						is Numeric 1
			States
				Running							value is 1
				Completed						value is 2
		RollOverType						is Numeric 1
			States
				RegularYERollover				value is 1		
				PriorYearRollover				value is 2		


	Local Fields

	Derived Fields
						
	Field Rules
		RunTime
			default to current timestamp

		RollOverStatus
			initial value is 1	
			default to 1
			
	Conditions
		UseBackgroundPurge
			restricted
			when (instance count of RolloverResultDetail set > 50)
		RolledOverDetailExists
			restricted
			when (CompleteRolloverResultDetailRel exists)

	Rule Blocks

					
    Relations
		CompleteRolloverResultDetailRel is a RolloverResultDetail set

	Sets
    			   				
	Actions

		Create is a Create Action
			restricted

		Update is an Update Action	
			restricted
						
		Purge is a Purge Action
			Action Rules
				if (UseBackgroundPurge)
					invoke PurgeDetailsOfRolloverResult RolloverResultDetail in background
						invoked.PrmFinanceEnterpriseGroup	= FinanceEnterpriseGroup
						invoked.PrmRolloverResult			= EncumbranceRolloverResult
				else
					invoke Purge RolloverResultDetail set			
			
		SetAsRunning is an Instance Action
			default label is untranslatable
			restricted
			Action Rules
				RollOverStatus = RollOverStatus.Running
				
		SetAsCompleted is an Instance Action
			default label is untranslatable
			restricted
			Action Rules
				RollOverStatus = RollOverStatus.Completed
