PfiConfiguration is a BusinessClass
    owned by pfi
    prefix is PfiCS
    contains environment data
	disable data area copy
		preserve target data
    default label is "Configuration"

    Ontology
        symbolic key is PfiConfiguration

    Patterns
        implements CRUD
        implements LightweightAuditing
        disable AuditIndex
        disable AsOfDateProcessing
        disable EffectiveDated
        implements CompoundDocument
            Document Components
                PfiConfigurationProperty set
                PfiClassicConnection set
                PfiM3Connection set
                PfiJDBCConnection set
                PfiTXConnection set
                PfiMQConnection set
                PfiSystemCommandConnection set
                PfiWebRunConnection set
                PfiWebServiceConnection set
                PfiFrontOfficeConnection set
                PfiFileActivityConnection set
                PfiFTPConnection set
                PfiEmailConnection set
                PfiIDMConnection set
                PfiEventHubConnection set
                PfiCloverleafConnection set
                PfiIONConnection set
                PfiSMSConnection set
                PfiLdapConnection set
        implements DynamicCreation

    Persistent Fields

        Description is a PfiDescription

    Derived Fields

        PropertyCount is a DerivedField
            type is Alpha size 20
            if (PfiConfigurationProperty set.exists)
                return PropertyLabelCount
            else
                return PropertyLabel

        PropertyGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiConfigurationProperty set.exists)
                return "(" + instance count of PfiConfigurationProperty set + ")"

        PropertyLabel  is a LabelField
            default label is untranslatable
            "Properties"

        PropertyLabelCount  is a LabelField
            default label is untranslatable
            "Properties<PropertyGetInstance>"        

        EventHubCount is a DerivedField
            type is Alpha size 20
            if (PfiEventHubConnection set.exists)
                return EventHubLabelCount
            else
                return EventHubLabel

        EventHubGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiEventHubConnection set.exists)
                return "(" + instance count of PfiEventHubConnection set + ")"

        EventHubLabel  is a LabelField
            restricted
            default label is untranslatable
            "EventHub"

        EventHubLabelCount  is a LabelField
            restricted
            default label is untranslatable
            "EventHub<EventHubGetInstance>"      

        ClassicCount is a DerivedField
            type is Alpha size 20
            if (PfiClassicConnection set.exists)
                return ClassicLabelCount
            else
                return ClassicLabel

        ClassicGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiClassicConnection set.exists)
                return "(" + instance count of PfiClassicConnection set + ")"

        ClassicLabel  is a LabelField
            default label is untranslatable
            "InforLawson"

        ClassicLabelCount  is a LabelField
            default label is untranslatable
            "InforLawson<ClassicGetInstance>"      

        JDBCCount is a DerivedField
            type is Alpha size 20
            if (PfiJDBCConnection set.exists)
                return JDBCLabelCount
            else
                return JDBCLabel

        JDBCGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiJDBCConnection set.exists)
                return "(" + instance count of PfiJDBCConnection set + ")"

        JDBCLabel  is a LabelField
            default label is untranslatable
            "JDBC"

        JDBCLabelCount  is a LabelField
            default label is untranslatable
            "JDBC<JDBCGetInstance>"        

        IONCount is a DerivedField
            type is Alpha size 20
            if (PfiIONConnection set.exists)
                return IONLabelCount
            else
                return IONLabel

        IONGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiIONConnection set.exists)
                return "(" + instance count of PfiIONConnection set + ")"

        IONLabel  is a LabelField
            default label is untranslatable
            "ION"

        IONLabelCount  is a LabelField
            default label is untranslatable
            "ION<IONGetInstance>"      

        M3Count is a DerivedField           
            type is Alpha size 20
            default label is "M\3Count"
            if (PfiM3Connection set.exists)
                return M3LabelCount
            else
                return M3Label

        M3GetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiM3Connection set.exists)
                return "(" + instance count of PfiM3Connection set + ")"

        M3Label  is a LabelField
            default label is untranslatable
            "M\3"

        M3LabelCount  is a LabelField
            default label is untranslatable
            "M\3<M3GetInstance>"        

        FTPCount is a DerivedField
            type is Alpha size 20
            if (PfiFTPConnection set.exists)
                return FTPLabelCount
            else
                return FTPLabel

        FTPGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiFTPConnection set.exists)
                return "(" + instance count of PfiFTPConnection set + ")"

        FTPLabel  is a LabelField
            default label is untranslatable
            "FileTransfer"

        FTPLabelCount  is a LabelField
            default label is untranslatable
            "FileTransfer<FTPGetInstance>"      

        FileAccessCount is a DerivedField
            type is Alpha size 20
            if (PfiFileActivityConnection set.exists)
                return FileAccessLabelCount
            else
                return FileAccessLabel

        FileAccessGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiFileActivityConnection set.exists)
                return "(" + instance count of PfiFileActivityConnection set + ")"

        FileAccessLabel  is a LabelField
            default label is untranslatable
            "FileAccess"

        FileAccessLabelCount  is a LabelField
            default label is untranslatable
            "FileAccess<FileAccessGetInstance>"        

        EmailConnectionCount is a DerivedField
            type is Alpha size 20
            if (PfiEmailConnection set.exists)
                return EmailLabelCount
            else
                return EmailLabel

        EmailGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiEmailConnection set.exists)
                return "(" + instance count of PfiEmailConnection set + ")"

        EmailLabel  is a LabelField
            default label is untranslatable
            "Email"

        EmailLabelCount  is a LabelField
            default label is untranslatable
            "Email<EmailGetInstance>"      

        IDMConnectionCount is a DerivedField
            type is Alpha size 20
            if (PfiIDMConnection set.exists)
                return IDMLabelCount
            else
                return IDMLabel

        IDMGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiIDMConnection set.exists)
                return "(" + instance count of PfiIDMConnection set + ")"

        IDMLabel  is a LabelField
            default label is untranslatable
            "IDM"

        IDMLabelCount  is a LabelField
            default label is untranslatable
            "IDM<IDMGetInstance>"        

        LdapConnectionCount is a DerivedField
            type is Alpha size 20
            default label is "LDAP_ConnectionCount"
            if (PfiLdapConnection set.exists)
                return LdapLabelCount
            else
                return LdapLabel

        LdapGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiLdapConnection set.exists)
                return "(" + instance count of PfiLdapConnection set + ")"

        LdapLabel  is a LabelField
            default label is untranslatable
            "LDAP"

        LdapLabelCount  is a LabelField
            default label is untranslatable
            "LDAP<LdapGetInstance>"        

        JMSCount is a DerivedField
            type is Alpha size 20
            if (PfiJMSConnection set.exists)
                return JMSLabelCount
            else
                return JMSLabel

        JMSGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiJMSConnection set.exists)
                return "(" + instance count of PfiJMSConnection set + ")"

        JMSLabel  is a LabelField
            default label is untranslatable
            "JMS"

        JMSLabelCount  is a LabelField
            default label is untranslatable
            "JMS<JMSGetInstance>"        

        WebCount is a DerivedField
            type is Alpha size 20
            if (PfiWebRunConnection set.exists)
                return WebLabelCount
            else
                return WebLabel

        WebGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiWebRunConnection set.exists)
                return "(" + instance count of PfiWebRunConnection set + ")"

        WebLabel  is a LabelField
            default label is untranslatable
            "Web"

        WebLabelCount  is a LabelField
            default label is untranslatable
            "Web<WebGetInstance>"        

        WebServiceCount is a DerivedField
            type is Alpha size 20
            if (PfiWebServiceConnection set.exists)
                return WebServiceLabelCount
            else
                return WebServiceLabel

        WebServiceGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiWebServiceConnection set.exists)
                return "(" + instance count of PfiWebServiceConnection set + ")"

        WebServiceLabel  is a LabelField
            default label is untranslatable
            "WebService"

        WebServiceLabelCount  is a LabelField
            default label is untranslatable
            "WebService<WebServiceGetInstance>"        

        MQCount is a DerivedField
            type is Alpha size 20
            if (PfiMQConnection set.exists)
                return MQLabelCount
            else
                return MQLabel
        MQGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiMQConnection set.exists)
                return "(" + instance count of PfiMQConnection set + ")"

        MQLabel  is a LabelField
            default label is untranslatable
            "MQ"

        MQLabelCount  is a LabelField
            default label is untranslatable
            "MQ<MQGetInstance>"        

        TxCount is a DerivedField
            type is Alpha size 35
            default label is"TransactionCount"
            if (PfiTXConnection set.exists)
                return TxLabelCount
            else
                return TxLabel

        TxGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiTXConnection set.exists)
                return "(" + instance count of PfiTXConnection set + ")"

        TxLabel  is a LabelField
            default label is untranslatable
            "Web\SphereTransformationExtender"

        TxLabelCount  is a LabelField
            default label is untranslatable
            "Web\SphereTransformationExtender<TxGetInstance>"

        SysCmdCount is a DerivedField
            type is Alpha size 20
            default label is "SystemCommandCount"
            if (PfiSystemCommandConnection set.exists)
                return SysCmdLabelCount
            else
                return SysCmdLabel

        SysCmdGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiSystemCommandConnection set.exists)
                return "(" + instance count of PfiSystemCommandConnection set + ")"

        SysCmdLabel  is a LabelField
            default label is untranslatable
            "SystemCommand"

        SysCmdLabelCount  is a LabelField
            default label is untranslatable
            "SystemCommand<SysCmdGetInstance>"

        CloverleafCount is a DerivedField
            type is Alpha size 20
            if (PfiCloverleafConnection set.exists)
                return CloverleafLabelCount
            else
                return CloverleafLabel

        CloverleafGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiCloverleafConnection set.exists)
                return "(" + instance count of PfiCloverleafConnection set + ")"

        CloverleafLabel  is a LabelField
            default label is untranslatable
            "Cloverleaf"

        CloverleafLabelCount  is a LabelField
            default label is untranslatable
            "Cloverleaf<CloverleafGetInstance>"

        SMSCount is a DerivedField
            type is Alpha size 20
            if (PfiSMSConnection set.exists)
                return SMSLabelCount
            else
                return SMSLabel

        SMSGetInstance is a DerivedField
            type is Alpha size 20
            default label is untranslatable
            if (PfiSMSConnection set.exists)
                return "(" + instance count of PfiSMSConnection set + ")"

        SMSLabel  is a LabelField
            default label is untranslatable
            "SMS"

        SMSLabelCount  is a LabelField
            default label is untranslatable
            "SMS<SMSGetInstance>"

        IsConfigurationNameValid is a NativeField
            type is Boolean
            default label is "ConfigurationNameValid"
        
        IsMultiTenant is a NativeField
            type is Boolean
            default label is "MultiTenant"

    Field Rules

        PfiConfiguration
            constraint (IsConfigurationNameValid)
                "Invalid_\configuration_name"
                
    Conditions
    	IsNonSystemConfiguration
    		when (!com.lawson.rdtech.type.Field.startsWith(PfiConfiguration, "system"))
    		
    		
    Actions

        Create is a Create Action

        Update is an Update Action

        Delete is a Delete Action
            confirmation required
                "YouAreAboutToDeleteTheEntireConfigurationSet,AreYouSureYouWantToContinue?"
