PayablesInvoiceDistributionHistory is a BusinessClass
    owned by ap
    prefix is AH2
    sql name is PInvoiceDistributionHistory
    classic name is APAPDHIST

    Ontology
        symbolic key is PayablesInvoiceDistributionHistory
            classic set name is AH2SET0
            sql name is PInvoiceDistributionHistory
            classic name is DIST-SEQ-NBR
            classic name for PayablesInvoiceHistory.CancelSequence is CANCEL-SEQ

    Patterns
        implements ContextualParent
        implements StaticJava
        disable AuditIndex
        implements Archivable

    Persistent Fields


		CommentText
        OriginalDistribution                is a DistributionSequence
            classic name is ORIG-DIST-SEQ
        DistributionType                    is AlphaUpper size 1
            classic name is DIST-TYPE
        ProcessLevel                        is a PayablesProcessLevel
            classic name is PROC-LEVEL
        PostingOption
            classic name is POST-OPTION
        InvoiceType                         is AlphaUpper size 1
        Status                              is Numeric size 1
            classic name is REC-STATUS
        InvoiceCurrency                     is a Currency
            classic name is INV-CURRENCY
        TaxRate                             is a ChrgRate
        CurrencyRate
            classic name is CURR-RATE
        BaseDistributionAmount              is an InternationalAmount
            classic name is ORIG-BASE-AMT
        BaseNumberOfDecimals
            classic name is BASE-ND
        DistributionAmount                  is an InternationalAmount
            classic name is ORIG-TRAN-AMT
        NumberOfDecimals                    is Numeric size 1
            classic name is TRAN-ND
        ToBaseAmount                        is an InternationalAmount
            classic name is TO-BASE-AMT
        ToBaseNumberOfDecimals              is Numeric size 1
            classic name is TO-BASE-ND
        TaxableAmount                       is an InternationalAmount
            classic name is TAXABLE-AMT
        UnitAmount                          is an InternationalAmount
            classic name is UNT-AMOUNT

        DistributionDate                    is Date
            classic name is DISTRIB-DATE
        TaxSequenceNumber
            classic name is TAX-SEQ-NBR
        TaxIndicator
        TaxCode
        TaxType                             is AlphaUpper size 1
        Description
        DistributionReference               is a Reference 
            classic name is DST-REFERENCE

        AccrualCode                         is a PayablesAccrualCode
            classic name is ACCR-CODE
        PurchaseOrder
        PurchaseOrderLine
            classic name is PO-LINE-NBR
        AddOnCharge
            classic name is PO-AOC-CODE
        GltObjId                            is an ObjId

        AssetFlag                           is AlphaUpper size 1
        DistributionCode                    is a PayablesDistributionCode
            classic name is DIST-CODE
        TaxPoint                            is AlphaUpper size 1
        VATReverse                          is Boolean
            classic name is VAT-REVERSE-FL
        PayablesInvoiceDistributionObjectID is Numeric size 12
            sql name is PInvoiceDistributionObjectID
            classic name is DST-OBJ-ID
        MatchCreated						is AlphaUpper size 1
            classic name is MA-CREATE-FL
        	States
        		Yes			value is "Y"
        		Summary		value is "S"
        		Detail		value is "D"
        TaxUsageCode
            classic name is TAX-USAGE-CD
        IntransitDistribution               is AlphaUpper size 1
            classic name is TRAN-DIST-FLAG
            States
                Yes      value is "Y"
                No       value is "N"
                Reversed value is "R"
        ProjectUpdateStatus
            classic name is AC-UPD-STATUS
        ActivityUpdatedDate                 is TimeStamp
            classic name is AC-UPD-DATE
        DiversityCode                       is a PayablesDiversityCode
            classic name is DIVERSE-CODE
        AdjustedDistribution                is Boolean
            classic name is DISTRIB-ADJ
        PullForFinancialReporting           is Boolean
            classic name is PULL-FOR-FR-FL
        ProcurementCardStatement
            classic name is STATEMENT
        TransactionNumber
            classic name is TXN-NBR
        Retainage                           is Boolean
        ProductTaxCategory
            classic name is PROD-TAX-CAT
        DistributionAccount                 is a FinanceCodeBlock
            classic name for DistributionAccount.ToAccountingEntity is DIST-COMPANY
            classic name for DistributionAccount.AccountingUnit is DIS-ACCT-UNIT
            classic name for DistributionAccount.GeneralLedgerChartAccount is DIS-ACCOUNT
            classic name for DistributionAccount.Project is ACTIVITY

    Derived Fields

        DistributionStatus is a ConditionalField
            type is Alpha size 6
            restricted
            classic name is DIST-STATUS
            if (IsUnpostedDistribution)
                "Open"
            else
                "Posted"

    Conditions

        AddOnChargeEntered
        	restricted
            classic name is AOC-DIST
            when (AddOnCharge entered)

        IsAssetDistribution
        	restricted
            classic name is ASSET-DIST
            when (AssetFlag = "A"
            or    AssetFlag = "R"
            or    AssetFlag = "Y")




        PayablesInvoiceDistributionObjectIDEntered
        	restricted
            classic name is DST-OBJ-ID
            when (PayablesInvoiceDistributionObjectID entered)

        GltObjIdEntered
        	restricted
            classic name is GLT-OBJ-ID
            when (GltObjId entered)

        IsLinkedTaxDistribution
        	restricted
            classic name is LINK-TAX-DIST
            when (OriginalDistribution entered
            and   TaxSequenceNumber entered)

        TaxSequenceNumberEntered
        	restricted
            classic name is LINKED-TAX-DIS
            when (TaxSequenceNumber entered)

        IsProcurementCardExpense
        	restricted
            classic name is PCARD-EXP

            when (PurchaseOrder not entered)

        PayablesInvoiceRetainageDistributionRelExists
        	restricted
            classic name is PMT-DIST-EXIST
            when (first PayablesInvoiceRetainageDistributionRel exists)

        IsRetainageDistribution
        	restricted
            classic name is RETAINAGE-DIST
            when (Retainage)

        IsSummaryDistribution
        	restricted
            classic name is SUMMARY-DIST
            when (DistributionAccount.Project entered)

        IsTaxDistribution
        	restricted
            classic name is TAX-DIST
            when (TaxCode entered
            and   not TaxIndicator.Taxable)

        IsUnpostedDistribution
        	restricted
            classic name is UNPOSTED-DIST
            when (Status <  9)

    Relations
		PayablesAssetDetailHistoryRel
			one-to-one relation to PayablesAssetDetailHistory
			Field Mapping uses symbolic key
				related.Company								= Company
				related.Vendor								= Vendor
				related.PayablesInvoiceHistory				= PayablesInvoiceHistory
				related.PayablesInvoiceDistributionHistory 	= PayablesInvoiceDistributionHistory
		







        PayablesInvoiceRetainageDistributionRel
            classic name is APDISTPAY
            one-to-many relation to PayablesInvoiceRetainageDistribution
            Field Mapping uses Set2
                related.Company                                                     = Company
                related.Vendor                                                      = Vendor
                related.Invoice 													= PayablesInvoiceHistory.Invoice
                related.Suffix  													= PayablesInvoiceHistory.Suffix
                related.PayablesInvoiceRetainageDistribution.PayablesInvoiceDistribution   = PayablesInvoiceDistributionHistory

        VendorRel
            classic name is APVENMAST
            one-to-one relation to Vendor
            required
            Field Mapping uses symbolic key
                related.VendorGroup = Company.VendorGroup
                related.Vendor      = Vendor
                
        PayablesAssetDetailHistoryPurgeRel
    		one-to-one relation to PayablesAssetDetailHistory
			Field Mapping uses Set1
				related.Company                 			= Company
                related.PayablesInvoiceHistory				= PayablesInvoiceHistory
                related.PayablesInvoiceDistributionHistory	= PayablesInvoiceDistributionHistory
    		
    Actions
		Create is a Create Action
			restricted

		Update is an Update Action
			restricted

		Delete is a Delete Action
			restricted
			
		Purge is a Purge Action
			restricted
			bypass relational integrity rules
			Entrance Rules
				if (AssetFlag = "A")
					invoke Purge PayablesAssetDetailHistoryPurgeRel
    
    Sets























































        Set1
            not indexed
            Sort Order

                Company
                PayablesInvoiceHistory
                PayablesInvoiceDistributionHistory
