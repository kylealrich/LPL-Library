TrueCostCapacityDetail is a BusinessClass
	default label is "PracticalCapacityVolume"
	owned by truecost
	
	prefix is TCCD
	
	Ontology
		symbolic key is TrueCostCapacityDetail
	
	Patterns
	
	Persistent Fields
		CapacityVolume						is Unsigned Decimal 19.4 
		AccountingEntity
			default label is "<TrueCostConfiguration.AccountingEntityLabel>"
		AccountingUnit
			default label is "<TrueCostConfiguration.AccountingUnitLabel>"
		GeneralLedgerChartAccount
			restricted
			default label is "<TrueCostConfiguration.AccountLabel>"
		Project
			default label is "<TrueCostConfiguration.ProjectLabel>"
		FinanceDimension1
			default label is "<TrueCostConfiguration.FinanceDimension1Label>"
		FinanceDimension2
			default label is "<TrueCostConfiguration.FinanceDimension2Label>"
		FinanceDimension3
			default label is "<TrueCostConfiguration.FinanceDimension3Label>"
		FinanceDimension4
			default label is "<TrueCostConfiguration.FinanceDimension4Label>"
		FinanceDimension5
			default label is "<TrueCostConfiguration.FinanceDimension5Label>"
		FinanceDimension6
			default label is "<TrueCostConfiguration.FinanceDimension6Label>"
		FinanceDimension7
			default label is "<TrueCostConfiguration.FinanceDimension7Label>"
		FinanceDimension8
			default label is "<TrueCostConfiguration.FinanceDimension8Label>"
		FinanceDimension9
			default label is "<TrueCostConfiguration.FinanceDimension9Label>"
		FinanceDimension10
			default label is "<TrueCostConfiguration.FinanceDimension10Label>"
		
	Field Rules
		EffectiveDate
			required

		CapacityVolume
			required
			constraint (CapacityVolume > 0)
				"CapacityVolumeCannotBeNegative"

		AccountingEntity
			required

		GeneralLedgerChartAccount
			if (TrueCostCapacity.HasAccount)
				required		
			else
				cannot be entered
					"<TrueCostConfiguration.AccountLabel>IsNotEnabledInPracticalCapacity"
						
			if (TrueCostCapacity.VolumeDimension.Type.Account)
				constraint (GeneralLedgerChartAccount.ChartType.Summary)
					"<TrueCostConfiguration.AccountLabel>MustBeSummary"
				constraint (GeneralLedgerChartAccount.ChartType.Posting)
					"<TrueCostConfiguration.AccountLabel>MustBePosting"

		AccountingUnit
			if (TrueCostCapacity.HasAccountingUnit)
				required
					"<TrueCostConfiguration.AccountingUnitLabel>IsRequired"
			else
				cannot be entered
					"<TrueCostConfiguration.AccountingUnitLabel>IsNotEnabledInPracticalCapacity"
					
			if (TrueCostCapacity.VolumeDimension.Type.AccountingUnit)
				constraint (AccountingUnit.SummaryAccountingUnit)
					"<TrueCostConfiguration.AccountingUnitLabel>MustBeSummary"
			else
				constraint (AccountingUnit.PostingAccountingUnit)
					"<TrueCostConfiguration.AccountingUnitLabel>MustBePosting"

		Project
			if (TrueCostCapacity.HasProject)
				required	
			else
				cannot be entered
					"<TrueCostConfiguration.ProjectLabel>IsNotEnabledInPracticalCapacity"

			if (TrueCostCapacity.VolumeDimension.Type.Project)
				constraint (Project.ProjectType.Summary)
					"<TrueCostConfiguration.ProjectLabel>MustBeSummary"
			else		
				constraint (Project.ProjectType.Posting)
					"<TrueCostConfiguration.ProjectLabel>MustBePosting"

		FinanceDimension1
			if (TrueCostCapacity.HasDimension1)
				required
			else
				cannot be entered
					"<TrueCostConfiguration.FinanceDimension1Label>IsNotEnabledInPracticalCapacity"
			
			if (TrueCostCapacity.VolumeDimension.Type.Dimension1)
				constraint (FinanceDimension1.DimensionType.Summary)
					"<TrueCostConfiguration.FinanceDimension1Label>MustBeSummary"
			else
				constraint (FinanceDimension1.DimensionType.Posting)
					"<TrueCostConfiguration.FinanceDimension1Label>MustBePosting"

		FinanceDimension2
			if (TrueCostCapacity.HasDimension2)
				required
			else
				cannot be entered
					"<TrueCostConfiguration.FinanceDimension2Label>IsNotEnabledInPracticalCapacity"

			if (TrueCostCapacity.VolumeDimension.Type.Dimension2)
				constraint (FinanceDimension2.DimensionType.Summary)
					"<TrueCostConfiguration.FinanceDimension2Label>MustBeSummary"
			else
				constraint (FinanceDimension2.DimensionType.Posting)
					"<TrueCostConfiguration.FinanceDimension2Label>MustBePosting"

		FinanceDimension3
			if (TrueCostCapacity.HasDimension3)
				required
			else
				cannot be entered
					"<TrueCostConfiguration.FinanceDimension3Label>IsNotEnabledInPracticalCapacity"

			if (TrueCostCapacity.VolumeDimension.Type.Dimension3)
				constraint (FinanceDimension3.DimensionType.Summary)
					"<TrueCostConfiguration.FinanceDimension3Label>MustBeSummary"
			else
				constraint (FinanceDimension3.DimensionType.Posting)
					"<TrueCostConfiguration.FinanceDimension3Label>MustBePosting"

		FinanceDimension4
			if (TrueCostCapacity.HasDimension4)
				required
			else
				cannot be entered
					"<TrueCostConfiguration.FinanceDimension4Label>IsNotEnabledInPracticalCapacity"

			if (TrueCostCapacity.VolumeDimension.Type.Dimension4)
				constraint (FinanceDimension4.DimensionType.Summary)
					"<TrueCostConfiguration.FinanceDimension4Label>MustBeSummary"
			else
				constraint (FinanceDimension4.DimensionType.Posting)
					"<TrueCostConfiguration.FinanceDimension4Label>MustBePosting"

		FinanceDimension5
			if (TrueCostCapacity.HasDimension5)
				required
			else
				cannot be entered
					"<TrueCostConfiguration.FinanceDimension5Label>IsNotEnabledInPracticalCapacity"

			if (TrueCostCapacity.VolumeDimension.Type.Dimension5)
				constraint (FinanceDimension5.DimensionType.Summary)
					"<TrueCostConfiguration.FinanceDimension5Label>MustBeSummary"
			else
				constraint (FinanceDimension5.DimensionType.Posting)
					"<TrueCostConfiguration.FinanceDimension5Label>MustBePosting"

		FinanceDimension6
			if (TrueCostCapacity.HasDimension6)
				required
			else
				cannot be entered
					"<TrueCostConfiguration.FinanceDimension6Label>IsNotEnabledInPracticalCapacity"

			if (TrueCostCapacity.VolumeDimension.Type.Dimension6)
				constraint (FinanceDimension6.DimensionType.Summary)
					"<TrueCostConfiguration.FinanceDimension6Label>MustBeSummary"
			else
				constraint (FinanceDimension6.DimensionType.Posting)
					"<TrueCostConfiguration.FinanceDimension6Label>MustBePosting"

		FinanceDimension7
			if (TrueCostCapacity.HasDimension7)
				required
			else
				cannot be entered
					"<TrueCostConfiguration.FinanceDimension7Label>IsNotEnabledInPracticalCapacity"

			if (TrueCostCapacity.VolumeDimension.Type.Dimension7)
				constraint (FinanceDimension7.DimensionType.Summary)
					"<TrueCostConfiguration.FinanceDimension7Label>MustBeSummary"
			else
				constraint (FinanceDimension7.DimensionType.Posting)
					"<TrueCostConfiguration.FinanceDimension7Label>MustBePosting"

		FinanceDimension8
			if (TrueCostCapacity.HasDimension8)
				required
			else
				cannot be entered
					"<TrueCostConfiguration.FinanceDimension8Label>IsNotEnabledInPracticalCapacity"

			if (TrueCostCapacity.VolumeDimension.Type.Dimension8)
				constraint (FinanceDimension8.DimensionType.Summary)
					"<TrueCostConfiguration.FinanceDimension8Label>MustBeSummary"
			else
				constraint (FinanceDimension8.DimensionType.Posting)
					"<TrueCostConfiguration.FinanceDimension8Label>MustBePosting"

		FinanceDimension9
			if (TrueCostCapacity.HasDimension9)
				required
			else
				cannot be entered
					"<TrueCostConfiguration.FinanceDimension9Label>IsNotEnabledInPracticalCapacity"

			if (TrueCostCapacity.VolumeDimension.Type.Dimension9)
				constraint (FinanceDimension9.DimensionType.Summary)
					"<TrueCostConfiguration.FinanceDimension9Label>MustBeSummary"
			else
				constraint (FinanceDimension9.DimensionType.Posting)
					"<TrueCostConfiguration.FinanceDimension9Label>MustBePosting"

		FinanceDimension10
			if (TrueCostCapacity.HasDimension10)
				required
			else
				cannot be entered
					"<TrueCostConfiguration.FinanceDimension10Label>IsNotEnabledInPracticalCapacity"

			if (TrueCostCapacity.VolumeDimension.Type.Dimension10)
				constraint (FinanceDimension10.DimensionType.Summary)
					"<TrueCostConfiguration.FinanceDimension10Label>MustBeSummary"
			else
				constraint (FinanceDimension10.DimensionType.Posting)
					"<TrueCostConfiguration.FinanceDimension10Label>MustBePosting"	
	Relations
		UnutilizedCapacityRel
			one-to-one relation to TrueCostCapacityUnutilized
			Field Mapping uses symbolic key
				related.TrueCostConfiguration				= TrueCostConfiguration
				related.TrueCostCapacity 					= TrueCostCapacity
				related.AccountingEntity					= DerivedUnutilizedCapacityAccountingEntity
				related.TrueCostCapacityUnutilized 			= DerivedVolumeDimension
		
	Derived Fields
		DerivedUnutilizedCapacityAccountingEntity	is a DerivedField
			type is like AccountingEntity
			if (TrueCostCapacity.VolumeDimensionAccountingUnit)
				return AccountingEntity
			else
				return blank
	
		DimensionCode        is a StringField
            type is Alpha 105
            restricted
            AccountingEntity.DerivedSequenceNumber
            AccountingUnit.DerivedSequenceNumber
            GeneralLedgerChartAccount.DerivedSequenceNumber
            Project.DerivedSequenceNumber
			FinanceDimension1.DerivedSequenceNumber
			FinanceDimension2.DerivedSequenceNumber
			FinanceDimension3.DerivedSequenceNumber
			FinanceDimension4.DerivedSequenceNumber
			FinanceDimension5.DerivedSequenceNumber
			FinanceDimension6.DerivedSequenceNumber
			FinanceDimension7.DerivedSequenceNumber
			FinanceDimension8.DerivedSequenceNumber
			FinanceDimension9.DerivedSequenceNumber
			FinanceDimension10.DerivedSequenceNumber
		
		DerivedVolumeDimension is a DerivedField
			type is like FinanceDimension1
			if (TrueCostCapacity.VolumeDimension.Type.Account)
				return GeneralLedgerChartAccount
			if (TrueCostCapacity.VolumeDimension.Type.AccountingUnit)
				return AccountingUnit
			if (TrueCostCapacity.VolumeDimension.Type.Project)
				return Project
			if (TrueCostCapacity.VolumeDimension.Type.Dimension1)
				return FinanceDimension1
			if (TrueCostCapacity.VolumeDimension.Type.Dimension2)
				return FinanceDimension2
			if (TrueCostCapacity.VolumeDimension.Type.Dimension3)
				return FinanceDimension3
			if (TrueCostCapacity.VolumeDimension.Type.Dimension4)
				return FinanceDimension4
			if (TrueCostCapacity.VolumeDimension.Type.Dimension5)
				return FinanceDimension5
			if (TrueCostCapacity.VolumeDimension.Type.Dimension6)
				return FinanceDimension6
			if (TrueCostCapacity.VolumeDimension.Type.Dimension7)
				return FinanceDimension7
			if (TrueCostCapacity.VolumeDimension.Type.Dimension8)
				return FinanceDimension8
			if (TrueCostCapacity.VolumeDimension.Type.Dimension9)
				return FinanceDimension9
			if (TrueCostCapacity.VolumeDimension.Type.Dimension10)
				return FinanceDimension10
			
		
	Actions
		Create is a Create Action
			Action Rules
				TrueCostCapacityDetail.DimensionCode	=	DimensionCode
				constraint (UnutilizedCapacityRel exists)
					"NoAssociatedUnutilizedCapacityRecordExists"
					

		Update is an Update Action
		
		Delete is a Delete Action
		
		
			
