ContractExpirationCount is a BusinessClass
	owned by po
	
	prefix is Cout
	
	Ontology
		symbolic key is ContractExpirationCount
	
	Patterns
	
	Derived Fields
	
		Message0To30 is a MessageField
			restricted
			"ZeroTo30Days"
			
		Message31To60 is a MessageField
			restricted
			"31To60Days"
			
		Message61To90 is a MessageField
			restricted
			"61To90Days"
			
		Message91To120 is a MessageField
			restricted
			"91To120Days"
			
		MessageExpired is a MessageField
			restricted
			"Expired"
		
		0To30String is a StringField
			type is Alpha 35
			restricted
			Message0To30
			"-"
			Count
		
		31To60String is a StringField
			type is Alpha 35
			restricted
			Message31To60
			"-"
			Count
		
		61To90String is a StringField
			type is Alpha 35
			restricted
			Message61To90
			"-"
			Count
		
		91To120String is a StringField
			type is Alpha 35
			restricted
			Message91To120
			"-"
			Count
		
		ExpiredString is a StringField
			type is Alpha 35
			restricted
			MessageExpired
			"-"
			Count
		
		Type is a ConditionalField
			type is Alpha 35
			if (ContractExpirationCount.Expired)
				MessageExpired
			else
			if (ContractExpirationCount.0To30Days)
				Message0To30
			else
			if (ContractExpirationCount.31To60Days)
				Message31To60			
			else
			if (ContractExpirationCount.61To90Days)
				Message61To90			
			else
				Message91To120	
				
		Count is a ComputeField
			type is Numeric 5
			(instance count of ContractExpirationRel)
	
	Persistent Fields
	
	Relations
	
		ContractExpirationRel 
			one-to-many relation to Contract
			Field Mapping uses symbolic key
				related.ContractGroup             = ContractGroup
			Instance Selection
				where (!related.RemoveFromExpireList
				and     related.ActiveContract
				and     related.ExpirationDate entered
				and   ((ContractExpirationCount.91To120Days and related.ExpirationDate < current corporate date + 120 and related.ExpirationDate >= current corporate date + 91)
				or    (ContractExpirationCount.Expired and related.ExpirationDate < current corporate date) 
				or    (ContractExpirationCount.0To30Days and related.ExpirationDate < current corporate date + 30 and related.ExpirationDate >= current corporate date) 
				or    (ContractExpirationCount.31To60Days and related.ExpirationDate < current corporate date + 60 and related.ExpirationDate >= current corporate date + 31) 
				or    (ContractExpirationCount.61To90Days and related.ExpirationDate < current corporate date + 90 and related.ExpirationDate >= current corporate date + 61)))

	Field Rules
	
	Actions 
	
		Create is a Create Action
			restricted
			
		Update is an Update Action
			restricted
			
		Delete is a Delete Action
			restricted
		
