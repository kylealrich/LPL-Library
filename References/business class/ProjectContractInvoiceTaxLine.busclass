ProjectContractInvoiceTaxLine is a BusinessClass
	sql name is "ProjConInvTaxLine"
    owned by Projects
    prefix is PCITL

    Ontology
    	part of ProjectContractInvoiceLine
    		relative key is LineNumber is Numeric size 2
    		
	Patterns
		disable Auditing

    Persistent Fields
    	TaxAmount			is a CurrencyAmount
			precision is ProjectContract.Currency.NumberOfDecimals
		TaxCodeBlock		is a FinanceCodeBlock
			default label is "FinanceStructure"
#ifdef module tx
		BuyerTaxCode		is a TaxCode
			default label is "TaxCode"
#endif
#ifndef module tx
		BuyerTaxCode		is AlphaUpper size 15
			default label is "TaxCode"
#endif
		TaxRate				is Percent size 7.5
		TaxableAmount		is a CurrencyAmount
			precision is ProjectContract.Currency.NumberOfDecimals

	Derived Fields
				
    Conditions

    Relations
				
    Sets

    Field Rules

	Actions
		Create is a Create Action
			restricted

		Delete is a Delete Action
			restricted
			
		Update is an Update Action
			restricted
			Action Rules
				if (TaxableAmount = 0)
					TaxAmount = 0
			
		InitializeAmount is an Instance Action
			restricted
			Action Rules
				initialize TaxAmount

		RevertAmount is an Instance Action
			restricted
			Action Rules
				TaxAmount = TaxRate * TaxableAmount
				
