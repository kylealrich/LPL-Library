BillingCustomerCreditCard is a BusinessClass
    owned by bl
    prefix is CEP
    classic name is CUSTEP

    Ontology
        symbolic key is BillingCustomerCreditCard
            classic set name is CEPSET1



    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields

        ExpirationDate is Date
            classic name is EP-EXP-DATE
        Active         is Boolean
            classic name is EP-STATUS
        DefaultAccount is Boolean
            classic name is DEFAULT-PMT
        EpCsc          is AlphaUpper size 4

	Relations
		
		DefaultAccountRel 
			one-to-many relation to BillingCustomerCreditCard
			Field Mapping uses symbolic key
				related.Company					  = Company
				related.Customer	 			  = Customer
			Instance Selection
				where (related.BillingCustomerCreditCard not = BillingCustomerCreditCard
				and    related.DefaultAccount)

	Field Rules
		ExpirationDate
			required
		
		DefaultAccount
			constraint (DefaultAccountRel not exists)
				"DefaultCustomerPaymentAlreadyExists"
				
	Actions
		Create is a Create Action
		Update is an Update Action
		Delete is a Delete Action
		Purge  is a Purge Action
			restricted
