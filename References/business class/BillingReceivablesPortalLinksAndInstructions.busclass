BillingReceivablesPortalLinksAndInstructions is a BusinessClass
	owned by ar
	prefix is BRPL
	sql name is BRPL
	
	Ontology
		symbolic key is BillingReceivablesPortalLinksAndInstructions
	
	Patterns
		implements Resequence on DisplayOrder
			new sequence field is NewDisplayOrder
			set is ByDisplayOrder
	
	Persistent Fields
		Link 							is a URL
		Instructions 					is a Description3
		Attachment                      is an AttachmentWithTitleAudited
		DisplayOrder
		DisplayToAnonymousUsers			is Boolean
		Active							is Boolean
	
	Transient Fields
		NewDisplayOrder			is a DisplayOrder
	
	Conditions
		HasALinkOrAttachment
			restricted
			when (HasALink
			or    AttachmentExists)

		AttachmentExists
			restricted
			when (Attachment entered)

		HasALink
			restricted
			when (Link entered)
			
		HasInstructions
			restricted
			when (Instructions entered
			and   Link !entered
			and   Attachment !entered)
			
		ShowValidCustomerGroupRecords	
			restricted
			when (session.key.CustomerGroup = CustomerGroup)


	Field Rules
   			
		Active
			default to true
    					
	Sets
		ByDisplayOrder
			duplicates
			Sort Order
 				CustomerGroup
 				DisplayOrder
 				BillingReceivablesPortalLinksAndInstructions
 				
	Actions 
		Create is a Create Action  
			restricted
			Action Rules
				if (Link !entered)
					constraint (Instructions entered)
						"MustEnterEitherAURLOrInstructions"
			
			Field Rules
	 			DisplayOrder
	 				autosequence using CustomerGroup.LastLinkDisplayOrder
	
		CreateLink is a Create Action
		
			Action Rules
				constraint (Link entered)
					"MustEnterLinkInTheFormOfA_\URL"
				constraint (Instructions entered)
					"MustEnterADescription"

			Field Rules
	 			DisplayOrder
	 				autosequence using CustomerGroup.LastLinkDisplayOrder
	 									
		CreateInstructions is a Create Action
		
			Action Rules
				constraint (Instructions entered) 
					"MustEnterAnInstruction"

			Field Rules
	 			DisplayOrder
	 				autosequence using CustomerGroup.LastLinkDisplayOrder
	 								
		CreateAttachment is a Create Action
		
			Action Rules
				constraint (Attachment entered)
					"AttachmentIsRequired"
					
				constraint (Instructions entered)
					"MustEnterADescription"

			Field Rules
	 			DisplayOrder
	 				autosequence using CustomerGroup.LastLinkDisplayOrder
	 						
		Update is an Update Action  
				
		UpdateLink is an Update Action

			Action Rules
				constraint (Link entered)
					"MustEnterALink"
				constraint (Instructions entered)
					"MustEnterADescription"
							
		UpdateInstructions is an Update Action

			Action Rules
				constraint (Instructions entered) 
					"MustEnterAnInstruction"
							
		UpdateAttachment is an Update Action
		
			Action Rules
				constraint (Attachment entered)
					"AttachmentIsRequired"
					
				constraint (Instructions entered)
					"MustEnterADescription"
					
		Delete is a Delete Action

		
