ContractCompanyVendor is a BusinessClass
	owned by po
	prefix is CCVen

	Ontology
		symbolic key is ContractCompanyVendor

	Patterns
		implements DynamicCreation

	Persistent Fields
	
	Sets
		ByVendorGroup
			Sort Order
				VendorGroup
				Vendor
				Company

	Field Rules
	
	Actions
		Create is a Create Action
		
		Update is an Update Action
		
		Delete is a Delete Action
		
		Purge is a Purge Action

		BuildSupplierRebateInvoices is a Set Action
			restricted
			run in foreground
			Parameters
				PrmVendorGroup					is a VendorGroup
				PrmInvoiceDateRange				is a DateRange
				PrmNoDateRangeEntered			is Boolean
				PrmContractGroup				is AlphaUpper size 4
				PrmContract						is Numeric size 15
						
			Instance Selection
				where (VendorGroup				= PrmVendorGroup)
				
			Action Rules
				Instance Rules
					if (PrmNoDateRangeEntered)
						invoke BuildSupplierRebateJustCreatedInvoiceLines PayablesInvoice in background
							invoked.PrmApCompany					= Company
							invoked.PrmVendor						= Vendor
							invoked.PrmBeginCreateDate				= PrmInvoiceDateRange.Begin
							invoked.PrmEndCreateDate				= PrmInvoiceDateRange.End
					else
						invoke BuildSupplierRebateInvoiceLines PayablesInvoice in background
							invoked.PrmApCompany					= Company
							invoked.PrmVendor						= Vendor
							invoked.PrmBeginInvoiceDate				= PrmInvoiceDateRange.Begin
							invoked.PrmEndInvoiceDate				= PrmInvoiceDateRange.End
							
					invoke CancelledSupplierRebateInvoiceLines PayablesInvoice in background
						invoked.PrmApCompany					= Company
						invoked.PrmVendor						= Vendor
						invoked.PrmBeginCancelDate				= PrmInvoiceDateRange.Begin
						invoked.PrmEndCancelDate				= PrmInvoiceDateRange.End
						
					invoke Purge ContractCompanyVendor
		
