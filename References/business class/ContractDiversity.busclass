ContractDiversity is a BusinessClass
	owned by po

	prefix is Contd

	Ontology
		symbolic key is ContractDiversity

	Patterns

	Persistent Fields
		Supplier
		EffectiveDate is a snapshot of Contract.EffectiveDate

	Derived Fields
		MaximumAmount is a DerivedField
			type is like UnsignedInternationalAmount
			return (Contract.MaximumAmount)

		AmountOrdered is a DerivedField
			type is like InternationalAmount
			return (Contract.AmountOrdered)

	Context Fields
		ContractDateRange is a DateRange

	Conditions
		MultipleDiversityCodes
			when (OtherContractDiversityRel exists)

		EffectiveDateWithinRange
			restricted
			when (EffectiveDate within ContractDateRange)

	Relations
		SupplierDiversityResponseRel
			one-to-many relation to SupplierDiversityResponse
			Field Mapping uses BySupplier
				related.SupplierGroup	= ContractGroup
				related.Supplier		= Supplier

		OtherContractDiversityRel
			one-to-many relation to ContractDiversity
			Field Mapping uses symbolic key
				related.ContractGroup	= ContractGroup
				related.Contract		= Contract
			Instance Selection
				where (related.PayablesDiversityCode != PayablesDiversityCode)

	Sets
		ByDiversityCode
			Sort Order
				PayablesDiversityCode
				ContractGroup
				Contract

		BySupplier
			allow duplicates
			Sort Order
				PayablesDiversityCode
				Supplier

	Field Rules

	Actions
		Create is a Create Action
			restricted

			Action Rules
				Supplier = Contract.Supplier

		Update is an Update Action
			restricted

		Delete is a Delete Action
			valid when (Contract.NotClosed)

		Purge is a Purge Action
			restricted
