ClaimsAndLiabilitiesHeader is a BusinessClass
	owned by ap
	
	prefix is CLLBH
	
	Ontology
		symbolic key is ClaimsAndLiabilitiesHeader
	
	Patterns
		implements StaticJava
			
	Persistent Fields
		Country
		Currency
		ReportDate 			is a DateRange						
		ReportTime 			is TimeStamp 
			default label is "DateTime"
		XMLDocumentAttachment is a DocumentAttachment
		Reported    		is Boolean
			protected
		Option				is AlphaUpper 1
			default label is "Type"
			States
            	NewReport 		value is "N"
                Correction 		value is "C"
                Cancellation 	value is "X"
        ReportAsOfDate		is Date
        	default label is "AsOfDate"
		CurrencyTable
                	
	
	Field Rules
		ReportTime
			default to current timestamp

	Rule Blocks
		CalculateTotals
			if (not LocalTotalsComputed)
				for each ClaimsAndLiabilitiesRel

					LocalTotalLiabilitiesInThousands		+= each.DerivedLiabilitiesTotalInThousands
					LocalTotalClaimsInThousands			    += each.DerivedClaimsTotalInThousands

					LocalTotalLiabilities					+= each.LiabilitiesTotal
					LocalTotalClaims						+= each.ClaimsTotal			

					LocalTotalClaimsLessThan1Year41			+= each.DerivedClaimsLessThan1Year41InThousands	
					LocalTotalClaimsGreaterThan1Year42		+= each.DerivedClaimsGreaterThan1Year42InThousands	
					LocalTotalClaimsPrePayments43			+= each.DerivedClaimsPrePayments43InThousands
					LocalTotalLiabilitiesLessThan1Year44	+= each.DerivedLiabilitiesLessThan1Year44InThousands
					LocalTotalLiabilitiesGreaterThan1Year45	+= each.DerivedLiabilitiesGreaterThan1Year45InThousands
					LocalTotalLiabilitiesPrePayments46		+= each.DerivedLiabilitiesPrePayments46InThousands
					LocalTotalClaimsLessThan1Year81			+= each.DerivedClaimsLessThan1Year81InThousands
					LocalTotalClaimsGreaterThan1Year82		+= each.DerivedClaimsGreaterThan1Year82InThousands
					LocalTotalClaimsPrePayments83			+= each.DerivedClaimsPrePayments83InThousands
					LocalTotalLiabilitiesLessThan1Year84	+= each.DerivedLiabilitiesLessThan1Year84InThousands
					LocalTotalLiabilitiesGreaterThan1Year85	+= each.DerivedLiabilitiesGreaterThan1Year85InThousands
					LocalTotalLiabilitiesPrePayments86		+= each.DerivedLiabilitiesPrePayments86InThousands
					LocalTotalClaimsLessThan1Year87			+= each.DerivedClaimsLessThan1Year87InThousands
					LocalTotalClaimsGreaterThan1Year88		+= each.DerivedClaimsGreaterThan1Year88InThousands
					LocalTotalClaimsPrePayments89			+= each.DerivedClaimsPrePayments89InThousands
					LocalTotalLiabilitiesLessThan1Year90	+= each.DerivedLiabilitiesLessThan1Year90InThousands
					LocalTotalLiabilitiesGreaterThan1Year91	+= each.DerivedLiabilitiesGreaterThan1Year91InThousands
					LocalTotalLiabilitiesPrePayments92		+= each.DerivedLiabilitiesPrePayments92InThousands
					LocalTotalClaimsLessThan1Year93			+= each.DerivedClaimsLessThan1Year93InThousands
					LocalTotalClaimsGreaterThan1Year94		+= each.DerivedClaimsGreaterThan1Year94InThousands
					LocalTotalClaimsPrePayments95			+= each.DerivedClaimsPrePayments95InThousands
					LocalTotalLiabilitiesLessThan1Year96	+= each.DerivedLiabilitiesLessThan1Year96InThousands
					LocalTotalLiabilitiesGreaterThan1Year97	+= each.DerivedLiabilitiesGreaterThan1Year97InThousands
					LocalTotalLiabilitiesPrePayments98		+= each.DerivedLiabilitiesPrePayments98InThousands					
				LocalTotalsComputed = true

	Derived Fields	

		DerivedLiabilitiesTotals is a DerivedField
			type is Numeric 19
			default label is "LiabilitiesTotal_(In_Thousands)"
			include CalculateTotals
			return LocalTotalLiabilitiesInThousands
			
		DerivedClaimsTotals		 is a DerivedField
			type is Numeric 19
			default label is "ClaimsTotal_(In_Thousands)"
			include CalculateTotals
			return LocalTotalClaimsInThousands

		DerivedClaimsTotal	is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			return LocalTotalClaims
			
		DerivedLiabilitiesTotal is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			return LocalTotalLiabilities

		DerivedTotalsClaimsLessThan1Year41			is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalClaimsLessThan1Year41 > 0)
				return LocalTotalClaimsLessThan1Year41
			else
				return 0

		DerivedTotalsClaimsGreaterThan1Year42		is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalClaimsGreaterThan1Year42 > 0)
				return LocalTotalClaimsGreaterThan1Year42
			else
				return 0
		
		DerivedTotalsClaimsPrePayments43				is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalClaimsPrePayments43 > 0)
				return LocalTotalClaimsPrePayments43
			else
				return 0

		DerivedTotalsLiabilitiesLessThan1Year44		is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalLiabilitiesLessThan1Year44 > 0)
				return LocalTotalLiabilitiesLessThan1Year44
			else
				return 0

		DerivedTotalsLiabilitiesGreaterThan1Year45	is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalLiabilitiesGreaterThan1Year45 > 0)
				return LocalTotalLiabilitiesGreaterThan1Year45
			else
				return 0
			
		DerivedTotalsLiabilitiesPrePayments46		is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalLiabilitiesPrePayments46 > 0)
				return LocalTotalLiabilitiesPrePayments46
			else 
				return 0
			
		DerivedTotalsClaimsLessThan1Year81			is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalClaimsLessThan1Year81 > 0)
				return LocalTotalClaimsLessThan1Year81
			else
				return 0
			
		DerivedTotalsClaimsGreaterThan1Year82		is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalClaimsGreaterThan1Year82 > 0)
				return LocalTotalClaimsGreaterThan1Year82
			else
				return 0
			
		DerivedTotalsClaimsPrePayments83			is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalClaimsPrePayments83 > 0)
				return LocalTotalClaimsPrePayments83
			else
				return 0
			
		DerivedTotalsLiabilitiesLessThan1Year84		is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalLiabilitiesLessThan1Year84 > 0)
				return LocalTotalLiabilitiesLessThan1Year84
			else
				return 0
			
		DerivedTotalsLiabilitiesGreaterThan1Year85	is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalLiabilitiesGreaterThan1Year85 > 0)
				return LocalTotalLiabilitiesGreaterThan1Year85
			else 
				return 0
			
		DerivedTotalsLiabilitiesPrePayments86		is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalLiabilitiesPrePayments86 > 0)
				return LocalTotalLiabilitiesPrePayments86
			else
				return 0
			
		DerivedTotalsClaimsLessThan1Year87			is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalClaimsLessThan1Year87 > 0)
				return LocalTotalClaimsLessThan1Year87
			else
				return 0

		DerivedTotalsClaimsGreaterThan1Year88		is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalClaimsGreaterThan1Year88 > 0)
				return LocalTotalClaimsGreaterThan1Year88
			else
				return 0

		DerivedTotalsClaimsPrePayments89				is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalClaimsPrePayments89 > 0)
				return LocalTotalClaimsPrePayments89
			else
				return 0

		DerivedTotalsLiabilitiesLessThan1Year90		is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalLiabilitiesLessThan1Year90 > 0)
				return LocalTotalLiabilitiesLessThan1Year90
			else
				return 0

		DerivedTotalsLiabilitiesGreaterThan1Year91	is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalLiabilitiesGreaterThan1Year91 > 0)
				return LocalTotalLiabilitiesGreaterThan1Year91
			else
				return 0

		DerivedTotalsLiabilitiesPrePayments92		is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalLiabilitiesPrePayments92 > 0)
				return LocalTotalLiabilitiesPrePayments92
			else
				return 0

		DerivedTotalsClaimsLessThan1Year93			is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalClaimsLessThan1Year93 > 0)
				return LocalTotalClaimsLessThan1Year93
			else
				return 0

		DerivedTotalsClaimsGreaterThan1Year94		is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalClaimsGreaterThan1Year94 > 0)
				return LocalTotalClaimsGreaterThan1Year94
			else
				return 0

		DerivedTotalsClaimsPrePayments95			is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalClaimsPrePayments95 > 0)
				return LocalTotalClaimsPrePayments95
			else
				return 0

		DerivedTotalsLiabilitiesLessThan1Year96		is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalLiabilitiesLessThan1Year96 > 0)
				return LocalTotalLiabilitiesLessThan1Year96
			else
				return 0

		DerivedTotalsLiabilitiesGreaterThan1Year97	is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalLiabilitiesGreaterThan1Year97 > 0)
				return LocalTotalLiabilitiesGreaterThan1Year97
			else
				return 0

		DerivedTotalsLiabilitiesPrePayments98		is a DerivedField
			type is Numeric 19
			restricted
			include CalculateTotals
			if (LocalTotalLiabilitiesPrePayments98 > 0)
				return LocalTotalLiabilitiesPrePayments98
			else
				return 0

		DerivedCompanyAlphaRight		is a DerivedField
			type is AlphaRight size 8
			restricted
			return LocalCompany
			
		DerivedCompany				 			is a DerivedField
			type is Alpha size 8
			restricted
			return com.lawson.apps.procurement.base.StringUtils.leadingZeros(DerivedCompanyAlphaRight)
		
		DerivedCompanyName 						is a DerivedField 
			type is like Name
			holds pii
			restricted
			return Company.Name

		DerivedCompanyCountry					is a DerivedField
			type is like Country
			restricted
			return Company.AccountingEntity.AddressCode.PostalAddress.Country

		DerivedReportType						is a DerivedField
			type is Alpha size 50
			restricted
			if (Option.NewReport)
				return "Neumeldung"
			else
				if (Option.Correction)
					return "Korrektur"
				else
					return "Storno"


		DerivedIsNullReportFlag					is a DerivedField
			type is Alpha size 4
			restricted
			if (Option.Cancellation
			or not ExceedsThresholdAmount)	
				return "ja"			
			else
				return "nein"		

		DerivedReportDateTimeAlpha				is a DerivedField
			type is Alpha size 25
			restricted
			return ReportTime
		
		DerivedReportTimeStamp 					is a StringField
			type is Alpha size 25
			restricted
			DerivedReportDateTimeAlpha[1:4]
			"-"
			DerivedReportDateTimeAlpha[5:6]
			"-"
			DerivedReportDateTimeAlpha[7:8]
			"T"
			DerivedReportDateTimeAlpha[9:10]
			":"
			DerivedReportDateTimeAlpha[11:12]
			":"
			DerivedReportDateTimeAlpha[13:14]

		DerivedReportAsOfDateAlpha				is a DerivedField
			type is Alpha size 8
			restricted
			return ReportAsOfDate
		
		DerivedReportMonth						is a StringField
			type is Alpha size 7
			restricted
			DerivedReportAsOfDateAlpha[1:4]
			"-"
			DerivedReportAsOfDateAlpha[5:6]
		
		DerivedDocumentTitle					is a StringField
			type is Alpha size 100
			restricted
			ClaimsAndLiabilitiesHeader
			" "
			Country
			" " 
			"Z5a"
			" "
			Company
			".xml"
			

		DerivedCompanyPOBox							is a DerivedField
			type is Alpha size 160
			restricted
			if (Company.AccountingEntity.AddressCode.PostalAddress.Type.PostOfficeBox)
				return DerivedAddressLine
			else
				return blank

		DerivedAddressLine								is a StringField
			type is Alpha size 160
			restricted
			Company.AccountingEntity.AddressCode.PostalAddress.DeliveryAddress.AddressLine1
			" "
			Company.AccountingEntity.AddressCode.PostalAddress.DeliveryAddress.AddressLine2
			" "
			Company.AccountingEntity.AddressCode.PostalAddress.DeliveryAddress.AddressLine3
			" "
			Company.AccountingEntity.AddressCode.PostalAddress.DeliveryAddress.AddressLine4
					
		DerivedCompanyStreet						is a DerivedField
			type is Alpha size 160
			restricted
			if (Company.AccountingEntity.AddressCode.PostalAddress.Type.Street)
				return DerivedAddressLine
			else
				return blank
		
		DerivedCompanyPostalCode					is a DerivedField
			type is like PostalCode
			restricted
			return Company.AccountingEntity.AddressCode.PostalAddress.PostalCode
		
		DerivedCompanyMunicipality					is a DerivedField
			type is like MunicipalityLarge
			restricted
			return Company.AccountingEntity.AddressCode.PostalAddress.Municipality


		DerivedCompanyContact						is a DerivedField
			type is like Employee
			restricted	
			if (CompanyContactRel exists)
				return Company.AccountingEntity.AddressCode.PersonResponsible	

		DerivedCompanyContactFormOfAddress			is a DerivedField
			type is Alpha up to 50
			restricted
			if (CompanyContactRel exists)
				return CompanyContactRel.Name.FormOfAddress
			
		DerivedCompanyContactGivenName				is a DerivedField
			type is  Alpha up to 50
			restricted
			if (CompanyContactRel exists)
				return CompanyContactRel.Name.GivenName
			
		DerivedCompanyContactLastName				is a DerivedField
			type is  Alpha up to 50
			restricted
			if (CompanyContactRel exists)
				return CompanyContactRel.Name.FamilyName
		
		DerivedCompanyContactOrganization			is a DerivedField
			type is Alpha 20
			if (CompanyContactRel exists)
				return CompanyContactRel.OrganizationUnitShortDescriptionForSort
		
		DerivedCompanyContactTelephoneNumber 		is a DerivedField
			type is Alpha size 60
			if (CompanyContactRel.UseForWorkPhone.ContactMethod.Landline)
				return CompanyContactRel.EmployeeWorkTelephone
			else
				return blank
		
		DerivedCompanyContactFaxNumber		 		is a DerivedField
			type is Alpha size 60
			restricted
			if (CompanyContactRel.UseForWorkPhone.ContactMethod.Fax)
				return CompanyContactRel.EmployeeWorkFax
			else
				return blank
		
		DerivedCompanyContactEmailAddress			is a DerivedField 
			type is EmailAddressField
			holds pii
			restricted
			if (CompanyContactRel.UseForWorkEmail entered)
				return CompanyContactRel.EmployeeWorkEmailAddress
			else
				return blank
				
		DerivedDEClaimsAndLiabilitiesDetailsXML 	is a DerivedField
			type is XMLDocument
			restricted
			for each ClaimsAndLiabilitiesRel				
				DerivedDEClaimsAndLiabilitiesDetailsXML += template.DE_ClaimsAndLiabilitiesDetailXML_ST  document for each
					
		DerivedDEClaimsAndLiabilitiesXML 			is a DerivedField
			type is XMLDocument
			restricted
			if (DerivedIsNullReportFlag = "ja")
				return template.DE_ClaimsAndLiabilitiesNilOrCancelledReportXML_ST document for this instance 	
			else
				return template.DE_ClaimsAndLiabilitiesHeaderXML_ST  document for this instance

	Local Fields
		LocalCompanyAddress			 				is Alpha size 160
		LocalEmployeeContact		 				is like EmployeeContact
		LocalCompany				 				is AlphaUpper size 4
		LocalGLCompany		 				        is like GeneralLedgerCompany
		LocalGenerateXML							is Alpha size 1
		LocalTotalsComputed							is Boolean
		LocalTotalClaimsLessThan1Year41				is Numeric 19
		LocalTotalClaimsGreaterThan1Year42		    is Numeric 19
		LocalTotalClaimsPrePayments43				is Numeric 19
		LocalTotalLiabilitiesLessThan1Year44		is Numeric 19
		LocalTotalLiabilitiesGreaterThan1Year45		is Numeric 19
		LocalTotalLiabilitiesPrePayments46			is Numeric 19
		LocalTotalClaimsLessThan1Year81				is Numeric 19
		LocalTotalClaimsGreaterThan1Year82			is Numeric 19
		LocalTotalClaimsPrePayments83				is Numeric 19
		LocalTotalLiabilitiesLessThan1Year84		is Numeric 19
		LocalTotalLiabilitiesGreaterThan1Year85		is Numeric 19
		LocalTotalLiabilitiesPrePayments86			is Numeric 19
		LocalTotalClaimsLessThan1Year87				is Numeric 19
		LocalTotalClaimsGreaterThan1Year88			is Numeric 19
		LocalTotalClaimsPrePayments89				is Numeric 19
		LocalTotalLiabilitiesLessThan1Year90		is Numeric 19
		LocalTotalLiabilitiesGreaterThan1Year91		is Numeric 19
		LocalTotalLiabilitiesPrePayments92			is Numeric 19
		LocalTotalClaimsLessThan1Year93				is Numeric 19
		LocalTotalClaimsGreaterThan1Year94			is Numeric 19
		LocalTotalClaimsPrePayments95				is Numeric 19
		LocalTotalLiabilitiesLessThan1Year96		is Numeric 19
		LocalTotalLiabilitiesGreaterThan1Year97		is Numeric 19
		LocalTotalLiabilitiesPrePayments98			is Numeric 19
		LocalTotalLiabilitiesInThousands			is Numeric 19
		LocalTotalClaimsInThousands					is Numeric 19
		LocalTotalLiabilities						is Numeric 19
		LocalTotalClaims							is Numeric 19
		LocalCountryOutputXML						is Alpha size 1
			States
				NoXML						value is blank
				Germany					    value is "G"
				
		LocalHeaderTemplateName 	 	 is Alpha 250
		LocalNilOrCancelTemplateName 	 is Alpha 250
		LocalDetailTemplateName 	 	 is Alpha 250

	Conditions
		HasXMLDocumentAttachment
			restricted
			when (XMLDocumentAttachment entered)	

		ClaimsExceedsThresholdAmount
			restricted
			when (DerivedClaimsTotal > Company.ThresholdAmount)
			
		LiabilitiesExceedsThresholdAmount
			restricted
			when (DerivedLiabilitiesTotal > Company.ThresholdAmount)	
					
		DisplayViewXML
			restricted
			when (not Company.OutputXML.NoXML)
	
		ExceedsThresholdAmount
			restricted
			when (DerivedClaimsTotal > Company.ThresholdAmount
			or DerivedLiabilitiesTotal > Company.ThresholdAmount)

		ValidForMarkAsReported
			restricted
			when (!Reported)	
	
	Relations
		ClaimsAndLiabilitiesRel
	    	one-to-many relation to ClaimsAndLiabilities
	    	delete cascades
	    	Field Mapping uses symbolic key
	    		related.Company				  	   = Company
	    		related.ClaimsAndLiabilitiesHeader = ClaimsAndLiabilitiesHeader		
			Instance Selection
				where (related.Country != Country) 	    		

		ReceivableCompanyRel
			one-to-one relation to ReceivableCompany
			Field Mapping uses symbolic key
				related.Company	= LocalGLCompany

		CompanyCustomerCountryCodeRel
			one-to-many relation to CompanyCustomer
			Field Mapping uses symbolic key
				related.Company = LocalGLCompany
			Instance Selection
				where (related.Affiliate
				and related.AffiliateOwnership entered
				and related.Customer.PostalAddress.Country not entered)

		CompanyContactRel
			one-to-one relation to Employee
			Field Mapping uses symbolic key
				related.HROrganization	= Company.FinanceEnterpriseGroup.HROrganization
				related.Employee		= Company.AccountingEntity.AddressCode.PersonResponsible

		ClaimsAndLiabilitiesHeaderNilOrCancelUserTemplateRel
			one-to-many relation to UserTemplate
			Field Mapping uses ByBusinessClass
				related.BusinessClass	= "ClaimsAndLiabilitiesHeader"
			Instance Selection
				where (related.UserTemplate	=  LocalHeaderTemplateName 
				or 	related.UserTemplate	=  LocalNilOrCancelTemplateName)

		ClaimsAndLiabilitiesDetailUserTemplateRel
			one-to-one relation to UserTemplate
			Field Mapping uses ByBusinessClass
				related.BusinessClass	= "ClaimsAndLiabilities"
				related.UserTemplate	=  LocalDetailTemplateName 

	Actions
		
		Create is a Create Action
			restricted

		CreateClaimsAndLiabilitiesReport is a Create Action
			completion message is "CreatingClaimsAndLiabilitiesReport"
			Parameters
		        PrmCompany        is a GeneralLedgerCompany
		            default label is "Company"
		        PrmOption         is AlphaUpper size 1
		            States
		                NewReport    value is "N"
		                Correction   value is "C"
		                Cancellation value is "X"
		            default label is "Option"
		        PrmReportAsOfDate is Date
		            default label is "AsOfDate"
		        PrmCurrencyTable  is a CurrencyTable
		            default label is "CurrencyTable"
		    Parameter Rules
		        PrmCompany
		            if (PrmCompany entered)
		                constraint (PrmCompany.PayablesCompanyRel.ClaimsAndLiabilitiesReporting)
		                    "PayablesCompanyIsNotSetupForClaimsAndLiabilitiesReporting"
		                constraint (PrmCompany.AccountingEntity.AddressCode entered)
		                    "AddressCodeUnderAccountingEntity<PrmCompany.AccountingEntity>IsRequired"
		                constraint (PrmCompany.AccountingEntity.AddressCode.PostalAddress.Country entered)
		                    "Country/\JurisdictionInAddressCodeUnderAccountingEntity<PrmCompany.AccountingEntity>IsRequired"

						LocalCountryOutputXML = PrmCompany.PayablesCompanyRel.OutputXML

						if (LocalCountryOutputXML.Germany)
							LocalHeaderTemplateName      = "DE_ClaimsAndLiabilitiesHeaderXML_ST"
							LocalNilOrCancelTemplateName = "DE_ClaimsAndLiabilitiesNilOrCancelledReportXML_ST"
							LocalDetailTemplateName 	 = "DE_ClaimsAndLiabilitiesDetailXML_ST"

						if (not LocalCountryOutputXML.NoXML)
							constraint (ClaimsAndLiabilitiesDetailUserTemplateRel exists
							and instance count of ClaimsAndLiabilitiesHeaderNilOrCancelUserTemplateRel = 2)
								"UserTemplateSetUpIncomplete"

						LocalGLCompany = PrmCompany
						if (ReceivableCompanyRel exist)
							constraint (CompanyCustomerCountryCodeRel not exists)
								"CustomerCountry/\JurisdictionCodeShouldNotBeBlank"										

		            required
		        PrmReportAsOfDate
		            required
		        PrmOption
		            required
		        PrmCurrencyTable
		            required
		    Action Rules
		        invoke Create this instance
		            invoked.Company 		= PrmCompany
		            invoked.Country			= PrmCompany.AccountingEntity.AddressCode.PostalAddress.Country
		            invoked.Currency		= PrmCompany.Currency
		            invoked.Option			= PrmOption
		            invoked.ReportAsOfDate	= PrmReportAsOfDate
		            invoked.CurrencyTable	= PrmCurrencyTable

				invoke GenerateClaimsAndLiabilities in background
					invoked.PrmCurrencyTable = PrmCurrencyTable
					
		GenerateClaimsAndLiabilities is an Instance Action
			run in background
			restricted
			Parameters
				PrmCurrencyTable			is a CurrencyTable

			Local Fields
				LocalAsyncId				is a AsyncActionRequest
				LocalActor					is an Actor
		
			Action Rules
				invoke PayablesClaimsAndLiabilities PayablesInvoice  in background
					assign async action request id to LocalAsyncId
					invoked.PrmPayablesCompany			  = Company
					invoked.PrmClaimsAndLiabilitiesHeader = ClaimsAndLiabilitiesHeader
					invoked.PrmCountry					  = Country
					invoked.PrmCurrency					  = Currency
					invoked.PrmReportAsOfDate			  = ReportAsOfDate
					invoked.PrmCurrencyTable			  = PrmCurrencyTable

				LocalGLCompany = Company
				
				if (ReceivableCompanyRel exists)
					invoke ReceivableClaimsAndLiabilities ReceivableInvoiceDetail  in background
						run after LocalAsyncId
						assign async action request id to LocalAsyncId 
						invoked.PrmReceivableCompany 		  = Company
						invoked.PrmClaimsAndLiabilitiesHeader = ClaimsAndLiabilitiesHeader
						invoked.PrmCountry			 		  = Country
						invoked.PrmCurrency			 		  = Currency
						invoked.PrmReportAsOfDate 	 		  = ReportAsOfDate
						invoked.PrmCurrencyTable			  = PrmCurrencyTable
						
					invoke ReceivableClaimsAndLiabilities ReceivablePayment in background
						run after LocalAsyncId
						assign async action request id to LocalAsyncId 
						invoked.PrmReceivableCompany 		  = Company
						invoked.PrmClaimsAndLiabilitiesHeader = ClaimsAndLiabilitiesHeader
						invoked.PrmCountry			 		  = Country
						invoked.PrmCurrency			 		  = Currency
						invoked.PrmReportAsOfDate 	 		  = ReportAsOfDate
						invoked.PrmCurrencyTable			  = PrmCurrencyTable
				else
					LocalActor = actor
					
					send notification
						to LocalActor
						description is "ReceivableCompany<Company>IsNotExistingForClaimsAndLiabilitiesReport"

				if (Company.OutputXML.Germany)
					invoke GenerateXML in background
						run after LocalAsyncId
						assign async action request id to LocalAsyncId
				else
					invoke ClaimsAndLiabilitiesNotification in background
						run after LocalAsyncId
							
		Update is an Update Action
			restricted
			
		Delete is an Action
		
		ClaimsAndLiabilitiesNotification is an Instance Action
			restricted

			Local Fields
				LocalActor					is an Actor		
							
			Action Rules				
				LocalActor	= actor		
				send notification 
					to LocalActor				
					description is "ClaimsAndLiabilitiesReportCompletedForCompany<Company>"
					detail is "ClaimsAndLiabilitiesReportCompletedForCompany<Company>"

		MarkAsReported is an Instance Action
			valid when (ValidForMarkAsReported)
			Action Rules
				Reported = true
				
		FastUpdate is an Update Action
			restricted
			bypass field rules	

		GenerateXML is an Instance Action
			default label is untranslatable
			restricted
			Local Fields
				LocalActor					is an Actor	
			Action Rules
				LocalCompany        = Company
				
				invoke FastUpdate
					invoked.XMLDocumentAttachment.File		= DerivedDEClaimsAndLiabilitiesXML
					invoked.XMLDocumentAttachment.Title		= DerivedDocumentTitle
					invoked.XMLDocumentAttachment.MimeType	= "application/xml"

			Exit Rules
				LocalActor = actor
				send notification 
					to LocalActor				
					description is "ClaimsAndLiabilitiesReportCompletedForCompany<Company>"
					detail is "ClaimsAndLiabilitiesReportCompletedForCompany<Company>"
