VendorStatementDetail is a BusinessClass
	owned by ap
	
	prefix is VSDTL
	
	Ontology
		symbolic key is VendorStatementDetail
	
	Patterns
		implements StaticJava
        disable AuditIndex
	
	Persistent Fields
		TransDate	is Date
		TransID		is an Invoice
		Suffix
		TransType	is Alpha size 20
		DebitAmount is a CurrencyAmount
		CreditAmount is a CurrencyAmount
		RunningBalance is a CurrencyAmount
		InvoiceNumber is an Invoice
	
	Derived Fields
		DerivedSuffix is a DerivedField
			type is Alpha size 3
			if (Suffix entered)
				return Suffix
			else
				return blank
		
		DerivedDueDate is a DerivedField
			type is Date
			if(TransType = "Payment")
				return first PayablesInvoicePaymentRel.DueDate
			else
				return first PayablesInvoiceRel.DueDate
					
		DerivedPurchaseOrder is a DerivedField
			type is Alpha size 20
			if(TransType = "Payment")
				return first PayablesInvoicePaymentRel.PayablesInvoice.ExternalPurchaseOrder
			else
				return first PayablesInvoiceRel.ExternalPurchaseOrder
				
		DerivedDescription is a DerivedField
			type is like Description
			if(TransType = "Payment")
				return first PayablesInvoicePaymentRel.PayablesInvoice.Description
			else	
				return first PayablesInvoiceRel.Description

	Field Rules
	
	Relations
		PayablesInvoiceRel
			one-to-many relation to PayablesInvoice
			Field Mapping uses symbolic key
				related.Company					= Company
			Instance Selection
				where(related.Invoice			= InvoiceNumber
				and	related.Vendor				= Vendor
				and related.VendorGroup			= VendorStatementHeader.VendorGroup
				and related.Suffix				= Suffix)
		
		PayablesInvoicePaymentRel
			one-to-many relation to PayablesInvoicePayment
			Field Mapping uses symbolic key
				related.Company					=	Company
			Instance Selection
				where (related.Invoice			=	InvoiceNumber
				and related.TransactionNumber   =   TransID
				and related.Vendor				= 	Vendor
				and related.VendorGroup			=	VendorStatementHeader.VendorGroup
				and related.Suffix				=	Suffix)

	Actions
	
        Create is a Create Action
        	restricted
        	
        Update is an Update Action
        	restricted
        	
		Delete is a Delete Action
			restricted	
	
