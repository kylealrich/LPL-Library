PositivePayOutputFileDetail is a BusinessClass
    owned by cb
    prefix is PPOFD

    Ontology
        symbolic key is PositivePayOutputFileDetail

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields

		OutputData 		is Text

        CbtCompany              		is like Company
        CbtCashCode             		is like CashCode
        CbtBankInstCode         		is like BankTransactionCode
        CbtTransNbr             		is like TransactionNumber
        CbcBankAcctNbr          		is like CashManagementAccount
        CbcFinancialInstitution 		is like FinancialInstitution
        CbcFinancialInstitutionBranch	is like FinancialInstitutionBranch
        CbcRoutingNumber				is Alpha 35
        CbtIssueBnkAmt          		is like InternationalAmount
        CbtIssueDate            		is Date
        CbtReconDate            		is Date
        CbtVendor               		is like Vendor 
        CbtRecStatus            		is Numeric size 1
        CbtSuffix               		is like Suffix
        VenVendorVname          		is like VendorName 
        	holds pii
		PayeePostalAddress				is a PostalAddressV2	
			holds pii
		
	Relations
		CashCodeRel
			one-to-one relation to CashCode
			Field Mapping uses symbolic key
				related.CashManagementGroup 		= CashManagementGroup	
				related.CashCode					= CbtCashCode	
		
		LastPositivePayOutputFileDetailRel
			one-to-many relation to PositivePayOutputFileDetail
			Field Mapping uses symbolic key
				related.CashManagementGroup			= CashManagementGroup
				related.PositivePayOutputFileHeader	= PositivePayOutputFileHeader
					
	Transient Fields
		TransientFromCurrency						is a FromCurrency
			derive value from PositivePayOutputFileHeader.CashCode.Currency
		BankAccountNumberCurrency					is a Currency
			derive value from CashCodeRel.BankAccountNumber.Currency

    Derived Fields
    	DerivedReconDate is a DerivedField
    		type is Alpha 8
    		if (CbtReconDate entered)
    			return CbtReconDate
    		else
    			return ""
    		
        DoubleQuote        is a StringField
            type is Alpha 2
            "\""

		CbtIssueBnkAmtNumberOfDecimals is a StringField
            type is Alpha 4
			"%."
			BankAccountNumberCurrency.NumberOfDecimals
			"f"
		
        CsvOutput          is a StringField
            type is Alpha 2048
			DoubleQuote
			CbtCompany              		
			DoubleQuote
			","
			DoubleQuote
			CbtCashCode             		
			DoubleQuote
			","
			DoubleQuote
			CbtBankInstCode         		
			DoubleQuote
			","
			DoubleQuote
			CbtTransNbr             		
			DoubleQuote
			","
			DoubleQuote
			CbcBankAcctNbr          		
			DoubleQuote
			","
			DoubleQuote
			CbcFinancialInstitution 		
			DoubleQuote
			","
			DoubleQuote
			CbcFinancialInstitutionBranch
			DoubleQuote
			","
			DoubleQuote
			CbcRoutingNumber
			DoubleQuote
			","
			DoubleQuote
			CbtIssueBnkAmt using "<CbtIssueBnkAmtNumberOfDecimals>"
			DoubleQuote
			","
			DoubleQuote
			CbtIssueDate            		
			DoubleQuote
			","
			DoubleQuote
			DerivedReconDate            		
			DoubleQuote
			","
			DoubleQuote
			CbtVendor               		
			DoubleQuote
			","
			DoubleQuote
			CbtRecStatus            		
			DoubleQuote
			","
			DoubleQuote
			CbtSuffix               		
			DoubleQuote
			","
			DoubleQuote
			VenVendorVname          		
			DoubleQuote
			","
			DoubleQuote
			PayeePostalAddress.DeliveryAddress.AddressLine1
			DoubleQuote
			","
			DoubleQuote
			PayeePostalAddress.DeliveryAddress.AddressLine2
			DoubleQuote
			","
			DoubleQuote
			PayeePostalAddress.DeliveryAddress.AddressLine3
			DoubleQuote
			","
			DoubleQuote
			PayeePostalAddress.DeliveryAddress.AddressLine4
			DoubleQuote
			","
			DoubleQuote
			PayeePostalAddress.Municipality
			DoubleQuote
			","
			DoubleQuote
			PayeePostalAddress.StateProvince
			DoubleQuote
			","
			DoubleQuote
			PayeePostalAddress.PostalCode
			DoubleQuote
			","
			DoubleQuote
			PayeePostalAddress.Country
			DoubleQuote

	Actions
        Create is a Create Action
        	restricted
			bypass field rules	
			Entrance Rules
				PositivePayOutputFileDetail = last LastPositivePayOutputFileDetailRel.PositivePayOutputFileDetail + 1	
				
        Update is an Update Action
			restricted
			bypass field rules	
							
        Delete is a Delete Action
			restricted

