FranchiseBudget is a BusinessClass
    owned by fr
    prefix is FBU
    classic name is FRBUDID

    Ontology
        symbolic key is FranchiseBudget
            classic set name is FBUSET1
            classic name is BUDGET-ID

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields
        Description
        BudgetType  is AlphaUpper size 1
            States
                AmountsAndDates value is "A"
                    default label is "Amounts and Dates"
                DatesOnly       value is "D"
                    default label is "Dates only"
        Currency
            classic name is CURRENCY-CODE

    Relations

        FranchiseCompanyBudgetRel
            one-to-many relation to FranchiseCompanyBudget
            Field Mapping uses symbolic key
                related.Company         = Company
                related.FranchiseBudget = FranchiseBudget








	Conditions
		AmountTypeBudget
			restricted
			when (BudgetType.AmountsAndDates)
		
		BudgetDatesExist
			restricted
			when (FranchiseCompanyBudgetRel exists)
		
		IsValidForActorContext			
			restricted
			when ((actor.context.FinanceEnterpriseGroup != ""
			and   Company.GeneralLedgerCompany.FinanceEnterpriseGroup = actor.context.FinanceEnterpriseGroup)
			or   (actor.context.FinanceEnterpriseGroup = ""))		

		FranchiseBudgetExists					
			restricted
			when (FranchiseBudget exists)
			
    Field Rules
        Description
            required

        BudgetType
            required
			if (BudgetDatesExist)
				cannot be changed
					"PeriodDetailExists;TypeCannotBeChanged"

		Currency
			initial value is Company.GeneralLedgerCompany.Currency
			default to Company.GeneralLedgerCompany.Currency
			required 










	Actions
        Create is a Create Action

        Update is an Update Action

        Delete is a Delete Action
			Action Rules



