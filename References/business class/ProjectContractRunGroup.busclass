ProjectContractRunGroup is a BusinessClass
    owned by Projects
    prefix is PJCRG

    Ontology
    	symbolic key is ProjectContractRunGroup
    		
    Patterns
    	implements DynamicCreation

    Persistent Fields
    	BilledAmount	is like InternationalAmount
    		precision is ProjectContract.Currency.NumberOfDecimals
    	BillableAmount 	is like InternationalAmount
    		precision is ProjectContract.Currency.NumberOfDecimals
    	Type			is Numeric size 1
    		States
    			Invoice				value is 0
    			RevenueRecognition	value is 1
    	ThroughDate		is Date
    	DateRange

	Derived Fields

    Conditions
    	CreatedInvoicesExist
    		when (Type.Invoice
    		and   CreatedInvoicesRel exists)

    	NonRetainerCreatedInvoicesExist
    		when (Type.Invoice
    		and   NonRetainerCreatedInvoicesRel exists)    		    		

		CreatedRevenueInvoicesExist
			when (Type.RevenueRecognition
			and   CreatedInvoicesRel exists)

		JournalizedRevenueInvoicesExist
			when (Type.RevenueRecognition
			and   JournalizedInvoicesRel exists)

		JournalizedInvoicesExist
			when (Type.Invoice
			and   JournalizedInvoicesRel exists)

    Relations
		CreatedInvoicesRel	is a ProjectContractInvoice set
			Instance Selection
				where (related.Status.Created)

		NonRetainerCreatedInvoicesRel	is a ProjectContractInvoice set
			Instance Selection
				where (related.Status.Created
				and   !related.InvoiceType.Retainer
				and   !related.InvoiceType.Retainage)

		JournalizedInvoicesRel	is a ProjectContractInvoice set
			Instance Selection
				where (related.Status.Journalized
				and   !related.InvoiceType.Retainer
				and   !related.InvoiceType.Reversal)

    Sets

    Field Rules

	Delete Rules

	Actions
		Create is a Create Action
			restricted
					
		Delete is a Delete Action
			restricted
			
		Update is an Update Action
			restricted
