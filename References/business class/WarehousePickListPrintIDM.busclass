WarehousePickListPrintIDM is a BusinessClass
	owned by wh
	
	prefix is WPLPI
	
	Ontology
		symbolic key is WarehousePickListPrintIDM
		
	
	Patterns
		implements StaticJava
		disable AuditIndex

	Persistent Fields
		CustomerOrder
		Requisition					is like Requisition
		ReprintNumber				is Numeric size 3
			restricted
		WeightTotal					is Decimal 9.3
		CubicTotal					is Decimal 9.3
			
	Context Fields
		MyWarehouseBatch			is a WarehouseBatch

	Local Fields
		LocalStatusText				is Alpha 7
		LocalIDMTotals				is Boolean
		LocalTotalPrintedQuantity	is a Quantity
		LocalTotalUnitCost			is a InternationalCost
		LocalDeliveryData			is Boolean
		LocalIncludeCost			is Boolean
		LocalAllocateDetail			is Boolean
		IDMGenerateDocument
		IDMJob
		LocalIncludeBackorder		is AlphaUpper 1
			States
				DoNotPrintBackorders value is "N"
                    default label is "Do not print Backorders"
                IncludeBackorders    value is "Y"
		LocalIncludeKillDetail		is AlphaUpper 1
			States
				Yes     value is "Y"
                No      value is "N"
                Partial value is "P"

        LocalExpectedShipDate			is Date
        LocalDocumentSource			is AlphaUpper 2
        	States
        		CustomerOrders value is "OE"
        		Requisitions   value is "RQ"
        LocalAllocationPurpose		is AlphaUpper 1
        	States
        		SpeedPicking        value is "S"
        		ConsolidatedPicking value is "C"
        LocalForcePreferredBin		is AlphaUpper size 1
    		States
        		YesPreferredBin   value is "Y"
           			default label is "Yes (Preferred Bin)"
        		NoNonPreferredBin value is "N"
            		default label is "No (Non-preferred Bin)"
        LocalReprintBatch				is Numeric 6
        LocalReprintShipment			is Alpha 10
        LocalSourceDocument1			is Alpha 10
        LocalSourceDocument2			is Alpha 10
        LocalSourceDocument3			is Alpha 10
        LocalSourceDocument4			is Alpha 10
        LocalSourceDocument5			is Alpha 10
        LocalSourceDocument6			is Alpha 10
        LocalSourceDocument7			is Alpha 10
        LocalSourceDocument8			is Alpha 10
        LocalSourceDocument9			is Alpha 10
        LocalSourceDocument10			is Alpha 10
        LocalSourceDocument11			is Alpha 10
        LocalSourceDocument12			is Alpha 10
        LocalRequestingLocation		is like RequestingLocation
        LocalCustomer					is Alpha 9
        LocalItem						is like Item
        LocalProcessType				is like WarehouseProcessType
        LocalFromAllocationPriority	is Alpha 2
        LocalToAllocationPriority		is Alpha 2
        LocalShipTo					is like CustomerShipTo
        LocalCarrier					is Alpha 9
        LocalRouteDay					is like DayOfWeek
        LocalRoute					is Alpha 4
        LocalRouteStop				is Alpha 4
        LocalAllRoute					is AlphaUpper size 1
            States
                None          value is "N"
                AllRoutes     value is "A"
                SpecificRoute value is "S"
        LocalSkipInsufficientDetails	is AlphaUpper size 1     
            States
                Yes value is "Y"
                No  value is "N"
        LocalPrintOption			is Numeric size 1
        	States
				ByShipmentDocumentLine                 value is 1
					default label is "By Shipment - Document Line"
				ByShipmentBinLotSerial                 value is 2
					default label is "By Shipment - Bin/Lot/Serial"
				ByShipmentBinLotSerialRequisitionBased value is 3
					default label is "By Shipment - Bin/Lot/Serial (Requisition Based)"
				ByBinItemUomLotSerial                  value is 4
					default label is "By Bin - Item/UOM/Lot/Serial"
		LocalWeightTotal		is Decimal 9.3
		LocalCubicTotal		is Decimal 9.3

		LocalFullFileName is Alpha 150
		LocalShipmentSequence is Numeric 3
		LocalSourceSequence is Numeric 1
		LocalPrintRequester			is AlphaUpper size 1
			States
				Yes value is "Y"
				No  value is "N"
		LocalIDMPrinter				is like IDMPrinter
		LocalWarehouseShipmentLine	is like WarehouseShipmentLine
		LocalProcedureName			is Text
		LocalProvider				is Text
		LocalPreferenceCard			is a PreferenceCard

	Rule Blocks
		CalculateIDMTotals
			if(not LocalIDMTotals)
				for each WarehousePickListPrintLineRel
					LocalTotalUnitCost 			+= each.DerivedExtendedCost

					LocalTotalPrintedQuantity 	+= each.DerivedTotalQuantityOfComponents
				LocalIDMTotals = true
		
		CombinePrintedQuantities
			if(not LocalCombine)
				for each CombinePickListPrintDetailsRel
					LocalCombinedQuantity	+= each.WarehouseShipmentLine.PrintedQuantity
				LocalCombine = true
				
		SetIDMAttribute
			initialize LocalShipmentSequence

			if (LocalPrintOption.ByBinItemUomLotSerial)
				for each WarehouseShipmentRel
			 		if (LocalShipmentSequence < 100)
			 			LocalShipmentSequence += 1
			 			IDMAttributes.MultiValue1.IDMAttributeValueOccurs.IDMAttributeValue[LocalShipmentSequence] = each.WarehouseShipment
			 		else
			 			end for each
			else
				IDMAttributes.MultiValue1.IDMAttributeValueOccurs.IDMAttributeValue[1] = WarehouseShipment
			 	
			IDMAttributes.MultiValue1.IDMAttributeName  = "WarehouseShipment"
			
			initialize LocalSourceSequence
			if (LocalPrintOption.ByBinItemUomLotSerial)
				for each distinct WarehouseDemand.DemandSystemCode in WarehouseShipmentRel
					if (LocalSourceSequence < 10)
						LocalSourceSequence += 1
						IDMAttributes.MultiValue2.IDMAttributeValueOccurs.IDMAttributeValue[LocalShipmentSequence] = each.WarehouseDemand.DemandSystemCode
			 		else
			 			end for each
			else
				IDMAttributes.MultiValue2.IDMAttributeValueOccurs.IDMAttributeValue[1] = WarehouseShipment.WarehouseDemand.DemandSystemCode
			 	
			IDMAttributes.MultiValue2.IDMAttributeName  = "SourceDocument"
		
	Conditions

		IsPreferenceCardInUse
			restricted
			when (RequisitionRel.RequestingLocation.PreferenceCardOption.PreferenceCardsInUse 
			or   (RequisitionRel.RequestingLocation.PreferenceCardOption.DefaultToInventoryCompany and Company.PreferenceCardOption.PreferenceCardsInUse) 
			or   (RequisitionRel.RequestingLocation.PreferenceCardOption.DefaultToInventoryCompany and Company.PreferenceCardOption.DefaultToItemGroup and Company.ItemGroup.PreferenceCardsInUse)) 

		DisplayPreferenceCard
			restricted
			when (RequisitionRel.HasPreferenceCardTransaction
			and   IsPreferenceCardInUse)

	Derived Fields
		
		DerivedSystemCode is a DerivedField
			type is AlphaUpper size 2
			if (WarehouseShipment.WarehouseDemand.DemandSystemCode.CustomerOrder)
				return "OE"
			if (WarehouseShipment.WarehouseDemand.DemandSystemCode.Requisitions) 
				return "RQ"
			if (WarehouseShipment.WarehouseDemand.DemandSystemCode.WorkOrder) 
				return "WO"
			if (WarehouseShipment.WarehouseDemand.DemandSystemCode.Intransit) 
				return "IC"
			if (WarehouseShipment.WarehouseDemand.DemandSystemCode.PurchaseOrder)
				return "PO"

		DerivedIsReprinted is a DerivedField
			type is Alpha 20
			if(ReprintNumber > 1)
				return "Reprinted Document"
			
		DerivedAllocateDetailParameter is a DerivedField
			type is Alpha 3

			if (LocalAllocateDetail)
				return "Yes"
			else
				return "No"
				
		DerivedAllocateDetail is a DerivedField
			type is Boolean
			return LocalAllocateDetail
		
		DerivedIncludeCostParameter is a DerivedField
			type is Alpha 3

			if (LocalIncludeCost)
				return "Yes"
			else
				return "No"
				
		DerivedIncludeCost is a DerivedField
			type is Boolean

			return LocalIncludeCost
		
		DerivedFileName is a StringField
			type is  Alpha size 100
			"Warehouse Pick List "
			Company
			"-"
			InventoryLocation
			"-"
			WarehouseShipment.WarehouseBatch
			"-"
			WarehouseShipment.WarehouseDemand.DemandDocument
			" "
			ReprintNumber

		DerivedCurrentDate is a DerivedField
			type is Date
			return current corporate date
		
		DerivedStatusText is a DerivedField
			type is Alpha 7
			LocalStatusText = "Pick"
			if (!WarehouseShipment.RequirePickingFeedback)
				LocalStatusText = "Pack"
			if (!WarehouseShipment.RequirePickingFeedback and !WarehouseShipment.RequirePackingFeedback)
				LocalStatusText = "Ship"
			if(WarehouseShipment.Status.Shipped)
				LocalStatusText =  "Invoice"
			return LocalStatusText
		
		DerivedCustomerShipTo is a DerivedField
			type is Alpha 4
			if(WarehouseShipment.CustomerShipTo entered)
				return WarehouseShipment.CustomerShipTo

		DerivedCarrier is a DerivedField
			type is Alpha 9
			if(WarehouseShipment.Carrier entered)
				return WarehouseShipment.Carrier

		DerivedRoute is a DerivedField
			type is Alpha 4
			if(WarehouseShipment.RouteHeader.Route entered)
				return WarehouseShipment.RouteHeader.Route

		DerivedRouteStop is a DerivedField
			type is Alpha 4
			if(WarehouseShipment.RouteStop entered)
				return WarehouseShipment.RouteStop
		
		DerivedTotalPrintedQuantity is a DerivedField
			type is like Quantity
				precision is 4
			include CalculateIDMTotals
			return LocalTotalPrintedQuantity
		
		DerivedTotalCost is a DerivedField
			type is like InternationalCost
				precision is 4
			include CalculateIDMTotals
			return LocalTotalUnitCost
			
		DerivedBackorderCheck is a DerivedField
			type is Alpha 30
			if (ItemsWithBackorderRel exists)
				return "BackorderExistsForShipment"
			else
				return "NoBackordersForThisShipment"
				
		DerivedIncludeBackorder is a DerivedField
			type is Alpha 50
			if (LocalIncludeBackorder entered)
				if (LocalIncludeBackorder.DoNotPrintBackorders)
					return "Do Not Print Backorders"
				else
					return "Include Backorders"
				
		DerivedIncludeKillDetail is a DerivedField
			type is Alpha 10
			if (LocalIncludeKillDetail entered)
				if (LocalIncludeKillDetail.Yes)
					return "Yes"
				else
				if (LocalIncludeKillDetail.No)
					return "No"
				else
					return "Partial"
			
		DerivedExpectedShipDate is a DerivedField
			type is Date
			return LocalExpectedShipDate
			
		DerivedDocumentSource is a DerivedField
			type is Alpha 30
			if (LocalDocumentSource entered)
				if (LocalDocumentSource.CustomerOrders)
					return "Customer Order"
				else
					return "Requisition"
			else
				return "Requisition And Customer Order"
					
		DerivedAllocationPurpose is a DerivedField
			type is Alpha 22
			if (LocalAllocationPurpose entered)
				if (LocalAllocationPurpose.SpeedPicking)
					return "Speed Picking"
				else
				if (LocalAllocationPurpose.ConsolidatedPicking)
					return "Consolidated Picking"
					
		DerivedForcePreferredBin is a DerivedField
			type is Alpha 3
			if (LocalForcePreferredBin entered)
				if (LocalForcePreferredBin.YesPreferredBin)
					return "Yes"
				else
					return "No"
					
		DerivedReprintBatch is a DerivedField
			type is Alpha 6
			if (LocalReprintBatch != 0)
				return LocalReprintBatch
				
		DerivedReprintShipment is a DerivedField
			type is Alpha 10
			if (LocalReprintShipment != 0)
				return LocalReprintShipment
				
		DerivedSourceDocument1	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument1 != 0)
				return LocalSourceDocument1
			
		DerivedSourceDocument2	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument2 != 0)
				return LocalSourceDocument2
			
		DerivedSourceDocument3	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument3 != 0)
				return LocalSourceDocument3
			
		DerivedSourceDocument4	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument4 != 0)
				return LocalSourceDocument4
			
		DerivedSourceDocument5	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument5 != 0)
				return LocalSourceDocument5
			
		DerivedSourceDocument6	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument6 != 0)
				return LocalSourceDocument6
			
		DerivedSourceDocument7	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument7 != 0)
				return LocalSourceDocument7
			
		DerivedSourceDocument8	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument8 != 0)
				return LocalSourceDocument8
			
		DerivedSourceDocument9	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument9 != 0)
				return LocalSourceDocument9
			
		DerivedSourceDocument10	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument10 != 0)
				return LocalSourceDocument10
			
		DerivedSourceDocument11	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument11 != 0)
				return LocalSourceDocument11
			
		DerivedSourceDocument12	is a DerivedField
			type is Alpha 10
			if (LocalSourceDocument12 != 0)
				return LocalSourceDocument12
			
		DerivedRequestingLocation is a DerivedField
			type is like RequestingLocation
			return LocalRequestingLocation
			
		DerivedCustomer is a DerivedField
			type is Alpha 9
			if (LocalCustomer != 0)
				return LocalCustomer
			
		DerivedItem is a DerivedField
			type is like Item
			return LocalItem
			
		DerivedProcessType is a DerivedField
			type is like WarehouseProcessType
			return LocalProcessType
			
		DerivedFromAllocationPriority is a DerivedField
			type is Alpha 2
			if (LocalFromAllocationPriority != 0)
				return LocalFromAllocationPriority
			
		DerivedToAllocationPriority is a DerivedField
			type is Alpha 2
			if (LocalToAllocationPriority != 0)
				return LocalToAllocationPriority
			
		DerivedShipTo is a DerivedField
			type is Alpha 4
			if (LocalShipTo != 0)
				return LocalShipTo
			
		DerivedCarrierFilter is a DerivedField
			type is Alpha 9
			if (LocalCarrier != 0)
				return LocalCarrier
			
		DerivedRouteDay is a DerivedField
			type is Alpha 9
			if (LocalRouteDay entered)
				if (LocalRouteDay.Sunday)
					return "Sunday"
				else
				if (LocalRouteDay.Monday)
					return "Monday"
				else
				if (LocalRouteDay.Tuesday)
					return "Tuesday"
				else
				if (LocalRouteDay.Wednesday)
					return "Wednesday"
				else
				if (LocalRouteDay.Thursday)
					return "Thursday"
				else
				if (LocalRouteDay.Friday)
					return "Friday"
				else
					return "Saturday"
			
		DerivedRouteFilter is a DerivedField
			type is Alpha 4
			if (LocalRoute != 0)
				return LocalRoute
			
		DerivedRouteStopFilter is a DerivedField
			type is Alpha 4
			if (LocalRouteStop != 0)
				return LocalRouteStop
			
		DerivedAllRoute is a DerivedField
			type is Alpha 15
			if (LocalAllRoute entered)
				if (LocalAllRoute.None)
					return "None"
				else
				if (LocalAllRoute.AllRoutes)
					return "AllRoutes"
				else
					return "SpecificRoute"
					
		DerivedSkipInsufficientDetails is a DerivedField
			type is Alpha 5
			if (LocalSkipInsufficientDetails entered)
				if (LocalSkipInsufficientDetails.Yes)
					return "Yes"
				else
					return "No"
					
		DerivedPrintOption is a DerivedField
			type is Alpha 50
			if (LocalPrintOption.ByShipmentDocumentLine)
				return "By Shipment - Document Line"
			else
			if (LocalPrintOption.ByShipmentBinLotSerial)
				return "By Shipment - Bin/Lot/Serial"
			else
			if (LocalPrintOption.ByShipmentBinLotSerialRequisitionBased)
				return "By Shipment - Bin/Lot/Serial (Requisition Based)"
			else
				return "By Bin - Item/UOM/Lot/Serial"
				
		DerivedPrintDeliveryData is a DerivedField
			type is Alpha 3
			if (LocalDeliveryData)
				return "Yes"
			return "No"
			
		DerivedSourceDocuments is a StringField
			type is Alpha 135
			DerivedSourceDocument1
			" "
			DerivedSourceDocument2
			" "
			DerivedSourceDocument3
			" "
			DerivedSourceDocument4
			" "
			DerivedSourceDocument5
			" "
			DerivedSourceDocument6
			" "
			DerivedSourceDocument7
			" "
			DerivedSourceDocument8
			" "
			DerivedSourceDocument9
			" "
			DerivedSourceDocument10
			" "
			DerivedSourceDocument11
			" "
			DerivedSourceDocument12
		
		DerivedOption1WeightTotal is a DerivedField
			type is Decimal 9.3
			return WeightTotal
			
		DerivedOption1CubicTotal is a DerivedField
			type is Decimal 9.3
			return CubicTotal
			
		DerivedOption2WeightTotal is a DerivedField
			type is Decimal 9.3
			return WeightTotal
			
		DerivedOption2CubicTotal is a DerivedField
			type is Decimal 9.3
			return CubicTotal
			
		DerivedOption3WeightTotal is a DerivedField
			type is Decimal 9.3
			return WeightTotal
			
		DerivedOption3CubicTotal is a DerivedField
			type is Decimal 9.3
			return CubicTotal
			
		DerivedNoBackordersFlag is a DerivedField
			type is Alpha 35
			if (DerivedPrintOption = "By Bin - Item/UOM/Lot/Serial")
				if (not ShipmentBackordersRel exists)
					return "No Backorders To Print"
			else
				if (not ItemsWithBackorderRel exists)
					return "No Backorders To Print"
				
		DerivedNoKilledItemsFlag is a DerivedField
			type is Alpha 35
			if (DerivedPrintOption = "By Bin - Item/UOM/Lot/Serial")
				if (not RequisitionKilledItemsRel exists)
					return "No Killed Items To Print"
			else
				if (not RequisitionLineWithKilledQuantityRel exists)
					return "No Killed Items To Print"

		DerivedRequesterNumber is a StringField
			type is Alpha 15
			RequisitionRel.Requester
			" -"
				
		DerivedPrintRequester is a DerivedField
			type is Alpha 3
			if (LocalPrintRequester.Yes)
				return "Yes"
			else
				return "No"
				
		DerivedIDMPrinter	is a DerivedField
			type is like IDMPrinter
			return LocalIDMPrinter
			
		DerivedIDMCurrentTime is a DerivedField
			type is Time
			return current corporate time
		
		DerivedIDMBarCode is a StringField
			type is  Alpha size 50
			"PL:"
			Company
			":"
			InventoryLocation
			":"
			WarehouseShipment
		
		DerivedPickListHasLinesSpecialHandling is a DerivedField
			type is Alpha size 3
			if (LinesWithSpecialHandlingRel exists)
				return "Yes"
			return "No"

		DerivedDisplayPrefCardDetail is a DerivedField
			type is Boolean
			if (DisplayPreferenceCard)
				return true
			return false

		DerivedProcedureDate is a DerivedField
            type is Date
			if (DisplayPreferenceCard)
				return first RequisitionLinePrefCardForIDMRel.DerivedProcedureDate
			return blank

		DerivedProcedureTime is a DerivedField
            type is Time
			if (DisplayPreferenceCard)
				return first RequisitionLinePrefCardForIDMRel.DerivedProcedureTime
			return blank

		DerivedProcedureCase is a DerivedField
            type is Text
			if (DisplayPreferenceCard)
				return first RequisitionLinePrefCardForIDMRel.DerivedProcedureCase
			return blank

		DerivedProcedureRoom is a DerivedField
            type is Text
			if (DisplayPreferenceCard)
				return first RequisitionLinePrefCardForIDMRel.DerivedProcedureRoom
			return blank

		DerivedPatientNameForIDMPickList is a DerivedField
            type is Text
			if (DisplayPreferenceCard)
				return first RequisitionLinePrefCardForIDMRel.DerivedPatientNameForIDMPickList
			return blank

		DerivedPatientNameForIDMPackingList is a DerivedField
            type is Text
			if (DisplayPreferenceCard)
				return first RequisitionLinePrefCardForIDMRel.DerivedPatientNameForIDMPackingList
			return blank
		
		DerivedPatientID is a DerivedField
            type is Text
			if (DisplayPreferenceCard)
				return first RequisitionLinePrefCardForIDMRel.DerivedPatientID
			return blank

		DerivedPreferenceCard is a DerivedField
            type is Text
			if (DisplayPreferenceCard)
				for each distinct ScheduledProcedurePreferenceCard in ScheduledProcedureForIDMRel
					if (DerivedPreferenceCard entered)
						DerivedPreferenceCard += "; "
					DerivedPreferenceCard += each.PreferenceCard + " - " + each.PreferenceCard.PreferenceCardName
				return DerivedPreferenceCard
			return blank

		DerivedProvider is a DerivedField
            type is Text
			initialize LocalProvider
			if (DisplayPreferenceCard)
				for each ScheduledProcedureForIDMRel
					if (LocalProvider entered)
						LocalProvider += "; "
					LocalProvider += each.DerivedProviderFullName
				if (LocalProvider entered)
					return com.lawson.apps.procurement.base.StringUtils.getUniqueValues(LocalProvider as String, "; ")
			return blank

		DerivedProcedure is a DerivedField
            type is Text
			initialize LocalProcedureName
			if (DisplayPreferenceCard)
				for each distinct ScheduledProcedurePreferenceCard in ScheduledProcedureForIDMRel
					initialize LocalPreferenceCard
					LocalPreferenceCard = each.PreferenceCard 
					for each distinct PreferenceCardProcedureFieldGroup in PreferenceCardProcedureRel
						if (LocalProcedureName entered)
							LocalProcedureName += "; "
						LocalProcedureName += each.Procedure + " " + each.Procedure.ClinicalProcedureName
				if (LocalProcedureName entered)	
					return com.lawson.apps.procurement.base.StringUtils.getUniqueValues(LocalProcedureName as String, "; ")
			return blank
		
	Field Rules

		CustomerOrder
			if(WarehouseShipment.IsCustomerOrder)
				initialize Requisition
				default to WarehouseShipment.WarehouseDemand.DemandDocument

		Requisition
			if(WarehouseShipment.IsRequisition)
				initialize CustomerOrder
				default to WarehouseShipment.WarehouseDemand.DemandDocument
		
		
	Relations
		RequisitionRel
			one-to-one relation to Requisition
			Field Mapping uses symbolic key
				related.Company 	= WarehouseShipment.CompanyAndLocation.RequestingCompany
				related.Requisition = WarehouseShipment.WarehouseDemand.DemandDocument
		
		RequisitionLinePrefCardForIDMRel
			one-to-many relation to RequisitionLine
			Field Mapping uses symbolic key
				related.Company 	          = Company
				related.Requisition           = Requisition
			Instance Selection
				where (related.PreferenceCardTransaction)

		ScheduledProcedureForIDMRel
			one-to-many relation to ScheduledProcedure
			Field Mapping uses symbolic key
				related.Company 		      = Company
			Instance Selection
				where (related.Requisition    = Requisition)

		PreferenceCardProcedureRel
			one-to-many relation to PreferenceCardProcedure
			Field Mapping uses symbolic key
				related.ItemGroup 			  = Company.ItemGroup
			Instance Selection
				where (related.PreferenceCard = LocalPreferenceCard)

		WarehousePickListPrintLineRel
			one-to-many relation to WarehousePickListPrintLine
			Field Mapping uses symbolic key
				related.Company								= Company
				related.InventoryLocation					= InventoryLocation
				related.WarehouseShipment					= WarehouseShipment
		
		WarehousePickListPrintLineNoDetailRel
			one-to-many relation to WarehousePickListPrintLine
			Field Mapping uses symbolic key
				related.Company								= Company
				related.InventoryLocation					= InventoryLocation
				related.WarehouseShipment					= WarehouseShipment
			Instance Selection
				where ((LocalPrintOption.ByShipmentBinLotSerial and related.HasNoDetails and not related.HasComponents)
				or	  ((LocalPrintOption.ByShipmentBinLotSerialRequisitionBased or MyWarehouseBatch.LocalPrintOption.ByBinItemUomLotSerial) and not related.HasDetailsForShipmentLineItem)
				or    (LocalReprintBatch > 0 and (related.IsItemSerialRequiredAtIssue or related.IsItemLotRequiredAtIssue)))
		
		WarehousePickListPrintLineDetailedRel
			one-to-many relation to WarehousePickListPrintLine
			Field Mapping uses symbolic key
				related.Company								= Company
				related.InventoryLocation					= InventoryLocation
				related.WarehouseShipment					= WarehouseShipment
			Instance Selection
				where (related.HasDetails)

		RequisitionForIDMRel is a WarehousePickListPrintIDM set
			Instance Selection
				where (WarehouseShipment.IsRequisition)

		CustomerOrderForIDMRel is a WarehousePickListPrintIDM set
			Instance Selection
				where (WarehouseShipment.IsCustomerOrder)
				
		RequisitionCommentForPickListPrintIDMRel
			one-to-many relation to RequisitionComment
			Field Mapping uses part of key
				related.Company 							= WarehouseShipment.CompanyAndLocation.RequestingCompany
				related.Requisition 						= Requisition
			Instance Selection
				where (related.CommentType.PrintOnPickList)

		IncludeCostHeadRel is a WarehousePickListPrintIDM set
			Instance Selection
				where (LocalIncludeCost)

		DeliveryDataRel is a WarehousePickListPrintIDM set
			Instance Selection
				where (LocalDeliveryData
				and    WarehouseShipment.IsRequisition)

		AllShipmentLinesByBatchNoDetailRel
			one-to-many relation to WarehousePickListPrintLine
			Field Mapping uses symbolic key
				related.Company										= Company
				related.InventoryLocation							= InventoryLocation
			Instance Selection	
				where (related.WarehouseShipment.WarehouseBatch		= WarehouseShipment.WarehouseBatch
				and    related.HeadRecord
				and    related.HasNoDetails)
		
		AllShipmentLinesByBatchDetailedRel
			one-to-many relation to WarehousePickListPrintDetail
			Field Mapping uses symbolic key
				related.Company										= Company
				related.InventoryLocation							= InventoryLocation
			Instance Selection	
				where (related.WarehouseShipment.WarehouseBatch		= WarehouseShipment.WarehouseBatch)
		
		HeadDetailRecordRel
			one-to-many relation to WarehousePickListPrintDetail
			Field Mapping uses IDMSet
				related.Company										= Company
				related.InventoryLocation							= InventoryLocation
			Instance Selection	
				where (related.WarehouseShipment.WarehouseBatch		= WarehouseShipment.WarehouseBatch
				and    related.HeadRecord 							= true)
		
		AllShipmentByBatchRel 
			one-to-many relation to WarehousePickListPrintIDM
			Field Mapping uses symbolic key
				related.Company										= Company
				related.InventoryLocation							= InventoryLocation
			Instance Selection	
				where (related.WarehouseShipment.WarehouseBatch		= WarehouseShipment.WarehouseBatch)	

		WarehouseShipmentLineRel
			one-to-many relation to WarehouseShipmentLine
			Field Mapping uses symbolic key
				related.Company										= Company
				related.InventoryLocation							= InventoryLocation
				related.WarehouseShipment							= WarehouseShipment
				
		ItemsWithBackorderRel
			one-to-many relation to WarehouseDemandLine
			Field Mapping uses Set1
				related.Company										= Company
				related.WarehouseDemand								= WarehouseShipment.WarehouseDemand
			Instance Selection
				where (LocalIncludeBackorder.IncludeBackorders
				and    related.BackorderedQuantity entered)
				
		ShipmentLineDetailByBinRel
			one-to-many relation to WarehousePickListPrintDetail
			Field Mapping uses ByBinLotSublotSerial
				related.Company										= Company
				related.InventoryLocation							= InventoryLocation
			Instance Selection	
				where (related.WarehouseShipment.WarehouseBatch		= WarehouseShipment.WarehouseBatch
				and    related.WarehouseShipment					= WarehouseShipment)
				
		ShipmentLineDetailRQBasedRel
			one-to-many relation to WarehousePickListPrintDetail
			Field Mapping uses ByBinLineLotSublotSerial
				related.Company										= Company
				related.InventoryLocation							= InventoryLocation
			Instance Selection	
				where (related.WarehouseShipment.WarehouseBatch		= WarehouseShipment.WarehouseBatch
				and	   related.WarehouseShipment					= WarehouseShipment
				and    not related.FromComponent)
				
		RequisitionLineWithKilledQuantityRel
			one-to-many relation to RequisitionLine
			Field Mapping uses symbolic key
				related.Company 	= WarehouseShipment.CompanyAndLocation.RequestingCompany
				related.Requisition = Requisition
			Instance Selection
				where ((LocalIncludeKillDetail.Yes
				and 	related.KilledQuantity entered)
				or     (LocalIncludeKillDetail.Partial
				and		related.KilledQuantity entered
				and 	related.FromCompanyLocationBin.FromCompany 	= Company
				and		related.FromCompanyLocationBin.FromLocation = InventoryLocation)
				or     (related.PreferenceCardTransaction
				and   	related.KilledQuantity entered))
				
		ShipmentLineDetailByBinItemUOMRel
			one-to-many relation to WarehousePickListPrintDetail
			Field Mapping uses ByBinItemUOMLotSerial
				related.Company										= Company
				related.InventoryLocation							= InventoryLocation
			Instance Selection	
				where (related.WarehouseShipment.WarehouseBatch		= WarehouseShipment.WarehouseBatch)
				
		LastShipmentLineDetailByBinRel
			one-to-many relation to WarehousePickListPrintDetail
			Field Mapping uses ByBinLotSublotSerial
				related.Company										= Company
				related.InventoryLocation							= InventoryLocation
			Instance Selection	
				where (related.WarehouseShipment.WarehouseBatch		= WarehouseShipment.WarehouseBatch
				and    related.WarehouseShipment					= WarehouseShipment
				and    related.LastShipmentLineDetail)
				
		WarehouseShipmentRel
			one-to-many relation to WarehouseShipment
			Field Mapping uses symbolic key
				related.Company										= Company
				related.InventoryLocation							= InventoryLocation
			Instance Selection
				where (related.WarehouseBatch						= WarehouseShipment.WarehouseBatch)
				
		ShipmentBackordersRel
			one-to-many relation to WarehouseDemandLine
			Field Mapping uses Set1
				related.Company										= Company
				related.WarehouseDemand								= WarehouseShipment.WarehouseDemand
			Instance Selection
				where (MyWarehouseBatch.DerivedBatchIncludeBackorder
				and related.BackorderedQuantity entered)
				
		RequisitionKilledItemsRel
			one-to-many relation to RequisitionLine
			Field Mapping uses symbolic key
				related.Company 	= WarehouseShipment.CompanyAndLocation.RequestingCompany
				related.Requisition = Requisition
			Instance Selection
				where ((MyWarehouseBatch.IncludeAllKillDetailsOnReport
				and 	related.KilledQuantity entered)
				or     (MyWarehouseBatch.IncludePartialKillDetailsOnReport
				and		related.KilledQuantity entered
				and 	related.FromCompanyLocationBin.FromCompany 	= Company
				and		related.FromCompanyLocationBin.FromLocation = InventoryLocation)
				or     (related.PreferenceCardTransaction
				and     related.KilledQuantity entered))
				
		RequisitionHeaderCommentCheckRel is a WarehousePickListPrintIDM set
			Instance Selection
				where (WarehouseShipment.IsRequisition
				and    RequisitionCommentForPickListPrintIDMRel exists)
				
		BackorderedItemsCheckRel is a WarehousePickListPrintIDM set
			Instance Selection
				where (ItemsWithBackorderRel exists)
				
		KilledItemsCheckRel is a WarehousePickListPrintIDM set
			Instance Selection
				where (RequisitionLineWithKilledQuantityRel exists)
				
		PrintOptionFourBackorderedItemsCheckRel is a WarehousePickListPrintIDM set
			Instance Selection
				where (ShipmentBackordersRel exists)
				
		PrintOptionFourKilledItemsCheckRel is a WarehousePickListPrintIDM set
			Instance Selection
				where (RequisitionKilledItemsRel exists)
				
		LinesWithInsufficientDetailCheckRel is a WarehousePickListPrintIDM set
			Instance Selection
				where (WarehousePickListPrintLineNoDetailRel exists)
				
		UserDefaultPrinterRel
			one-to-one relation to UserDefaultPrinter
			Field Mapping uses symbolic key
				related.UserDefaultPrinter.Actor	= actor
				
		ExistingShipmentLineRel
			one-to-one relation to WarehousePickListPrintLine
			Field Mapping uses symbolic key
				related.Company 				= Company
				related.InventoryLocation		= InventoryLocation
				related.WarehouseShipment		= WarehouseShipment
				related.WarehouseShipmentLine	= LocalWarehouseShipmentLine
				
		WarehouseShipmentLineComponentWithoutDetailsRel
			one-to-many relation to WarehouseShipmentLineComponent
			Field Mapping uses symbolic key
				related.Company 				= Company
				related.InventoryLocation 		= InventoryLocation
				related.WarehouseShipment 		= WarehouseShipment
			Instance Selection
				where (not related.HasPickListLineDetail)

		LinesWithSpecialHandlingRel
			one-to-many relation to WarehouseShipmentLine
			Field Mapping uses symbolic key
				related.Company					= Company
				related.InventoryLocation		= InventoryLocation
				related.WarehouseShipment		= WarehouseShipment
			Instance Selection
				where (related.HasSpecialHandling
				or related.HasLineComponentSpecialHandling)

		LineWithNoComponentSpecialHandlingRel
			one-to-many relation to WarehouseShipmentLine
			Field Mapping uses symbolic key
				related.Company					= Company
				related.InventoryLocation		= InventoryLocation
				related.WarehouseShipment		= WarehouseShipment
			Instance Selection
				where (related.HasSpecialHandling
				and not related.HasLineComponent)

		LineComponentWithSpecialHandlingRel
			one-to-many relation to WarehouseShipmentLineComponent
			Field Mapping uses symbolic key
				related.Company					= Company
				related.InventoryLocation		= InventoryLocation
				related.WarehouseShipment		= WarehouseShipment
			Instance Selection
				where (related.HasSpecialHandling)

		
	Actions
	
		Create is a Create Action
			restricted
		
		CreatePickListRecord is a Create Action
			restricted
			Exit Rules
				initialize WeightTotal
				initialize CubicTotal
				
				for each WarehouseShipmentLineRel
					LocalWarehouseShipmentLine = each.WarehouseShipmentLine
					
					WeightTotal += each.StockWeight
					CubicTotal 	+= each.StockVolume

					if (ExistingShipmentLineRel not exists)
						invoke CreatePickListLineRecord WarehousePickListPrintLine
							invoked.Company					= each.Company
							invoked.InventoryLocation		= each.InventoryLocation
							invoked.WarehouseShipment		= each.WarehouseShipment
							invoked.WarehouseShipmentLine   = each.WarehouseShipmentLine
		Update is an Update Action
			restricted

		Delete is a Delete Action
			restricted

		CreateWarehousePickListPrintOne is an Instance Action
			restricted
			Parameters
				PrmAllocateDetail			is Boolean
				PrmIncludeBackorders		is AlphaUpper 1
					States
						DoNotPrintBackorders value is "N"
                    		default label is "Do not print Backorders"
                		IncludeBackorders    value is "Y"
				PrmIncludeKillDetails		is AlphaUpper 1
					States
						Yes     value is "Y"
                		No      value is "N"
                		Partial value is "P"
                PrmExpectedShipDate			is Date
                PrmDocumentSource			is AlphaUpper 2
                	States
                		CustomerOrders value is "OE"
                		Requisitions   value is "RQ"
                PrmAllocationPurpose		is AlphaUpper 1
                	States
                		SpeedPicking        value is "S"
                		ConsolidatedPicking value is "C"
                PrmForcePreferredBin		is AlphaUpper size 1
            		States
                		YesPreferredBin   value is "Y"
                   			default label is "Yes (Preferred Bin)"
                		NoNonPreferredBin value is "N"
                    		default label is "No (Non-preferred Bin)"
                PrmReprintBatch				is Numeric 6
                PrmReprintShipment			is a WarehouseShipment
                PrmSourceDocument1			is like DemandDocument
                PrmSourceDocument2			is like DemandDocument
                PrmSourceDocument3			is like DemandDocument
                PrmSourceDocument4			is like DemandDocument
                PrmSourceDocument5			is like DemandDocument
                PrmSourceDocument6			is like DemandDocument
                PrmSourceDocument7			is like DemandDocument
                PrmSourceDocument8			is like DemandDocument
                PrmSourceDocument9			is like DemandDocument
                PrmSourceDocument10			is like DemandDocument
                PrmSourceDocument11			is like DemandDocument
                PrmSourceDocument12			is like DemandDocument
                PrmRequestingLocation		is like RequestingLocation
                PrmCustomer					is like Customer
                PrmItem						is like Item
                PrmProcessType				is like WarehouseProcessType
                PrmFromAllocationPriority	is Numeric 2
                PrmToAllocationPriority		is Numeric 2
                PrmShipTo					is like CustomerShipTo
                PrmCarrier					is like Vendor
                PrmRouteDay					is like DayOfWeek
                PrmRoute					is like Route
                PrmRouteStop				is Numeric size 4
                PrmAllRoute					is AlphaUpper size 1
		            States
		                None          value is "N"
		                AllRoutes     value is "A"
		                SpecificRoute value is "S"
		        PrmSkipInsufficientDetails	is AlphaUpper size 1     
		            States
		                Yes value is "Y"
		                No  value is "N"
		        PrmPrintOption				is Numeric size 1
        			States
						ByShipmentDocumentLine                 value is 1
							default label is "By Shipment - Document Line"
						ByShipmentBinLotSerial                 value is 2
							default label is "By Shipment - Bin/Lot/Serial"
						ByShipmentBinLotSerialRequisitionBased value is 3
							default label is "By Shipment - Bin/Lot/Serial (Requisition Based)"
						ByBinItemUomLotSerial                  value is 4
							default label is "By Bin - Item/UOM/Lot/Serial"
				PrmIncludeCost				is Boolean
				PrmDeliveryData				is Boolean
				PrmIDMPrinter				is an IDMPrinter
				PrmPrintRequester			is AlphaUpper size 1
					States
						Yes value is "Y"
						No  value is "N"
				PrmBatchID					is an IDMPID
				PrmConsolidateFile			is Boolean

			Local Fields
    			IDMAttributes
				
			Action Rules
				initialize LocalAllocateDetail
				LocalAllocateDetail = PrmAllocateDetail
				increment ReprintNumber by 1
				
				LocalIncludeBackorder  	= PrmIncludeBackorders
				LocalIncludeKillDetail 	= PrmIncludeKillDetails
				LocalReprintShipment	= PrmReprintShipment
				LocalIncludeBackorder	= PrmIncludeBackorders
				LocalIncludeKillDetail	= PrmIncludeKillDetails
				LocalExpectedShipDate	= PrmExpectedShipDate
				LocalDocumentSource		= PrmDocumentSource
				LocalAllocationPurpose	= PrmAllocationPurpose
				LocalForcePreferredBin	= PrmForcePreferredBin
				LocalReprintBatch		= PrmReprintBatch
				LocalReprintShipment	= PrmReprintShipment
				LocalSourceDocument1	= PrmSourceDocument1
				LocalSourceDocument2	= PrmSourceDocument2
				LocalSourceDocument3	= PrmSourceDocument3
				LocalSourceDocument4	= PrmSourceDocument4
				LocalSourceDocument5	= PrmSourceDocument5
				LocalSourceDocument6	= PrmSourceDocument6
				LocalSourceDocument7	= PrmSourceDocument7
				LocalSourceDocument8	= PrmSourceDocument8
				LocalSourceDocument9	= PrmSourceDocument9
				LocalSourceDocument10	= PrmSourceDocument10
				LocalSourceDocument11	= PrmSourceDocument11
				LocalSourceDocument12	= PrmSourceDocument12
				LocalRequestingLocation	= PrmRequestingLocation
				LocalCustomer			= PrmCustomer
				LocalItem				= PrmItem
				LocalProcessType		= PrmProcessType
				LocalFromAllocationPriority	= PrmFromAllocationPriority
				LocalToAllocationPriority	= PrmToAllocationPriority
				LocalShipTo				= PrmShipTo
				LocalCarrier			= PrmCarrier
				LocalRouteDay			= PrmRouteDay
				LocalRoute				= PrmRoute
				LocalRouteStop			= PrmRouteStop
				LocalAllRoute			= PrmAllRoute
				LocalSkipInsufficientDetails = PrmSkipInsufficientDetails
				LocalPrintOption		= PrmPrintOption
				LocalIncludeCost 		= PrmIncludeCost
				LocalDeliveryData 		= PrmDeliveryData
				LocalPrintRequester		= PrmPrintRequester
				
				initialize IDMGenerateDocument
				
				IDMGenerateDocument.IDMXMLDefinition.Busclass											= reference to this instance
				IDMGenerateDocument.IDMXMLDefinition.ListName											= "WarehousePickListPrintIDMList"
				IDMGenerateDocument.IDMXMLDefinition.DocumentName										= "WHPLPByShipmentDocumentLine"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].RelationName			= "WarehousePickListPrintLineRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].ListName 			= "WarehousePickListPrintShipmentLineForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].LevelSection1		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].ListTag				= "PickListPrintLines"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].ItemTag				= "PickListPrintLine"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].RelationName			= "LineCommentCheckRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].ListName 			= "RequisitionLineCommentCheckList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].ListTag				= "LineCommentHeaders"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].ItemTag				= "LineCommentHeader"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].RelationName			= "RequisitionLineCommentRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].ListName 			= "RequisitionLineCommentsForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].LevelSection2		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].LevelSection3		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].ListTag				= "RequisitionLineComments"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].ItemTag				= "RequisitionLineComment"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].RelationName			= "WarehousePickListPrintDetailRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].ListName 			= "IDMDetails"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].LevelSection2		= 2
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].ListTag				= "LineDetails"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].ItemTag				= "LineDetail"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].RelationName			= "CustomerOrderLineCommentRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].ListName 			= "CustomerOrderCommentForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].LevelSection2		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].LevelSection3		= 2
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].ListTag				= "CustomerOrderLineComments"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].ItemTag				= "CustomerOrderLineComment"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].RelationName			= "WarehouseShipmentLineComponentRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].ListName 			= "WarehouseShipmentLineComponentIDMList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].LevelSection2		= 3
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].ListTag				= "LineComponents"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].ItemTag				= "LineComponent"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].RelationName			= "WarehouseShipmentLineDetailsRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].ListName 			= "WHPickListComponentDetailsListIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].LevelSection2		= 3
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].LevelSection3		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].ListTag				= "ComponentDetails"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].ItemTag				= "ComponentDetail"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].RelationName			= "ComponentItemCommentsRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].ListName 			= "ItemCommentIDMList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].LevelSection2		= 3
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].LevelSection3		= 2
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].ListTag				= "ComponentItemComments"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].ItemTag				= "ComponentItemComment"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].RelationName			= "LineItemCommentsRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].ListName 			= "ItemCommentIDMList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].LevelSection2		= 4
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].ListTag				= "LineItemComments"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].ItemTag				= "LineItemComment"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].RelationName		= "RequisitionForIDMRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].ListName 			= "RequisitionListForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].LevelSection1		= 2
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].ListTag				= "RequisitionDetails"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].ItemTag				= "RequisitionDetail"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].RelationName		= "CustomerOrderForIDMRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].ListName 			= "CustomerOrderListForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].LevelSection1		= 3
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].ListTag				= "OrderDetails"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].ItemTag				= "OrderDetail"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].RelationName		= "RequisitionHeaderCommentCheckRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].ListName 			= "ColumnHeaderCheckList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].LevelSection1		= 4
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].ListTag				= "RequisitionCommentsHeader"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].ItemTag				= "RequisitionCommentHeader"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].RelationName		= "RequisitionCommentForPickListPrintIDMRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].ListName 			= "RequisitionCommentsForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].LevelSection1		= 4
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].ListTag				= "RequisitionComments"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].ItemTag				= "RequisitionComment"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[14].RelationName		= "BackorderedItemsCheckRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[14].ListName 			= "ColumnHeaderCheckList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[14].LevelSection1		= 5
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[14].ListTag				= "BackorderedItemsHeader"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[14].ItemTag				= "BackorderedItemHeader"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].RelationName		= "ItemsWithBackorderRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].ListName 			= "BackorderedItemDetailsForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].LevelSection1		= 5
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].ListTag				= "BackorderedItems"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].ItemTag				= "BackorderedItem"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].RelationName		= "KilledItemsCheckRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].ListName 			= "ColumnHeaderCheckList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].LevelSection1		= 6
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].ListTag				= "KilledItemsHeader"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].ItemTag				= "KilledItemHeader"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].RelationName		= "RequisitionLineWithKilledQuantityRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].ListName 			= "RequisitionLineForPickListPrintIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].LevelSection1		= 6
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].ListTag				= "KilledItems"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].ItemTag				= "KilledItem"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[18].RelationName		= "LinesWithSpecialHandlingRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[18].ListName 			= "WarehouseShipmentLineWithSpecialHandlingForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[18].LevelSection1		= 7
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[18].ListTag				= "SpecialHandlingLines"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[18].ItemTag				= "SpecialHandlingLine"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[19].RelationName		= "LineComponentSpecialHandlingRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[19].ListName 			= "LineComponentSpecialHandlingIDMList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[19].LevelSection1		= 7
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[19].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[19].ListTag				= "ItemComponents"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[19].ItemTag				= "ItemComponent"
				
				if (DisplayPreferenceCard)
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[20].RelationName		= "RequisitionLineWithPrefCardTranRel"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[20].ListName 			= "WarehousePickListPrintPrefCardForIDM"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[20].LevelSection1		= 1
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[20].LevelSection2		= 5
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[20].ListTag				= "PrefCardTransactions"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[20].ItemTag				= "PrefCardTransaction"

					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[21].ListName 			= "WarehousePickListPrefCardDetailsforIDM"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[21].LevelSection1		= 8
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[21].ListTag				= "PrefCardDetails"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[21].ItemTag				= "PrefCardDetail"

				initialize IDMAttributes
 				IDMAttributes.SingleValue.IDMAttribute[1].IDMAttributeName  	= "Company"
				IDMAttributes.SingleValue.IDMAttribute[1].IDMAttributeValue  	= Company
				IDMAttributes.SingleValue.IDMAttribute[2].IDMAttributeName  	= "InventoryLocation"
				IDMAttributes.SingleValue.IDMAttribute[2].IDMAttributeValue  	= InventoryLocation
				IDMAttributes.SingleValue.IDMAttribute[3].IDMAttributeName  	= "CompanyName"
				IDMAttributes.SingleValue.IDMAttribute[3].IDMAttributeValue  	= Company.Name

				include SetIDMAttribute
				
				IDMGenerateDocument.IDMAttributes		= IDMAttributes
				IDMGenerateDocument.TemplateUniqueId	= Company.PickListPrintByShipmentDocumentLineTemplate.IDMUniqueId
				IDMGenerateDocument.DocumentType		= "FSM_WarehousePickList"
    			IDMGenerateDocument.FileName			= DerivedFileName + Company.PickListPrintByShipmentDocumentLineTemplate.DerivedOutputFormat
				IDMGenerateDocument.BatchID 			= PrmBatchID
    			
				if (PrmIDMPrinter entered 
				and not PrmConsolidateFile)
					IDMGenerateDocument.IDMPrinter		= PrmIDMPrinter 
    			
    			initialize LocalFullFileName
    			LocalFullFileName = IDMGenerateDocument.FileName
    			
    			IDMGenerateDocument.IDMAccessControlList = "CSFDefined"
    			
    			invoke CreateFromGenerateDocument IDMJob
    				invoked.Actor				= actor
    				invoked.Description			= "Warehouse Pick List Print"
    				invoked.IDMGenerateDocument	= IDMGenerateDocument
				
		CreateWarehousePickListPrintTwo is an Instance Action
			restricted
			Parameters
				PrmIncludeBackorders		is AlphaUpper 1
					States
						DoNotPrintBackorders value is "N"
                    		default label is "Do not print Backorders"
                		IncludeBackorders    value is "Y"
				PrmIncludeKillDetails		is AlphaUpper 1
					States
						Yes     value is "Y"
                		No      value is "N"
                		Partial value is "P"
                PrmExpectedShipDate			is Date
                PrmDocumentSource			is AlphaUpper 2
                	States
                		CustomerOrders value is "OE"
                		Requisitions   value is "RQ"
                PrmAllocationPurpose		is AlphaUpper 1
                	States
                		SpeedPicking        value is "S"
                		ConsolidatedPicking value is "C"
                PrmForcePreferredBin		is AlphaUpper size 1
            		States
                		YesPreferredBin   value is "Y"
                   			default label is "Yes (Preferred Bin)"
                		NoNonPreferredBin value is "N"
                    		default label is "No (Non-preferred Bin)"
                PrmReprintBatch				is Numeric 6
                PrmReprintShipment			is a WarehouseShipment
                PrmSourceDocument1			is like DemandDocument
                PrmSourceDocument2			is like DemandDocument
                PrmSourceDocument3			is like DemandDocument
                PrmSourceDocument4			is like DemandDocument
                PrmSourceDocument5			is like DemandDocument
                PrmSourceDocument6			is like DemandDocument
                PrmSourceDocument7			is like DemandDocument
                PrmSourceDocument8			is like DemandDocument
                PrmSourceDocument9			is like DemandDocument
                PrmSourceDocument10			is like DemandDocument
                PrmSourceDocument11			is like DemandDocument
                PrmSourceDocument12			is like DemandDocument
                PrmRequestingLocation		is like RequestingLocation
                PrmCustomer					is like Customer
                PrmItem						is like Item
                PrmProcessType				is like WarehouseProcessType
                PrmFromAllocationPriority	is Numeric 2
                PrmToAllocationPriority		is Numeric 2
                PrmShipTo					is like CustomerShipTo
                PrmCarrier					is like Vendor
                PrmRouteDay					is like DayOfWeek
                PrmRoute					is like Route
                PrmRouteStop				is Numeric size 4
                PrmAllRoute					is AlphaUpper size 1
		            States
		                None          value is "N"
		                AllRoutes     value is "A"
		                SpecificRoute value is "S"
		        PrmSkipInsufficientDetails	is AlphaUpper size 1     
		            States
		                Yes value is "Y"
		                No  value is "N"
		        PrmPrintOption				is Numeric size 1
        			States
						ByShipmentDocumentLine                 value is 1
							default label is "By Shipment - Document Line"
						ByShipmentBinLotSerial                 value is 2
							default label is "By Shipment - Bin/Lot/Serial"
						ByShipmentBinLotSerialRequisitionBased value is 3
							default label is "By Shipment - Bin/Lot/Serial (Requisition Based)"
						ByBinItemUomLotSerial                  value is 4
							default label is "By Bin - Item/UOM/Lot/Serial"
				PrmIncludeCost				is Boolean
				PrmDeliveryData				is Boolean
				PrmIDMPrinter				is a IDMPrinter
				PrmPrintRequester			is AlphaUpper size 1
					States
						Yes value is "Y"
						No  value is "N"
				PrmBatchID					is an IDMPID
				PrmConsolidateFile			is Boolean
				
			Local Fields
    			IDMAttributes
				
			Action Rules

				increment ReprintNumber by 1
				

				initialize LocalAllocateDetail	
				LocalAllocateDetail = true
				
				LocalIncludeBackorder  = PrmIncludeBackorders
				LocalIncludeKillDetail = PrmIncludeKillDetails
				
				LocalIncludeBackorder	= PrmIncludeBackorders
				LocalIncludeKillDetail	= PrmIncludeKillDetails
				LocalExpectedShipDate	= PrmExpectedShipDate
				LocalDocumentSource		= PrmDocumentSource
				LocalAllocationPurpose	= PrmAllocationPurpose
				LocalForcePreferredBin	= PrmForcePreferredBin
				LocalReprintBatch		= PrmReprintBatch
				LocalReprintShipment	= PrmReprintShipment
				LocalSourceDocument1	= PrmSourceDocument1
				LocalSourceDocument2	= PrmSourceDocument2
				LocalSourceDocument3	= PrmSourceDocument3
				LocalSourceDocument4	= PrmSourceDocument4
				LocalSourceDocument5	= PrmSourceDocument5
				LocalSourceDocument6	= PrmSourceDocument6
				LocalSourceDocument7	= PrmSourceDocument7
				LocalSourceDocument8	= PrmSourceDocument8
				LocalSourceDocument9	= PrmSourceDocument9
				LocalSourceDocument10	= PrmSourceDocument10
				LocalSourceDocument11	= PrmSourceDocument11
				LocalSourceDocument12	= PrmSourceDocument12
				LocalRequestingLocation	= PrmRequestingLocation
				LocalCustomer			= PrmCustomer
				LocalItem				= PrmItem
				LocalProcessType		= PrmProcessType
				LocalFromAllocationPriority	= PrmFromAllocationPriority
				LocalToAllocationPriority	= PrmToAllocationPriority
				LocalShipTo				= PrmShipTo
				LocalCarrier			= PrmCarrier
				LocalRouteDay			= PrmRouteDay
				LocalRoute				= PrmRoute
				LocalRouteStop			= PrmRouteStop
				LocalAllRoute			= PrmAllRoute
				LocalSkipInsufficientDetails = PrmSkipInsufficientDetails
				LocalPrintOption		= PrmPrintOption
				LocalIncludeCost 		= PrmIncludeCost
				LocalDeliveryData 		= PrmDeliveryData
				LocalPrintRequester		= PrmPrintRequester
				
				initialize IDMGenerateDocument
				
				IDMGenerateDocument.IDMXMLDefinition.Busclass											= reference to this instance
				IDMGenerateDocument.IDMXMLDefinition.ListName											= "WarehousePickListPrintIDMList"
				IDMGenerateDocument.IDMXMLDefinition.DocumentName										= "WHPLPByShipmentBinLotSerial"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].RelationName			= "WarehousePickListPrintLineNoDetailRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].ListName 			= "WarehousePickListPrintShipmentLineForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].LevelSection1		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].ListTag				= "PickListPrintLinesNoDetail"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].ItemTag				= "PickListPrintLineNoDetail"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].RelationName			= "LineItemCommentsRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].ListName 			= "ItemCommentIDMList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].ListTag				= "LineItemComments"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].ItemTag				= "LineItemComment"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].RelationName			= "ShipmentLineDetailByBinRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].ListName 			= "IDMDetails"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].LevelSection1		= 2
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].ListTag				= "PickListPrintLines"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].ItemTag				= "PickListPrintLine"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].RelationName			= "LineDetailItemCommentsRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].ListName 			= "ItemCommentIDMList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].LevelSection1		= 2
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].ListTag				= "LineDetailItemComments"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].ItemTag				= "LineDetailItemComment"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].RelationName			= "RequisitionForIDMRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].ListName 			= "RequisitionListForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].LevelSection1		= 3
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].ListTag				= "RequisitionDetails"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].ItemTag				= "RequisitionDetail"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].RelationName			= "CustomerOrderForIDMRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].ListName 			= "CustomerOrderListForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].LevelSection1		= 4
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].ListTag				= "OrderDetails"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].ItemTag				= "OrderDetail"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].RelationName		    = "RequisitionHeaderCommentCheckRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].ListName 			= "ColumnHeaderCheckList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].LevelSection1		= 5
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].ListTag				= "RequisitionCommentsHeader"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].ItemTag				= "RequisitionCommentHeader"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].RelationName		    = "RequisitionCommentForPickListPrintIDMRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].ListName 			= "RequisitionCommentsForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].LevelSection1		= 5
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].ListTag				= "RequisitionComments"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].ItemTag				= "RequisitionComment"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].RelationName		    = "BackorderedItemsCheckRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].ListName 			= "ColumnHeaderCheckList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].LevelSection1		= 6
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].ListTag				= "BackorderedItemsHeader"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].ItemTag				= "BackorderedItemHeader"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].RelationName		= "ItemsWithBackorderRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].ListName 			= "BackorderedItemDetailsForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].LevelSection1		= 6
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].ListTag				= "BackorderedItems"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].ItemTag				= "BackorderedItem"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].RelationName		= "KilledItemsCheckRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].ListName 			= "ColumnHeaderCheckList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].LevelSection1		= 7
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].ListTag				= "KilledItemsHeader"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].ItemTag				= "KilledItemHeader"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].RelationName		= "RequisitionLineWithKilledQuantityRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].ListName 			= "RequisitionLineForPickListPrintIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].LevelSection1		= 7
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].ListTag				= "KilledItems"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].ItemTag				= "KilledItem"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].RelationName		= "WarehouseShipmentLineComponentWithoutDetailsRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].ListName 			= "WarehouseShipmentLineComponentIDMList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].LevelSection1		= 8
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].ListTag				= "LineComponentsWithNoDetails"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].ItemTag				= "LineComponentsWithNoDetail"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[14].RelationName		= "LineWithNoComponentSpecialHandlingRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[14].ListName 			= "WarehouseShipmentLineWithSpecialHandlingForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[14].LevelSection1		= 9
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[14].ListTag				= "SpecialHandlingLines"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[14].ItemTag				= "SpecialHandlingLine"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].RelationName		= "LineComponentWithSpecialHandlingRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].ListName 			= "LineComponentSpecialHandlingIDMList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].LevelSection1		= 10
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].ListTag				= "LineComponentSpecialHandlingLines"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].ItemTag				= "LineComponentSpecialHandlingLine"
				
				if (DisplayPreferenceCard)
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].RelationName		= "RequisitionLineWithPrefCardTranRel"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].ListName 			= "WarehousePickListPrintPrefCardForIDM"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].LevelSection1		= 1
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].LevelSection2		= 2
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].ListTag				= "PrefCardTransactions"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].ItemTag				= "PrefCardTransaction"

					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].RelationName		= "RequisitionLineWithPrefCardTranRel"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].ListName 			= "WarehousePickListPrintPrefCardForIDM"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].LevelSection1		= 2
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].LevelSection2		= 2
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].ListTag				= "PrefCardTransactions"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].ItemTag				= "PrefCardTransaction"		

					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[18].ListName 			= "WarehousePickListPrefCardDetailsforIDM"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[18].LevelSection1		= 11
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[18].ListTag				= "PrefCardDetails"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[18].ItemTag				= "PrefCardDetail"

				initialize IDMAttributes
 				IDMAttributes.SingleValue.IDMAttribute[1].IDMAttributeName  	= "Company"
				IDMAttributes.SingleValue.IDMAttribute[1].IDMAttributeValue  	= Company
				IDMAttributes.SingleValue.IDMAttribute[2].IDMAttributeName  	= "InventoryLocation"
				IDMAttributes.SingleValue.IDMAttribute[2].IDMAttributeValue  	= InventoryLocation
				IDMAttributes.SingleValue.IDMAttribute[3].IDMAttributeName  	= "CompanyName"
				IDMAttributes.SingleValue.IDMAttribute[3].IDMAttributeValue  	= Company.Name

				include SetIDMAttribute
				
				IDMGenerateDocument.IDMAttributes		= IDMAttributes
				IDMGenerateDocument.TemplateUniqueId	= Company.PickListPrintByShipmentBinLotSerialTemplate.IDMUniqueId
				IDMGenerateDocument.DocumentType		= "FSM_WarehousePickList"
    			IDMGenerateDocument.FileName			= DerivedFileName + Company.PickListPrintByShipmentBinLotSerialTemplate.DerivedOutputFormat
    			IDMGenerateDocument.BatchID				= PrmBatchID
    			
				if (PrmIDMPrinter entered
				and not PrmConsolidateFile)
					IDMGenerateDocument.IDMPrinter		= PrmIDMPrinter 
    			
    			initialize LocalFullFileName
    			LocalFullFileName = IDMGenerateDocument.FileName
    			
    			IDMGenerateDocument.IDMAccessControlList = "CSFDefined"
    			
    			invoke CreateFromGenerateDocument IDMJob
    				invoked.Actor				= actor
    				invoked.Description			= "Warehouse Pick List Print"
    				invoked.IDMGenerateDocument	= IDMGenerateDocument
    				
		CreateWarehousePickListPrintThree is an Instance Action
			restricted
			Parameters
				PrmIncludeCost				is Boolean
				PrmDeliveryData				is Boolean
				PrmAllocateDetail			is Boolean
				PrmIncludeBackorders		is AlphaUpper 1
					States
						DoNotPrintBackorders value is "N"
                    		default label is "Do not print Backorders"
                		IncludeBackorders    value is "Y"
				PrmIncludeKillDetails		is AlphaUpper 1
					States
						Yes     value is "Y"
                		No      value is "N"
                		Partial value is "P"
                PrmExpectedShipDate			is Date
                PrmDocumentSource			is AlphaUpper 2
                	States
                		CustomerOrders value is "OE"
                		Requisitions   value is "RQ"
                PrmAllocationPurpose		is AlphaUpper 1
                	States
                		SpeedPicking        value is "S"
                		ConsolidatedPicking value is "C"
                PrmForcePreferredBin		is AlphaUpper size 1
            		States
                		YesPreferredBin   value is "Y"
                   			default label is "Yes (Preferred Bin)"
                		NoNonPreferredBin value is "N"
                    		default label is "No (Non-preferred Bin)"
                PrmReprintBatch				is Numeric 6
                PrmReprintShipment			is a WarehouseShipment
                PrmSourceDocument1			is like DemandDocument
                PrmSourceDocument2			is like DemandDocument
                PrmSourceDocument3			is like DemandDocument
                PrmSourceDocument4			is like DemandDocument
                PrmSourceDocument5			is like DemandDocument
                PrmSourceDocument6			is like DemandDocument
                PrmSourceDocument7			is like DemandDocument
                PrmSourceDocument8			is like DemandDocument
                PrmSourceDocument9			is like DemandDocument
                PrmSourceDocument10			is like DemandDocument
                PrmSourceDocument11			is like DemandDocument
                PrmSourceDocument12			is like DemandDocument
                PrmRequestingLocation		is like RequestingLocation
                PrmCustomer					is like Customer
                PrmItem						is like Item
                PrmProcessType				is like WarehouseProcessType
                PrmFromAllocationPriority	is Numeric 2
                PrmToAllocationPriority		is Numeric 2
                PrmShipTo					is like CustomerShipTo
                PrmCarrier					is like Vendor
                PrmRouteDay					is like DayOfWeek
                PrmRoute					is like Route
                PrmRouteStop				is Numeric size 4
                PrmAllRoute					is AlphaUpper size 1
		            States
		                None          value is "N"
		                AllRoutes     value is "A"
		                SpecificRoute value is "S"
		        PrmSkipInsufficientDetails	is AlphaUpper size 1     
		            States
		                Yes value is "Y"
		                No  value is "N"
		        PrmPrintOption				is Numeric size 1
        			States
						ByShipmentDocumentLine                 value is 1
							default label is "By Shipment - Document Line"
						ByShipmentBinLotSerial                 value is 2
							default label is "By Shipment - Bin/Lot/Serial"
						ByShipmentBinLotSerialRequisitionBased value is 3
							default label is "By Shipment - Bin/Lot/Serial (Requisition Based)"
						ByBinItemUomLotSerial                  value is 4
							default label is "By Bin - Item/UOM/Lot/Serial"
				PrmIDMPrinter				is an IDMPrinter
				PrmPrintRequester			is AlphaUpper size 1
					States
						Yes value is "Y"
						No  value is "N"
				PrmBatchID					is an IDMPID
				PrmConsolidateFile			is Boolean

			Local Fields
    			IDMAttributes
				
			Action Rules

				increment ReprintNumber by 1
				
				initialize LocalIncludeCost
				initialize LocalAllocateDetail
				
				LocalAllocateDetail 			= PrmAllocateDetail
				LocalIncludeCost 				= PrmIncludeCost
				LocalDeliveryData 				= PrmDeliveryData
				
				LocalIncludeBackorder  = PrmIncludeBackorders
				LocalIncludeKillDetail = PrmIncludeKillDetails
				
				LocalIncludeBackorder	= PrmIncludeBackorders
				LocalIncludeKillDetail	= PrmIncludeKillDetails
				LocalExpectedShipDate	= PrmExpectedShipDate
				LocalDocumentSource		= PrmDocumentSource
				LocalAllocationPurpose	= PrmAllocationPurpose
				LocalForcePreferredBin	= PrmForcePreferredBin
				LocalReprintBatch		= PrmReprintBatch
				LocalReprintShipment	= PrmReprintShipment
				LocalSourceDocument1	= PrmSourceDocument1
				LocalSourceDocument2	= PrmSourceDocument2
				LocalSourceDocument3	= PrmSourceDocument3
				LocalSourceDocument4	= PrmSourceDocument4
				LocalSourceDocument5	= PrmSourceDocument5
				LocalSourceDocument6	= PrmSourceDocument6
				LocalSourceDocument7	= PrmSourceDocument7
				LocalSourceDocument8	= PrmSourceDocument8
				LocalSourceDocument9	= PrmSourceDocument9
				LocalSourceDocument10	= PrmSourceDocument10
				LocalSourceDocument11	= PrmSourceDocument11
				LocalSourceDocument12	= PrmSourceDocument12
				LocalRequestingLocation	= PrmRequestingLocation
				LocalCustomer			= PrmCustomer
				LocalItem				= PrmItem
				LocalProcessType		= PrmProcessType
				LocalFromAllocationPriority	= PrmFromAllocationPriority
				LocalToAllocationPriority	= PrmToAllocationPriority
				LocalShipTo				= PrmShipTo
				LocalCarrier			= PrmCarrier
				LocalRouteDay			= PrmRouteDay
				LocalRoute				= PrmRoute
				LocalRouteStop			= PrmRouteStop
				LocalAllRoute			= PrmAllRoute
				LocalSkipInsufficientDetails = PrmSkipInsufficientDetails
				LocalPrintOption		= PrmPrintOption
				LocalPrintRequester		= PrmPrintRequester
				
				initialize IDMGenerateDocument
				
				IDMGenerateDocument.IDMXMLDefinition.Busclass											= reference to this instance
				IDMGenerateDocument.IDMXMLDefinition.ListName											= "WarehousePickListPrintIDMList"
				IDMGenerateDocument.IDMXMLDefinition.DocumentName										= "WHPLPByShipmentBinLotSerialRQBased"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].RelationName			= "WarehousePickListPrintLineNoDetailRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].ListName 			= "WarehousePickListPrintShipmentLineForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].LevelSection1		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].ListTag				= "PickListPrintLinesNoDetail"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[1].ItemTag				= "PickListPrintLineNoDetail"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].RelationName			= "LineCommentCheckRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].ListName 			= "RequisitionLineCommentCheckList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].ListTag				= "NoDetailLineCommentHeaders"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[2].ItemTag				= "NoDetailLineCommentHeader"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].RelationName			= "RequisitionLineCommentRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].ListName 			= "RequisitionLineCommentsForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].LevelSection2		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].LevelSection3		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].ListTag				= "PickListPrintLineNoDetailComments"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[3].ItemTag				= "PickListPrintLineNoDetailComment"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].RelationName			= "WarehouseShipmentLineComponentRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].ListName 			= "WarehouseShipmentLineComponentIDMList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].LevelSection2		= 2
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].ListTag				= "LineComponents"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[4].ItemTag				= "LineComponent"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].RelationName			= "WarehouseShipmentLineDetailsRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].ListName 			= "WHPickListComponentDetailsListIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].LevelSection1		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].LevelSection2		= 2
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].LevelSection3		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].ListTag				= "LineComponentDetails"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[5].ItemTag				= "LineComponentDetail"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].RelationName			= "ShipmentLineDetailRQBasedRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].ListName 			= "IDMDetails"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].LevelSection1		= 2
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].ListTag				= "PickListPrintLines"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[6].ItemTag				= "PickListPrintLine"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].RelationName			= "LineCommentCheckRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].ListName 			= "RequisitionLineCommentCheckList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].LevelSection1		= 2
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].ListTag				= "DetailedLineCommentHeaders"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[7].ItemTag				= "DetailedLineCommentHeader"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].RelationName			= "RequisitionLineCommentRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].ListName 			= "RequisitionLineCommentsForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].LevelSection1		= 2
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].LevelSection2		= 1
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].LevelSection3		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].ListTag				= "PickListPrintLinesWithDetailComments"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[8].ItemTag				= "PickListPrintLineWithDetailComment"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].RelationName			= "RequisitionForIDMRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].ListName 			= "RequisitionListForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].LevelSection1		= 3
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].ListTag				= "RequisitionDetails"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[9].ItemTag				= "RequisitionDetail"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].RelationName		= "RequisitionHeaderCommentCheckRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].ListName 			= "ColumnHeaderCheckList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].LevelSection1		= 4
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].ListTag				= "RequisitionCommentsHeader"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[10].ItemTag				= "RequisitionCommentHeader"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].RelationName		= "RequisitionCommentForPickListPrintIDMRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].ListName 			= "RequisitionCommentsForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].LevelSection1		= 4
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].ListTag				= "RequisitionComments"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[11].ItemTag				= "RequisitionComment"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].RelationName		= "DeliveryDataRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].ListName 			= "DeliveryDataList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].LevelSection1		= 5
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].ListTag				= "DeliveryData"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[12].ItemTag				= "DeliveryDataDetail"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].RelationName		= "IncludeCostHeadRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].ListName 			= "IncludeCostList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].LevelSection1		= 6
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].ListTag				= "CostDetailTotals"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[13].ItemTag				= "CostTotal"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[14].RelationName		= "BackorderedItemsCheckRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[14].ListName 			= "ColumnHeaderCheckList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[14].LevelSection1		= 7
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[14].ListTag				= "BackorderedItemsHeader"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[14].ItemTag				= "BackorderedItemHeader"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].RelationName		= "ItemsWithBackorderRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].ListName 			= "BackorderedItemDetailsForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].LevelSection1		= 7
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].ListTag				= "BackorderedItems"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[15].ItemTag				= "BackorderedItem"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].RelationName		= "KilledItemsCheckRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].ListName 			= "ColumnHeaderCheckList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].LevelSection1		= 8
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].ListTag				= "KilledItemsHeader"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[16].ItemTag				= "KilledItemHeader"
				
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].RelationName		= "RequisitionLineWithKilledQuantityRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].ListName 			= "RequisitionLineForPickListPrintIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].LevelSection1		= 8
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].ListTag				= "KilledItems"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[17].ItemTag				= "KilledItem"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[18].RelationName		= "LinesWithSpecialHandlingRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[18].ListName 			= "WarehouseShipmentLineWithSpecialHandlingForIDM"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[18].LevelSection1		= 9
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[18].ListTag				= "SpecialHandlingLines"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[18].ItemTag				= "SpecialHandlingLine"

				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[19].RelationName		= "LineComponentSpecialHandlingRel"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[19].ListName 			= "LineComponentSpecialHandlingIDMList"
    			IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[19].LevelSection1		= 9
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[19].LevelSection2		= 1
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[19].ListTag				= "ItemComponents"
				IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[19].ItemTag				= "ItemComponent"

				if (DisplayPreferenceCard)
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[20].RelationName		= "RequisitionLineWithPrefCardTranRel"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[20].ListName 			= "WarehousePickListPrintPrefCardForIDM"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[20].LevelSection1		= 1
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[20].LevelSection2		= 3
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[20].ListTag				= "PrefCardTransactions"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[20].ItemTag				= "PrefCardTransaction"

					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[21].RelationName		= "RequisitionLineWithPrefCardTranRel"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[21].ListName 			= "WarehousePickListPrintPrefCardForIDM"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[21].LevelSection1		= 2
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[21].LevelSection2		= 2
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[21].ListTag				= "PrefCardTransactions"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[21].ItemTag				= "PrefCardTransaction"

					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[22].ListName 			= "WarehousePickListPrefCardDetailsforIDM"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[22].LevelSection1		= 10
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[22].ListTag				= "PrefCardDetails"
					IDMGenerateDocument.IDMXMLDefinition.IDMXMLChildren.IDMXMLChild[22].ItemTag				= "PrefCardDetail"

				initialize IDMAttributes
 				IDMAttributes.SingleValue.IDMAttribute[1].IDMAttributeName  	= "Company"
				IDMAttributes.SingleValue.IDMAttribute[1].IDMAttributeValue  	= Company
				IDMAttributes.SingleValue.IDMAttribute[2].IDMAttributeName  	= "InventoryLocation"
				IDMAttributes.SingleValue.IDMAttribute[2].IDMAttributeValue  	= InventoryLocation
				IDMAttributes.SingleValue.IDMAttribute[3].IDMAttributeName  	= "CompanyName"
				IDMAttributes.SingleValue.IDMAttribute[3].IDMAttributeValue  	= Company.Name

				include SetIDMAttribute
				
				IDMGenerateDocument.IDMAttributes		= IDMAttributes
				IDMGenerateDocument.TemplateUniqueId	= Company.PickListPrintByShipmentBinLotSerialRQBasedTemplate.IDMUniqueId
				IDMGenerateDocument.DocumentType		= "FSM_WarehousePickList"
    			IDMGenerateDocument.FileName			= DerivedFileName + Company.PickListPrintByShipmentBinLotSerialRQBasedTemplate.DerivedOutputFormat
    			IDMGenerateDocument.BatchID				= PrmBatchID
    			
				if (PrmIDMPrinter entered
				and not PrmConsolidateFile)
					IDMGenerateDocument.IDMPrinter		= PrmIDMPrinter 
    			
    			initialize LocalFullFileName
    			LocalFullFileName = IDMGenerateDocument.FileName
    			
    			IDMGenerateDocument.IDMAccessControlList = "CSFDefined"
    			
    			invoke CreateFromGenerateDocument IDMJob
    				invoked.Actor				= actor
    				invoked.Description			= "Warehouse Pick List Print"
    				invoked.IDMGenerateDocument	= IDMGenerateDocument

		UpdateTotals is an Instance Action
			restricted
			Local Fields
				LocalWeightTotal is Decimal size 9.3
				LocalCubicTotal  is Decimal size 9.3
				
			Action Rules
				LocalWeightTotal = sum WarehouseShipmentLineRel.StockWeight
				LocalCubicTotal	= sum WarehouseShipmentLineRel.StockVolume
				if (WeightTotal != LocalWeightTotal)
					WeightTotal = LocalWeightTotal
				if (CubicTotal != LocalCubicTotal)
					CubicTotal = LocalCubicTotal
    				
