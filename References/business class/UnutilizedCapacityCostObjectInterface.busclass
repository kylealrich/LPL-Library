UnutilizedCapacityCostObjectInterface is a BusinessClass
	owned by truecost
	
	prefix is UCCOI
	sql name is "UnutilizedCapCObjectInt"
	Ontology
		symbolic key is UnutilizedCapacityCostObjectInterface
			
	Patterns
		disable Auditing
		disable EffectiveDated
		disable AsOfDateProcessing
	
	Persistent Fields
		Structure				is like FinanceDimension1Structure
		SummaryCostObject		is like TrueCostCostObject
    	CostObject				is like FinanceDimension1
    	ErrorDescription		is Alpha 60
	
	Field Rules
		Structure
			required
		SummaryCostObject
			required
		CostObject
			required
	Local Fields	
    	LocalTrueCostConfiguration			is like TrueCostConfiguration
    	LocalRunGroup	 					is like RunGroup
    	
    Derived Fields
		StructureNotDefined					is a MessageField
			restricted
			"StructureIsNotDefined"
		SummaryCostObjectNotDefined				is a MessageField
			restricted
			"SummaryCostObjectIsNotDefinedUnder<Structure>"
		CostObjectNotDefined				is a MessageField
			restricted
			"Cost_ObjectSelectedDoesNotExistInSummary<SummaryCostObject>"
		AlreadyExists						is a MessageField
			restricted
			"RecordAlreadyExists"
		
	Relations

		Dimension1StructureRel
			one-to-many relation to FinanceDimension1Structure
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup			=	TrueCostConfiguration
				related.FinanceDimension1Structure		=	Structure
				
		Dimension2StructureRel
			one-to-many relation to FinanceDimension2Structure
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup			=	TrueCostConfiguration
				related.FinanceDimension2Structure 		= 	Structure	
		
		Dimension3StructureRel
			one-to-many relation to FinanceDimension3Structure
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup			=	TrueCostConfiguration
				related.FinanceDimension3Structure 		=	Structure
		
		Dimension4StructureRel
			one-to-many relation to FinanceDimension4Structure
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup			=	TrueCostConfiguration
				related.FinanceDimension4Structure 		= 	Structure
		
		Dimension5StructureRel
			one-to-many relation to FinanceDimension5Structure
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup			=	TrueCostConfiguration
				related.FinanceDimension5Structure 		= 	Structure
			
		Dimension6StructureRel
			one-to-many relation to FinanceDimension6Structure
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup			=	TrueCostConfiguration
				related.FinanceDimension6Structure 		= 	Structure
				
		Dimension7StructureRel
			one-to-many relation to FinanceDimension7Structure
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup			=	TrueCostConfiguration
				related.FinanceDimension7Structure 		= 	Structure
				
		Dimension8StructureRel
			one-to-many relation to FinanceDimension8Structure
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup			=	TrueCostConfiguration
				related.FinanceDimension8Structure 		=	Structure	
		
		Dimension9StructureRel
			one-to-many relation to FinanceDimension9Structure
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup			=	TrueCostConfiguration
				related.FinanceDimension9Structure 		=	Structure
						
		Dimension10StructureRel
			one-to-many relation to FinanceDimension10Structure
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup			=	TrueCostConfiguration
				related.FinanceDimension10Structure 	=	Structure

		
		SummaryCostObject1Rel
			one-to-many relation to FinanceDimension1Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration
				related.FinanceDimension1Structure 		=	Dimension1StructureRel.FinanceDimension1Structure
				related.FinanceDimension1				=	SummaryCostObject
			Instance Selection
				where (related.DimensionType.Summary)
			
		SummaryCostObject2Rel
			one-to-many relation to FinanceDimension2Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration	
				related.FinanceDimension2Structure 		=	Dimension2StructureRel.FinanceDimension2Structure
				related.FinanceDimension2 				=	SummaryCostObject
			Instance Selection
				where (related.DimensionType.Summary)

		SummaryCostObject3Rel
			one-to-many relation to FinanceDimension3Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration
				related.FinanceDimension3Structure 		=	Dimension3StructureRel.FinanceDimension3Structure
				related.FinanceDimension3 				=	SummaryCostObject
			Instance Selection
				where (related.DimensionType.Summary)

		SummaryCostObject4Rel
			one-to-many relation to FinanceDimension4Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration
				related.FinanceDimension4Structure 		=	Dimension4StructureRel.FinanceDimension4Structure
				related.FinanceDimension4 				=	SummaryCostObject
			Instance Selection
				where (related.DimensionType.Summary)

		SummaryCostObject5Rel
			one-to-many relation to FinanceDimension5Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration
				related.FinanceDimension5Structure 		=	Dimension5StructureRel.FinanceDimension5Structure
				related.FinanceDimension5 				=	SummaryCostObject
			Instance Selection
				where (related.DimensionType.Summary)

		SummaryCostObject6Rel
			one-to-many relation to FinanceDimension6Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration
				related.FinanceDimension6Structure 		=	Dimension6StructureRel.FinanceDimension6Structure
				related.FinanceDimension6 				=	SummaryCostObject
			Instance Selection
				where (related.DimensionType.Summary)

		SummaryCostObject7Rel
			one-to-many relation to FinanceDimension7Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration
				related.FinanceDimension7Structure 		=	Dimension7StructureRel.FinanceDimension7Structure
				related.FinanceDimension7 				=	SummaryCostObject
			Instance Selection
				where (related.DimensionType.Summary)

		SummaryCostObject8Rel
			one-to-many relation to FinanceDimension8Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			= 	TrueCostConfiguration
				related.FinanceDimension8Structure 		=	Dimension8StructureRel.FinanceDimension8Structure	
				related.FinanceDimension8 				=	SummaryCostObject
			Instance Selection
				where (related.DimensionType.Summary)

		SummaryCostObject9Rel
			one-to-many relation to FinanceDimension9Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			= 	TrueCostConfiguration	
				related.FinanceDimension9Structure 		=	Dimension9StructureRel.FinanceDimension9Structure
				related.FinanceDimension9 				=	SummaryCostObject
			Instance Selection
				where (related.DimensionType.Summary)

		SummaryCostObject10Rel
			one-to-many relation to FinanceDimension10Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration	
				related.FinanceDimension10Structure 	=	Dimension10StructureRel.FinanceDimension10Structure
				related.FinanceDimension10 				=	SummaryCostObject
			Instance Selection
				where (related.DimensionType.Summary)

		PostingCostObject1Rel
			one-to-many relation to FinanceDimension1Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration
				related.FinanceDimension1Structure 		=	Dimension1StructureRel.FinanceDimension1Structure
				related.FinanceDimension1				=	CostObject
			Instance Selection
				where (related.DimensionType.Posting)
			
		PostingCostObject2Rel
			one-to-many relation to FinanceDimension2Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration	
				related.FinanceDimension2Structure 		=	Dimension2StructureRel.FinanceDimension2Structure
				related.FinanceDimension2 				=	CostObject
			Instance Selection
				where (related.DimensionType.Posting)

		PostingCostObject3Rel
			one-to-many relation to FinanceDimension3Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration
				related.FinanceDimension3Structure 		=	Dimension3StructureRel.FinanceDimension3Structure
				related.FinanceDimension3 				=	CostObject
			Instance Selection
				where (related.DimensionType.Posting)

		PostingCostObject4Rel
			one-to-many relation to FinanceDimension4Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration
				related.FinanceDimension4Structure 		=	Dimension4StructureRel.FinanceDimension4Structure
				related.FinanceDimension4 				=	CostObject
			Instance Selection
				where (related.DimensionType.Posting)

		PostingCostObject5Rel
			one-to-many relation to FinanceDimension5Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration
				related.FinanceDimension5Structure 		=	Dimension5StructureRel.FinanceDimension5Structure
				related.FinanceDimension5 				=	CostObject
			Instance Selection
				where (related.DimensionType.Posting)

		PostingCostObject6Rel
			one-to-many relation to FinanceDimension6Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration
				related.FinanceDimension6Structure 		=	Dimension6StructureRel.FinanceDimension6Structure
				related.FinanceDimension6 				=	CostObject
			Instance Selection
				where (related.DimensionType.Posting)

		PostingCostObject7Rel
			one-to-many relation to FinanceDimension7Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration
				related.FinanceDimension7Structure 		=	Dimension7StructureRel.FinanceDimension7Structure
				related.FinanceDimension7 				=	CostObject
			Instance Selection
				where (related.DimensionType.Posting)

		PostingCostObject8Rel
			one-to-many relation to FinanceDimension8Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			= 	TrueCostConfiguration
				related.FinanceDimension8Structure 		=	Dimension8StructureRel.FinanceDimension8Structure	
				related.FinanceDimension8 				=	CostObject
			Instance Selection
				where (related.DimensionType.Posting)

		PostingCostObject9Rel
			one-to-many relation to FinanceDimension9Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			= 	TrueCostConfiguration	
				related.FinanceDimension9Structure 		=	Dimension9StructureRel.FinanceDimension9Structure
				related.FinanceDimension9 				=	CostObject
			Instance Selection
				where (related.DimensionType.Posting)

		PostingCostObject10Rel
			one-to-many relation to FinanceDimension10Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 			=	TrueCostConfiguration	
				related.FinanceDimension10Structure 	=	Dimension10StructureRel.FinanceDimension10Structure
				related.FinanceDimension10 				=	CostObject
			Instance Selection
				where (related.DimensionType.Posting)

		RunGroupOtherRel
			one-to-many relation to UnutilizedCapacityCostObjectInterface
			Field Mapping uses symbolic key
			Instance Selection
				where(related.UnutilizedCapacityCostObjectInterface.RunGroup = UnutilizedCapacityCostObjectInterface.RunGroup)
				
		RunGroupParamRel
			one-to-many relation to UnutilizedCapacityCostObjectInterface
			Field Mapping uses symbolic key
				related.TrueCostConfiguration 						 = LocalTrueCostConfiguration
			Instance Selection
				where(related.UnutilizedCapacityCostObjectInterface.RunGroup = LocalRunGroup)
			
		RunGroupDeleteRel
			one-to-many relation to UnutilizedCapacityCostObjectInterface
			Field Mapping uses symbolic key
			Instance Selection
				where(related.UnutilizedCapacityCostObjectInterface.RunGroup = LocalRunGroup)
				
		CopyRunGroupRel
			one-to-many relation to UnutilizedCapacityCostObjectInterface
			Field Mapping uses symbolic key
				related.TrueCostConfiguration								= LocalTrueCostConfiguration
			Instance Selection
				where(related.UnutilizedCapacityCostObjectInterface.RunGroup = LocalRunGroup)
		
		UnutilizedCapacityCostObjectRel
			one-to-many relation to UnutilizedCapacityCostObject
			Field Mapping uses symbolic key
				related.TrueCostConfiguration							= 	TrueCostConfiguration
				related.UnutilizedCapacityCostObject.Structure			=	Structure
				related.UnutilizedCapacityCostObject.SummaryCostObject	=	SummaryCostObject
			
	Actions
		Create is a Create Action
		
		Update is an Update Action
			
		Delete is a Delete Action
		
		Purge is a Purge Action
			restricted
		
		InterfaceUnutilizedCapacityCostObject is a Set Action
			Parameters
				PrmTrueCostConfiguration 		is a TrueCostConfiguration
					default label is "True\CostConfiguration"
				PrmRunGroup						is a RunGroup
					default label is "RunGroup"
						
			Parameter Rules		
				PrmTrueCostConfiguration
					required					
				PrmRunGroup
					required
					LocalTrueCostConfiguration	=	PrmTrueCostConfiguration
					LocalRunGroup				=	PrmRunGroup
					constraint(RunGroupParamRel exists)
						"RungroupDoesNotExist"
					LocalRecordToInterfaceCount =	instance count of RunGroupParamRel
			Instance Selection				
				where(TrueCostConfiguration = PrmTrueCostConfiguration
				and	UnutilizedCapacityCostObjectInterface.RunGroup = PrmRunGroup)	
					
			Local Fields
				LocalActor							is an Actor
				LocalRecordToInterfaceCount			is Numeric 10
				LocalSuccessCount					is Numeric 10
				LocalFailedCount					is Numeric 10
			Action Rules

				Set Rules
					Entrance Rules						
						LocalActor = actor
						initialize ErrorDescription
										
					Exit Rules
						LocalFailedCount = LocalRecordToInterfaceCount - LocalSuccessCount

						send notification
							to LocalActor
							description is "ImportTo_True\Cost_Unutilized_CapacityHasCompleted"
							priority is high
							detail is "NumberOfSuccessfulRecords<LocalSuccessCount>.___NumberOfFailedRecords<LocalFailedCount>.___TotalRecordsProcessed<LocalRecordToInterfaceCount>"

				Instance Rules
					initialize ErrorDescription
					if((TrueCostConfiguration.CostObjectIsDimension1
					and Dimension1StructureRel not exists)
					or (TrueCostConfiguration.CostObjectIsDimension2
					and Dimension2StructureRel not exists)
					or (TrueCostConfiguration.CostObjectIsDimension3
					and Dimension3StructureRel not exists)
					or (TrueCostConfiguration.CostObjectIsDimension4
					and Dimension4StructureRel not exists)
					or (TrueCostConfiguration.CostObjectIsDimension5
					and Dimension5StructureRel not exists)
					or (TrueCostConfiguration.CostObjectIsDimension6
					and Dimension6StructureRel not exists)
					or (TrueCostConfiguration.CostObjectIsDimension7
					and Dimension7StructureRel not exists)
					or (TrueCostConfiguration.CostObjectIsDimension8
					and Dimension8StructureRel not exists)
					or (TrueCostConfiguration.CostObjectIsDimension9
					and Dimension9StructureRel not exists)
					or (TrueCostConfiguration.CostObjectIsDimension10
					and Dimension10StructureRel not exists))
						ErrorDescription = StructureNotDefined
					
					if (ErrorDescription not entered)
						if((TrueCostConfiguration.CostObjectIsDimension1
						and SummaryCostObject1Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension2
						and SummaryCostObject2Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension3
						and SummaryCostObject3Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension4
						and SummaryCostObject4Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension5
						and SummaryCostObject5Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension6
						and SummaryCostObject6Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension7
						and SummaryCostObject7Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension8
						and SummaryCostObject8Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension9
						and SummaryCostObject9Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension10
						and SummaryCostObject10Rel not exists))
							ErrorDescription = SummaryCostObjectNotDefined
					
					if (ErrorDescription not entered)
						if((TrueCostConfiguration.CostObjectIsDimension1
						and PostingCostObject1Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension2
						and PostingCostObject2Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension3
						and PostingCostObject3Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension4
						and PostingCostObject4Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension5
						and PostingCostObject5Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension6
						and PostingCostObject6Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension7
						and PostingCostObject7Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension8
						and PostingCostObject8Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension9
						and PostingCostObject9Rel not exists)
						or (TrueCostConfiguration.CostObjectIsDimension10
						and PostingCostObject10Rel not exists))
							ErrorDescription = CostObjectNotDefined
												
					if (ErrorDescription not entered)					
						if(UnutilizedCapacityCostObjectRel exists)
							ErrorDescription	=	AlreadyExists
						
					if(ErrorDescription not entered)
						invoke Create UnutilizedCapacityCostObject
							resume on error
								ErrorDescription	=	error message
							invoked.UnutilizedCapacityCostObject.TrueCostConfiguration 	=	TrueCostConfiguration
							invoked.UnutilizedCapacityCostObject.Structure				=	Structure							
							invoked.UnutilizedCapacityCostObject.SummaryCostObject		=	SummaryCostObject
							invoked.UnutilizedCapacityCostObject.CostObject				=	CostObject
					if(ErrorDescription not entered)
						LocalSuccessCount += 1
						invoke Purge UnutilizedCapacityCostObjectInterface	
					
		DeleteAllTransactionsForRunGroup is a Set Action
			default label is "DeleteAllTransactionsForRunGroup"
			Parameters
				PrmRunGroup						is a RunGroup
					default label is "RunGroup"
			Parameter Rules
				PrmRunGroup
					required
						"RunGroupIsRequired"
					LocalRunGroup		=	PrmRunGroup				
					constraint(RunGroupDeleteRel exists)
						"RunGroupDoesNotExist"
			Instance Selection				
				where(UnutilizedCapacityCostObjectInterface.RunGroup = PrmRunGroup)
			
			Action Rules
				Instance Rules
					invoke Delete
					



































									
