ChargebackTextCode is a BusinessClass
	owned by ar
	prefix is AKT
	classic name is ARCHGBAKTX

	Ontology
		symbolic key is ChargebackTextCode
			classic set name is AKTNEWPRIMARYINDEX

	Patterns
		implements StaticJava
		disable AuditIndex

	Persistent Fields

		ChargebackNoticeText is a CommentWrkX3InArchgbaktx
			classic name is COMMENT-WRK
	
	Transient Fields
		TransientEditNotes 		is Boolean
		TransientNotes			is Text
			derive value from TransientNotesDerived

	Local Fields

		LocalNotes	 			is Text
		LocalNotesLineLimit		is Numeric size 2
		LocalNotesLineTextLimit	is Numeric size 2
		LocalAssignCode			is Numeric size 3
		LocalValidateNotes		is Boolean

	
	Field Rules
		TransientEditNotes
			initial value is true
		TransientNotes
			required
				"AtLeastOneLineOfTextRequired"
			if (TransientNotes entered)
				initialize LocalAssignCode
				LocalValidateNotes = true
				LocalAssignCode = AssignNotes
				constraint (LocalAssignCode = 100)
					"<AssignErrorMessage>"

	Derived Fields

		ChargebackTextCode1 is an ArrayValueField
			type is Alpha size 60
			classic name is COMMENT-CHGBK1
			restricted
			ChargebackNoticeText.CommentWrk[1]

		ChargebackTextCode2 is an ArrayValueField
			type is Alpha size 60
			classic name is COMMENT-CHGBK2
			restricted
			ChargebackNoticeText.CommentWrk[2]

		ChargebackTextCode3 is an ArrayValueField
			type is Alpha size 60
			classic name is COMMENT-CHGBK3
			restricted
			ChargebackNoticeText.CommentWrk[3]

		AssignNotes				is a NativeField
			type is Numeric size 3
			restricted

		TransientNotesDerived	is a DerivedField
			type is Text
			restricted
			initialize LocalAssignCode
			LocalValidateNotes = false
			LocalAssignCode = AssignNotes
			return LocalNotes

		ExcessLineMessageText is a MessageField
			restricted
			"ExceededMaximumLinesAllowed;LimitIs<LocalNotesLineLimit>"

		ExcessLineTextMessageText is a MessageField
			restricted
			"ExceededMaximumAllowedCharactersInALine;LimitIs<LocalNotesLineTextLimit>"

		AssignErrorMessage is a DerivedField
			type is MessageField
			restricted
			if (LocalAssignCode = 101)
				return ExcessLineMessageText
			if (LocalAssignCode = 102)
				return ExcessLineTextMessageText
			return blank

	Conditions
		IsValidForActorContext
			restricted
			when (GeneralLedgerCompanyRel.FinanceEnterpriseGroup = actor.context.FinanceEnterpriseGroup)	

	Sets
		Set1
			not indexed
			Sort Order
				Company
				ChargebackTextCode
				IsoLocale

	Relations

		GeneralLedgerCompanyRel	
			one-to-one relation to GeneralLedgerCompany
			Field Mapping uses symbolic key
				related.Company		= Company


	Actions
		Create is a Create Action

		T2VCreate is a Create Action				
			restricted 
			default label is untranslatable 
			bypass field rules 
			
		Update is an Update Action

		Delete is a Delete Action


