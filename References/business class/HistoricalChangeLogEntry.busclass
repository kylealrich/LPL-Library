HistoricalChangeLogEntry is a BusinessClass
    owned by la
    prefix is HCLE

    Patterns
        disable Auditing
        disable EffectiveDated
        implements VirtualBackRelSets

    Persistent Fields

        BusinessClass
        	delete ignored 
        ChangeStamp is TimeStamp
	
	Local Fields
		LocalBusClass is like BusinessClass

	Relations
		MostRecentByBusClassRel
            one-to-many relation to HistoricalChangeLogEntry
            Field Mapping uses Set1
				related.BusinessClass = LocalBusClass

    Sets
        Set1
            primary
            indexed
            Sort Order
                BusinessClass
                ChangeStamp descending
                UniqueID

	Actions
				
		Create is a Create Action
			restricted
		Delete is a Delete Action
			restricted
		Update is an Update Action
			restricted
				
		PurgeEntries is a Set Action
			Local Fields
				MostRecent 			is TimeStamp	
				
			Sort Order is Set1
							
			Action Rules
				BusinessClass Set Rules
					Entrance Rules
						LocalBusClass = BusinessClass
						MostRecent = first MostRecentByBusClassRel.ChangeStamp 

				Instance Rules


					if (ChangeStamp < MostRecent) 
						invoke Delete
