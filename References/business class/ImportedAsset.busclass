ImportedAsset is a BusinessClass
    owned by am
    prefix is CVA
    classic name is AMCNVASSET

    Ontology
        symbolic key is ImportedAsset
            classic set name is CVASET0
            classic name for AssetImport is CONVERSION-NBR

    Patterns
        implements StaticJava
        disable AuditIndex
		disable Auditing 
       	disable EffectiveDated

    Conditions

        IsAstCnvExist
        	restricted
            when (AssetImport exists)

        IsBookCnvExist
        	restricted
            when (first AmastbkcnvRel exists)

        IsItemCnvExist
        	restricted
            when (first AmastitcnvRel exists)

        IsTranCnvExist
        	restricted
            when (first AmasttrcnvRel exists)

    Relations

        AmastbkcnvRel
            one-to-many relation to AssetBookImport
            Field Mapping uses Set1
                related.AssetImport = AssetImport

        AmastitcnvRel
            one-to-many relation to AssetItemImport
            Field Mapping uses symbolic key
                related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
                related.AssetImport 			= AssetImport

        AmasttrcnvRel
            one-to-many relation to AssetTransactionImport
            Field Mapping uses Set1
                related.AssetTransactionImport.ConversionNumber = AssetImport

	Sets

		Set2
			indexed
			Sort Order
				FinanceEnterpriseGroup
				Asset
				AssetImport

		
	Actions
		Create is a Create Action
		
		Update is an Update Action
		
		Delete is a Delete Action
		
		PurgeImportedAssets is a Set Action
			restricted
			
			Parameters
				PrmCompany is an AssetCompany
				
			Instance Selection
				include deleted records
				where (Asset.Company = PrmCompany)
				
			Action Rules
				Instance Rules
					invoke Purge

		Purge is a Purge Action
			restricted
			bypass relational integrity rules
