ReportSecurityHistory is a BusinessClass
    owned by security
    default label is "ReportSecurityHistory"
    store using com.lawson.apps.security.ReportSecurityHistoryStorage

    Ontology
        part of ReportSecurity
    		relative key is ReportSecurityHistoryKey

    Patterns
    	implements ReadOnly

    Persistent Fields
        Action              is Alpha size 40
        InvokingAction      is Alpha size 80
        Changed             is TimeStamp
        ChangedBy           is like Actor
        AuthenticatedActor  is like Actor
        Server              is Alpha size 200
        OldConfiguration    is Text
        NewConfiguration    is Text
            default label is "Configuration"
        Comment             is Text

    Derived Fields

    Conditions
	    ConfigurationChanged
            default label is "Configuration_Changed"
            when (OldConfiguration != NewConfiguration)

        ActorIsUpdateActor
            when (actor = ChangedBy)

	Actions
	    Revert is an Instance Action
	        valid when (ConfigurationChanged)
			disable multiple instance selection
			completion message is "Configuration_reverted"
            confirmation required
                "AreYouSureYouWantToRevertBackToTheSelectedHistoryConfiguration?"

            Action Rules
                invoke Revert ReportSecurity
                    invoked.ConfigurationParam = NewConfiguration



	Sets
		ByChanged
			Sort Order
			    ReportSecurity.Role
			    Changed descending
