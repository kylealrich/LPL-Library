AllocationLineTempOverride is a BusinessClass
    owned by Allocations
    prefix is ALLIP
    

    Ontology
    	symbolic key is AllocationLineTempOverride

	Patterns
        disable Auditing
        disable EffectiveDated

    Persistent Fields
		AccountingEntity
		AccountingUnit
		GeneralLedgerChartAccount
			default label is "GlobalLedgerChartAccount"
		Project
		FinanceDimension1
		FinanceDimension2
		FinanceDimension3
		FinanceDimension4
		FinanceDimension5
		FinanceDimension6
		FinanceDimension7
		FinanceDimension8
		FinanceDimension9
		FinanceDimension10
		Weight					is Decimal 31.4        
		WeightPercent			is Percent size 10.6   
        WeightDecimal		    is a AllocationWeightDecimal
            default label is "Weight"
		AllocationWeightPercent
            default label is "WeightPercent"
		Direction				is Numeric 1
			States
				From			value is 0
				To				value is 1
		GeneralLedgerCalendarPeriod
			default label is "GlobalLedgerCalendarPeriod"
		SourceAddress			is a FinanceAddress	 
			holds pii

		TreatBlankAccountAsEmpty			is Boolean
		TreatBlankAccountingUnitAsEmpty		is Boolean
		TreatBlankProjectAsEmpty			is Boolean
		TreatBlankDimension1AsEmpty			is Boolean
		TreatBlankDimension2AsEmpty			is Boolean
		TreatBlankDimension3AsEmpty			is Boolean
		TreatBlankDimension4AsEmpty			is Boolean
		TreatBlankDimension5AsEmpty			is Boolean
		TreatBlankDimension6AsEmpty			is Boolean
		TreatBlankDimension7AsEmpty			is Boolean
		TreatBlankDimension8AsEmpty			is Boolean
		TreatBlankDimension9AsEmpty			is Boolean
		TreatBlankDimension10AsEmpty		is Boolean
			
	Local Fields
		LocalSkipWeightDefault	is Boolean
		LocalCompute is an AllocationLineTempOverride compute

	Transient Fields
		OverrideDirection		is Numeric size 1
			default label is "Direction"
			derive value from Direction
			States
				FromMapping			value is 0
				ToMapping			value is 1
		TransientOverrideType is Numeric size 1
            default label is "OverrideType"
			derive value from DerivedOverrideType
            States
                ManualOverride				value is 0
                GroupOverrideList			value is 1
                DimensionOverrideAndWeightBuilder   value is 2
		
		TransientOverrideOption	is an AllocationOverrideOption
			default label is "OverrideOption"
			derive value from DerivedOverrideOption

		TransientLineGroupOverride 		is an AllocationLineOverrideSet
			default label is "LineGroupOverride"
			derive value from DerivedLineGroupOverride

		TransientDimensionOverride	is Alpha size 100
			default label is "OneDimensionOverride"
			derive value from DerivedDimensionOverride

		TransientDimensionOverride2D	is Alpha size 100
			default label is "TwoDimensionOverride"
			derive value from DerivedDimensionOverride2D


   	Context Fields
		AllocationContext
		AllocationLineTempOverrideHeader		
		
	Conditions
		IsFirstFromRecord
			restricted
			when (AllocationLineTempOverride = first FromAllocationLineTempOverridesRel.AllocationLineTempOverride)
		IsFirstToRecord
			restricted
			when (AllocationLineTempOverride = first ToAllocationLineTempOverridesRel.AllocationLineTempOverride)
		HasGroupOverride
			restricted
			when (DerivedGroupOverride != blank)
		HasSummaryOverride
			restricted
			when (DerivedSummaryOverride != blank)
		HasOneDimensionOverride
			restricted
			when ((AllocationLine.FromOverrideOption.OneDimension and AllocationLine.FromDimensionWithMultipleOverrides entered)
			or    (AllocationLine.ToOverrideOption.OneDimension and AllocationLine.ToDimensionWithMultipleOverrides entered))
			
		HasSummaryOverride2D
			restricted
			when (DerivedSummaryOverride2D != blank)
			
		HasOneAndTwoDimensionOverride
			restricted
			when ((AllocationLine.FromOverrideOption.TwoDimension 
			and AllocationLine.FromDimensionWithMultipleOverrides entered
			and AllocationLine.FromDimensionWithMultipleOverrides2 entered)
			or (AllocationLine.ToOverrideOption.TwoDimension
			and AllocationLine.ToDimensionWithMultipleOverrides entered
			and AllocationLine.ToDimensionWithMultipleOverrides2 entered))			
			
		DisplayWeight
			restricted		
			when (AllocationLine.FromSplit or AllocationLine.ToSplit)
		DisplayOverrideGroup
			restricted
			when (AllocationLine.FromOverrideSetOption.GroupOverrideList
			or    AllocationLine.ToOverrideSetOption.GroupOverrideList)
		DisplayCompute
			restricted
			when (AllocationLine.DerivedFromWeightCompute entered or AllocationLine.DerivedToWeightCompute entered)
		DisplayManualCompute
			restricted
			when (AllocationLine.FromMultipleDimensionCompute entered
   			or    AllocationLine.ToMultipleDimensionCompute entered)
		DisplayGroupCompute
			restricted
			when (AllocationLine.FromOverrideSetDetailCompute entered
			or    AllocationLine.ToOverrideSetDetailCompute entered)
		DisplayAccountingEntity
			restricted
			when (AllocationLine.FromMultipleAccountingEntityOrAccountingUnit 
			or    AllocationLine.ToMultipleAccountingEntityOrAccountingUnit
			or	  AllocationLine.FromMultipleAccountingEntityOrAccountingUnitTwoDimension
			or    AllocationLine.ToMultipleAccountingEntityOrAccountingUnitTwoDimension
			or    AllocationLine.HasMultipleDimensionOverrides)
		DisplayAccountingUnit
			restricted
			when (AllocationLine.FromMultipleAccountingUnit 
			or    AllocationLine.ToMultipleAccountingUnit
			or	  AllocationLine.FromMultipleAccountingUnitTwoDimension
			or    AllocationLine.ToMultipleAccountingUnitTwoDimension
			or    (AllocationLine.HasMultipleDimensionOverrides and FinanceEnterpriseGroup.AccountingUnitSelected))
		DisplayProject
			restricted
			when (AllocationLine.FromMultipleProject 
			or    AllocationLine.ToMultipleProject
			or    AllocationLine.FromMultipleProjectTwoDimension 
			or    AllocationLine.ToMultipleProjectTwoDimension
			or    (AllocationLine.HasMultipleDimensionOverrides and FinanceEnterpriseGroup.ProjectEntry))
		DisplayGeneralLedgerChartAccount
			default label is "DisplayGlobalLedgerChartAccount"
			restricted
			when (AllocationLine.FromMultipleAccount 
			or    AllocationLine.ToMultipleAccount
			or	  AllocationLine.FromMultipleAccountTwoDimension 
			or    AllocationLine.ToMultipleAccountTwoDimension
			or    AllocationLine.HasMultipleDimensionOverrides)
		DisplayFinanceDimension1
			restricted
			when (AllocationLine.FromMultipleDimension1 
			or    AllocationLine.ToMultipleDimension1
			or	  AllocationLine.FromMultipleDimension1TwoDimension 
			or    AllocationLine.ToMultipleDimension1TwoDimension
			or    (AllocationLine.HasMultipleDimensionOverrides and FinanceEnterpriseGroup.FinanceDimension1Entry))
		DisplayFinanceDimension2
			restricted
			when (AllocationLine.FromMultipleDimension2 
			or    AllocationLine.ToMultipleDimension2
			or	  AllocationLine.FromMultipleDimension2TwoDimension 
			or    AllocationLine.ToMultipleDimension2TwoDimension
			or    (AllocationLine.HasMultipleDimensionOverrides and FinanceEnterpriseGroup.FinanceDimension2Entry))
		DisplayFinanceDimension3
			restricted
			when (AllocationLine.FromMultipleDimension3 
			or    AllocationLine.ToMultipleDimension3
			or	  AllocationLine.FromMultipleDimension3TwoDimension 
			or    AllocationLine.ToMultipleDimension3TwoDimension
			or    (AllocationLine.HasMultipleDimensionOverrides and FinanceEnterpriseGroup.FinanceDimension3Entry))
		DisplayFinanceDimension4
			restricted
			when (AllocationLine.FromMultipleDimension4 
			or    AllocationLine.ToMultipleDimension4
			or	  AllocationLine.FromMultipleDimension4TwoDimension 
			or    AllocationLine.ToMultipleDimension4TwoDimension
			or    (AllocationLine.HasMultipleDimensionOverrides and FinanceEnterpriseGroup.FinanceDimension4Entry))
		DisplayFinanceDimension5
			restricted
			when (AllocationLine.FromMultipleDimension5 
			or    AllocationLine.ToMultipleDimension5
			or	  AllocationLine.FromMultipleDimension5TwoDimension 
			or    AllocationLine.ToMultipleDimension5TwoDimension
			or    (AllocationLine.HasMultipleDimensionOverrides and FinanceEnterpriseGroup.FinanceDimension5Entry))
		DisplayFinanceDimension6
			restricted
			when (AllocationLine.FromMultipleDimension6 
			or    AllocationLine.ToMultipleDimension6
			or	  AllocationLine.FromMultipleDimension6TwoDimension 
			or    AllocationLine.ToMultipleDimension6TwoDimension
			or    (AllocationLine.HasMultipleDimensionOverrides and FinanceEnterpriseGroup.FinanceDimension6Entry))
		DisplayFinanceDimension7
			restricted
			when (AllocationLine.FromMultipleDimension7 
			or    AllocationLine.ToMultipleDimension7
			or	  AllocationLine.FromMultipleDimension7TwoDimension 
			or    AllocationLine.ToMultipleDimension7TwoDimension
			or    (AllocationLine.HasMultipleDimensionOverrides and FinanceEnterpriseGroup.FinanceDimension7Entry))
		DisplayFinanceDimension8
			restricted
			when (AllocationLine.FromMultipleDimension8 
			or    AllocationLine.ToMultipleDimension8
			or	  AllocationLine.FromMultipleDimension8TwoDimension 
			or    AllocationLine.ToMultipleDimension8TwoDimension
			or    (AllocationLine.HasMultipleDimensionOverrides and FinanceEnterpriseGroup.FinanceDimension8Entry))
		DisplayFinanceDimension9
			restricted
			when (AllocationLine.FromMultipleDimension9 
			or    AllocationLine.ToMultipleDimension9
			or	  AllocationLine.FromMultipleDimension9TwoDimension 
			or    AllocationLine.ToMultipleDimension9TwoDimension
			or    (AllocationLine.HasMultipleDimensionOverrides and FinanceEnterpriseGroup.FinanceDimension9Entry))
		DisplayFinanceDimension10
			restricted
			when (AllocationLine.FromMultipleDimension10 
			or    AllocationLine.ToMultipleDimension10
			or	  AllocationLine.FromMultipleDimension10TwoDimension 
			or    AllocationLine.ToMultipleDimension10TwoDimension
			or    (AllocationLine.HasMultipleDimensionOverrides and FinanceEnterpriseGroup.FinanceDimension10Entry)) 	
		SecurityGroupAllowsAccess
			when (actor.context.AccountingEntitySecurityGroup = blank
			or   (AccountingEntitySecurityGroupMemberRel exists))
    
    Derived Fields
    	DerivedWeight is a DerivedField
    		type is like AllocationWeightDecimal
    		if ((AllocationLine.FromSplit and Direction.From) or (AllocationLine.ToSplit and Direction.To))
    			return WeightDecimal
    		else
    			return 0
    	DerivedWeightCompute is a DerivedField
    		type is Alpha size 100
    		if (AllocationLine.FromSplit and IsFirstFromRecord)
				return AllocationLine.DerivedFromWeightCompute		
    		if (AllocationLine.ToSplit and IsFirstToRecord)
				return AllocationLine.DerivedToWeightCompute			
			return blank
    	
    	DerivedManualWeightCompute is a DerivedField
    		type is Alpha size 100
    		if (AllocationLine.FromSplit 
    		and IsFirstFromRecord)
    			return AllocationLine.FromMultipleDimensionCompute
    		else
    		if (AllocationLine.ToSplit
    		and IsFirstToRecord)
    			return AllocationLine.ToMultipleDimensionCompute
    		else
    			return blank
    			
    	DerivedGroupWeightCompute is a DerivedField
    		type is Alpha size 100
    		if (AllocationLine.FromSplit 
    		and IsFirstFromRecord)
    			return AllocationLine.FromOverrideSetDetailCompute
    		else
    		if (AllocationLine.ToSplit
    		and IsFirstToRecord)
    			return AllocationLine.ToOverrideSetDetailCompute
    		else
    			return blank

		DerivedSourceLabel	is a DerivedField
			type is Alpha size 15
			restricted
			if (AllocationLineTempOverrideHeader entered)
				return "Source Detail"
			else
				return "Source Address"

    	DerivedOverrideText is a DerivedField
    		type is Alpha 100  		
    		if (IsFirstFromRecord)
				if (AllocationLine.FromOverrideOption.MultipleDimensions)
					return "Multiple Dimensions"
				else
				if (AllocationLine.FromOverrideOption.TwoDimension)
					return "Two Dimension"
				else
    				return "One Dimension"
			else
			if (IsFirstToRecord)
				if (AllocationLine.ToOverrideOption.MultipleDimensions)
					return "Multiple Dimensions"
				else
				if (AllocationLine.ToOverrideOption.TwoDimension)
					return "Two Dimension"	
				else
    				return "One Dimension"

		DerivedSplitOverrideType is a DerivedField
			type is Alpha 100
			if (IsFirstFromRecord)
				if (AllocationLine.FromOverrideSetOption.ManualOverride)
					return "Manual Override"
				else
                if (AllocationLine.FromOverrideSetOption.GroupOverrideList)
    				return "Group Override List"
                else
                    return "Dimension Override And Weight Builder"
			else
			if (IsFirstToRecord)
				if (AllocationLine.ToOverrideSetOption.ManualOverride)
					return "Manual Override"
				else
                if (AllocationLine.ToOverrideSetOption.GroupOverrideList)
    				return "Group Override List"
                else
                    return "Dimension Override And Weight Builder"
		
		DerivedLineOverrideGroup is a DerivedField
			type is like AllocationLineOverrideSet
			if (AllocationLine.FromSplit
			and IsFirstFromRecord)
				return AllocationLine.FromAllocationLineOverrideSet
			else
			if (AllocationLine.ToSplit
			and IsFirstToRecord)
				return AllocationLine.ToAllocationLineOverrideSet
		
		DerivedOneDimensionOverride is a DerivedField
			type is Alpha 100
			if (DerivedDimensionWithMultipleOverrides entered)
				if (HasGroupOverride)
    				return DerivedDimensionWithMultipleOverrides + "(" + DerivedGroupOverride +")"
    			else
				if (HasSummaryOverride)
					return DerivedDimensionWithMultipleOverrides + "(" + DerivedSummaryOverride +")"
				else
				if (AllocationLine.AllocationLineOverridesRel exists)
					return DerivedDimensionWithMultipleOverrides + "(Manual)"

		DerivedOneDimensionOverride2D is a DerivedField
			type is Alpha 100
			if (DerivedDimensionWithMultipleOverrides entered)
				if (HasSummaryOverride)
					return DerivedDimensionWithMultipleOverrides + "(" + DerivedSummaryOverride +")"
				else
				if (AllocationLine.AllocationLineOverridesRel exists)
					return DerivedDimensionWithMultipleOverrides + "(Manual)"
				

		DerivedTwoDimensionOverride2D is a DerivedField
			type is Alpha 100
			if (DerivedDimensionWithMultipleOverrides2 entered)
				if (HasSummaryOverride2D)
					return DerivedDimensionWithMultipleOverrides2 + "(" + DerivedSummaryOverride2D +")"
				else
				if (AllocationLine.AllocationLineOverridesRel exists)
					return DerivedDimensionWithMultipleOverrides2 + "(Manual)"
							

    	DerivedLedger is a DerivedField
			type is like Ledger
		    if (not AllocationLine.HasFromOverrides and Direction.From)
		    	return AllocationLine.FromOverride.Ledger
		    if (not AllocationLine.HasToOverrides and Direction.To)
		    	return AllocationLine.ToOverride.Ledger
		    return blank
		DerivedAccountingEntity is a DerivedField
			type is like AccountingEntity
		    if (not AllocationLine.HasFromOverrides and Direction.From)
		    	return AllocationLine.FromOverride.AccountingEntity
		    if (not AllocationLine.HasToOverrides and Direction.To)
		    	return AllocationLine.ToOverride.AccountingEntity
		    return blank				
		DerivedAccountingUnit is a DerivedField
			type is like AccountingUnit
		    if (not AllocationLine.HasFromOverrides and Direction.From)
		    	return AllocationLine.FromOverride.AccountingUnit
		    if (not AllocationLine.HasToOverrides and Direction.To)
		    	return AllocationLine.ToOverride.AccountingUnit
		    return blank
		DerivedAccount is a DerivedField
			type is like GeneralLedgerChartAccount
		    if (not AllocationLine.HasFromOverrides and Direction.From)
		    	return AllocationLine.FromOverride.GeneralLedgerChartAccount
		    if (not AllocationLine.HasToOverrides and Direction.To)
		    	return AllocationLine.ToOverride.GeneralLedgerChartAccount
		    return blank

		DerivedGroupOverride is a DerivedField
			type is Alpha 50
			restricted
			if (Direction.From)			
				if (AllocationLine.FromMultipleAccountingEntity)
					return AllocationLine.FromAccountingEntityGroup
				if (AllocationLine.FromMultipleAccountingUnit)				
					return AllocationLine.FromAccountingUnitGroup																							
				if (AllocationLine.FromMultipleAccount)									
					return AllocationLine.FromAccountGroup
				if (AllocationLine.FromMultipleProject)
					return AllocationLine.FromProjectGroup																									
				if (AllocationLine.FromMultipleDimension1)
					return AllocationLine.FromDimension1Group
				if (AllocationLine.FromMultipleDimension2)						
					return AllocationLine.FromDimension2Group
				if (AllocationLine.FromMultipleDimension3)				 				
					return AllocationLine.FromDimension3Group
				if (AllocationLine.FromMultipleDimension4)				 				
					return AllocationLine.FromDimension4Group
				if (AllocationLine.FromMultipleDimension5)				 				
					return AllocationLine.FromDimension5Group
				if (AllocationLine.FromMultipleDimension6)				 				
					return AllocationLine.FromDimension6Group
				if (AllocationLine.FromMultipleDimension7)				 				
					return AllocationLine.FromDimension7Group
				if (AllocationLine.FromMultipleDimension8)				 				
					return AllocationLine.FromDimension8Group
				if (AllocationLine.FromMultipleDimension9)				 				
					return AllocationLine.FromDimension9Group
				if (AllocationLine.FromMultipleDimension10)				 				
					return AllocationLine.FromDimension10Group			
			if (Direction.To)			
				if (AllocationLine.ToMultipleAccountingEntity)
					return AllocationLine.ToAccountingEntityGroup
				if (AllocationLine.ToMultipleAccountingUnit)				
					return AllocationLine.ToAccountingUnitGroup																							
				if (AllocationLine.ToMultipleAccount)									
					return AllocationLine.ToAccountGroup
				if (AllocationLine.ToMultipleProject)
					return AllocationLine.ToProjectGroup																									
				if (AllocationLine.ToMultipleDimension1)
					return AllocationLine.ToDimension1Group
				if (AllocationLine.ToMultipleDimension2)						
					return AllocationLine.ToDimension2Group
				if (AllocationLine.ToMultipleDimension3)				 				
					return AllocationLine.ToDimension3Group
				if (AllocationLine.ToMultipleDimension4)				 				
					return AllocationLine.ToDimension4Group
				if (AllocationLine.ToMultipleDimension5)				 				
					return AllocationLine.ToDimension5Group
				if (AllocationLine.ToMultipleDimension6)				 				
					return AllocationLine.ToDimension6Group
				if (AllocationLine.ToMultipleDimension7)				 				
					return AllocationLine.ToDimension7Group
				if (AllocationLine.ToMultipleDimension8)				 				
					return AllocationLine.ToDimension8Group
				if (AllocationLine.ToMultipleDimension9)				 				
					return AllocationLine.ToDimension9Group
				if (AllocationLine.ToMultipleDimension10)				 				
					return AllocationLine.ToDimension10Group
			return blank
		
		DerivedSummaryOverride is a DerivedField
			type is Alpha 50
			restricted
			if (Direction.From)			
				if (AllocationLine.FromMultipleAccountingEntity)
					return AllocationLine.FromOverrideSummary.AccountingEntity
				if (AllocationLine.FromMultipleAccountingUnit)				
					return AllocationLine.FromOverrideSummary.AccountingUnit
				if (AllocationLine.FromMultipleAccount)									
					return AllocationLine.FromOverrideSummary.GeneralLedgerChartAccount
				if (AllocationLine.FromMultipleProject)
					return AllocationLine.FromOverrideSummary.Project
				if (AllocationLine.FromMultipleDimension1)
					return AllocationLine.FromOverrideSummary.FinanceDimension1
				if (AllocationLine.FromMultipleDimension2)						
					return AllocationLine.FromOverrideSummary.FinanceDimension2
				if (AllocationLine.FromMultipleDimension3)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension3
				if (AllocationLine.FromMultipleDimension4)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension4
				if (AllocationLine.FromMultipleDimension5)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension5
				if (AllocationLine.FromMultipleDimension6)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension6
				if (AllocationLine.FromMultipleDimension7)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension7
				if (AllocationLine.FromMultipleDimension8)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension8
				if (AllocationLine.FromMultipleDimension9)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension9
				if (AllocationLine.FromMultipleDimension10)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension10
			if (Direction.To)			
				if (AllocationLine.ToMultipleAccountingEntity)
					return AllocationLine.ToOverrideSummary.AccountingEntity
				if (AllocationLine.ToMultipleAccountingUnit)				
					return AllocationLine.ToOverrideSummary.AccountingUnit
				if (AllocationLine.ToMultipleAccount)									
					return AllocationLine.ToOverrideSummary.GeneralLedgerChartAccount
				if (AllocationLine.ToMultipleProject)
					return AllocationLine.ToOverrideSummary.Project
				if (AllocationLine.ToMultipleDimension1)
					return AllocationLine.ToOverrideSummary.FinanceDimension1
				if (AllocationLine.ToMultipleDimension2)						
					return AllocationLine.ToOverrideSummary.FinanceDimension2
				if (AllocationLine.ToMultipleDimension3)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension3
				if (AllocationLine.ToMultipleDimension4)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension4
				if (AllocationLine.ToMultipleDimension5)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension5
				if (AllocationLine.ToMultipleDimension6)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension6
				if (AllocationLine.ToMultipleDimension7)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension7
				if (AllocationLine.ToMultipleDimension8)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension8
				if (AllocationLine.ToMultipleDimension9)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension9
				if (AllocationLine.ToMultipleDimension10)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension10
			return blank

		DerivedSummaryOverride2D is a DerivedField
			type is Alpha 50
			restricted
			if (Direction.From)			
				if (AllocationLine.FromDimensionWithMultipleOverrides2.Type.AccountingEntity)
					return AllocationLine.FromOverrideSummary.AccountingEntity
				if (AllocationLine.FromDimensionWithMultipleOverrides2.Type.AccountingUnit)				
					return AllocationLine.FromOverrideSummary.AccountingUnit
				if (AllocationLine.FromDimensionWithMultipleOverrides2.Type.Account)									
					return AllocationLine.FromOverrideSummary.GeneralLedgerChartAccount
				if (AllocationLine.FromDimensionWithMultipleOverrides2.Type.Project)
					return AllocationLine.FromOverrideSummary.Project
				if (AllocationLine.FromDimensionWithMultipleOverrides2.Type.Dimension1)
					return AllocationLine.FromOverrideSummary.FinanceDimension1
				if (AllocationLine.FromDimensionWithMultipleOverrides2.Type.Dimension2)						
					return AllocationLine.FromOverrideSummary.FinanceDimension2
				if (AllocationLine.FromDimensionWithMultipleOverrides2.Type.Dimension3)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension3
				if (AllocationLine.FromDimensionWithMultipleOverrides2.Type.Dimension4)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension4
				if (AllocationLine.FromDimensionWithMultipleOverrides2.Type.Dimension5)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension5
				if (AllocationLine.FromDimensionWithMultipleOverrides2.Type.Dimension6)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension6
				if (AllocationLine.FromDimensionWithMultipleOverrides2.Type.Dimension7)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension7
				if (AllocationLine.FromDimensionWithMultipleOverrides2.Type.Dimension8)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension8
				if (AllocationLine.FromDimensionWithMultipleOverrides2.Type.Dimension9)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension9
				if (AllocationLine.FromDimensionWithMultipleOverrides2.Type.Dimension10)				 				
					return AllocationLine.FromOverrideSummary.FinanceDimension10
			if (Direction.To)			
				if (AllocationLine.ToDimensionWithMultipleOverrides2.Type.AccountingEntity)
					return AllocationLine.ToOverrideSummary.AccountingEntity
				if (AllocationLine.ToDimensionWithMultipleOverrides2.Type.AccountingUnit)				
					return AllocationLine.ToOverrideSummary.AccountingUnit
				if (AllocationLine.ToDimensionWithMultipleOverrides2.Type.Account)									
					return AllocationLine.ToOverrideSummary.GeneralLedgerChartAccount
				if (AllocationLine.ToDimensionWithMultipleOverrides2.Type.Project)
					return AllocationLine.ToOverrideSummary.Project
				if (AllocationLine.ToDimensionWithMultipleOverrides2.Type.Dimension1)
					return AllocationLine.ToOverrideSummary.FinanceDimension1
				if (AllocationLine.ToDimensionWithMultipleOverrides2.Type.Dimension2)						
					return AllocationLine.ToOverrideSummary.FinanceDimension2
				if (AllocationLine.ToDimensionWithMultipleOverrides2.Type.Dimension3)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension3
				if (AllocationLine.ToDimensionWithMultipleOverrides2.Type.Dimension4)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension4
				if (AllocationLine.ToDimensionWithMultipleOverrides2.Type.Dimension5)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension5
				if (AllocationLine.ToDimensionWithMultipleOverrides2.Type.Dimension6)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension6
				if (AllocationLine.ToDimensionWithMultipleOverrides2.Type.Dimension7)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension7
				if (AllocationLine.ToDimensionWithMultipleOverrides2.Type.Dimension8)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension8
				if (AllocationLine.ToDimensionWithMultipleOverrides2.Type.Dimension9)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension9
				if (AllocationLine.ToDimensionWithMultipleOverrides2.Type.Dimension10)				 				
					return AllocationLine.ToOverrideSummary.FinanceDimension10
			return blank
		
		DerivedFromDimensionWithMultipleOverrides is a DerivedField
			type is like GeneralLedgerChartAccount
			restricted
		    if (IsFirstFromRecord)
		    	return AllocationLine.FromDimensionWithMultipleOverrides
		    else
				return blank
		
		DerivedToDimensionWithMultipleOverrides is a DerivedField
			type is like GeneralLedgerChartAccount
		    if (IsFirstToRecord)
		    	return AllocationLine.ToDimensionWithMultipleOverrides
		    else
				return blank				
		
		DerivedDimensionWithMultipleOverrides is a DerivedField
			type is like GeneralLedgerChartAccount
			restricted
		    if (IsFirstFromRecord)
		    	return AllocationLine.FromDimensionWithMultipleOverrides
		    else
			    if (IsFirstToRecord)
					return AllocationLine.ToDimensionWithMultipleOverrides
				else
					return blank
		
		DerivedDimensionWithMultipleOverrides2 is a DerivedField
			type is like GeneralLedgerChartAccount
			restricted
		    if (IsFirstFromRecord)
		    	return AllocationLine.FromDimensionWithMultipleOverrides2
		    else
			    if (IsFirstToRecord)
					return AllocationLine.ToDimensionWithMultipleOverrides2
				else
					return blank
		
		
		BlankTextField is a MessageField			
			"_"
		
		MappingLabel is a DerivedField
			type is Alpha 12 
			if (Direction.From and IsFirstFromRecord)
				return "From Mapping:"
			else 
				if (Direction.To and IsFirstToRecord)
					return "To Mapping:"			
			return blank
			
		FromMappingLabel is a DerivedField
			type is Alpha 12
			restricted 
			if (IsFirstFromRecord)
				return "From Mapping:"
			else
				return blank
		ToMappingLabel is a DerivedField
			type is Alpha 12
			if (IsFirstToRecord)
				return "To Mapping:"
			else
				return blank
		
		DerivedOverrideOption	is a DerivedField
			type is like AllocationOverrideOption
			default label is "OverrideOption"
			if (Direction.From)
				return AllocationLineReportRel.FromOverrideOption
			else
				return AllocationLineReportRel.ToOverrideOption
		
		DerivedOverrideType	is a DerivedField
			type is Numeric size 1
			default label is "OverrideType"
			if (Direction.From)
				return AllocationLineReportRel.FromOverrideSetOption
			else
				return AllocationLineReportRel.ToOverrideSetOption
		
		DerivedLineGroupOverride	is a DerivedField
			type is like AllocationLineOverrideSet
			default label is "LineGroupOverride"
			restricted
			if (Direction.From)
				return AllocationLineReportRel.FromAllocationLineOverrideSet
			else
				return AllocationLineReportRel.ToAllocationLineOverrideSet
		
		DerivedDimensionOverride	is a DerivedField
			type is Alpha 100
			default label is "OneDimensionOverride"
			restricted
			if (Direction.From)
				return AllocationLineReportRel.FromDimensionOverride
			else
				return AllocationLineReportRel.ToDimensionOverride
		
		DerivedDimensionOverride2D	is a DerivedField
			type is Alpha 100
			default label is "TwoDimensionOverride"
			restricted
			if (Direction.From)
				return AllocationLineReportRel.FromDimensionOverride2D
			else
				return AllocationLineReportRel.ToDimensionOverride2D

    Relations
		FromAllocationLineTempOverridesRel
			one-to-many relation to AllocationLineTempOverride
			Field Mapping uses ByAllocationLine
				related.FinanceEnterpriseGroup = FinanceEnterpriseGroup
				related.AllocationRun = AllocationRun
				related.AllocationControl = AllocationControl
				related.Allocation = Allocation
				related.AllocationLine = AllocationLine					
			Instance Selection
				where (related.Direction.From
				and	  (related.AllocationLineTempOverrideHeader not entered or related.AllocationLineTempOverride.DimensionCode = AllocationLineTempOverrideHeader))
		
		ToAllocationLineTempOverridesRel
			one-to-many relation to AllocationLineTempOverride
			Field Mapping uses ByAllocationLine
				related.FinanceEnterpriseGroup = FinanceEnterpriseGroup
				related.AllocationRun = AllocationRun
				related.AllocationControl = AllocationControl
				related.Allocation = Allocation
				related.AllocationLine = AllocationLine									
			Instance Selection
				where (related.Direction.To
				and	  (related.AllocationLineTempOverrideHeader not entered or related.AllocationLineTempOverride.DimensionCode = AllocationLineTempOverrideHeader))

		AccountingEntitySecurityGroupMemberRel
			one-to-one relation to AccountingEntityGroupMember
			Field Mapping uses part of key
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.AccountingEntityGroup   = actor.context.AccountingEntitySecurityGroup.FinanceDimensionStructure
				related.AccountingEntity        = AccountingEntity
		
		AllocationLineReportRel
			one-to-one relation to AllocationLineReport
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup								= FinanceEnterpriseGroup
				related.AllocationRun										= AllocationRun
				related.AllocationLineReport.AllocationSourceSystem			= AllocationSourceSystem
				related.AllocationLineReport.AllocationControl				= AllocationControl
				related.AllocationLineReport.Allocation						= Allocation
				related.AllocationLineReport.AllocationLine					= AllocationLine

	Sets
		ByAllocationLine
			duplicates
			Sort Order
				FinanceEnterpriseGroup
				AllocationRun
				AllocationControl
				Allocation
				AllocationLine				
				
		ByDimensionCode
			duplicates
			Sort Order
				FinanceEnterpriseGroup
				AllocationSourceSystem
				AllocationControl
				Allocation
				AllocationLine
				AllocationRun
				AllocationLineTempOverride.DimensionCode			
		
		ByWOAllocation
			duplicates
			Sort Order
				FinanceEnterpriseGroup
				AllocationSourceSystem
				AllocationControl
				AllocationRun
				AllocationLine				
		
	Field Rules
        WeightDecimal
			if (not LocalSkipWeightDefault)
				default to  1.0

	Actions
 		Create is an Action
 			restricted
			Field Rules
			Entrance Rules
				AllocationLineTempOverride.DimensionCode = SourceAddress.DimensionCode

			Exit Rules
				if (LocalCompute entered)
					WeightDecimal = LocalCompute compute value for this instance

				if (WeightDecimal < 0 and not AllocationLine.AllowNegativeWeights)
					WeightDecimal	= -1.0*WeightDecimal

    	CreateWithWeight is a Create Action
    		restricted
    		Entrance Rules
    			LocalSkipWeightDefault = true
    			AllocationLineTempOverride.DimensionCode = SourceAddress.DimensionCode

    	
    	Update is an Update Action

			Field Rules

    		Exit Rules


		UpdatePercent is an Instance Action
			restricted
			Parameters
				PrmWeightPercent is a AllocationWeightPercent

			Action Rules
				AllocationWeightPercent = PrmWeightPercent


    	Delete is a Delete Action
    		restricted

    	Purge is a Purge Action


    	PurgeAllForRun is a Set Action
    		restricted
    		Parameters
    			PrmEnterpriseGroup		is a FinanceEnterpriseGroup
    				default label is "FinanceEnterpriseGroup"
    			PrmAllocationRun		is a AllocationRun
    				default label is "AllocationRun"
			Sort Order
				FinanceEnterpriseGroup				
				AllocationRun
    		Instance Selection
				where (FinanceEnterpriseGroup	= PrmEnterpriseGroup
				and    AllocationRun			= PrmAllocationRun)
			Action Rules
				Instance Rules
					invoke Purge

