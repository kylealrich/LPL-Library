AssetTransactionSummary is a BusinessClass
    owned by am
    prefix is ATS
    classic name is AMTRANSUMM

    Ontology
        symbolic key is AssetTransactionSummary


    Patterns
        implements DynamicCreation
        implements StaticJava
        disable AuditIndex

    Persistent Fields
		FinanceDimension1
		FinanceDimension2
		FinanceDimension3
		FinanceDimension4
		FinanceDimension5
		FinanceDimension6
		FinanceDimension7
		FinanceDimension8
		FinanceDimension9
		FinanceDimension10
        BaseNumberOfDecimals
            classic name is BASE-ND


		AdditionBalance is a InternationalAmount
		AdjustmentBalance is a InternationalAmount
		TransferBalance is a InternationalAmount
		DisposalBalance is a InternationalAmount	
		ReinstatementBalance is a InternationalAmount	
		DepreciationBalance is a InternationalAmount
		RevalueBalance is a InternationalAmount
		RevalueAmortizationBalance is a InternationalAmount
		ImpairmentBalance is a InternationalAmount
		ImpairmentAmortizationBalance is a InternationalAmount
		TransferBalancingBalance is a InternationalAmount

		TransactionBalance is an InternationalAmount	
            classic name is TRANS-BALANCE
            disable Auditing

	Context Fields
		DateRangeFilter						is a DateRange


	Transient Fields
		Currency
			derive value from Book.Currency
		Year
			derive value from YearEndDate year
		DateRange
		BeginningBalanceDate is Date
			derive value from DerivedBeginningBalanceDate

		InputAmount 				is an InternationalAmount
		InputProcess is a AssetProcess

		SummaryBalanceCodeBlock		is a FinanceCodeBlockFull

	Local Fields
		LocalTransactionCodeBlock	is a FinanceCodeBlockFull


		LocalYearEndDate			is Date
		LocalBookCalendarEndDate	is Date
		LocalBookCalendarBeginDate	is Date
		LocalBaseNumberOfDecimals   is a CurrencyNumberOfDecimals


	Conditions
		IsCurrentYearBookCalendar
			when (BookCalendarRel.CalendarStatus.Current)
		InYearFilter
			when (Year = blank
			or YearEndDate year = Year)
		HasPostingTrans
			when (AssetTransactionsRel exists)
		IsPostingBook
			restricted
			when(BookCalendarRel.IsPostingBook)
		HasPostingTransForYear
			when (AssetTransactionsForYearRel exists)
		IsBeginningBalance
			when (YearEndDate = "19000101")
		DisplayBalanceRecord
			when (YearEndDate > "19000101"
			or (IsBeginningBalance
			and !ActualBalanceRel exists))
		BeginningBalanceExists
			when (BeginningBalanceRel exists)
		HasBookTrans
			when (AnnualBookTransactionsRel exists)
		HasBookTransForYear
			when (AssetBookTransactionsForYearRel exists)
		HasSupportingTransactions
			when (AssetTransactionsRel exists
			or AssetBookTransactionsRel exists)

		HasEndingBalance
			when (!EndingBalance = 0)
    	AccountingUnitIsValid
    		when (actor.context.FinanceEnterpriseGroup.AccountingUnitOrder entered)
        ProjectIsValid
    		when (actor.context.FinanceEnterpriseGroup.ProjectOrder entered)
		FinanceDimension1IsValid
    		when (actor.context.FinanceEnterpriseGroup.FinanceDimension1Order entered)
		FinanceDimension2IsValid
    		when (actor.context.FinanceEnterpriseGroup.FinanceDimension2Order entered)
		FinanceDimension3IsValid
    		when (actor.context.FinanceEnterpriseGroup.FinanceDimension3Order entered)
		FinanceDimension4IsValid
    		when (actor.context.FinanceEnterpriseGroup.FinanceDimension4Order entered)
		FinanceDimension5IsValid
    		when (actor.context.FinanceEnterpriseGroup.FinanceDimension5Order entered)
		FinanceDimension6IsValid
    		when (actor.context.FinanceEnterpriseGroup.FinanceDimension6Order entered)
		FinanceDimension7IsValid
    		when (actor.context.FinanceEnterpriseGroup.FinanceDimension7Order entered)
		FinanceDimension8IsValid
    		when (actor.context.FinanceEnterpriseGroup.FinanceDimension8Order entered)
		FinanceDimension9IsValid
    		when (actor.context.FinanceEnterpriseGroup.FinanceDimension9Order entered)
		FinanceDimension10IsValid
    		when (actor.context.FinanceEnterpriseGroup.FinanceDimension10Order entered)

		DimensionCodesEntered
            when (FinanceDimension1 entered
            or FinanceDimension2 entered
			or FinanceDimension3 entered
            or FinanceDimension4 entered
            or FinanceDimension5 entered
            or FinanceDimension6 entered
            or FinanceDimension7 entered
            or FinanceDimension8 entered
            or FinanceDimension9 entered
            or FinanceDimension10 entered)

		PriorYearActivityExists
			restricted
			when (ActualBalanceRel exists)


	Derived Fields
		DerivedDimensionCode		is a StringField
			type is Alpha 70
			FinanceDimension1.DerivedSequenceNumber
			FinanceDimension2.DerivedSequenceNumber
			FinanceDimension3.DerivedSequenceNumber
			FinanceDimension4.DerivedSequenceNumber
			FinanceDimension5.DerivedSequenceNumber
			FinanceDimension6.DerivedSequenceNumber
			FinanceDimension7.DerivedSequenceNumber
			FinanceDimension8.DerivedSequenceNumber
			FinanceDimension9.DerivedSequenceNumber
			FinanceDimension10.DerivedSequenceNumber

		YearBeginDate is a DerivedField
			type is Date
			return (BookCalendarRel.YearBeginDate)

		PreviousCalendarEndDate is a DerivedField
			type is Date
			return (BookCalendarRel.YearBeginDate - 1)

		DisplayEndDate is a DerivedField
			type is Date
			if (!IsBeginningBalance)
				return	YearEndDate

		DisplayTheTransactionAmount	is a DerivedField
			type is like InternationalAmount
			if(!IsBeginningBalance)
				return DisplayTransactionAmount

		DisplayTransactionAmount is a DerivedField
			type is like InternationalAmount
			if (IsBeginningBalance)
				return 0
			else
				return TransactionBalance

		DerivedAdditions is a DerivedField	
			type is like InternationalAmount
			if (BookCalendarRel.PostingBook)
				return (sum AssetAdditionTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
			else
				return (sum AssetBookAdditionTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)

		DerivedDepreciation is a DerivedField	
			type is like InternationalAmount
			if (BookCalendarRel.PostingBook)
				return (sum AssetDepreciationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
			else
				return (sum AssetBookDepreciationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)

		DerivedAdjustments is a DerivedField	
			type is like InternationalAmount
			if (BookCalendarRel.PostingBook)
				return (sum AssetAdjustmentTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
			else
				return (sum AssetBookAdjustmentTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)

		DerivedTransfers is a DerivedField	
			type is like InternationalAmount
			if (BookCalendarRel.PostingBook)
				return (sum AssetTransferTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
			else
				return (sum AssetBookTransferTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)

		DerivedDisposals is a DerivedField	
			type is like InternationalAmount
			if (BookCalendarRel.PostingBook)
				return (sum AssetDisposalTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
			else
				return (sum AssetBookDisposalTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)

		DerivedImpairment is a DerivedField	
			type is like InternationalAmount
			if (BookCalendarRel.PostingBook)
				return (sum AssetImpairmentTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
			else
				return (sum AssetBookImpairmentTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)

		DerivedImpairmentAmortization is a DerivedField	
			type is like InternationalAmount
			if (BookCalendarRel.PostingBook)
				return (sum AssetImpairmentAmortizationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
			else
				return (sum AssetBookImpairmentAmortizationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)

		DerivedReinstatement is a DerivedField	
			type is like InternationalAmount
			if (BookCalendarRel.PostingBook)
				return (sum AssetReinstatementTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
			else
				return (sum AssetBookReinstatementTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)

		DerivedRevaluation is a DerivedField	
			type is like InternationalAmount
			if (BookCalendarRel.PostingBook)
				return (sum AssetRevaluationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
			else
				return (sum AssetBookRevaluationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)

		DerivedRevaluationAmortization is a DerivedField	
			type is like InternationalAmount
			if (BookCalendarRel.PostingBook)
				return (sum AssetRevaluationAmortizationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
			else
				return (sum AssetBookRevaluationAmortizationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)

		EndingBalance is a DerivedField
			type is like InternationalAmount
			if (IsBeginningBalance)
				return (TransactionBalance)
			else
				return (TotalPreviousCalendarYears + TransactionBalance)


		TotalPreviousCalendarYears is a DerivedField
			type is like InternationalAmount
			if (IsBeginningBalance)
				return (TransactionBalance)
			else
				return (sum PreviousYearsBalanceRel.TransactionBalance)

		TotalAnnualTransactionsPriorToBeginDate is a DerivedField
			type is like InternationalAmount
			if (BookCalendarRel.PostingBook)
				return (sum AllAssetTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
			else
				return (sum AllBookTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)

		TotalActivityWithinDateRange is a DerivedField
			type is like InternationalAmount
			if (BookCalendarRel.PostingBook)
				return (sum AssetTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
			else
				return (sum AnnualBookTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)

		DerivedBalanceAtBeginDate is a DerivedField
			type is like InternationalAmount
			return (TotalPreviousCalendarYears)

		DerivedBalanceAtEndDate is a DerivedField
			type is like InternationalAmount
			return (DerivedBalanceAtBeginDate + TotalActivityWithinDateRange)

		DerivedBeginningBalanceDate is a DerivedField
			type is Date
			return "19000101"

		DerivedYear is a DerivedField
			type is like Year
			return (YearEndDate year)

		DerivedBookCurrency is a DerivedField
			type is like Currency
			return (Book.Currency)

	Field Rules
		BaseNumberOfDecimals
			default to Book.TransactionNumberOfDecimals

	Relations
		YearFilteredRecords
			one-to-many relation to AssetTransactionSummary
			Field Mapping uses symbolic key
              	related.Company		= Company
                related.Book		= Book
			Instance Selection
				where (InYearFilter)


		BookCalendarRel
			one-to-one relation to BookCalendar
			Field Mapping uses Set2
                related.Book		= Book
              	related.Company		= Company
           		related.YearEndDate	= YearEndDate

		BookCalendarsByEndDateRel
			one-to-many relation to BookCalendar
			Field Mapping uses ByCompanyBookDate
            	related.FinanceEnterpriseGroup 	= Company.AccountingEntity.FinanceEnterpriseGroup
              	related.Company					= Company
                related.Book					= Book
				related.YearEndDate 			>= LocalYearEndDate
            Instance Selection
				where (!related.CalendarStatus.Future)


		BookCalendarCountRel
			one-to-many relation to BookCalendar
			Field Mapping uses Set2
                related.Book		= Book
              	related.Company		= Company
				related.YearEndDate > LocalYearEndDate
			Instance Selection
				where (!related.CalendarStatus.Future)

		AssetTransactionSummaryCountRel
			one-to-many relation to AssetTransactionSummary
			Field Mapping uses symbolic key
              	related.Company		= Company
                related.Book		= Book
		    	related.AssetTransactionSummary = AssetTransactionSummary
			Instance Selection
				where (related.YearEndDate > YearEndDate)

		PreviousYearsBalanceRel
			one-to-many relation to AssetTransactionSummary
			Field Mapping uses symbolic key
              	related.Company		= Company
                related.Book		= Book
		    	related.AssetTransactionSummary = AssetTransactionSummary
			Instance Selection
				where (related.YearEndDate < YearEndDate)

		BeginningBalanceRel
			one-to-one relation to AssetTransactionSummary
			Field Mapping uses Set0
                related.Company										= Company
                related.Book										= Book
                related.AssetTransactionSummary.AccountingEntity 	= AssetTransactionSummary.AccountingEntity
                related.AssetTransactionSummary.AccountingUnit		= AssetTransactionSummary.AccountingUnit
                related.AssetTransactionSummary.GeneralLedgerChartAccount = AssetTransactionSummary.GeneralLedgerChartAccount
				related.AssetTransactionSummary.Ledger				= AssetTransactionSummary.Ledger
              	related.AssetTransactionSummary.Project				= AssetTransactionSummary.Project
                related.AssetTransactionSummary.DimensionCode		= AssetTransactionSummary.DimensionCode
                related.YearEndDate									= "19000101"

		ActualBalanceRel
			one-to-many relation to AssetTransactionSummary
			Field Mapping uses Set0
                related.Company										= Company
                related.Book										= Book
                related.AssetTransactionSummary.AccountingEntity 	= AssetTransactionSummary.AccountingEntity
                related.AssetTransactionSummary.AccountingUnit		= AssetTransactionSummary.AccountingUnit
                related.AssetTransactionSummary.GeneralLedgerChartAccount = AssetTransactionSummary.GeneralLedgerChartAccount
				related.AssetTransactionSummary.Ledger				= AssetTransactionSummary.Ledger
              	related.AssetTransactionSummary.Project				= AssetTransactionSummary.Project
                related.AssetTransactionSummary.DimensionCode		= AssetTransactionSummary.DimensionCode
            Instance Selection
				where (related.YearEndDate							> "19000101")

		AssetTransactionBeginningBalanceRel
			one-to-one relation to AssetTransactionBeginningBalance
			Field Mapping uses ByTransactionDimensions
				related.Company										= Company
				related.Book										= Book
              	related.SummaryBalanceCodeBlock.ToAccountingEntity	= AssetTransactionSummary.AccountingEntity
              	related.SummaryBalanceCodeBlock.AccountingUnit		= AssetTransactionSummary.AccountingUnit
              	related.SummaryBalanceCodeBlock.GeneralLedgerChartAccount	= AssetTransactionSummary.GeneralLedgerChartAccount
				related.SummaryBalanceCodeBlock.Ledger   			= AssetTransactionSummary.Ledger
              	related.SummaryBalanceCodeBlock.Project				= AssetTransactionSummary.Project
				related.DimensionCode								= AssetTransactionSummary.DimensionCode
				related.YearEndDate									= "19000101"

		AssetTransactionsRel
			one-to-many relation to AssetTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company										= Company
                related.Book										= Book
                related.DistributionAccount.ToAccountingEntity 		= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit			= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project					= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1		= FinanceDimension1
                related.DistributionAccount.FinanceDimension2		= FinanceDimension2
				related.DistributionAccount.FinanceDimension3		= FinanceDimension3
                related.DistributionAccount.FinanceDimension4		= FinanceDimension4
                related.DistributionAccount.FinanceDimension5		= FinanceDimension5
                related.DistributionAccount.FinanceDimension6		= FinanceDimension6
                related.DistributionAccount.FinanceDimension7		= FinanceDimension7
                related.DistributionAccount.FinanceDimension8		= FinanceDimension8
                related.DistributionAccount.FinanceDimension9		= FinanceDimension9
                related.DistributionAccount.FinanceDimension10		= FinanceDimension10
                related.YearEndDate									= YearEndDate
			Instance Selection
				where (related.IsHistoryOrReleased)

		AssetBookTransactionsRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
				related.Company		= Company
				related.Book		= Book
				related.DistributionAccount.ToAccountingEntity			= AssetTransactionSummary.AccountingEntity
				related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
				related.DistributionAccount.GeneralLedgerChartAccount	= AssetTransactionSummary.GeneralLedgerChartAccount
				related.DistributionAccount.Project						= AssetTransactionSummary.Project
				related.DistributionAccount.FinanceDimension1			= FinanceDimension1
				related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
				related.DistributionAccount.FinanceDimension4			= FinanceDimension4
				related.DistributionAccount.FinanceDimension5			= FinanceDimension5
				related.DistributionAccount.FinanceDimension6			= FinanceDimension6
				related.DistributionAccount.FinanceDimension7			= FinanceDimension7
				related.DistributionAccount.FinanceDimension8			= FinanceDimension8
				related.DistributionAccount.FinanceDimension9			= FinanceDimension9
				related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.TransactionStatus								= "H"
				related.YearEndDate		 								= YearEndDate

		AssetTransactionsForYearRel
			one-to-many relation to AssetTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company										= Company
                related.Book										= Book
			Instance Selection
				where (related.DistributionAccount.ToAccountingEntity 	= AssetTransactionSummary.AccountingEntity
                and related.DistributionAccount.AccountingUnit			= AssetTransactionSummary.AccountingUnit
                and related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                and related.DistributionAccount.Project					= AssetTransactionSummary.Project
                and related.DistributionAccount.FinanceDimension1		= FinanceDimension1
                and related.DistributionAccount.FinanceDimension2		= FinanceDimension2
				and related.DistributionAccount.FinanceDimension3		= FinanceDimension3
                and related.DistributionAccount.FinanceDimension4		= FinanceDimension4
                and related.DistributionAccount.FinanceDimension5		= FinanceDimension5
                and related.DistributionAccount.FinanceDimension6		= FinanceDimension6
                and related.DistributionAccount.FinanceDimension7		= FinanceDimension7
                and related.DistributionAccount.FinanceDimension8		= FinanceDimension8
                and related.DistributionAccount.FinanceDimension9		= FinanceDimension9
                and related.DistributionAccount.FinanceDimension10		= FinanceDimension10
                and related.YearEndDate									= YearEndDate
				and related.IsHistoryOrReleased)

		AssetBookTransactionsForYearRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company										= Company
                related.Book										= Book
			Instance Selection
				where (related.DistributionAccount.ToAccountingEntity 	= AssetTransactionSummary.AccountingEntity
                and related.DistributionAccount.AccountingUnit			= AssetTransactionSummary.AccountingUnit
                and related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                and related.DistributionAccount.Project					= AssetTransactionSummary.Project
                and related.DistributionAccount.FinanceDimension1		= FinanceDimension1
                and related.DistributionAccount.FinanceDimension2		= FinanceDimension2
				and related.DistributionAccount.FinanceDimension3		= FinanceDimension3
                and related.DistributionAccount.FinanceDimension4		= FinanceDimension4
                and related.DistributionAccount.FinanceDimension5		= FinanceDimension5
                and related.DistributionAccount.FinanceDimension6		= FinanceDimension6
                and related.DistributionAccount.FinanceDimension7		= FinanceDimension7
                and related.DistributionAccount.FinanceDimension8		= FinanceDimension8
                and related.DistributionAccount.FinanceDimension9		= FinanceDimension9
                and related.DistributionAccount.FinanceDimension10		= FinanceDimension10
                and related.TransactionStatus							= "H"
                and related.YearEndDate									= YearEndDate)

		LocalAssetTransactionsRel
			one-to-many relation to AssetTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company										= Company
                related.Book										= Book
				related.DistributionAccount.ToAccountingEntity 		= AssetTransactionSummary.AccountingEntity
				related.DistributionAccount.AccountingUnit			= AssetTransactionSummary.AccountingUnit
				related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project					= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1		= FinanceDimension1
                related.DistributionAccount.FinanceDimension2		= FinanceDimension2
				related.DistributionAccount.FinanceDimension3		= FinanceDimension3
				related.DistributionAccount.FinanceDimension4		= FinanceDimension4
                related.DistributionAccount.FinanceDimension5		= FinanceDimension5
                related.DistributionAccount.FinanceDimension6		= FinanceDimension6
                related.DistributionAccount.FinanceDimension7		= FinanceDimension7
                related.DistributionAccount.FinanceDimension8		= FinanceDimension8
                related.DistributionAccount.FinanceDimension9		= FinanceDimension9
                related.DistributionAccount.FinanceDimension10		= FinanceDimension10
                related.YearEndDate									< LocalBookCalendarBeginDate
			Instance Selection
				where (related.IsHistoryOrReleased)

		LocalBookTransactionsRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.TransactionStatus								= "H"
                related.YearEndDate		 								< LocalBookCalendarBeginDate

		AllAssetTransactionsRel
			one-to-many relation to AssetTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
			Instance Selection
				where (related.IsHistoryOrReleased)

		AllBookTransactionsRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
				related.Company		= Company
				related.Book		= Book
				related.DistributionAccount.ToAccountingEntity			= AssetTransactionSummary.AccountingEntity
				related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
				related.DistributionAccount.GeneralLedgerChartAccount	= AssetTransactionSummary.GeneralLedgerChartAccount
				related.DistributionAccount.Project						= AssetTransactionSummary.Project
				related.DistributionAccount.FinanceDimension1			= FinanceDimension1
				related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
				related.DistributionAccount.FinanceDimension4			= FinanceDimension4
				related.DistributionAccount.FinanceDimension5			= FinanceDimension5
				related.DistributionAccount.FinanceDimension6			= FinanceDimension6
				related.DistributionAccount.FinanceDimension7			= FinanceDimension7
				related.DistributionAccount.FinanceDimension8			= FinanceDimension8
				related.DistributionAccount.FinanceDimension9			= FinanceDimension9
				related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.TransactionStatus								= "H"


		AssetAdditionTransactionsRel
			one-to-many relation to AssetTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
                related.YearEndDate										= YearEndDate
                related.AssetProcess									= "ADD"
			Instance Selection
				where (related.IsHistoryOrReleased)
		AssetBookAdditionTransactionsRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.TransactionStatus								= "H"
                related.YearEndDate		 								= YearEndDate
                related.AssetProcess									= "ADD"


		AssetAdjustmentTransactionsRel
			one-to-many relation to AssetTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
                related.YearEndDate										= YearEndDate
                related.AssetProcess									= "ADJ"
			Instance Selection
				where (related.IsHistoryOrReleased)
		AssetBookAdjustmentTransactionsRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.TransactionStatus								= "H"
                related.YearEndDate		 								= YearEndDate
                related.AssetProcess									= "ADJ"


		AssetTransferTransactionsRel
			one-to-many relation to AssetTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
                related.YearEndDate										= YearEndDate
                related.AssetProcess									= "TRF"
			Instance Selection
				where (related.IsHistoryOrReleased)
		AssetBookTransferTransactionsRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.TransactionStatus								= "H"
                related.YearEndDate		 								= YearEndDate
                related.AssetProcess									= "TRF"


		AssetDisposalTransactionsRel
			one-to-many relation to AssetTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
				related.Company		= Company
				related.Book		= Book
				related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
				related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
				related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
				related.DistributionAccount.Project						= AssetTransactionSummary.Project
				related.DistributionAccount.FinanceDimension1			= FinanceDimension1
				related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
				related.DistributionAccount.FinanceDimension4			= FinanceDimension4
				related.DistributionAccount.FinanceDimension5			= FinanceDimension5
				related.DistributionAccount.FinanceDimension6			= FinanceDimension6
				related.DistributionAccount.FinanceDimension7			= FinanceDimension7
				related.DistributionAccount.FinanceDimension8			= FinanceDimension8
				related.DistributionAccount.FinanceDimension9			= FinanceDimension9
				related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.YearEndDate										= YearEndDate
			Instance Selection
				where (related.IsHistoryOrReleased
				and (related.AssetProcess.Reinstatement
				or related.AssetProcess.Disposal))
		AssetBookDisposalTransactionsRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
				related.Company		= Company
				related.Book		= Book
				related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
				related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
				related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
				related.DistributionAccount.Project						= AssetTransactionSummary.Project
				related.DistributionAccount.FinanceDimension1			= FinanceDimension1
				related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
				related.DistributionAccount.FinanceDimension4			= FinanceDimension4
				related.DistributionAccount.FinanceDimension5			= FinanceDimension5
				related.DistributionAccount.FinanceDimension6			= FinanceDimension6
				related.DistributionAccount.FinanceDimension7			= FinanceDimension7
				related.DistributionAccount.FinanceDimension8			= FinanceDimension8
				related.DistributionAccount.FinanceDimension9			= FinanceDimension9
				related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.TransactionStatus								= "H"
				related.YearEndDate		 								= YearEndDate
			Instance Selection
				where (related.AssetProcess.Reinstatement
				or related.AssetProcess.Disposal)


		AssetReinstatementTransactionsRel
			one-to-many relation to AssetTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
				related.Company		= Company
				related.Book		= Book
				related.DistributionAccount.ToAccountingEntity			= AssetTransactionSummary.AccountingEntity
				related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
				related.DistributionAccount.GeneralLedgerChartAccount	= AssetTransactionSummary.GeneralLedgerChartAccount
				related.DistributionAccount.Project						= AssetTransactionSummary.Project
				related.DistributionAccount.FinanceDimension1			= FinanceDimension1
				related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
				related.DistributionAccount.FinanceDimension4			= FinanceDimension4
				related.DistributionAccount.FinanceDimension5			= FinanceDimension5
				related.DistributionAccount.FinanceDimension6			= FinanceDimension6
				related.DistributionAccount.FinanceDimension7			= FinanceDimension7
				related.DistributionAccount.FinanceDimension8			= FinanceDimension8
				related.DistributionAccount.FinanceDimension9			= FinanceDimension9
				related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.YearEndDate										= YearEndDate
				related.AssetProcess									= "RAD"
			Instance Selection
				where (related.IsHistoryOrReleased)
		AssetBookReinstatementTransactionsRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
				related.Company		= Company
				related.Book		= Book
				related.DistributionAccount.ToAccountingEntity			= AssetTransactionSummary.AccountingEntity
				related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
				related.DistributionAccount.GeneralLedgerChartAccount	= AssetTransactionSummary.GeneralLedgerChartAccount
				related.DistributionAccount.Project						= AssetTransactionSummary.Project
				related.DistributionAccount.FinanceDimension1			= FinanceDimension1
				related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
				related.DistributionAccount.FinanceDimension4			= FinanceDimension4
				related.DistributionAccount.FinanceDimension5			= FinanceDimension5
				related.DistributionAccount.FinanceDimension6			= FinanceDimension6
				related.DistributionAccount.FinanceDimension7			= FinanceDimension7
				related.DistributionAccount.FinanceDimension8			= FinanceDimension8
				related.DistributionAccount.FinanceDimension9			= FinanceDimension9
				related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.TransactionStatus								= "H"
				related.YearEndDate		 								= YearEndDate
				related.AssetProcess									= "RAD"


		AssetDepreciationTransactionsRel
			one-to-many relation to AssetTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
                related.YearEndDate										= YearEndDate
                related.AssetProcess									= "DPR"
			Instance Selection
				where (related.IsHistoryOrReleased)
		AssetBookDepreciationTransactionsRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.TransactionStatus								= "H"
                related.YearEndDate										= YearEndDate
				related.AssetProcess									= "DPR"


		AssetRevaluationTransactionsRel
			one-to-many relation to AssetTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
                related.YearEndDate										= YearEndDate
                related.AssetProcess									= "RVL"
      		Instance Selection
				where (related.IsHistoryOrReleased)
		AssetBookRevaluationTransactionsRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.TransactionStatus								= "H"
                related.YearEndDate		 								= YearEndDate
                related.AssetProcess									= "RVL"


		AssetRevaluationAmortizationTransactionsRel
			one-to-many relation to AssetTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
                related.YearEndDate										= YearEndDate
                related.AssetProcess									= "RVA"
      		Instance Selection
				where (related.IsHistoryOrReleased)
        AssetBookRevaluationAmortizationTransactionsRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.TransactionStatus								= "H"
                related.YearEndDate		 								= YearEndDate
                related.AssetProcess									= "RVA"


		AssetImpairmentTransactionsRel
			one-to-many relation to AssetTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
                related.YearEndDate										= YearEndDate
				related.AssetProcess									= "IMP"
 			Instance Selection
				where (related.IsHistoryOrReleased)
		AssetBookImpairmentTransactionsRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.TransactionStatus								= "H"
                related.YearEndDate										= YearEndDate
				related.AssetProcess									= "IMP"


		AssetImpairmentAmortizationTransactionsRel
			one-to-many relation to AssetTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.YearEndDate										= YearEndDate
				related.AssetProcess									= "IMA"
 			Instance Selection
				where (related.IsHistoryOrReleased)
		AssetBookImpairmentAmortizationTransactionsRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.TransactionStatus								= "H"
                related.YearEndDate										= YearEndDate
				related.AssetProcess									= "IMA"


		AssetTransferBalancingTransactionsRel
			one-to-many relation to AssetTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
				related.Company = Company
				related.Book = Book
				related.DistributionAccount.ToAccountingEntity = AssetTransactionSummary.AccountingEntity
				related.DistributionAccount.AccountingUnit = AssetTransactionSummary.AccountingUnit
				related.DistributionAccount.GeneralLedgerChartAccount = AssetTransactionSummary.GeneralLedgerChartAccount
				related.DistributionAccount.Project = AssetTransactionSummary.Project
				related.DistributionAccount.FinanceDimension1 = FinanceDimension1
				related.DistributionAccount.FinanceDimension2 = FinanceDimension2
				related.DistributionAccount.FinanceDimension3 = FinanceDimension3
				related.DistributionAccount.FinanceDimension4 = FinanceDimension4
				related.DistributionAccount.FinanceDimension5 = FinanceDimension5
				related.DistributionAccount.FinanceDimension6 = FinanceDimension6
				related.DistributionAccount.FinanceDimension7 = FinanceDimension7
				related.DistributionAccount.FinanceDimension8 = FinanceDimension8
				related.DistributionAccount.FinanceDimension9 = FinanceDimension9
				related.DistributionAccount.FinanceDimension10 = FinanceDimension10
				related.YearEndDate = YearEndDate
				related.AssetProcess = "ATB"
			Instance Selection
				where (related.IsHistoryOrReleased)
		AssetBookTransferBalancingTransactionsRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
				related.Company = Company
				related.Book = Book
				related.DistributionAccount.ToAccountingEntity = AssetTransactionSummary.AccountingEntity
				related.DistributionAccount.AccountingUnit = AssetTransactionSummary.AccountingUnit
				related.DistributionAccount.GeneralLedgerChartAccount = AssetTransactionSummary.GeneralLedgerChartAccount
				related.DistributionAccount.Project = AssetTransactionSummary.Project
				related.DistributionAccount.FinanceDimension1 = FinanceDimension1
				related.DistributionAccount.FinanceDimension2 = FinanceDimension2
				related.DistributionAccount.FinanceDimension3 = FinanceDimension3
				related.DistributionAccount.FinanceDimension4 = FinanceDimension4
				related.DistributionAccount.FinanceDimension5 = FinanceDimension5
				related.DistributionAccount.FinanceDimension6 = FinanceDimension6
				related.DistributionAccount.FinanceDimension7 = FinanceDimension7
				related.DistributionAccount.FinanceDimension8 = FinanceDimension8
				related.DistributionAccount.FinanceDimension9 = FinanceDimension9
				related.DistributionAccount.FinanceDimension10 = FinanceDimension10
				related.TransactionStatus = "H"
				related.YearEndDate = YearEndDate
				related.AssetProcess = "ATB"

		AnnualBookTransactionsRel	
			one-to-many relation to AssetBookTransaction
			Field Mapping uses ByCompanyBookAccountAndProcess
              	related.Company		= Company
                related.Book		= Book
                related.DistributionAccount.ToAccountingEntity 			= AssetTransactionSummary.AccountingEntity
                related.DistributionAccount.AccountingUnit				= AssetTransactionSummary.AccountingUnit
                related.DistributionAccount.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
                related.DistributionAccount.Project						= AssetTransactionSummary.Project
                related.DistributionAccount.FinanceDimension1			= FinanceDimension1
                related.DistributionAccount.FinanceDimension2			= FinanceDimension2
				related.DistributionAccount.FinanceDimension3			= FinanceDimension3
                related.DistributionAccount.FinanceDimension4			= FinanceDimension4
                related.DistributionAccount.FinanceDimension5			= FinanceDimension5
                related.DistributionAccount.FinanceDimension6			= FinanceDimension6
                related.DistributionAccount.FinanceDimension7			= FinanceDimension7
                related.DistributionAccount.FinanceDimension8			= FinanceDimension8
                related.DistributionAccount.FinanceDimension9			= FinanceDimension9
                related.DistributionAccount.FinanceDimension10			= FinanceDimension10
				related.TransactionStatus								= "H"
				related.YearEndDate		 								= YearEndDate

		BookTransRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses symbolic key

		AssetTransRel
			one-to-many relation to AssetBookTransaction
			Field Mapping uses symbolic key

  		AllAssetTransactionSummaryRel
  			one-to-many relation to AssetTransactionSummary
  			Field Mapping uses Set3

  		CleanUpAssetTransactionSummaryRel
  			one-to-many relation to AssetTransactionSummary
  			Field Mapping uses Set3
  			Instance Selection
				where ((related.AssetTransactionSummary.Ledger = blank)
				or (related.AssetTransactionSummary.DimensionCode = blank
  				and DimensionCodesEntered))

        SummaryRecordsByEndDate
  			one-to-many relation to AssetTransactionSummary
  			Field Mapping uses Set0
            	related.Company												= Company
                related.Book												= Book
                related.AssetTransactionSummary.AccountingEntity			= AssetTransactionSummary.AccountingEntity
                related.AssetTransactionSummary.AccountingUnit				= AssetTransactionSummary.AccountingUnit
               	related.AssetTransactionSummary.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
				related.AssetTransactionSummary.Ledger						= AssetTransactionSummary.Ledger
              	related.AssetTransactionSummary.Project						= AssetTransactionSummary.Project
                related.AssetTransactionSummary.DimensionCode				= AssetTransactionSummary.DimensionCode
  				related.YearEndDate											> "19000101"

        LocalEndDateTransactionSummaryRel
  			one-to-one relation to AssetTransactionSummary
  			Field Mapping uses Set0
            	related.Company												= Company
                related.Book												= Book
                related.AssetTransactionSummary.AccountingEntity			= AssetTransactionSummary.AccountingEntity
                related.AssetTransactionSummary.AccountingUnit				= AssetTransactionSummary.AccountingUnit
               	related.AssetTransactionSummary.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
				related.AssetTransactionSummary.Ledger						= AssetTransactionSummary.Ledger
              	related.AssetTransactionSummary.Project						= AssetTransactionSummary.Project
                related.AssetTransactionSummary.DimensionCode				= AssetTransactionSummary.DimensionCode
  				related.YearEndDate											= LocalBookCalendarEndDate

  		AssetCompanyRel
  			one-to-one relation to AssetCompany
  			Field Mapping uses symbolic key
  				related.Company	= Company

  		GeneralLedgerCompanyRel
			one-to-one relation to GeneralLedgerCompany
			Field Mapping uses symbolic key
				related.Company			= Company

		BookCalendarsByDateRel
			one-to-many relation to BookCalendar
			Field Mapping uses ByCompanyBookDate
            	related.FinanceEnterpriseGroup	= Company.AccountingEntity.FinanceEnterpriseGroup
                related.Company					= Company
                related.Book					= Book

    Sets
        Set0
            Sort Order
                Company
                Book
                AssetTransactionSummary.AccountingEntity
                AssetTransactionSummary.AccountingUnit
                AssetTransactionSummary.GeneralLedgerChartAccount
				AssetTransactionSummary.Ledger
              	AssetTransactionSummary.Project
                AssetTransactionSummary.DimensionCode
                YearEndDate

        Set2
            indexed
            Sort Order
                Company
                Book
                YearEndDate
				AssetTransactionSummary

        Set1
            Sort Order
                Company
                Book
                AssetTransactionSummary.AccountingEntity
                AssetTransactionSummary.AccountingUnit
                AssetTransactionSummary.GeneralLedgerChartAccount
				AssetTransactionSummary.Ledger
                AssetTransactionSummary.DimensionCode
              	AssetTransactionSummary.Project
				YearEndDate

        Set3
            Sort Order
                Company
                Book
				YearEndDate
                AssetTransactionSummary.AccountingEntity
                AssetTransactionSummary.AccountingUnit
                AssetTransactionSummary.DimensionCode
                AssetTransactionSummary.GeneralLedgerChartAccount
				AssetTransactionSummary.Ledger
              	AssetTransactionSummary.Project

      	ByLedger
      		indexed
      		Sort Order
                Company
                Book
				AssetTransactionSummary.Ledger
                AssetTransactionSummary.AccountingEntity
                AssetTransactionSummary.AccountingUnit
                AssetTransactionSummary.DimensionCode
                AssetTransactionSummary.GeneralLedgerChartAccount
				YearEndDate
              	AssetTransactionSummary.Project

		ByTransactionDimensions
			indexed
			Sort Order
				Company
				Book
				AssetTransactionSummary.Ledger
				AssetTransactionSummary.AccountingEntity
              	AssetTransactionSummary.AccountingUnit
              	AssetTransactionSummary.GeneralLedgerChartAccount
              	AssetTransactionSummary.Project
				AssetTransactionSummary.DimensionCode
				YearEndDate

	Rule Blocks

		SetBalanceValue
			if (InputProcess = "ADD")
				AdditionBalance += InputAmount
			else
			if (InputProcess = "ADJ")
				AdjustmentBalance += InputAmount
			else
			if (InputProcess = "TRF")
				TransferBalance += InputAmount
			else
			if (InputProcess = "DSP" or InputProcess = "RIN")
				DisposalBalance += InputAmount
			else
			if (InputProcess = "RAD")
				ReinstatementBalance += InputAmount
			else
			if (InputProcess = "DPR")
				DepreciationBalance += InputAmount
			else
			if (InputProcess = "RVL")
				RevalueBalance += InputAmount
			else
			if (InputProcess = "RVA")
				RevalueAmortizationBalance += InputAmount
			else
			if (InputProcess = "IMP")
				ImpairmentBalance += InputAmount
			else
			if (InputProcess = "IMA")
				ImpairmentAmortizationBalance += InputAmount
			else
			if (InputProcess = "ATB")
				TransferBalancingBalance += InputAmount
			TransactionBalance += InputAmount


		UpdateBalanceValues
			if (BookCalendarRel.PostingBook = true)
				AdditionBalance = (sum AssetAdditionTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				AdjustmentBalance = (sum AssetAdjustmentTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				TransferBalance = (sum AssetTransferTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				DisposalBalance = (sum AssetDisposalTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				ReinstatementBalance = (sum AssetReinstatementTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				DepreciationBalance = (sum AssetDepreciationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				RevalueBalance = (sum AssetRevaluationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				RevalueAmortizationBalance = (sum AssetRevaluationAmortizationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				ImpairmentBalance = (sum AssetImpairmentTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				ImpairmentAmortizationBalance = (sum AssetImpairmentAmortizationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				TransferBalancingBalance = (sum AssetTransferBalancingTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
			else
				AdditionBalance = (sum AssetBookAdditionTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				AdjustmentBalance = (sum AssetBookAdjustmentTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				TransferBalance = (sum AssetBookTransferTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				DisposalBalance = (sum AssetBookDisposalTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				ReinstatementBalance = (sum AssetBookReinstatementTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				DepreciationBalance = (sum AssetBookDepreciationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				RevalueBalance = (sum AssetBookRevaluationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				RevalueAmortizationBalance = (sum AssetBookRevaluationAmortizationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				ImpairmentBalance = (sum AssetBookImpairmentTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				ImpairmentAmortizationBalance = (sum AssetBookImpairmentAmortizationTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
				TransferBalancingBalance = (sum AssetBookTransferBalancingTransactionsRel.AssetTransactionAmount.BaseAmount.EnteredCurrencyAmount)
			TransactionBalance = AdditionBalance + AdjustmentBalance + TransferBalance + DisposalBalance + ReinstatementBalance + DepreciationBalance + RevalueBalance + RevalueAmortizationBalance + ImpairmentBalance + ImpairmentAmortizationBalance + TransferBalancingBalance

	Actions
		Create is a Create Action
			restricted
			Entrance Rules
				AssetTransactionSummary.DimensionCode 				= DerivedDimensionCode
				LocalTransactionCodeBlock.Ledger					= AssetTransactionSummary.Ledger
				LocalTransactionCodeBlock.ToAccountingEntity		= AssetTransactionSummary.AccountingEntity
				LocalTransactionCodeBlock.AccountingUnit			= AssetTransactionSummary.AccountingUnit
				LocalTransactionCodeBlock.GeneralLedgerChartAccount	= AssetTransactionSummary.GeneralLedgerChartAccount
				LocalTransactionCodeBlock.Project					= AssetTransactionSummary.Project
				LocalTransactionCodeBlock.FinanceDimension1			= FinanceDimension1
				LocalTransactionCodeBlock.FinanceDimension2			= FinanceDimension2
				LocalTransactionCodeBlock.FinanceDimension3			= FinanceDimension3
				LocalTransactionCodeBlock.FinanceDimension4			= FinanceDimension4
				LocalTransactionCodeBlock.FinanceDimension5			= FinanceDimension5
				LocalTransactionCodeBlock.FinanceDimension6			= FinanceDimension6
				LocalTransactionCodeBlock.FinanceDimension7			= FinanceDimension7
				LocalTransactionCodeBlock.FinanceDimension8			= FinanceDimension8
				LocalTransactionCodeBlock.FinanceDimension9			= FinanceDimension9
				LocalTransactionCodeBlock.FinanceDimension10		= FinanceDimension10

			Action Rules
				include SetBalanceValue

			Exit Rules
				if (BookCalendarRel.CalendarStatus.Historic)
					invoke UpdateGapYears
						invoked.PrmPostingDate 	= YearEndDate
						invoked.FromCreate		= true

		CreateGapYear is a Create Action
			restricted

		CreateBeginningBalance is a Create Action
			restricted
			Action Rules
				YearEndDate = "19000101"


		UpdateGapYears is an Instance Action
			restricted
			Parameters
				PrmPostingDate	is Date
				FromCreate		is Boolean
			Action Rules

				if (PrmPostingDate entered)
					LocalYearEndDate = PrmPostingDate
				else
					LocalYearEndDate = first SummaryRecordsByEndDate.YearEndDate

				for each BookCalendarsByEndDateRel
					LocalBookCalendarEndDate	= each.YearEndDate
					LocalBookCalendarBeginDate	= each.YearBeginDate

					if (!LocalEndDateTransactionSummaryRel exists)	
						if (FromCreate)
							invoke CreateGapYear AssetTransactionSummary
								fill in fields from this instance
									except invoked.TransactionBalance
									except invoked.AdditionBalance
									except invoked.AdjustmentBalance
									except invoked.TransferBalance
									except invoked.DisposalBalance
									except invoked.ReinstatementBalance
									except invoked.DepreciationBalance
									except invoked.RevalueBalance
									except invoked.RevalueAmortizationBalance
									except invoked.ImpairmentBalance
									except invoked.ImpairmentAmortizationBalance
									except invoked.TransferBalancingBalance
								invoked.YearEndDate							= LocalBookCalendarEndDate
						else
							if (LocalBookTransactionsRel exists
							or LocalAssetTransactionsRel exists)
								invoke CreateGapYear AssetTransactionSummary
									fill in fields from this instance
										except invoked.TransactionBalance
										except invoked.AdditionBalance
										except invoked.AdjustmentBalance
										except invoked.TransferBalance
										except invoked.DisposalBalance
										except invoked.ReinstatementBalance
										except invoked.DepreciationBalance
										except invoked.RevalueBalance
										except invoked.RevalueAmortizationBalance
										except invoked.ImpairmentBalance
										except invoked.ImpairmentAmortizationBalance
										except invoked.TransferBalancingBalance
									invoked.YearEndDate						= LocalBookCalendarEndDate

		Update is an Action

			Action Rules
				if (YearEndDate not = "19000101")
					include SetBalanceValue
				else
					if (TransactionBalance changed)
						if (AssetTransactionBeginningBalanceRel exists)
							invoke UpdateFromTransactionSummary AssetTransactionBeginningBalanceRel
								invoked.TransactionBalance = TransactionBalance
						else
							invoke CreateBeginningBalance AssetTransactionBeginningBalance
								invoked.FinanceEnterpriseGroup								= Company.AccountingEntity.FinanceEnterpriseGroup
								invoked.Company												= Company
								invoked.Book												= Book
						    	invoked.SummaryBalanceCodeBlock.ToAccountingEntity			= AssetTransactionSummary.AccountingEntity
					        	invoked.SummaryBalanceCodeBlock.AccountingUnit				= AssetTransactionSummary.AccountingUnit
								invoked.SummaryBalanceCodeBlock.GeneralLedgerChartAccount	= AssetTransactionSummary.GeneralLedgerChartAccount
						    	invoked.SummaryBalanceCodeBlock.Ledger						= AssetTransactionSummary.Ledger
								invoked.SummaryBalanceCodeBlock.Project						= AssetTransactionSummary.Project
				                invoked.SummaryBalanceCodeBlock.FinanceDimension1			= FinanceDimension1
				                invoked.SummaryBalanceCodeBlock.FinanceDimension2			= FinanceDimension2
								invoked.SummaryBalanceCodeBlock.FinanceDimension3			= FinanceDimension3
								invoked.SummaryBalanceCodeBlock.FinanceDimension4			= FinanceDimension4
				                invoked.SummaryBalanceCodeBlock.FinanceDimension5			= FinanceDimension5
				                invoked.SummaryBalanceCodeBlock.FinanceDimension6			= FinanceDimension6
				                invoked.SummaryBalanceCodeBlock.FinanceDimension7			= FinanceDimension7
				                invoked.SummaryBalanceCodeBlock.FinanceDimension8			= FinanceDimension8
				                invoked.SummaryBalanceCodeBlock.FinanceDimension9			= FinanceDimension9
								invoked.SummaryBalanceCodeBlock.FinanceDimension10			= FinanceDimension10
					            invoked.DimensionCode										= AssetTransactionSummary.DimensionCode
								invoked.YearEndDate											= LocalYearEndDate
								invoked.TransactionBalance = TransactionBalance


			Exit Rules
				LocalYearEndDate = YearEndDate
				if (BookCalendarRel.CalendarStatus.Historic
				and instance count of BookCalendarCountRel > instance count of AssetTransactionSummaryCountRel)
					invoke UpdateGapYears
						invoked.PrmPostingDate = YearEndDate

		RefreshBalances is an Instance Action
			Action Rules
				invoke RebuildAssetTransactionSummaryBalances AssetCompanyRel

		RemoveRecordsWithoutActivity is a Set Action
			restricted
			Instance Selection
				where (!HasSupportingTransactions
				and !PriorYearActivityExists
				and YearEndDate != "19000101")
			Action Rules
				Instance Rules
					invoke Delete

		CreateBeginningBalanceRecords is a Set Action
			completion message is "BeginningBalanceCreateIsComplete"

			Sort Order
                Company
                Book
				AssetTransactionSummary
                YearEndDate

			Local Fields
				LocalAssetTransactionSummary	is like AssetTransactionSummary
				LocalYearEndDate				is Date
        	Instance Selection
        		where  (YearEndDate > "19000101")

			Action Rules
				Set Rules
				Company Set Rules
				Book Set Rules
				AssetTransactionSummary Set Rules
					Entrance Rules
						if (AssetTransactionSummary.DimensionCode = blank)
							AssetTransactionSummary.DimensionCode = DerivedDimensionCode
						if (!BeginningBalanceExists)
							LocalAssetTransactionSummary	= AssetTransactionSummary
							LocalYearEndDate				= "19000101"
							if (!AssetTransactionBeginningBalanceRel exists)
								invoke Create AssetTransactionBeginningBalance
									invoked.FinanceEnterpriseGroup								= Company.AccountingEntity.FinanceEnterpriseGroup
									invoked.Company												= Company
									invoked.Book												= Book
							    	invoked.SummaryBalanceCodeBlock.ToAccountingEntity			= AssetTransactionSummary.AccountingEntity
						        	invoked.SummaryBalanceCodeBlock.AccountingUnit				= AssetTransactionSummary.AccountingUnit
						            invoked.SummaryBalanceCodeBlock.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
							    	invoked.SummaryBalanceCodeBlock.Ledger						= AssetTransactionSummary.Ledger
						            invoked.SummaryBalanceCodeBlock.Project						= AssetTransactionSummary.Project
				              	  	invoked.SummaryBalanceCodeBlock.FinanceDimension1			= FinanceDimension1
				               	 	invoked.SummaryBalanceCodeBlock.FinanceDimension2			= FinanceDimension2
									invoked.SummaryBalanceCodeBlock.FinanceDimension3			= FinanceDimension3
					                invoked.SummaryBalanceCodeBlock.FinanceDimension4			= FinanceDimension4
					                invoked.SummaryBalanceCodeBlock.FinanceDimension5			= FinanceDimension5
					                invoked.SummaryBalanceCodeBlock.FinanceDimension6			= FinanceDimension6
					                invoked.SummaryBalanceCodeBlock.FinanceDimension7			= FinanceDimension7
					                invoked.SummaryBalanceCodeBlock.FinanceDimension8			= FinanceDimension8
					                invoked.SummaryBalanceCodeBlock.FinanceDimension9			= FinanceDimension9
					                invoked.SummaryBalanceCodeBlock.FinanceDimension10			= FinanceDimension10
					            	invoked.DimensionCode										= AssetTransactionSummary.DimensionCode
									invoked.YearEndDate											= LocalYearEndDate
						else
							if (!AssetTransactionBeginningBalanceRel exists)
								invoke CreateBeginningBalance AssetTransactionBeginningBalance
									invoked.FinanceEnterpriseGroup								= Company.AccountingEntity.FinanceEnterpriseGroup
									invoked.Company												= Company
									invoked.Book												= Book
							    	invoked.SummaryBalanceCodeBlock.ToAccountingEntity			= AssetTransactionSummary.AccountingEntity
						        	invoked.SummaryBalanceCodeBlock.AccountingUnit				= AssetTransactionSummary.AccountingUnit
						            invoked.SummaryBalanceCodeBlock.GeneralLedgerChartAccount 	= AssetTransactionSummary.GeneralLedgerChartAccount
							    	invoked.SummaryBalanceCodeBlock.Ledger						= AssetTransactionSummary.Ledger
						            invoked.SummaryBalanceCodeBlock.Project						= AssetTransactionSummary.Project
					                invoked.SummaryBalanceCodeBlock.FinanceDimension1			= FinanceDimension1
					                invoked.SummaryBalanceCodeBlock.FinanceDimension2			= FinanceDimension2
									invoked.SummaryBalanceCodeBlock.FinanceDimension3			= FinanceDimension3
					                invoked.SummaryBalanceCodeBlock.FinanceDimension4			= FinanceDimension4
					                invoked.SummaryBalanceCodeBlock.FinanceDimension5			= FinanceDimension5
					                invoked.SummaryBalanceCodeBlock.FinanceDimension6			= FinanceDimension6
					                invoked.SummaryBalanceCodeBlock.FinanceDimension7			= FinanceDimension7
					                invoked.SummaryBalanceCodeBlock.FinanceDimension8			= FinanceDimension8
					                invoked.SummaryBalanceCodeBlock.FinanceDimension9			= FinanceDimension9
					                invoked.SummaryBalanceCodeBlock.FinanceDimension10			= FinanceDimension10
						            invoked.DimensionCode										= AssetTransactionSummary.DimensionCode
									invoked.YearEndDate											= LocalYearEndDate

		UpdateBalance is an Instance Action
			restricted
			Action Rules
				if (YearEndDate != "19000101")
					include UpdateBalanceValues

		UpdateBalanceAndGapYears is an Instance Action
			default label is "UpdateBalance"
			Action Rules
				if (YearEndDate != "19000101")
					include UpdateBalanceValues

					LocalYearEndDate = YearEndDate
					if (BookCalendarRel.CalendarStatus.Historic
					and instance count of BookCalendarCountRel > instance count of AssetTransactionSummaryCountRel)
						invoke UpdateGapYears
							invoked.PrmPostingDate = YearEndDate


		AssetTransactionSummaryPurge is a Set Action
			restricted
			Parameters
				PrmFinanceEnterpriseGroup   			is a FinanceEnterpriseGroup
				PrmCompany                 				is a Company
				PrmBook									is a Book
				PrmPurgeOption							is Numeric 1
					default label is "ActionOption"
					States
						PurgeRecords 	value is 1
						ReportOnly		value is 2
		        PrmAsset								is like Asset

			Instance Selection
				include deleted records
				where (GeneralLedgerCompanyRel.FinanceEnterpriseGroup	= PrmFinanceEnterpriseGroup
				and    Company											= PrmCompany
				and	   Book												= PrmBook)

			Action Rules
				Set Rules
					Exit Rules
				Instance Rules
					if(PrmPurgeOption.PurgeRecords)
						if (PrmAsset not entered)
							invoke Purge


		Purge is a Purge Action
			restricted
			bypass relational integrity rules

		Delete is a Delete Action
			restricted
			valid when (!HasSupportingTransactions)

		RefreshData is an Import Action
			Local Fields
				RepSet is a ReplicationSet
			Action Rules
				RepSet = "FSM_COLUMNAR_AM_ST"
				constraint (RepSet.ReplicationIsValid)
					"A\M_ReplicationIsCurrentlyReplicatingOrNotValidAtThisTime"
				invoke Replicate RepSet

		DeleteSummaryRecords is a Set Action
			restricted
			Parameters
				PrmFinanceEnterpriseGroup   			is a FinanceEnterpriseGroup
				PrmCompany						is a Company
				PrmBook							is a Book
			
			Instance Selection
				where(Company.AccountingEntity.FinanceEnterpriseGroup	= PrmFinanceEnterpriseGroup
				and   Company = PrmCompany
				and   Book	= PrmBook
				and  (AssetTransactionSummary.DimensionCode = blank
				or    YearEndDate != all BookCalendarsByDateRel.YearEndDate))
			Action Rules
				Instance Rules
					invoke Delete
