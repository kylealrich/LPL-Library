PfiEmailConnection is a BusinessClass
    owned by pfi
    prefix is PfiEP
	contains environment data
	disable data area copy
		preserve target data
    default label is "EmailConnection"

    Ontology
        symbolic key is PfiEmailConnection

    Patterns
        implements CRUD
        implements LightweightAuditing
        disable AuditIndex
        disable AsOfDateProcessing
        disable EffectiveDated
        implements DynamicCreation

    Persistent Fields

        PfiEmailConfiguration
		AuthType is Numeric size 1
			States
				Basic value is 0
				OAuth2 value is 1
					default label is "O\Auth\2"
					
		OAuth2Configuration

	Field Rules
 		PfiEmailConfiguration.Password
        	if (PfiEmailConfiguration.EnableTLS and not AuthType.OAuth2)
        		required		
		OAuth2Configuration
			if (PfiEmailConfiguration.EnableTLS and AuthType.OAuth2)
        		required
        		
    Derived Fields

        BaseURLExample is a DerivedField
            type is Alpha size 50
            return "https://example.com:8443"
	
	
	
    Actions
        Create is a Create Action
            Exit Rules
                constraint (PfiEmailConfiguration.MailServer != blank)
                    "MailServerIsRequired"
                    
        Update is an Update Action
            Action Rules
                constraint (PfiEmailConfiguration.MailServer != blank)
                    "MailServerIsRequired"               

        Delete is a Delete Action
        
        TestConnection is an Instance Action
