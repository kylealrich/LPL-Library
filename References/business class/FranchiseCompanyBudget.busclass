FranchiseCompanyBudget is a BusinessClass
    owned by fr
    prefix is FCB
    classic name is FRCOMPBUD

    Ontology
        symbolic key is FranchiseCompanyBudget
            classic set name is FCBSET1
            classic name for FranchiseBudget is BUDGET-ID

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields
        StartDate
        Dates 					is a FranchiseBudgetDates
            classic name is DATE
        TransactionAmounts
            classic name is TRAN-AMT


	Local Fields
		LocalPeriod  is Numeric 1
		

    Sets

        Set2
            indexed
            Sort Order
                Company
                FranchiseCompanyBudget
                FranchiseBudget

	Conditions

		FranchiseCompanyBudgetExists					
			restricted
			when (FranchiseCompanyBudget exists)

	Derived Fields									
	
		RepresentativeText is a StringField
			type is Text
			default label is "FranchiseBudget"
			FranchiseBudget " - " FranchiseBudget.Description

	Relations
		FranchiseSalesCalendarRel
			one-to-one relation to FranchiseSalesCalendar
			Field Mapping uses symbolic key
				related.Company						= Company
				related.FranchiseSalesCalendar.Year	= FranchiseCompanyBudget
	
		FranchiseCompanyBudgetRel
			one-to-one relation to FranchiseCompanyBudget
			Field Mapping uses symbolic key
				related.Company						= Company
				related.FranchiseBudget				= FranchiseBudget	
				related.FranchiseCompanyBudget 		= FranchiseCompanyBudget			
		







    Field Rules
		FranchiseCompanyBudget
			required
				"BudgetYearIsRequired"
				
        StartDate
            required
            	"BudgetBeginDateIsRequired"


		Dates
			required
				"PeriodOneEndDateIsRequired"
			if (FranchiseBudget.BudgetType = "A") 
				constraint (TransactionAmounts.TransactionAmount[1] entered)
					"BudgetTypeRequiresAnAmount"//"AmountRequired"                      
				constraint (TransactionAmounts.TransactionAmount[1] > 0)
					"AmountMustBePositive"//"AmountMustBePositive"            			
			else
				constraint (TransactionAmounts not entered)
					"AmountsNotAllowedOnADateTypeBudget"    
			LocalPeriod = 1
			while (LocalPeriod < 54)
				if (LocalPeriod > 1)
        			if (Dates.Date[LocalPeriod] entered)
	        			constraint (Dates.Date[(LocalPeriod - 1)] entered)
	        				"PeriodsMustBeDefinedConsecutively"
	        			constraint (Dates.Date[LocalPeriod] > Dates.Date[(LocalPeriod - 1)])
	        				"DateForPeriod<LocalPeriod>MustBeAfterDateForPriorPeriod"	

				LocalPeriod += 1

				
    Actions
        Create is a Create Action

				
        Update is an Update Action


        Delete is a Delete Action




