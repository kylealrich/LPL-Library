CashAccountLockbox is a BusinessClass
	owned by cashmgmt
	prefix is CALB
	
	Ontology
		symbolic key is CashAccountLockbox
	
	Patterns
		implements ContextualParent
			
	Persistent Fields
		Description		is Alpha 250
		Address			is a PostalAddressV2	
			holds pii
		CourierAddress	is a PostalAddressV2	
			holds pii
		OpenDate		is Date
		CloseDate		is Date
		Status			is Numeric 1
			States
				Open	value is 1
				Closed	value is 2

	Context Fields
		FinancialInstitution
		FinancialInstitutionBranch

	Field Rules
		Description
			default to CashAccountLockbox

		OpenDate
			initial value is current corporate date
			default to current corporate date

		Status
			initial value is 1

	Actions
		Create is a Create Action			

		Update is an Update Action
			valid when (!Status.Closed)

		Delete is a Delete Action

		CloseLockbox is an Instance Action
			valid when (!Status.Closed)
			Parameters
				PrmCloseDate	is Date

			Parameter Rules
				PrmCloseDate
					initial value is current corporate date
					default to current corporate date

			Action Rules
				constraint (PrmCloseDate >= OpenDate)
					"CloseDateCannotBeBeforeOpenDate"
				CloseDate = PrmCloseDate
				Status = 2	

		OpenLockbox is an Instance Action
			valid when (Status.Closed)
			confirmation required
			Action Rules
				initialize CloseDate
				Status = 1
