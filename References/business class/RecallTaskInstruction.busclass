RecallTaskInstruction is a BusinessClass
    owned by recall
    prefix is RMRTK

    Ontology
    	symbolic key is RecallTaskInstruction
    	
    Persistent Fields
    	Description 	is a TaskInstructionDescription
    	Active			is Boolean
		UsedFor         is Numeric 1
			States
				NoticesAndItemProposals value is 0
				Notices                 value is 1
				ItemProposals           value is 2
   	  	
   	Field Rules
   		Description
   			required
   				"DescriptionIsRequired"
   		
   		Active
            default to true
    
    Conditions
    	HasQuestions
    		restricted
    		when (RecallTaskInstructionQuestion set exists)
    		       
  		UsedForSupplierItemProposal
  			restricted
  			when (RecallGroup.ItemProposalQuestions = RecallTaskInstruction)
  			
  		UsedForItemReviewer
  			restricted
  			when (RecallGroup.DefaultItemProposalInstructions = RecallTaskInstruction)

		ValidForNotices
			restricted
			when (UsedFor = 0
			or    UsedFor = 1)

		ValidForItemProposals
			restricted
			when (UsedFor = 0
			or    UsedFor = 2)
  	
  	Relations
  		
  	Attach Rules
		constraint (Active)
			"TaskInstructionIsInactive"
			
	Actions
		Create is a Create Action
		
		Update is an Update Action
		
		Delete is a Delete Action
		
		Purge is a Purge Action
			restricted
