ExternalUserMigrationProcess is a BusinessClass
    owned by person
    prefix is EXUSP
    stored in environment

    Ontology
        symbolic key is ExternalUserMigrationProcess

    Patterns
    	implements CRUD
    	implements CreateStamp
    	implements UpdateStamp
        disable AuditIndex
        disable AsOfDateProcessing
        disable EffectiveDated
        disable Auditing
	
	Persistent Fields
       	DataArea 
        Service 
        Actor
        ExternalEntityId				is Alpha size 50
		Status 							is Numeric size 1
			States
				New						value is 0			
				InProgress				value is 1			
				Completed	 			value is 2			
				Failed	 				value is 3			
		StatusMsg 						is Text

	Field Rules
		DataArea 
			default to parentcontext.dataarea
			required
			
		Service
			required
			
		Actor
			required
			
		ExternalEntityId
			required
			
		Status
			initial value is 0
			default to 0

				
	Conditions
 		IsInProgress
    		default label is "InProgress"
    		when (Status.InProgress or Status.New)
    
	Sets
		ByStamp
			indexed
			Sort Order
				create stamp descending
				ExternalUserMigrationProcess


		InProgressExtUserMigrationProcess
			duplicates
			indexed
			Sort Order
				DataArea
				Service
			Instance Selection
                where (IsInProgress)
                                
	Actions
		Create is a Create Action
		
		Update is an Update Action
		
		Delete is a Delete Action
		
		Purge is a Purge Action
		
		PurgeAll is a Set Action
			Action Rules
				Instance Rules
					invoke Purge
