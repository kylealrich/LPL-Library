FSMPOInboundBODImport is a BusinessClass
	owned by integration
	prefix is FSMPO
	
	Ontology
		symbolic key is FSMPOInboundBODImport
	
	Patterns
		implements InlineUserFields
			size is 1000
        implements StaticJava
        disable AuditIndex
	
	Context Fields
		FSMInboundBODTracker
	
	Persistent Fields
	
	Field Rules
	
	Local Fields

		NewBODTracker  						is a FSMInboundBODTracker view
		NewPurchaseOrderReceipt				is a PurchaseOrderReceipt view
		NewInventoryTransaction				is a InventoryTransaction view
		NewInventoryTransactionLine			is a InventoryTransactionLine view
		LocalConfigurationParameter			is Alpha size up to 200
		LocalEAMWorkOrder					is AlphaUpper size 30
		LocalActionCode						is Alpha 9
		LocalSplitFEG						is Alpha 4
		LocalFEG							is Alpha 4
		LocalFSMInboundBODTracker			is Numeric 15
		Error             					is Boolean
		ErrorMessage      					is Alpha 300
		LocalBODXML							is XMLDocument
		LocalaccountingEntity				is Alpha 40
		LocalGenericDelimiter				is Alpha 9
		LocalDescription					is Alpha 80
		LocalWoComment						is Alpha 256
		LocalWoType							is AlphaUpper 20
		LocalWoPriority						is AlphaUpper 8
		LocalWoParentID						is AlphaUpper 30
		LocalTargetValue					is Decimal size 21.8
		LocalEstimatedWoTotalCost			is Decimal size 21.8
		LocalActualWoTotalCost				is Decimal size 21.8
		LocalWOrderSequence					is Alpha 20
		LocalWoSequence						is AlphaUpper 1
		LocalWorkPackage					is Alpha 24
		LocalPMCode							is AlphaUpper 20
		LocalAssignedByPerson				is Alpha 30
		LocalReportedByPerson				is Alpha 15
		LocalProjectID						is Alpha 20
		LocalProjectDescription				is Alpha 80	
		LocalProjectBudgetID				is AlphaUpper 20
		LocalPersonAssignedTo				is Alpha 15
		LocalProblemCode					is AlphaUpper 8
		LocalStatus							is AlphaUpper 1
		LocalStatusCode						is AlphaUpper 4
		LocalStatusDescription				is Alpha 60
		LocalEAMEquipmentCode				is Alpha 30
		LocalEAMEquipmentDescription		is Alpha 80
		LocalWoPositionFacility				is Alpha 30
		LocalUserAreaCount          		is Numeric 9
		LocalIterator						is Numeric 9
		LocalNameValue						is Alpha 100
		LocalNameValueID					is Alpha 100
		LocalNameValue1						is Alpha 100
		LocalNameValue2						is Alpha 100
		LocalCreatedBy						is Alpha 30
		LocalEnteredBy						is Alpha 30
		LocalCriticality					is Alpha 8
		LocalSafetyFlag						is AlphaUpper 1
		LocalCNNumber						is AlphaUpper 24
		LocalDependFlag						is AlphaUpper 1
		LocalReOpenedFlag					is AlphaUpper 1
		LocalRoute							is AlphaUpper 20
		LocalPrintedFlag					is AlphaUpper 1					
		LocalMultiEquipFlag					is AlphaUpper 1
		LocalUDFCHKBOX01					is Alpha 1
		LocalUDFCHKBOX02					is Alpha 1
		LocalUDFCHKBOX03					is Alpha 1
		LocalUDFCHKBOX04					is Alpha 1
		LocalUDFCHKBOX05					is Alpha 1
		LocalUDFCHKBOX06					is Alpha 1
		LocalUDFCHKBOX07					is Alpha 1
		LocalUDFCHKBOX08					is Alpha 1
		LocalUDFCHKBOX09					is Alpha 1
		LocalUDFCHKBOX10					is Alpha 1
		LocalMaintenancePatternCode			is AlphaUpper 30
		LocalMaintenancePatternSequence		is Numeric 8
		LocalTypeCode						is AlphaUpper 4
		LocalClassOrg						is AlphaUpper 15
		LocalServiceRequest					is Alpha 30
		LocalShift					   		is AlphaUpper 4
		LocalMeterUnit						is Alpha 4
		LocalLastMeterReading				is like InternationalCost
		LocalTriggerEventID					is AlphaUpper 30
		LocalMSProject						is AlphaUpper 20
		LocalPrintFlag						is AlphaUpper 1					
		LocalCallerName						is Alpha 80
		LocalCustomerID						is AlphaUpper 30
		LocalLevel							is Alpha 30
		LocalRejectReason					is Alpha 240
		LocalAgreement						is AlphaUpper 30
		LocalFromPoint						is like InternationalCost
		LocalFromReferenceDescription		is Alpha 80	 
		LocalMaintenanceOrderLineLength		is Alpha 30
		LocalWoActivityID					is Numeric 8
		LocalWoActivityNote					is Alpha 256
		LocalWoUpdateDateTimeAlpha			is Alpha 20
		LocalWoUpdateDateTime				is Alpha 10
		LocalWoCreationDateAlpha			is Alpha 20
		LocalWoCreationDate					is Alpha 10
		LocalWoReportedDateTimeAlpha		is Alpha 20
		LocalWoReportedDateTime				is Alpha 10
		LocalRequestedStartDateAlpha		is Alpha 20
		LocalRequestedStartDate				is Alpha 10
		LocalRequestedEndDateAlpha			is Alpha 20
		LocalRequestedEndDate				is Alpha 10
		LocalScheduledStartDateAlpha		is Alpha 20
		LocalScheduledStartDate				is Alpha 10
		LocalEAMScheduledStartDateAlpha		is Alpha 20
		LocalEAMScheduledStartDate			is Alpha 10
		LocalScheduledEndDateAlpha			is Alpha 20
		LocalScheduledEndDate				is Alpha 10
		LocalStartDateAlpha					is Alpha 20
		LocalStartDate						is Alpha 10
		LocalCompletionDateAlpha			is Alpha 20
		LocalCompletionDate					is Alpha 10
		LocalPermanentFixPromiseDateAlpha	is Alpha 20
		LocalPermanentFixPromiseDate		is Alpha 10
		LocalTemporaryFixPromiseDateAlpha	is Alpha 20
		LocalTemporaryFixPromiseDate		is Alpha 10
		LocalDueDateAlpha					is Alpha 20
		LocalDueDate						is Alpha 10
		LocalProductionStartAlpha			is Alpha 20
		LocalProductionStart				is Alpha 10
		LocalFromGeoReference				is Alpha 256 
		LocalToReferenceDescription			is Alpha 80
		LocalToGeoReference					is Alpha 256
		LocalToPoint						is like InternationalCost
		LocalProviderID						is AlphaUpper 30
		LocalProviderOrganization			is AlphaUpper 15
		LocalServiceCategory				is AlphaUpper 30
		LocalServiceCategoryOrganization	is AlphaUpper 15
		LocalServiceProblemOrganization		is AlphaUpper 15
		LocalEquipmentUsability				is AlphaUpper 30
		LocalEquipmentUsabilityOrganization is AlphaUpper 15
		LocalWorkAddress					is Alpha 256
		LocalAlert							is Alpha 30
		LocalProductionRequest				is Alpha 30
		LocalProductionRequestRevision		is Numeric 4
		LocalProductionPriority				is Alpha 100
		LocalClassificationLength			is Numeric 10
		LocalEquipTypeclassificationlen		is Numeric 10
		LocalCostCode						is AlphaUpper 30
		LocalJobType						is AlphaUpper 8
		LocalDepartments					is AlphaUpper 15
		LocalOrderClass						is AlphaUpper 8
		LocalUDFCHAR01						is Alpha 80	
		LocalUDFCHAR02						is Alpha 80	
		LocalUDFCHAR03						is Alpha 80	
		LocalUDFCHAR04						is Alpha 80	
		LocalUDFCHAR05						is Alpha 80	
		LocalUDFCHAR06						is Alpha 80	
		LocalUDFCHAR07						is Alpha 80	
		LocalUDFCHAR08						is Alpha 80	
		LocalUDFCHAR09						is Alpha 80	
		LocalUDFCHAR10						is Alpha 80	
		LocalUDFCHAR11						is Alpha 80	
		LocalUDFCHAR12						is Alpha 80	
		LocalUDFCHAR13						is Alpha 80	
		LocalUDFCHAR14						is Alpha 80	
		LocalUDFCHAR15						is Alpha 80	
		LocalUDFCHAR16						is Alpha 80	
		LocalUDFCHAR17						is Alpha 80	
		LocalUDFCHAR18						is Alpha 80	
		LocalUDFCHAR19						is Alpha 80
		LocalUDFCHAR20						is Alpha 80
		LocalUDFCHAR21						is Alpha 80	
		LocalUDFCHAR22						is Alpha 80	
		LocalUDFCHAR23						is Alpha 80	
		LocalUDFCHAR24						is Alpha 80	
		LocalUDFCHAR25						is Alpha 80	
		LocalUDFCHAR26						is Alpha 80	
		LocalUDFCHAR27						is Alpha 80	
		LocalUDFCHAR28						is Alpha 80
		LocalUDFCHAR29						is Alpha 80	
		LocalUDFCHAR30						is Alpha 80
		LocalUDFCHAR31						is Alpha 80	
		LocalUDFCHAR32						is Alpha 80	
		LocalUDFCHAR33						is Alpha 80	
		LocalUDFCHAR34						is Alpha 80	
		LocalUDFCHAR35						is Alpha 80	
		LocalUDFCHAR36						is Alpha 80	
		LocalUDFCHAR37						is Alpha 80	
		LocalUDFCHAR38						is Alpha 80	
		LocalUDFCHAR39						is Alpha 80	
		LocalUDFCHAR40						is Alpha 80	
		LocalUDFCHAR41						is Alpha 80	
		LocalUDFCHAR42						is Alpha 80	
		LocalUDFCHAR43						is Alpha 80	
		LocalUDFCHAR44						is Alpha 80	
		LocalUDFCHAR45						is Alpha 80	
		LocalUDFNUM01 						is Alpha 21
		LocalUDFNUM02 						is Alpha 21
		LocalUDFNUM03 						is Alpha 21
		LocalUDFNUM04 						is Alpha 21
		LocalUDFNUM05						is Alpha 21	
		LocalUDFNUM06 						is Alpha 21
		LocalUDFNUM07 						is Alpha 21
		LocalUDFNUM08 						is Alpha 21
		LocalUDFNUM09 						is Alpha 21
		LocalUDFNUM10						is Alpha 21				
		LocalUDFDATE01Alpha					is Alpha 20
		LocalUDFDATE01						is Alpha 10
		LocalUDFDATE02Alpha 				is Alpha 20
		LocalUDFDATE02 						is Alpha 10
	  	LocalUDFDATE03Alpha 				is Alpha 20
	  	LocalUDFDATE03 						is Alpha 10
	  	LocalUDFDATE04Alpha 				is Alpha 20
	  	LocalUDFDATE04 						is Alpha 10
	  	LocalUDFDATE05Alpha 				is Alpha 20
	  	LocalUDFDATE05 						is Alpha 10
	  	LocalUDFDATE06Alpha					is Alpha 20
		LocalUDFDATE06						is Alpha 10
		LocalUDFDATE07Alpha 				is Alpha 20
		LocalUDFDATE07 						is Alpha 10
	  	LocalUDFDATE08Alpha 				is Alpha 20
	  	LocalUDFDATE08 						is Alpha 10
	  	LocalUDFDATE09Alpha 				is Alpha 20
	  	LocalUDFDATE09 						is Alpha 10
	  	LocalUDFDATE10Alpha 				is Alpha 20
	  	LocalUDFDATE10 						is Alpha 10
		LocalEquipmentType					is Alpha 10
		LocalEAMEquipmentType				is Alpha 10
		LocalEAMAsset						is Alpha 80
		LocalDistAccFD3						is AlphaUpper 15
		LocalDistAccFD4						is AlphaUpper 15
		LocalDistAccFD5						is AlphaUpper 15
		LocalDistAccGLChartAccount			is AlphaUpper 26
		LocalDistAccToAccountingEntity		is AlphaUpper 12
		LocalMaintenanceOrderXML 			is XMLDocument
		LocalOriginalCreateDateTime			is Alpha 25
		LocalToLogicalID					is Alpha 60
		LocalConfirmBOD						is Alpha 20
		LocalErrorMessage 					is Alpha 300
		LocalComponentID					is Alpha 40
		LocalTrackerID						is Numeric 15
		LocalDocumentID                	 	is Alpha 100
		LocalVariationID					is Alpha 100
		LocalBODID							is Alpha 100
		LocalPOReference  					is Alpha size 50
		EAMWOProjectID						is Alpha 20
		EAMWOScheduledStartDate				is Alpha 10
		PurchaseOrderID						is Alpha 50
		PurchaseOrderLineNum				is Numeric 9
		RequisitionID                      	is Numeric 12
		LocalRequisitionOrder				is Numeric 12
		RequisitionLineNumber				is Numeric 6
		LocalRQReference  					is Alpha size 50
		LocalRQFromCompany					is Numeric 5
		WarehouseDemandLineItem 			is AlphaUpper 32
		LocalComponentSequence				is Numeric  3
		LocalDemandDocumentType             is AlphaUpper 2
		LocalInventoryLocation				is AlphaUpper 20
		LocalAllocatedQuantity				is Decimal size 13.4
		LocalOpenQuantity					is Decimal size 13.4
		LocalDocRefIterator					is Numeric 9
		LocalEAMCompany						is Numeric 5


		NewVendorReturn  						is a VendorReturn view
		LocalCompany							is Numeric 4
		LocalAccountingEntity					is AlphaUpper size 40
		LocalVendorReturn               		is Numeric 10
		LocalReturnLocation             		is Alpha 20
		LocalDocumentReferencecount     		is Numeric 9
		LocalLoop                               is Numeric 9
		LocalName				 				is Alpha size 50
		Localdocumentreference                  is Alpha size 50
		LocalVendorReturnlineReference          is Alpha size 50
		LocalVendorReturnFromLocation           is Alpha size 20
		LocalPurchaseOrder      				is Numeric 12
		LocalHeaderReturnLocation               is Alpha 20
		LocalLineReturnLocation               	is Alpha 20
		LocalLineReference                		is Numeric 9
		LocalRQLineReference					is Numeric 9
		LocalVendorReturnLineCount      		is Numeric 9
		LocalPOLineNumber               		is Numeric 6
		LocalItem 								is Alpha 32
		LocalItemDescription    				is Alpha 60
		LocalReturnedItemQuantity 				is Alpha 13
		LocalItemUnitCost						is Alpha 21
		LocalItemUOM							is Alpha 4
		LocalVendorReturnCompany                is Numeric 4
		LocalVendorReturnPO						is Numeric 9
		LocalItemType							is Alpha 1
		LocalVendorReturnReference				is Alpha 25
		LocalFromLogicalID						is Alpha 60
		LocalSSupplierRMAXML 					is XMLDocument
		LocalVendorReturnLine					is Numeric 6


		POReceiptIndicator						is Alpha 20
		LocalPONumber 							is Numeric 9
		LocalItemCount							is Numeric 9
		LocalReferenceNumber 					is Alpha 25
		LocalLineCounter    					is Numeric 9
		LocalLinesAdded 						is Numeric 9
		LocalLineNumber							is Numeric 6
		LocalPORInspection   					is Numeric 10
		LocalPORelease							is Numeric 4
		LocalPurchaseOrderReceipt 				is Numeric 10
		ReceiptAdjustmentFlag 					is Alpha 10
		LocalPOCode 							is Alpha 4
		LocalPrefix								is Alpha 10
		LocalWareHouse 							is Alpha 20
		LocalOrigRecQty							is Decimal 13.4
		LocalTotalRecQty						is Decimal 13.4
		LocalQuantity  							is Decimal 13.4
		LocalBackOrderedQuantity 				is Decimal 13.4
		LocalVendorPriceUOM						is AlphaUpper 4
		LocalNativePurchaseOrder				is Alpha 50
		LocalReceiptCounter						is Numeric 9
		LocalTaskID								is Alpha 100
        LocalReferenceID						is Alpha 100
        LocalConfirmationCode 					is Alpha 100
        LocalAuthorizationID 					is Alpha 100
		LocalOriginalDateTime					is Alpha 40
		LocalNativeWareHouse 					is Alpha 25
		LocalItemGroup							is Alpha 9
		LocalNativeItem							is Alpha 35
		LocalDocumentDateAlpha 					is Alpha 40
		LocalDocumentDate						is Alpha 40
		LocalLotAdded							is Numeric 9
		LocalLotCounter							is Numeric 9
		LocalITLineNumber						is Numeric 6
		LocalInventoryTransaction 				is Numeric 10
		LocalLot								is AlphaUpper 30
		LocalTransactionUOM						is AlphaUpper 4
		LocalChartAccount						is Alpha 26
		LocalAccountingUnit						is Alpha 25
		LocalLotQuantity						is Decimal 13.4
		LocalLotCount 							is Numeric 9
		LocalAccount							is Alpha 26
		LocalNativeAccount						is Alpha 26
		LocalUnitCost							is Decimal 13.4
		LocalAckDocumentID						is Alpha 100
		LocalAccountingEntityID					is Alpha 40
		LocalAE									is AlphaUpper size 40
		LocalPReceiveDeliveryXML				is XMLDocument
		LocalCreditCodeAE						is Alpha 40
		LocalCreditCodeAccountingUnit			is Alpha 40
		LocalCreditCodeGLCAccount				is Alpha 40
		LocalCreditCodeProject					is Alpha 40
		LocalCreditCodefsmDimension1			is Alpha 40
		LocalCreditCodefsmDimension2			is Alpha 40
		LocalCreditCodefsmDimension3			is Alpha 40
		LocalCreditCodefsmDimension4			is Alpha 40
		LocalCreditCodefsmDimension5			is Alpha 40
		LocalCreditCodefsmDimension6			is Alpha 40
		LocalCreditCodefsmDimension7			is Alpha 40
		LocalCreditCodefsmDimension8			is Alpha 40
		LocalCreditCodefsmDimension9			is Alpha 40
		LocalCreditCodefsmDimension10			is Alpha 40
		LocalInvLineRef							is Alpha 40
		InvLineQuantity							is Alpha 40
		InvLineUnitCost							is Alpha 40
		BODLineCount							is Numeric size 40	
		INVLineNum								is Numeric 40
		ProcessReceiveDeliveryLineAckXML 		is XMLDocument 


		LocalDocReference						is Alpha 20
		LocalDocType							is Alpha 20
		LocalDocTypeBoolean						is Boolean
		LocalShipmentStatus						is Alpha 20
		LocalAlterDocId							is Alpha 60
		LocalShipmentNumber						is Alpha 10
		LocalItemCounter						is Numeric 10
		LocalShipItem							is Numeric 10
		LocalItemNumber							is Numeric 10
		LocalNumDetails							is Alpha 10
		LocalSerialItemCount					is Numeric 10
		LocalCounter							is Numeric 10
		LocalDTreturnCode						is Alpha 50
		LocalDTreturnMsg						is Alpha 100
		LocalNextItemNumber						is Alpha 20
		LocalRequestingCompany					is Alpha 12
		LocalRequisition						is Numeric 20
		LocalShippedQty							is Numeric 10
		LocalLNreturnMsg						is Alpha 100
		LocalLNreturnCode						is Alpha 20
		LocalContainerType						is Alpha 20
		LocalContainerID						is Alpha 20
		LocalShipmentItemTotal					is Numeric 20
		LocalTrackerDetailCounter				is Numeric 20
		LocalShipQty							is Numeric 20
		LocalUOM								is Alpha 20
		LocalTrackerDetailQty					is Alpha 20
		LocalTrackItemQty						is Alpha 20
		LocalHDreturnCode						is Alpha 40
		LocalHDreturnMsg						is Alpha 100
		LocalReturnCode							is Alpha 40
		LocalLocation							is Alpha 20
		LocalShipLocation						is Alpha 20
		LocalLotItemCount						is Numeric 10
		LocalSenderLogicalID					is Alpha 30
    	LocalSenderComponentID					is Alpha 30
    	LocalCreateDateTime						is Alpha 40
    	LocalSenderBODID						is Alpha 100
    	LocalShipDocID							is Alpha 30
    	LocalNativeCompany						is Alpha 12
    	LocalMainUserTemplate					is Alpha size 250
    	LocalShipmentCompany					is Alpha 10
    	LocalDocNumber							is Alpha 30
    	LocalPrintedQuantity					is Numeric 10
    	LocalRequestingLocation					is AlphaUpper size 20
    	LocalSerializedLotCount					is Numeric 9
    	LocalFillOrKill							is Alpha 1
    	LocalShipmentUnitCount					is Numeric 9
		LocalShipUnitIterator					is Numeric 9
		LocalShipUnitItemIterator				is Numeric 9
		LocalShipmentUnitItemCount				is Numeric 9
		LocalBackOrderQuantity					is Numeric 10
		LocalReturnNumber						is Numeric 10
		LocalReturnLineNumber					is Numeric 9
		LocalReturnLineUOM						is Alpha 20

    	LocalPOString							is Alpha 50
    	LocalTransDate							is Alpha 20
		LocalTotalLines							is Numeric 4
		LocalCodeLeng							is Numeric 4
		LocalListID								is Alpha 100
		LocalListDate							is Alpha 100
		LocalUpdateRequestedDeliveryDateTime	is Alpha size 5
		LocalCode								is Alpha 20
		LocalNumOfLines							is Numeric 4 
		LocalNumberOfLinesAdded					is Numeric 4
		LocalNumOfLots							is Numeric 4
		LocalLotNum								is Alpha 50
		LocalCountLot							is Numeric 4
		LocalCountLotAdded						is Numeric 4
		LocalPONum								is Numeric 9
		LocalCleanDocIDCompany 					is Alpha 40

		LocalDescriptionLng 					is Numeric 4
		LocalSubDescriptionExists 				is Numeric 2
		LocalPORLines			  				is Numeric 4
		LocalHeaderSubDescription				is Alpha size 100
		LocalHeaderDescription					is Alpha size 100
		LocalDocRefType							is Alpha size 30
		LocalBillOfLading						is Alpha size 22
		LocalPOReceipt							is Numeric 4
		LocalHoldCodes							is Alpha size 20
		LocalPreferedHoldBin					is Alpha size 20
		LocalBOQuantity							is Decimal 13.4
		LocalAction								is Alpha size 10
		LocalTotReceivedQuantity 				is Decimal 13.4
		LocalLineFC								is Alpha size 2
		LocalBuyer								is Alpha size 20
		LocalSerailOrLotCounter					is Numeric 4
		LocalSerailOrLot						is Numeric 4
		LocalSerailCounter						is Numeric 4
		LocalTotSerailNum						is Numeric 4
		LocalTotSerail							is Numeric 4
		LocalTotLotNum							is Numeric 4   
		LocalSerialNum							is Alpha size 50


		NewPurchaseOrderReceiptImport		is a PurchaseOrderReceiptImport view
		LocalRunGroup						is Alpha 30
		LocalReceivedQuantity				is Decimal size 13.4
		LocalReceivedUOM					is Alpha size 4
		LocalSender							is Alpha size 100
		LocalPulseAlertDescription			is Alpha size 200
		LocalVendor							is Numeric size 9


		LocalCancelRemaining					is Alpha 2
		LocalCount 				                is Numeric 9
		LocalPOLineLength						is Numeric 9
		LocalPOCompany							is Alpha 40
		LocalPOLineStatus						is Alpha 10
		LocalRemainingQuantity					is Numeric 20
		LocalProcessPurchaseOrderXML 			is XMLDocument
		LocalPOLineXML				 			is XMLDocument

		LocalCSFPurchaseOrder					is Numeric 20
		LocalAlternateDocumentID				is Alpha 40
		
	Derived Fields
	
		SyncMaintenanceOrderConfirmBODXML is a DerivedField
			type is XMLDocument
			restricted
			SyncMaintenanceOrderConfirmBODXML = template.IONSyncMaintenanceOrder_ConfirmBOD_ST document for this instance
		
		DerivedTenantID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "tenantID"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedReleaseID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "releaseID"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedLogicalID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "logicalID"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedVersionID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "VersionID"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedGenericDelimiter is a DerivedField
			type is Alpha size 9
			restricted
			LocalConfigurationParameter = "Generic_Delimiter"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
					
		BODCurrentTimeStamp is a DerivedField
			type is Alpha size 20
			restricted
			BODCurrentTimeStamp = system current timestamp
			return BODCurrentTimeStamp
			
		BODFormattedCurrentTimeStamp is a DerivedField
			type is Alpha size 25
			restricted
			return BODCurrentTimeStamp[1:4] + "-" + BODCurrentTimeStamp[5:6] + "-" + BODCurrentTimeStamp[7:8] + "T" + BODCurrentTimeStamp[9:10] + ":" + BODCurrentTimeStamp[11:12] + ":" + BODCurrentTimeStamp[13:14] + "Z"	
			
		DerivedBODIncludeUDFs is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "SyncMaintenanceOrder_In_Include_UDFs"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedIncludeUDFs is a DerivedField
			type is Boolean
			restricted
			if(DerivedBODIncludeUDFs = "Y")
				return	true
			else
				return false
				
		DerivedconfirmBodID is a DerivedField
			type is Alpha 300	
			restricted
			return "infor-nid:"+DerivedTenantID+":"+LocalaccountingEntity + ":"+LocalDocumentID+":"+LocalEAMWorkOrder+":"+"?BOD&verb=Confirm&TrackerID="+ LocalTrackerID	
			
		DerivedAckResponse is a DerivedField
			type is Alpha 20
			restricted
			if(LocalConfirmBOD = "true")
				return "Rejected"
			else
				return "Accepted"
				
		DerivedReasonCode is a DerivedField
			type is Alpha 20
			restricted
			if(LocalConfirmBOD = "true")
				return "Application_Error"
			else
				return "Application_Success"
				
		DerivedMOErrorMessage is a DerivedField
			type is Alpha 300
			restricted
			return LocalErrorMessage
				
		DerivedMOReturnMessage is a DerivedField
			type is Alpha 300
			restricted
			if(LocalConfirmBOD = "true")
				return "Error parsing SyncMaintenanceOrder:" + DerivedMOErrorMessage + ":"+ "TrackerID="+ LocalTrackerID
			else
				return DerivedMOErrorMessage
				
		NativeAccountingEntity	is a NativeField
			type is Alpha 22
			restricted	
		
		NativeEAMCompany	is a NativeField
			type is Alpha 40
			restricted		
			
		NativeEAMPurchaseOrder is a NativeField  
			type is Numeric size 50
			restricted		
			
		NativeEAMRequisition is a NativeField
			type is Numeric size 50
			restricted

		NativePurchaseOrder	is a NativeField   
			type is Numeric size 30
			restricted
		
		NativeVendorReturnLocation	is a NativeField
			type is Alpha size 20
			restricted	
			
		NativeLocation	is a NativeField
			type is Alpha size 20
			restricted
			
		DerivedSupplierRMAConfirmBODID is a DerivedField
			type is Alpha 300
			restricted
			return "infor-nid:" + DerivedTenantID + ":" +LocalAccountingEntity + ":"  + LocalDocumentID + ":" +"?BOD&verb=Confirm&VariationID=" + LocalVariationID 
		
		DerivedSSRErrorMessage is a DerivedField
			type is Alpha 300
			return LocalErrorMessage
					
		DerivedSSRReturnMessage is a DerivedField
			type is Alpha 300
			restricted
			if(LocalConfirmBOD = "true")
				return "Error processing SupplierRMA- " + DerivedSSRErrorMessage + ":"+ "TrackerID="+ LocalTrackerID
			else
				return DerivedSSRErrorMessage
				
		SyncSupplierRMAConfirmBODXML is a DerivedField
			type is XMLDocument
			restricted
			SyncSupplierRMAConfirmBODXML = template.IONSyncSupplierRMA_ConfirmBOD_ST document for this instance


		ProcessReceiveDeliveryConfirmBODXML is a DerivedField
			type is XMLDocument
			restricted
			ProcessReceiveDeliveryConfirmBODXML = template.IONProcessReceiveDelivery_ConfirmBOD_ST document for this instance
		
		ProcessReceiveDeliveryAcknowledgeBODXML is a DerivedField
			type is XMLDocument
			restricted
			ProcessReceiveDeliveryAcknowledgeBODXML = template.IONProcessReceiveDelivery_AcknowledgeBOD_ST document for this instance
	
		DerivedReferenceNoPrefix is a DerivedField
			type is Alpha size 20
			restricted
			LocalConfigurationParameter = "ProcessReceiveDelivery_Inbound_ReferenceNo_Prefix"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedDefaultCreditCodeBlock is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "DefaultCreditCodeBlock"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedPRDConfirmBODID is a DerivedField
			type is Alpha 300
			restricted
			return "infor-nid:" + DerivedTenantID + ":" + LocalCompany + ":" + LocalWareHouse + ":" + LocalDocumentID + ":" + "?BOD&verb=Confirm&TrackerID=" + LocalTrackerID 
			
		DerivedPRDACKBODID is a DerivedField
			type is Alpha 300
			restricted
			return "infor-nid:" + DerivedTenantID + ":" + LocalCompany + ":" + LocalWareHouse + ":" + LocalDocumentID + ":" + "?ReceiveDelivery&verb=Acknowledge&TrackerID="+LocalTrackerID
			
		NativeItem	is a NativeField
			type is Alpha size 100
			restricted
		
		NativeAccount	is a NativeField
			type is Alpha 100
			restricted
			
		NativeRDPurchaseOrder	is a NativeField
			type is Alpha size 60
			restricted
			
		NativeWareHouse	is a NativeField
			type is Alpha size 60
			restricted
		
		NativeRDCompany is a NativeField
			type is Alpha size 60
			restricted			



		NativeShipmentNumber is a NativeField
			type is Alpha 60
			restricted
		
		DerivedShipmentBodID is a DerivedField
			type is Alpha 400
			restricted
			return "infor-nid:"+DerivedTenantID+":"+DerivedCompany+":"+DerivedLocation+":"+":"+"?BOD&verb=Confirm&TrackerID="+ LocalTrackerID	
		
		DerivedCompany is a DerivedField
			type is Alpha 12
			restricted
			return LocalCompany
		
		DerivedLocation is a DerivedField
			type is Alpha 12
			restricted
			return LocalLocation	
		
		NativeShipLocation is a NativeField
			type is Alpha 50
			restricted
			
		NativeShipCompany is a NativeField
			type is Alpha 50
			restricted
		ShipmentConfirmBODXML is a DerivedField
			type is XMLDocument
			restricted
			ShipmentConfirmBODXML = template.IONSyncShipment_ConfirmBOD_ST document for this instance	
		
		NativeShipmentCompany is a NativeField
			type is Alpha 12
			restricted	
		
		NativeTrackItem	is a NativeField
			type is Alpha 60
			restricted

	
		NativePONumber is a NativeField
			type is Numeric 20
			restricted
				
		NativeASNCompany is a NativeField
			type is Alpha 25
			restricted	
	
		DerivedASNBodID is a DerivedField
			type is Alpha 400
			restricted
			return "infor-nid:"+DerivedTenantID+":"+LocalCompany+":"+LocalLocation+":"+":"+"?BOD&verb=Confirm&TrackerID="+LocalTrackerID
		
		SyncASNConfirmBODXML is a DerivedField
			type is XMLDocument
			restricted
			SyncASNConfirmBODXML = template.IONSyncAdvanceShipNotice_ConfirmBOD_ST document for this instance	


		SyncReceiveDeliveryConfirmBODXML is a DerivedField
			type is XMLDocument
			restricted
			SyncReceiveDeliveryConfirmBODXML = template.IONSyncReceiveDelivery_ConfirmBOD_ST document for this instance
		
		
		DerivedSyncRDConfirmBodID is a DerivedField
			type is Alpha 400
			restricted
			return "infor-nid:"+DerivedTenantID+":"+LocalCompany+":"+LocalLocation+":"+":"+"?BOD&verb=Confirm&TrackerID="+LocalTrackerID
		
		DerivedUpdateReleaseReceipt is a DerivedField
			type is Alpha size 4
			restricted
			LocalConfigurationParameter = "SyncReceiveDelivery_Inbound_Combine_PO_Receipts"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		NativeHeaderDescription	is a NativeField
			type is Alpha 100
			restricted
		
		NativeShipmentItem is a NativeField
			type is Alpha 50
			restricted


		DerivedCurrentTimeStamp is a DerivedField
			type is Alpha size 100
			restricted
			DerivedCurrentTimeStamp = current timestamp
			return DerivedCurrentTimeStamp[1:4] + DerivedCurrentTimeStamp[5:6] + DerivedCurrentTimeStamp[7:8] + DerivedCurrentTimeStamp[9:10] + DerivedCurrentTimeStamp[11:12] + DerivedCurrentTimeStamp[13:14] + DerivedCurrentTimeStamp[15:17] 
		
		DerivedRunGroup is a DerivedField
			type is Alpha size 100
			restricted
			return "EP" + DerivedCurrentTimeStamp[1:4] + DerivedCurrentTimeStamp[5:6] + DerivedCurrentTimeStamp[7:8] + DerivedCurrentTimeStamp[9:10]
	
		DerivedPORIReference is a DerivedField
			type is Alpha size 100
			restricted
			DerivedPORIReference = current timestamp
			return DerivedPORIReference[1:4] + DerivedPORIReference[5:6] + DerivedPORIReference[7:8] + DerivedPORIReference[9:10] + DerivedPORIReference[11:12] + DerivedPORIReference[13:14] + DerivedPORIReference[15:16] 
		
		DerivedLoadReceiveDeliveryPulseAlertBODID is a DerivedField
			type is Alpha size 300
			restricted
			return "infor-nid:" + DerivedTenantID +"::"+ LocalCompany +":"+ "?LoadReceiveDeliveryAlert&verb=Process"
		
		LoadReceiveDeliveryPulseAlertXML is a DerivedField
			type is XMLDocument
			restricted
			LoadReceiveDeliveryPulseAlertXML = template.IONLoadReceiveDeliveryAlert_ST document for this instance
			return LoadReceiveDeliveryPulseAlertXML


		UpdateRequestedDeliveryDateTimeFlag is a DerivedField
			type is Alpha size 5
			restricted
			LocalConfigurationParameter = "UpdateRequestedDeliveryDateTimeFromWO"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		UpdateShipDateTimeFromWOFlag is a DerivedField			
			type is Alpha size 5
			restricted
			LocalConfigurationParameter = "UpdateShipDateTimeFromWO"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value		
					
		DerivedConfigDocID is a DerivedField
			type is Alpha size 2
			restricted
			LocalConfigurationParameter = "RequiredCleanDocumentID"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedConfigFEG is a DerivedField
			type is Alpha size 2
			restricted
			LocalConfigurationParameter = "IsMultipleFEG"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value

		DerivedCancelRemaining is a DerivedField
			type is Alpha size 2
			restricted
			LocalConfigurationParameter = "ProcessPurchaseorder_In_CancelRemaining"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
					
		NativePOCompany is a NativeField
			type is Alpha 50
			restricted
				
		DerivedProcessPurchaseOrderReturnMessage is a DerivedField
			type is Alpha 300
			restricted
			if(LocalConfirmBOD = "true")
				return "Error parsing ProcessPurchaseOrder - canceling the PurchaseOrderLine" +":"+ LocalAccountingEntity + "-" +LocalDocumentID+": "+"Message:"+ LocalErrorMessage + ", "+ "TrackerID="+ LocalTrackerID
			else
				return LocalErrorMessage


		DerivedProcessPurchaseOrderConfirmBodID is a DerivedField
			type is Alpha 400
			restricted
			return "infor-nid:"+DerivedTenantID+":"+LocalAccountingEntity+":"+LocalDocumentID+":"+"?PurchaseOrder&verb=Confirm&TrackerID="+LocalTrackerID	
		
		DerivedProcessPurchaseOrderACKBodID is a DerivedField
			type is Alpha 400
			restricted
			return "infor-nid:"+DerivedTenantID+":"+LocalAccountingEntity+":"+LocalDocumentID+":"+"?PurchaseOrder&verb=Ack&TrackerID="+LocalTrackerID	

		ProcessPurchaseOrderConfirmBODXML is a DerivedField
			type is XMLDocument
			restricted
			ProcessPurchaseOrderConfirmBODXML = template.IONProcessPurchaseOrder_ConfirmBOD_ST document for this instance
		
		ProcessPurchaseOrderAcknowledgeBODXML is a DerivedField
			type is XMLDocument
			restricted
			ProcessPurchaseOrderAcknowledgeBODXML = template.IONProcessPurchaseOrder_AcknowledgeBOD_ST document for this instance

		NativeAcknowledgePurchaseOrder	is a NativeField   
			type is Numeric size 30
			restricted
		
		NativeAcknowledgePOCompany	is a NativeField   
			type is Alpha size 40
			restricted

		DerivedSendTo is a DerivedField
			type is Alpha size 1000
			restricted
			LocalConfigurationParameter = "AdminEmailAddresses"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedMailFrom is a DerivedField
			type is Alpha size 1000
			restricted
			LocalConfigurationParameter = "mailFrom"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value

	Relations
#ifdef module eam	
	
		EAMWorkOrderRel	 
			one-to-one relation to EAMWorkOrder
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= LocalFEG
				related.EAMWorkOrder			= LocalEAMWorkOrder 
				
		EAMWorkOrderUserFieldsRel	 
			one-to-one relation to EAMWorkOrderUserFields
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= LocalFEG
				related.EAMWorkOrder			= LocalEAMWorkOrder 
				
				
		EAMWorkOrderActivityRel	 
			one-to-one relation to EAMWorkOrderActivity
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= LocalFEG
				related.EAMWorkOrder			= LocalEAMWorkOrder 
				related.EAMWorkOrderActivity	= LocalWoActivityID 
		EAMPOLineRel	 
			one-to-many relation to PurchaseOrderLine
			Field Mapping uses symbolic key
				related.Company				= LocalCompany 
				related.PurchaseOrder		= PurchaseOrderID
				related.PurchaseOrderLine 	= PurchaseOrderLineNum
			Instance Selection
				where (related.EAMWorkOrder = LocalEAMWorkOrder)
				
		RequisitionLineRel
			one-to-many relation to RequisitionLine
			Field Mapping uses symbolic key
				related.Company				= LocalCompany 
				related.Requisition			= RequisitionID 
				related.RequisitionLine 	= RequisitionLineNumber
			Instance Selection
				where (related.EAMWorkOrder = LocalEAMWorkOrder)
				
		EAMWarehouseDemandLineRel	 
			one-to-many relation to WarehouseDemandLine
			Field Mapping uses Set1
				related.Company								= RequisitionLineRel.FromCompanyLocationBin.FromCompany
				related.WarehouseDemand.DemandSystemCode	= "RQ"
				related.WarehouseDemand.DemandDocument		= RequisitionID
				related.WarehouseDemand.DemandCompany		= LocalCompany
				related.WarehouseDemandLine.LineNumber		= RequisitionLineNumber
			Instance Selection
				where (related.EAMWorkOrder 					= LocalEAMWorkOrder
				and    related.EAMWorkOrderActivity				= LocalWoActivityID)
#endif	

				
		GLCompanyRel
			one-to-one relation to GeneralLedgerCompany
			Field Mapping uses symbolic key
				related.Company				= LocalEAMCompany 
		
		FSMBODConfigurationParameterRel
        	one-to-one relation to FSMBODConfigurationParameter
			Field Mapping uses symbolic key
            	related.FSMBODConfigurationParameter 		= LocalConfigurationParameter
		
		FSMInboundBODTrackerRel
            one-to-one relation to FSMInboundBODTracker
            Field Mapping uses symbolic key
                related.FSMInboundBODTracker	= LocalFSMInboundBODTracker                
		
		UserTemplateRel
			one-to-many relation to UserTemplate
			Field Mapping uses symbolic key
			Instance Selection
				where (related.UserTemplate   = LocalMainUserTemplate)
		
		FSMBODConfigurationRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 1
            	related.FSMBODConfiguration.Noun 		= "MaintenanceOrder"
            	related.FSMBODConfiguration.Direction 	= 2
				
		DESTAEVSCSFGLCCleanDocIDRel	
			one-to-many relation to FSMBODCrossReferenceDetail
			Field Mapping uses symbolic key
            	related.FSMBODCrossReference.SourceField 		= "DESTAE"
            	related.FSMBODCrossReference.DestinationField 	= "CSFGLC"
            Instance Selection
				where (related.SourceValue	= LocalaccountingEntity)
				

		FSMBODConfigurationSupplierRMARel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 1
            	related.FSMBODConfiguration.Noun 		= "SupplierRMA"
            	related.FSMBODConfiguration.Direction 	= 2
#ifdef module po				
		PurchaseOrderLinesByLineNbrRel
			one-to-one relation to PurchaseOrderLine
			Field Mapping uses symbolic key				
				related.Company            = LocalVendorReturnCompany
				related.PurchaseOrder      = LocalVendorReturnPO
				related.PurchaseOrderLine  = LocalPOLineNumber
				
		FindVendorReturnRel
			one-to-many relation to VendorReturn
			Field Mapping uses symbolic key
				related.Company 		= LocalVendorReturnCompany
			Instance Selection
				where (related.ReferenceNumber	= LocalVendorReturnReference)
				
		UpdateVendorReturnRel
			one-to-many relation to VendorReturnLine
			Field Mapping uses symbolic key
				related.Company = LocalVendorReturnCompany
				related.VendorReturn = LocalVendorReturn
			Instance Selection
				where (related.OriginalPurchaseOrderLine = LocalPOLineNumber)
				
		DeleteVendorReturnRel
			one-to-one relation to VendorReturn
			Field Mapping uses symbolic key
				related.Company = LocalVendorReturnCompany
				related.VendorReturn = LocalVendorReturn
#endif


		FSMBODConfigurationPRDRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 2
            	related.FSMBODConfiguration.Noun 		= "ReceiveDelivery"
            	related.FSMBODConfiguration.Direction 	= 2
#ifdef module po
#ifdef module ic	
		PurchaseOrderReceiptRel
			one-to-many relation to PurchaseOrderReceipt
			Field Mapping uses symbolic key
            	related.Company					= LocalCompany
            	related.PurchaseOrderReceipt 	= LocalPurchaseOrderReceipt
			Instance Selection
				where (related.PurchaseOrder	= LocalPONumber)
		
		PurchaseOrderLineRel
			one-to-one relation to PurchaseOrderLine
			Field Mapping uses symbolic key
            	related.Company					= LocalCompany
            	related.PurchaseOrder 			= LocalPONumber
            	related.PurchaseOrderLine		= LocalLineNumber
		
		PurchaseOrderReceiptLineRel
			one-to-one relation to PurchaseOrderReceiptLine
			Field Mapping uses symbolic key
            	related.Company					= LocalCompany
            	related.PurchaseOrderReceipt 	= LocalPurchaseOrderReceipt
            	related.PurchaseOrderReceiptLine= LocalLineNumber
        
        POReceiptAdjustmentAndInspectionRel
        	one-to-many relation to POReceiptAdjustmentAndInspection
			Field Mapping uses symbolic key
            	related.Company							= LocalCompany
            	related.AdjustmentInspectionDocumentType= "RA" 
			Instance Selection
				where (related.PurchaseOrderReceipt		= LocalPurchaseOrderReceipt)        
        
        POReceiptAdjustmentAndInspectionLineRel
        	one-to-one relation to POReceiptAdjustmentAndInspectionLine
			Field Mapping uses symbolic key
            	related.Company							 		= LocalCompany
            	related.AdjustmentInspectionDocumentType 		= "RA" 
            	related.POReceiptAdjustmentAndInspection 		= LocalPORInspection
            	related.POReceiptAdjustmentAndInspectionLine	= LocalLineNumber  	

        ReleasePOReceiptAdjustmentAndInspectionRel
        	one-to-many relation to POReceiptAdjustmentAndInspection
			Field Mapping uses Set3
            	related.Company								= LocalCompany
            	related.PurchaseOrderReceipt				= LocalPurchaseOrderReceipt
            	related.AdjustmentInspectionDocumentType	= "RA"
            	related.POReceiptAdjustmentAndInspection	= LocalPORInspection
        
        InventoryTransactionRel
			one-to-one relation to InventoryTransaction
			Field Mapping uses symbolic key
				related.Company					= LocalCompany
				related.InventoryLocation 		= LocalWareHouse
				related.InventoryTransaction	= LocalInventoryTransaction
		InventoryTransactionLineRel		
			one-to-many relation to InventoryTransactionLine	
			Field Mapping uses symbolic key
				related.Company						= LocalCompany
				related.InventoryLocation			= LocalWareHouse
				related.InventoryTransaction		= LocalInventoryTransaction
				related.TransactionSystemCode		="IC"
	
		InventoryCompanyRel
			one-to-one relation to InventoryCompany
			Field Mapping uses symbolic key
				related.Company					= LocalCompany
		
		ItemRel
			one-to-one relation to Item
			Field Mapping uses symbolic key
				related.ItemGroup				= LocalItemGroup
				related.Item 					= LocalItem
#endif
#endif	
		FSMBODCRDCleanDocIDRel
			one-to-many relation to FSMBODCrossReferenceDetail
			Field Mapping uses symbolic key
            	related.FSMBODCrossReference.SourceField 		= "DESTAE"
            	related.FSMBODCrossReference.DestinationField 	= "CSFGLC"
            Instance Selection
				where (related.SourceValue	= LocalAccountingEntityID)			



		FSMBODConfigurationSyncShipmentRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 1
            	related.FSMBODConfiguration.Noun 		= "Shipment"
            	related.FSMBODConfiguration.Direction 	= 2
#ifdef module wh				
		WarehouseShipmentRel
			one-to-one relation to WarehouseShipment
			Field Mapping uses symbolic key
				related.Company					= LocalCompany
				related.InventoryLocation 		= LocalLocation
				related.WarehouseShipment		= LocalShipmentNumber
		
		WarehouseShipmentLineRel
			one-to-one relation to WarehouseShipmentLine
			Field Mapping uses symbolic key
				related.Company					= LocalCompany
				related.InventoryLocation 		= LocalLocation
				related.WarehouseShipment		= LocalShipmentNumber
				related.WarehouseShipmentLine	= LocalItemNumber
				
		RequestingLocationRel
			one-to-one relation to RequestingLocation
			Field Mapping uses symbolic key
				related.Company					= LocalRequestingCompany
				related.RequestingLocation 		= LocalRequestingLocation
#endif
		VendorReturnRel
			one-to-many relation to VendorReturn
			Field Mapping uses symbolic key
				related.Company					= LocalCompany
			Instance Selection
				where (related.ReferenceNumber	= LocalReferenceID)

		VendorReturnLineRel
			one-to-many relation to VendorReturnLine
			Field Mapping uses symbolic key
				related.Company					= LocalCompany
				related.VendorReturn			= LocalReturnNumber
		
		VendorReturnLineRelation
			one-to-one relation to VendorReturnLine
			Field Mapping uses symbolic key
				related.Company					= LocalCompany
				related.VendorReturn			= LocalReturnNumber
				related.VendorReturnLine		= LocalLineNumber

#ifdef module po
		ASNPurchaseOrderReceiptRel
			one-to-many relation to PurchaseOrderReceipt
			Field Mapping uses ByPurchaseOrder
            	related.Company					= LocalCompany
            	related.PurchaseOrder			= LocalPONumber
		
		FSMBODConfigurationASNRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 1
            	related.FSMBODConfiguration.Noun 		= "AdvanceShipNotice"
            	related.FSMBODConfiguration.Direction 	= 2
#endif	
#ifdef module po
		SRDPurchaseOrderRel
			one-to-one relation to PurchaseOrder
			Field Mapping uses symbolic key
            	related.Company					= LocalCompany
            	related.PurchaseOrder			= LocalPONumber
		
		ItemLocationRel
			one-to-one relation to ItemLocation
			Field Mapping uses symbolic key
				related.Company				=	LocalCompany
				related.InventoryLocation	=	LocalLocation
				related.Item				= 	LocalItem
		
		FSMBODConfigurationSRDRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 1
            	related.FSMBODConfiguration.Noun 		= "ReceiveDelivery"
            	related.FSMBODConfiguration.Direction 	= 2
		
		PORPurchaseOrderBuyerMessageRel
			one-to-many relation to PurchaseOrderBuyerMessage
			Field Mapping uses symbolic key
				related.Company							= LocalCompany
				related.Buyer							= LocalBuyer
#endif		

		FSMBODConfigurationLoadReceiveDeliveryRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 3
            	related.FSMBODConfiguration.Noun 		= "ReceiveDelivery"
            	related.FSMBODConfiguration.Direction 	= 2
		
		PurchaseOrderLoadRDRel
			one-to-many relation to PurchaseOrder
			Field Mapping uses symbolic key
				related.Company					= LocalCompany
				related.PurchaseOrder			= LocalPurchaseOrder
		
		FSMBODConfigurationPulseAlertRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 2
            	related.FSMBODConfiguration.Noun 		= "PulseAlert"
            	related.FSMBODConfiguration.Direction 	= 1
        

		FSMAdvanceShipNoticeCleanDocIDRel
			one-to-many relation to FSMBODCrossReferenceDetail
			Field Mapping uses symbolic key
            	related.FSMBODCrossReference.SourceField 		= "DESTAE"
            	related.FSMBODCrossReference.DestinationField 	= "CSFGLC"
            Instance Selection
				where (related.SourceValue	= LocalaccountingEntity)

		FSMBODConfigurationProcessPurchaseOrderRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 2
            	related.FSMBODConfiguration.Noun 		= "PurchaseOrder"
            	related.FSMBODConfiguration.Direction 	= 2


		FSMBODConfigurationAckShipmentRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 5
            	related.FSMBODConfiguration.Noun 		= "Shipment"
            	related.FSMBODConfiguration.Direction 	= 2

		FSMBODConfigurationAckPurchaseOrderRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 5
            	related.FSMBODConfiguration.Noun 		= "PurchaseOrder"
            	related.FSMBODConfiguration.Direction 	= 2
		
		PurchaseOrderRel
			one-to-one relation to PurchaseOrder
			Field Mapping uses symbolic key
				related.Company					= LocalCompany
				related.PurchaseOrder			= LocalCSFPurchaseOrder			
		
		FSMBODCrossReferenceDetailRel
			one-to-many relation to FSMBODCrossReferenceDetail
			Field Mapping uses symbolic key
            	related.FSMBODCrossReference.SourceField 		= "SourceAccountingEntity"
            	related.FSMBODCrossReference.DestinationField 	= "DestinationAccountingEntity"
            Instance Selection
				where (related.SourceValue	= LocalaccountingEntity)

		FSMBODConfigurationAckAdvanceShipNoticeRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 5
            	related.FSMBODConfiguration.Noun 		= "AdvanceShipNotice"
            	related.FSMBODConfiguration.Direction 	= 2

	Actions
		
		Create is a Create Action
			restricted
		
		Update is an Update Action
			restricted
		
		Delete is a Delete Action				
			restricted
			
			

#ifdef module eam
		SyncMaintenanceOrderBODImport is an Import Action
			restricted
			bod type is Sync.MaintenanceOrder	
			Parameters
				MaintenanceOrderBOD 			is XMLDocument
            Action Rules
				LocalGenericDelimiter	=  DerivedGenericDelimiter
				LocalaccountingEntity	=  MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentID/ID/@accountingEntity"
				LocalVariationID        =  MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentID/ID/@variationID"
				LocalEAMWorkOrder		=  MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentID/ID"	
				LocalSplitFEG			=  NativeAccountingEntity	
				LocalActionCode 		=  MaintenanceOrderBOD select "//DataArea/Sync/ActionCriteria/ActionExpression/@actionCode"
				LocalBODID              =  MaintenanceOrderBOD select "//ApplicationArea/BODID"
				LocalBODXML				=  MaintenanceOrderBOD
				

				if(DerivedConfigDocID = "Y")
					if(DESTAEVSCSFGLCCleanDocIDRel.DestinationValue entered)	
						LocalAccountingEntityID	= DESTAEVSCSFGLCCleanDocIDRel.DestinationValue
					else
						LocalAccountingEntityID	= LocalaccountingEntity
					
					if(DerivedConfigFEG != "Y")
						LocalEAMCompany = LocalAccountingEntityID
					else
					if(DerivedConfigFEG = "Y")
						if(LocalAccountingEntityID entered)
							LocalEAMCompany = NativeEAMCompany
						else
							LocalEAMCompany = ""
					
					LocalSplitFEG = GLCompanyRel.FinanceEnterpriseGroup
				
				if(FSMBODConfigurationRel exists and FSMBODConfigurationRel.Enable)
					if(FSMInboundBODTracker not entered)
						invoke Create FSMInboundBODTracker
							assign result to NewBODTracker
							invoked.Verb 					= 1
							invoked.Noun 					= "MaintenanceOrder"
							invoked.Direction				= 2
							invoked.FinanceEnterpriseGroup	= LocalSplitFEG
							invoked.BODAccountingEntity		= LocalaccountingEntity
							invoked.BODVariationID			= LocalVariationID
							invoked.BODDocumentID			= LocalEAMWorkOrder
							invoked.BODID					= LocalBODID
							invoked.BODXML					= LocalBODXML
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							initialize invoked.Error			
							initialize invoked.ErrorMessage	
						LocalFSMInboundBODTracker 			= NewBODTracker.FSMInboundBODTracker
					else
		            	LocalFSMInboundBODTracker 			= 	FSMInboundBODTracker
		            	invoke Update FSMInboundBODTrackerRel
		            		invoked.FinanceEnterpriseGroup	=	LocalSplitFEG
							invoked.BODAccountingEntity		=	LocalaccountingEntity
							invoked.BODVariationID			=	LocalVariationID
							invoked.BODDocumentID			= 	LocalEAMWorkOrder
							invoked.BODID					=   LocalBODID
							invoked.BODXML					= 	LocalBODXML
							invoked.Status					= 	1
							invoked.StartDate				= 	system current timestamp
							initialize invoked.Error			
							initialize invoked.ErrorMessage	
						
					if(LocalActionCode = "Add")
						invoke CreateEAMWorkOrder
							invoked.MaintenanceOrderBOD     = MaintenanceOrderBOD
		                	invoked.PrmInboundTracker 		= LocalFSMInboundBODTracker	
		                	invoked.PrmFEG					= LocalSplitFEG
		                	invoked.PrmCompany				= LocalEAMCompany
					else 
					if(LocalActionCode = "Replace")
						invoke UpdateEAMWorkOrder
							invoked.MaintenanceOrderBOD     = MaintenanceOrderBOD
		                	invoked.PrmInboundTracker 		= LocalFSMInboundBODTracker	
		                	invoked.PrmFEG					= LocalSplitFEG
		                	invoked.PrmCompany				= LocalEAMCompany
		           	else 
					if(LocalActionCode = "Delete")
						invoke DeleteEAMWorkOrder
							invoked.MaintenanceOrderBOD     = MaintenanceOrderBOD
		                	invoked.PrmInboundTracker 		= LocalFSMInboundBODTracker	
		                	invoked.PrmFEG					= LocalSplitFEG
		            else
			            invoke Update FSMInboundBODTrackerRel
							invoked.Error 						= true
							invoked.ErrorMessage 				= "ActionCode is Invalid"
							invoked.Status						= 2
							invoked.CloseDate					= system current timestamp
	               	 	invoke SendMOConfirmBOD
	               	 		invoked.PrmErrorMessage 			= "ActionCode is Invalid"
							invoked.MaintenanceOrderBOD     	= MaintenanceOrderBOD
							invoked.PrmTrackerID				= LocalFSMInboundBODTracker
		        else 
				if(FSMInboundBODTracker not entered)
					invoke Create FSMInboundBODTracker
						assign result to NewBODTracker
						invoked.Verb 					= 1
						invoked.Noun 					= "MaintenanceOrder"
						invoked.Direction				= 2					
						invoked.FinanceEnterpriseGroup	= LocalSplitFEG
						invoked.BODAccountingEntity		= LocalaccountingEntity
						invoked.BODID					= LocalBODID
						invoked.BODDocumentID			= LocalEAMWorkOrder
						invoked.BODVariationID			= LocalVariationID
						invoked.BODXML					= LocalBODXML
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.Error					= true			
						invoked.ErrorMessage			= "Sync MaintenanceOrder Inbound BOD Service is not Enabled" 
					LocalFSMInboundBODTracker = NewBODTracker.FSMInboundBODTracker
				else
					LocalFSMInboundBODTracker = FSMInboundBODTracker
					invoke Update FSMInboundBODTrackerRel
						invoked.FinanceEnterpriseGroup	= LocalSplitFEG
						invoked.BODAccountingEntity		= LocalaccountingEntity
						invoked.BODID					= LocalBODID
						invoked.BODDocumentID			= LocalEAMWorkOrder
						invoked.BODVariationID			= LocalVariationID
						invoked.BODXML					= LocalBODXML
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.Error					= true			
						invoked.ErrorMessage			= "Sync MaintenanceOrder Inbound BOD Service is not Enabled"
						

		CreateEAMWorkOrder is an Import Action
			restricted			
			Parameters
				MaintenanceOrderBOD 					is XMLDocument
				PrmInboundTracker   					is like FSMInboundBODTracker 
				PrmFEG									is Alpha 10
				PrmCompany								is Numeric 4
			Local Fields
				LocalUserArea							is XMLDocument
			Action Rules
				LocalFSMInboundBODTracker 			=   PrmInboundTracker	
				LocalFEG							=   PrmFEG
				LocalEAMCompany						=	PrmCompany
				LocalEAMWorkOrder					=   MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentID/ID"	
				LocalDescription       				=   MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Description"
				LocalWoComment						=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Note"
				LocalWoType							=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentReference/@type"
				LocalWoPriority						=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PriorityCode"
				LocalWoParentID						=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ParentMaintenanceOrderID"
				LocalTargetValue					=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/BudgetedAmount"
				LocalEstimatedWoTotalCost			=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/EstimatedAmount"
				LocalActualWoTotalCost				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ActualAmount"
				LocalWoPositionFacility				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Facility/IDs/ID"
				LocalWOrderSequence					=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Facility/IDs/ID/@schemeName"
				LocalWorkPackage					=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/JobPlanID"
				LocalPMCode							=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PreventiveMaintenanceID"
				LocalAssignedByPerson				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PlannerID"
				LocalReportedByPerson				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/RequesterID"
				LocalProjectID						=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ProjectReference/ID"
				LocalProjectDescription				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ProjectReference/Description"
				LocalProjectBudgetID				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ProjectReference/ActivityID"
				LocalPersonAssignedTo				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/EstimatedResourceRequirements/LabourAllocation/Labour/ResourceID/ID"
				LocalProblemCode					=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Failure/Problem/ID"
				LocalStatus							=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Status/Code"
				LocalStatusCode						=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Status/ReasonCode"
				LocalStatusDescription				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Status/Reason"
				LocalEAMEquipmentCode				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PhysicalAsset/ResourceID/ID"
				LocalEAMEquipmentDescription		=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PhysicalAsset/Description"
				LocalWoUpdateDateTimeAlpha			=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/LastModificationDateTime"
				LocalWoUpdateDateTime				=	LocalWoUpdateDateTimeAlpha[1:4] + LocalWoUpdateDateTimeAlpha[6:7] + LocalWoUpdateDateTimeAlpha[9:10]
				LocalWoCreationDateAlpha			=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentDateTime"		
				LocalWoCreationDate					=	LocalWoCreationDateAlpha[1:4] + LocalWoCreationDateAlpha[6:7] + LocalWoCreationDateAlpha[9:10]				
				LocalWoReportedDateTimeAlpha		=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ReportedDateTime"
				LocalWoReportedDateTime				=	LocalWoReportedDateTimeAlpha[1:4] + LocalWoReportedDateTimeAlpha[6:7] + LocalWoReportedDateTimeAlpha[9:10]			
				LocalRequestedStartDateAlpha		=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PlannedTimePeriod/StartDateTime"
				LocalRequestedStartDate				=	LocalRequestedStartDateAlpha[1:4] + LocalRequestedStartDateAlpha[6:7] + LocalRequestedStartDateAlpha[9:10]				
				LocalRequestedEndDateAlpha			=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PlannedTimePeriod/EndDateTime"
				LocalRequestedEndDate				=	LocalRequestedEndDateAlpha[1:4] + LocalRequestedEndDateAlpha[6:7] + LocalRequestedEndDateAlpha[9:10]			
				LocalScheduledStartDateAlpha		=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ScheduledTimePeriod/StartDateTime"
				LocalScheduledStartDate				=	LocalScheduledStartDateAlpha[1:4] + LocalScheduledStartDateAlpha[6:7] + LocalScheduledStartDateAlpha[9:10]		
				LocalScheduledEndDateAlpha			=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ScheduledTimePeriod/EndDateTime"	
				LocalScheduledEndDate				=	LocalScheduledEndDateAlpha[1:4] + LocalScheduledEndDateAlpha[6:7] + LocalScheduledEndDateAlpha[9:10]
				LocalStartDateAlpha					=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ActualTimePeriod/StartDateTime"		
				LocalStartDate						=	LocalStartDateAlpha[1:4] + LocalStartDateAlpha[6:7] + LocalStartDateAlpha[9:10]
				LocalCompletionDateAlpha			=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ActualTimePeriod/EndDateTime"	
				LocalCompletionDate					=	LocalCompletionDateAlpha[1:4] + LocalCompletionDateAlpha[6:7] + LocalCompletionDateAlpha[9:10]
				LocalClassificationLength			=	MaintenanceOrderBOD select "count (//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Classification)"
				LocalEquipTypeclassificationlen		=	MaintenanceOrderBOD select "count (//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PhysicalAsset/Classification)"
				
				LocalMaintenanceOrderLineLength		=	MaintenanceOrderBOD select "count (//DataArea/MaintenanceOrder/MaintenanceOrderLine)"	
				LocalUserAreaCount					=	MaintenanceOrderBOD select "count (//DataArea/MaintenanceOrder/MaintenanceOrderHeader/UserArea/Property)"
				
				if (LocalWOrderSequence = "Position")
					LocalWoSequence ="1"
				else 
				if (LocalWOrderSequence = "Location")
					LocalWoSequence ="2"
				else
					LocalWoSequence =""
				

				LocalIterator = 1
				while (LocalUserAreaCount >= LocalIterator)	
					LocalUserArea		= MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/UserArea/Property[<LocalIterator>]"
					LocalNameValueID	=	LocalUserArea select "/Property/NameValue/@name"
					LocalNameValue		=	LocalUserArea select "/Property/NameValue"	
					if(LocalNameValueID = "eam.CreatedBy")
						LocalCreatedBy = LocalNameValue
					else
					if(LocalNameValueID = "eam.EnteredBy")
						LocalEnteredBy 	= LocalNameValue
					else
					if(LocalNameValueID	 = "eam.Criticality")
						LocalCriticality = LocalNameValue
					else
					if(LocalNameValueID = "eam.SafetyFlag")
						LocalSafetyFlag = LocalNameValue
					else
					if(LocalNameValueID = "eam.CNNumber")
						LocalCNNumber 	= LocalNameValue
					else
					if(LocalNameValueID = "eam.DependFlag")
						LocalDependFlag = LocalNameValue
					else
					if(LocalNameValueID   = "eam.ReOpenedFlag")
						LocalReOpenedFlag = LocalNameValue
					else
					if(LocalNameValueID = "eam.PermanentFixPromiseDate")
						LocalPermanentFixPromiseDateAlpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.TempFixPromiseDate")
						LocalTemporaryFixPromiseDateAlpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.DueDate")
						LocalDueDateAlpha  = LocalNameValue
					else
					if(LocalNameValueID = "eam.RouteCode")
						LocalRoute = LocalNameValue
					else
					if(LocalNameValueID = "eam.PrintedFlag")
						LocalPrintedFlag = LocalNameValue
					else	
					if(LocalNameValueID = "eam.MultiEquipFlag")
						LocalMultiEquipFlag = LocalNameValue
					else
					if(LocalNameValueID = "eam.MaintenancePatternCode")
						LocalMaintenancePatternCode = LocalNameValue
					else
					if(LocalNameValueID = "eam.MaintenancePatternSequence")
						LocalMaintenancePatternSequence = LocalNameValue
					else
					if(LocalNameValueID = "eam.TypeCode")
						LocalTypeCode = LocalNameValue
					else
					if(LocalNameValueID = "eam.ClassOrg")
						LocalClassOrg = LocalNameValue
					else
					if(LocalNameValueID = "eam.ServiceRequestID")
						LocalServiceRequest = LocalNameValue
					else							
					if(LocalNameValueID = "eam.ShiftCode")
						LocalShift = LocalNameValue
					else
					if(LocalNameValueID = "eam.MeterUnit")
						LocalMeterUnit = LocalNameValue
					else
					if(LocalNameValueID = "eam.LastMeterReading")
						LocalLastMeterReading = LocalNameValue
					else
					if(LocalNameValueID = "eam.TriggerEventID")
						LocalTriggerEventID = LocalNameValue
					else
					if(LocalNameValueID = "eam.MSProject")
						LocalMSProject = LocalNameValue
					else
					if(LocalNameValueID = "eam.PrintFlag")
						LocalPrintFlag = LocalNameValue
					else
					if(LocalNameValueID = "eam.CallerName")
						LocalCallerName = LocalNameValue
					else
					if(LocalNameValueID = "eam.CustomerID")
						LocalCustomerID = LocalNameValue
					else
					if(LocalNameValueID = "eam.Level1")
						LocalLevel = LocalNameValue
					else
					if(LocalNameValueID = "eam.RejectionReason")
						LocalRejectReason = LocalNameValue
					else
					if(LocalNameValueID = "eam.CustomerContractID")
						LocalAgreement = LocalNameValue
					else
					if(LocalNameValueID = "eam.FromPoint")
						LocalFromPoint = LocalNameValue
					else
					if(LocalNameValueID = "eam.FromRefDesc")
						LocalFromReferenceDescription = LocalNameValue
					else
					if(LocalNameValueID = "eam.FromGeoRef")
						LocalFromGeoReference = LocalNameValue
					else
					if(LocalNameValueID = "eam.ToPoint")
						LocalToPoint = LocalNameValue
					else
					if(LocalNameValueID = "eam.ToRefDesc")
						LocalToReferenceDescription = LocalNameValue
					else
					if(LocalNameValueID = "eam.ToGeoRef")
						LocalToGeoReference = LocalNameValue
					else
					if(LocalNameValueID = "eam.ProviderID")
						LocalProviderID = LocalNameValue
					else
					if(LocalNameValueID = "eam.ProviderOrg")
						LocalProviderOrganization = LocalNameValue
					else
					if(LocalNameValueID = "eam.ServiceCategoryCode")
						LocalServiceCategory = LocalNameValue
					else
					if(LocalNameValueID = "eam.ServiceCategoryOrg")
						LocalServiceCategoryOrganization = LocalNameValue
					else
					if(LocalNameValueID = "eam.ServiceProblemOrg")
						LocalServiceProblemOrganization = LocalNameValue
					else
					if(LocalNameValueID = "eam.EquipUsabilityCode")
						LocalEquipmentUsability = LocalNameValue
					else
					if(LocalNameValueID = "eam.EquipUsabilityOrg")
						LocalEquipmentUsabilityOrganization = LocalNameValue
					else
					if(LocalNameValueID = "eam.WorkAddress")
						LocalWorkAddress = LocalNameValue
					else
					if(LocalNameValueID = "eam.AlertCode")
						LocalAlert = LocalNameValue
					else
					if(LocalNameValueID = "eam.ProductionRequestID")
						LocalProductionRequest = LocalNameValue
					else
					if(LocalNameValueID = "eam.ProductionRequestRevision")
						LocalProductionRequestRevision = LocalNameValue
					else
					if(LocalNameValueID = "eam.ProductionPriority")
						LocalProductionPriority = LocalNameValue
					else
					if(LocalNameValueID = "eam.ProductionStartDate")
						LocalProductionStartAlpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR25")
						LocalDistAccToAccountingEntity = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR26")
						LocalDistAccFD3 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR27")
						LocalDistAccFD4 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR28")
						LocalDistAccGLChartAccount = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR17")
						LocalEAMAsset = LocalNameValue
					
					LocalIterator = LocalIterator + 1
				

				LocalIterator = 1
				while (LocalClassificationLength >= LocalIterator)
					LocalNameValueID	=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Classification[<LocalIterator>]/Codes/Code/@listID" 	
					LocalNameValue		=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Classification[<LocalIterator>]/Codes/Code"
					if(LocalNameValueID = "Cost Centers")
						LocalCostCode  = LocalNameValue
					else
					if(LocalNameValueID = "Maintenance Order Types")
						LocalJobType   = LocalNameValue
					else
					if(LocalNameValueID = "Departments")
						LocalDepartments    = LocalNameValue
					else
					if(LocalNameValueID = "MRO Classes")
						LocalOrderClass     = LocalNameValue
					LocalIterator = LocalIterator + 1		
				
				LocalDistAccFD5	=	LocalCostCode 	
							

				LocalIterator = 1
				while (LocalEquipTypeclassificationlen >= LocalIterator)
					LocalNameValueID	=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PhysicalAsset/Classification[<LocalIterator>]/Codes/Code/@listID" 	
					LocalNameValue		=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PhysicalAsset/Classification[<LocalIterator>]/Codes/Code"
					if(LocalNameValueID = "Equipment Types")
						LocalEquipmentType   = LocalNameValue
					LocalIterator = LocalIterator + 1		
						
				LocalPermanentFixPromiseDate		=	LocalPermanentFixPromiseDateAlpha[1:4] + LocalPermanentFixPromiseDateAlpha[6:7] + LocalPermanentFixPromiseDateAlpha[9:10]		
				LocalTemporaryFixPromiseDate		=	LocalTemporaryFixPromiseDateAlpha[1:4] + LocalTemporaryFixPromiseDateAlpha[6:7] + LocalTemporaryFixPromiseDateAlpha[9:10]		
				LocalDueDate						=	LocalDueDateAlpha[1:4] + LocalDueDateAlpha[6:7] + LocalDueDateAlpha[9:10]	
				LocalProductionStart				=	LocalProductionStartAlpha[1:4] + LocalProductionStartAlpha[6:7] + LocalProductionStartAlpha[9:10]	
				
				if(LocalEquipmentType = "Position")
					LocalEAMEquipmentType = "P"
				else 
				if(LocalEquipmentType = "Machine")
					LocalEAMEquipmentType = "A"
				else
				if(LocalEquipmentType = "System")
					LocalEAMEquipmentType = "S"
				else
					LocalEAMEquipmentType = ""

				if(DerivedIncludeUDFs)
					LocalEAMAsset						=	LocalEAMAsset	
					LocalDistAccFD3						= 	LocalDistAccFD3
					LocalDistAccFD4						=	LocalDistAccFD4
					LocalDistAccToAccountingEntity 		= 	LocalDistAccToAccountingEntity
					LocalDistAccGLChartAccount			=	LocalDistAccGLChartAccount
				else
					LocalEAMAsset						=	""	
					LocalDistAccFD3						=	""
					LocalDistAccFD4						=	""
					LocalDistAccToAccountingEntity 		=	""
					LocalDistAccGLChartAccount			=	""
				
				invoke Create EAMWorkOrder
					resume on error
                   		Error            									= true
                        ErrorMessage     									= error message
                    invoked.FinanceEnterpriseGroup							=	LocalFEG
                   	invoked.EAMWorkOrder									=	LocalEAMWorkOrder
                   	invoked.Description										=	LocalDescription
                   	invoked.Comment											=	LocalWoComment
                   	invoked.WorkOrderType									=	LocalWoType
                   	invoked.Priority										=	LocalWoPriority
                   	invoked.ParentID										=	LocalWoParentID	
                   	invoked.TargetValue										=	LocalTargetValue
                   	invoked.EstimatedTotalCost								=	LocalEstimatedWoTotalCost
                   	invoked.ActualTotalCost									=	LocalActualWoTotalCost
                   	invoked.PositionFacility								=	LocalWoPositionFacility
                   	invoked.Sequence										=	LocalWoSequence
                   	invoked.WorkPackage										=	LocalWorkPackage
                   	invoked.PreventiveMaintenanceCode						=	LocalPMCode	
                   	invoked.AssignedByPerson								=	LocalAssignedByPerson
                   	invoked.ReportedByPerson								=	LocalReportedByPerson
                   	invoked.ProjectDescription								=	LocalProjectDescription
                   	invoked.ProjectBudgetID									=	LocalProjectBudgetID
                   	invoked.PersonAssignedTo								=	LocalPersonAssignedTo
                   	invoked.ProjectID										=	LocalProjectID
                   	invoked.ProblemCode										=	LocalProblemCode
                   	invoked.Status											=	LocalStatus
                   	invoked.StatusCode										=	LocalStatusCode	
                   	invoked.StatusDescription								=	LocalStatusDescription
                   	invoked.EquipmentCode									=	LocalEAMEquipmentCode
                   	invoked.EquipmentDescription							=	LocalEAMEquipmentDescription	
                   	invoked.CreatedBy										=	LocalCreatedBy
                   	invoked.EnteredBy										=	LocalEnteredBy
                   	invoked.Criticality										=	LocalCriticality
                   	invoked.Safety											=	LocalSafetyFlag
                   	invoked.ChangeNotice									=	LocalCNNumber
                   	invoked.ReportedDate									=	LocalWoReportedDateTime
                   	invoked.UpdateDate										=	LocalWoUpdateDateTime
                   	invoked.CreateDate										=	LocalWoCreationDate
                   	invoked.RequestedStartDate								=	LocalRequestedStartDate
                   	invoked.RequestedEndDate								=	LocalRequestedEndDate
                   	invoked.ScheduledStartDate								=	LocalScheduledStartDate
                   	invoked.ScheduledEndDate								=	LocalScheduledEndDate
                   	invoked.StartDate										=	LocalStartDate
                   	invoked.CompletionDate									=	LocalCompletionDate
                   	invoked.PermanentFixPromiseDate							=	LocalPermanentFixPromiseDate
                   	invoked.TemporaryFixPromiseDate							=	LocalTemporaryFixPromiseDate
                   	invoked.DueDate											=	LocalDueDate
                   	invoked.MultipleEquipment								=	LocalMultiEquipFlag
                   	invoked.Route											=	LocalRoute 
                   	invoked.Printed											=	LocalPrintedFlag
                   	invoked.MaintenancePatternCode							=	LocalMaintenancePatternCode
                   	invoked.MaintenancePatternSequence						=	LocalMaintenancePatternSequence
                   	invoked.TypeCode										=	LocalTypeCode
                   	invoked.ClassOrganization								=	LocalClassOrg
                   	invoked.ServiceRequest									=	LocalServiceRequest
                   	invoked.Shift											=	LocalShift
                   	invoked.MeterUOM										=	LocalMeterUnit
                   	invoked.LastMeterReading								=	LocalLastMeterReading
                   	invoked.TriggerEventID									=	LocalTriggerEventID
                   	invoked.MSProject										=	LocalMSProject
                   	invoked.Print											=	LocalPrintFlag
                   	invoked.CallerName										=	LocalCallerName
                   	invoked.CustomerID										=	LocalCustomerID
                   	invoked.Level											=	LocalLevel
                   	invoked.RejectReason									=	LocalRejectReason
                   	invoked.Agreement    									=   LocalAgreement
					invoked.FromPoint    				 					=   LocalFromPoint
					invoked.FromReferenceDescription   	 					=   LocalFromReferenceDescription
					invoked.FromGeoReference    		 					=   LocalFromGeoReference 
					invoked.ToReferenceDescription    	 					=   LocalToReferenceDescription
					invoked.ToGeoReference    								=   LocalToGeoReference
					invoked.ToPoint     				 					=   LocalToPoint
					invoked.ProviderID    									=   LocalProviderID
					invoked.ProviderOrganization    						=   LocalProviderOrganization
					invoked.ServiceCategory    			 					=   LocalServiceCategory
					invoked.ServiceCategoryOrganization  					=   LocalServiceCategoryOrganization
					invoked.ServiceProblemOrganization   					=   LocalServiceProblemOrganization
					invoked.EquipmentUsability								=   LocalEquipmentUsability
					invoked.EquipmentUsabilityOrganization					=   LocalEquipmentUsabilityOrganization
					invoked.WorkAddress										=   LocalWorkAddress
					invoked.Alert 											=   LocalAlert
					invoked.ProductionRequest     							=   LocalProductionRequest
					invoked.ProductionRequestRevision    					=   LocalProductionRequestRevision
					invoked.ProductionPriority     		 					=   LocalProductionPriority
					invoked.ProductionStart     		 					=   LocalProductionStart
					invoked.CostCode										=   LocalCostCode
					invoked.JobType											=   LocalJobType
					invoked.Department										=   LocalDepartments
					invoked.OrderClass										=   LocalOrderClass
					invoked.EquipmentType									=	LocalEAMEquipmentType
					invoked.Dependent										=	LocalDependFlag
					invoked.Reopened										=	LocalReOpenedFlag
					invoked.Asset											=	LocalEAMAsset	
					invoked.DistributionAccount.FinanceDimension3 			=   LocalDistAccFD3
					invoked.DistributionAccount.FinanceDimension4 			=	LocalDistAccFD4
					invoked.DistributionAccount.FinanceDimension5			=	LocalDistAccFD5
					invoked.DistributionAccount.ToAccountingEntity 			=   LocalDistAccToAccountingEntity 
					invoked.DistributionAccount.GeneralLedgerChartAccount 	=	LocalDistAccGLChartAccount
                   	
                if(Error)
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 						= Error
						invoked.ErrorMessage 				= ErrorMessage
						invoked.Status						= 2
						invoked.CloseDate					= system current timestamp
               	 	invoke SendMOConfirmBOD
               	 		invoked.PrmErrorMessage 			= ErrorMessage
						invoked.MaintenanceOrderBOD     	= MaintenanceOrderBOD
						invoked.PrmTrackerID				= LocalFSMInboundBODTracker
               	 	
                else
	                if(LocalUserAreaCount > 0)
	               		invoke CreateEAMWorkOrderUserFields
	                  		invoked.PrmInboundTracker 				= LocalFSMInboundBODTracker	
	                  		invoked.PrmFEG							=	LocalFEG
	                   		invoked.MaintenanceOrderBOD     		= 	MaintenanceOrderBOD
	                   		
	                if(LocalMaintenanceOrderLineLength > 0 and (!FSMInboundBODTrackerRel.Error))
	                	invoke CreateUpdateEAMWorkOrderActivity
	                  		invoked.PrmFEG							=	LocalFEG
	                   		invoked.MaintenanceOrderBOD    			= 	MaintenanceOrderBOD
	                   		invoked.PrmInboundTracker 				= LocalFSMInboundBODTracker
	                   		invoked.PrmCompany				= LocalEAMCompany
	                   		
	                if(LocalUserAreaCount <=0 and LocalMaintenanceOrderLineLength <=0)
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 					= Error
							invoked.ErrorMessage 			= ErrorMessage
							invoked.Status					= 3
							invoked.CloseDate				= system current timestamp
                   		

		CreateEAMWorkOrderUserFields is an Import Action
			restricted			
			Parameters
				MaintenanceOrderBOD 			is XMLDocument
				PrmInboundTracker   			is like FSMInboundBODTracker 
				PrmFEG							is Alpha 10
			Local Fields
				LocalUserArea					is XMLDocument
			Action Rules
				LocalFSMInboundBODTracker 			=   PrmInboundTracker		
				LocalFEG							=   PrmFEG 
				LocalEAMWorkOrder					=   MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentID/ID"		
				LocalUserAreaCount					=	MaintenanceOrderBOD select "count (//DataArea/MaintenanceOrder/MaintenanceOrderHeader/UserArea/Property)"
				LocalActionCode		 				=	MaintenanceOrderBOD select "//DataArea/Sync/ActionCriteria/ActionExpression/@actionCode"
				LocalMaintenanceOrderLineLength		=	MaintenanceOrderBOD select "count (//DataArea/MaintenanceOrder/MaintenanceOrderLine)"	

				LocalIterator = 1
				while (LocalUserAreaCount >= LocalIterator)	
					LocalUserArea		= MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/UserArea/Property[<LocalIterator>]"
					LocalNameValueID	=	LocalUserArea select "/Property/NameValue/@name"
					LocalNameValue		=	LocalUserArea select "/Property/NameValue"
					if(LocalNameValueID = "eam.UDFCHKBOX01")
						LocalUDFCHKBOX01 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX02")
						LocalUDFCHKBOX02 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX03")
						LocalUDFCHKBOX03 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX04")
						LocalUDFCHKBOX04 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX05")
						LocalUDFCHKBOX05 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX06")
						LocalUDFCHKBOX06 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX07")
						LocalUDFCHKBOX07 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX08")
						LocalUDFCHKBOX08 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX09")
						LocalUDFCHKBOX09 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX10")
						LocalUDFCHKBOX10 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR01")
						LocalUDFCHAR01 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR02")
						LocalUDFCHAR02 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR03")
						LocalUDFCHAR03 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR04")
						LocalUDFCHAR04 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR05")
						LocalUDFCHAR05 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR06")
						LocalUDFCHAR06 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR07")
						LocalUDFCHAR07 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR08")
						LocalUDFCHAR08 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR09")
						LocalUDFCHAR09 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR10")
						LocalUDFCHAR10 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR11")
						LocalUDFCHAR11 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR12")
						LocalUDFCHAR12 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR13")
						LocalUDFCHAR13 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR14")
						LocalUDFCHAR14 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR15")
						LocalUDFCHAR15 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR16")
						LocalUDFCHAR16 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR17")
						LocalUDFCHAR17 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR18")
						LocalUDFCHAR18 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR19")
						LocalUDFCHAR19 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR20")
						LocalUDFCHAR20 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR21")
						LocalUDFCHAR21 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR22")
						LocalUDFCHAR22 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR23")
						LocalUDFCHAR23 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR24")
						LocalUDFCHAR24 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR25")
						LocalUDFCHAR25 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR26")
						LocalUDFCHAR26 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR27")
						LocalUDFCHAR27 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR28")
						LocalUDFCHAR28 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR29")
						LocalUDFCHAR29 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR30")
						LocalUDFCHAR30 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR31")
						LocalUDFCHAR31 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR32")
						LocalUDFCHAR32 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR33")
						LocalUDFCHAR33 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR34")
						LocalUDFCHAR34 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR35")
						LocalUDFCHAR35 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR36")
						LocalUDFCHAR36 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR37")
						LocalUDFCHAR37 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR38")
						LocalUDFCHAR38 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR39")
						LocalUDFCHAR39 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR40")
						LocalUDFCHAR40 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR41")
						LocalUDFCHAR41 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR42")
						LocalUDFCHAR42 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR43")
						LocalUDFCHAR43 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR44")
						LocalUDFCHAR44 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR45")
						LocalUDFCHAR45 = LocalNameValue
					else
					
					if(LocalNameValueID = "eam.UDFNUM01")
						LocalUDFNUM01 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM02")
						LocalUDFNUM02 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM03")
						LocalUDFNUM03 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM04")
						LocalUDFNUM04 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM05")
						LocalUDFNUM05 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM06")
						LocalUDFNUM06 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM07")
						LocalUDFNUM07 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM08")
						LocalUDFNUM08 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM09")
						LocalUDFNUM09 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM10")
						LocalUDFNUM10 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE01")
						LocalUDFDATE01Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE02")
						LocalUDFDATE02Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE03")
						LocalUDFDATE03Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE04")
						LocalUDFDATE04Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE05")
						LocalUDFDATE05Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE06")
						LocalUDFDATE06Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE07")
						LocalUDFDATE07Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE08")
						LocalUDFDATE08Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE09")
						LocalUDFDATE09Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE10")
						LocalUDFDATE10Alpha = LocalNameValue
					LocalIterator = LocalIterator + 1
					
				if (LocalUDFCHKBOX01 = "t")
					LocalUDFCHKBOX01 ="Y"
				else
					LocalUDFCHKBOX01 ="N"
				if (LocalUDFCHKBOX02 = "t")
					LocalUDFCHKBOX02 ="Y"
				else
					LocalUDFCHKBOX02 ="N"
				if (LocalUDFCHKBOX03 = "t")
					LocalUDFCHKBOX03 ="Y"
				else
					LocalUDFCHKBOX03 ="N"
				if (LocalUDFCHKBOX04 = "t")
					LocalUDFCHKBOX04 ="Y"
				else
					LocalUDFCHKBOX04 ="N"
				if (LocalUDFCHKBOX05 = "t")
					LocalUDFCHKBOX05 ="Y"
				else
					LocalUDFCHKBOX05 ="N"
				if (LocalUDFCHKBOX06 = "t")
					LocalUDFCHKBOX06 ="Y"
				else
					LocalUDFCHKBOX06 ="N"
				if (LocalUDFCHKBOX07 = "t")
					LocalUDFCHKBOX07 ="Y"
				else
					LocalUDFCHKBOX07 ="N"
					
				if (LocalUDFCHKBOX08 = "t")
					LocalUDFCHKBOX08 ="Y"
				else
					LocalUDFCHKBOX08 ="N"
					
				if (LocalUDFCHKBOX09 = "t")
					LocalUDFCHKBOX09 ="Y"
				else
					LocalUDFCHKBOX09 ="N"
					
				if (LocalUDFCHKBOX10 = "t")
					LocalUDFCHKBOX10 ="Y"
				else
					LocalUDFCHKBOX10 ="N"
					
				LocalUDFDATE01		=	LocalUDFDATE01Alpha[1:4] + LocalUDFDATE01Alpha[6:7] + LocalUDFDATE01Alpha[9:10]		
				LocalUDFDATE02		=	LocalUDFDATE02Alpha[1:4] + LocalUDFDATE02Alpha[6:7] + LocalUDFDATE02Alpha[9:10]		
				LocalUDFDATE03		=	LocalUDFDATE03Alpha[1:4] + LocalUDFDATE03Alpha[6:7] + LocalUDFDATE03Alpha[9:10]		
				LocalUDFDATE04		=	LocalUDFDATE04Alpha[1:4] + LocalUDFDATE04Alpha[6:7] + LocalUDFDATE04Alpha[9:10]		
				LocalUDFDATE05		=	LocalUDFDATE05Alpha[1:4] + LocalUDFDATE05Alpha[6:7] + LocalUDFDATE05Alpha[9:10]		
				LocalUDFDATE06		=	LocalUDFDATE06Alpha[1:4] + LocalUDFDATE06Alpha[6:7] + LocalUDFDATE06Alpha[9:10]		
				LocalUDFDATE07		=	LocalUDFDATE07Alpha[1:4] + LocalUDFDATE07Alpha[6:7] + LocalUDFDATE07Alpha[9:10]		
				LocalUDFDATE08		=	LocalUDFDATE08Alpha[1:4] + LocalUDFDATE08Alpha[6:7] + LocalUDFDATE08Alpha[9:10]		
				LocalUDFDATE09		=	LocalUDFDATE09Alpha[1:4] + LocalUDFDATE09Alpha[6:7] + LocalUDFDATE09Alpha[9:10]		
				LocalUDFDATE10		=	LocalUDFDATE10Alpha[1:4] + LocalUDFDATE10Alpha[6:7] + LocalUDFDATE10Alpha[9:10]
					
				invoke Create EAMWorkOrderUserFields
					resume on error
                   		Error            					=		true
                        ErrorMessage     					= 		error message
                    invoked.FinanceEnterpriseGroup			=		LocalFEG	
                    invoked.EAMWorkOrder					=		LocalEAMWorkOrder
                    invoked.UserFieldCheckBox.Value[1]		=		LocalUDFCHKBOX01
                    invoked.UserFieldCheckBox.Value[2]		=		LocalUDFCHKBOX02
                    invoked.UserFieldCheckBox.Value[3]		=		LocalUDFCHKBOX03
                    invoked.UserFieldCheckBox.Value[4]		=		LocalUDFCHKBOX04
                    invoked.UserFieldCheckBox.Value[5]		=		LocalUDFCHKBOX05
                    invoked.UserFieldCheckBox.Value[6]		=		LocalUDFCHKBOX06
                    invoked.UserFieldCheckBox.Value[7]		=		LocalUDFCHKBOX07
                    invoked.UserFieldCheckBox.Value[8]		=		LocalUDFCHKBOX08
                    invoked.UserFieldCheckBox.Value[9]		=		LocalUDFCHKBOX09
                    invoked.UserFieldCheckBox.Value[10]		=		LocalUDFCHKBOX10
                    invoked.UserFieldAlpha.Value[1]			=		LocalUDFCHAR01
					invoked.UserFieldAlpha.Value[2]			=		LocalUDFCHAR02					
					invoked.UserFieldAlpha.Value[3]			=		LocalUDFCHAR03					
					invoked.UserFieldAlpha.Value[4]			=		LocalUDFCHAR04					
					invoked.UserFieldAlpha.Value[5]			=		LocalUDFCHAR05					
					invoked.UserFieldAlpha.Value[6]			=		LocalUDFCHAR06					
					invoked.UserFieldAlpha.Value[7]			=		LocalUDFCHAR07					
					invoked.UserFieldAlpha.Value[8]			=		LocalUDFCHAR08					
					invoked.UserFieldAlpha.Value[9]			=		LocalUDFCHAR09					
					invoked.UserFieldAlpha.Value[10]		=		LocalUDFCHAR10					
					invoked.UserFieldAlpha.Value[11]		=		LocalUDFCHAR11					
					invoked.UserFieldAlpha.Value[12]		=		LocalUDFCHAR12					
					invoked.UserFieldAlpha.Value[13]		=		LocalUDFCHAR13					
					invoked.UserFieldAlpha.Value[14]		=		LocalUDFCHAR14					
					invoked.UserFieldAlpha.Value[15]		=		LocalUDFCHAR15					
					invoked.UserFieldAlpha.Value[16]		=		LocalUDFCHAR16					
					invoked.UserFieldAlpha.Value[17]		=		LocalUDFCHAR17					
					invoked.UserFieldAlpha.Value[18]		=		LocalUDFCHAR18					
					invoked.UserFieldAlpha.Value[19]		=		LocalUDFCHAR19					
					invoked.UserFieldAlpha.Value[20]		=		LocalUDFCHAR20					
					invoked.UserFieldAlpha.Value[21]		=		LocalUDFCHAR21					
					invoked.UserFieldAlpha.Value[22]		=		LocalUDFCHAR22					
					invoked.UserFieldAlpha.Value[23]		=		LocalUDFCHAR23					
					invoked.UserFieldAlpha.Value[24]		=		LocalUDFCHAR24					
					invoked.UserFieldAlpha.Value[25]		=		LocalUDFCHAR25					
					invoked.UserFieldAlpha.Value[26]		=		LocalUDFCHAR26					
					invoked.UserFieldAlpha.Value[27]		=		LocalUDFCHAR27					
					invoked.UserFieldAlpha.Value[28]		=		LocalUDFCHAR28					
					invoked.UserFieldAlpha.Value[29]		=		LocalUDFCHAR29					
					invoked.UserFieldAlpha.Value[30]		=		LocalUDFCHAR30
					invoked.UserFieldAlpha.Value[31]		=		LocalUDFCHAR31					
					invoked.UserFieldAlpha.Value[32]		=		LocalUDFCHAR32					
					invoked.UserFieldAlpha.Value[33]		=		LocalUDFCHAR33					
					invoked.UserFieldAlpha.Value[34]		=		LocalUDFCHAR34					
					invoked.UserFieldAlpha.Value[35]		=		LocalUDFCHAR35					
					invoked.UserFieldAlpha.Value[36]		=		LocalUDFCHAR36
					invoked.UserFieldAlpha.Value[37]		=		LocalUDFCHAR37					
					invoked.UserFieldAlpha.Value[38]		=		LocalUDFCHAR38					
					invoked.UserFieldAlpha.Value[39]		=		LocalUDFCHAR39					
					invoked.UserFieldAlpha.Value[40]		=		LocalUDFCHAR40					
					invoked.UserFieldAlpha.Value[41]		=		LocalUDFCHAR41					
					invoked.UserFieldAlpha.Value[42]		=		LocalUDFCHAR42
					invoked.UserFieldAlpha.Value[43]		=		LocalUDFCHAR43					
					invoked.UserFieldAlpha.Value[44]		=		LocalUDFCHAR44					
					invoked.UserFieldAlpha.Value[45]		=		LocalUDFCHAR45	
                    invoked.UserFieldNumeric.Value[1]		=       LocalUDFNUM01 
					invoked.UserFieldNumeric.Value[2]		=       LocalUDFNUM02 
					invoked.UserFieldNumeric.Value[3]		=       LocalUDFNUM03 
					invoked.UserFieldNumeric.Value[4]		=       LocalUDFNUM04 
					invoked.UserFieldNumeric.Value[5]		=       LocalUDFNUM05
					invoked.UserFieldNumeric.Value[6]		=       LocalUDFNUM06
					invoked.UserFieldNumeric.Value[7]		=       LocalUDFNUM07 
					invoked.UserFieldNumeric.Value[8]		=       LocalUDFNUM08 
					invoked.UserFieldNumeric.Value[9]		=       LocalUDFNUM09 
					invoked.UserFieldNumeric.Value[10]		=       LocalUDFNUM10
					invoked.UserFieldDate.Value[1]			=       LocalUDFDATE01 
					invoked.UserFieldDate.Value[2]			=       LocalUDFDATE02 
					invoked.UserFieldDate.Value[3]			=       LocalUDFDATE03 
					invoked.UserFieldDate.Value[4]			=   	LocalUDFDATE04 
					invoked.UserFieldDate.Value[5]			=       LocalUDFDATE05
					invoked.UserFieldDate.Value[6]			=       LocalUDFDATE06 
					invoked.UserFieldDate.Value[7]			=       LocalUDFDATE07 
					invoked.UserFieldDate.Value[8]			=       LocalUDFDATE08 
					invoked.UserFieldDate.Value[9]			=   	LocalUDFDATE09 
					invoked.UserFieldDate.Value[10]			=       LocalUDFDATE10
                if(Error)
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 						= Error
						invoked.ErrorMessage 				= ErrorMessage
						invoked.Status						= 2
						invoked.CloseDate					= system current timestamp  
					invoke SendMOConfirmBOD
               	 		invoked.PrmErrorMessage 			= ErrorMessage
						invoked.MaintenanceOrderBOD     	= MaintenanceOrderBOD
						invoked.PrmTrackerID				= LocalFSMInboundBODTracker 
				else
					if(LocalMaintenanceOrderLineLength < 0)
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 					= Error
							invoked.ErrorMessage 			= ErrorMessage
							invoked.Status					= 3
							invoked.CloseDate				= system current timestamp
			

		UpdateEAMWorkOrder is an Import Action
			restricted			
			Parameters
				MaintenanceOrderBOD 				is XMLDocument
				PrmInboundTracker   				is like FSMInboundBODTracker 
				PrmFEG								is Alpha 10
				PrmCompany							is Numeric 4
			Local Fields
				LocalUserArea						is XMLDocument
			Action Rules
				LocalFSMInboundBODTracker 			=   PrmInboundTracker	
				LocalFEG							=   PrmFEG
				LocalEAMCompany						=	PrmCompany
				LocalEAMWorkOrder					=   MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentID/ID"	
				EAMWOProjectID						=	EAMWorkOrderRel.ProjectID
				LocalDescription       				=   MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Description"
				LocalWoComment						=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Note"
				LocalWoType							=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentReference/@type"
				LocalWoPriority						=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PriorityCode"
				LocalWoParentID						=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ParentMaintenanceOrderID"
				LocalTargetValue					=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/BudgetedAmount"
				LocalEstimatedWoTotalCost			=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/EstimatedAmount"
				LocalActualWoTotalCost				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ActualAmount"
				LocalWoPositionFacility				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Facility/IDs/ID"
				LocalWOrderSequence					=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Facility/IDs/ID/@schemeName"
				LocalWorkPackage					=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/JobPlanID"
				LocalPMCode							=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PreventiveMaintenanceID"
				LocalAssignedByPerson				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PlannerID"
				LocalReportedByPerson				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/RequesterID"
				LocalProjectID						=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ProjectReference/ID"
				LocalProjectDescription				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ProjectReference/Description"
				LocalProjectBudgetID				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ProjectReference/ActivityID"
				LocalPersonAssignedTo				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/EstimatedResourceRequirements/LabourAllocation/Labour/ResourceID/ID"
				LocalProblemCode					=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Failure/Problem/ID"
				LocalStatus							=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Status/Code"
				LocalStatusCode						=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Status/ReasonCode"
				LocalStatusDescription				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Status/Reason"
				LocalEAMEquipmentCode				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PhysicalAsset/ResourceID/ID"
				LocalEAMEquipmentDescription		=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PhysicalAsset/Description"
				LocalWoUpdateDateTimeAlpha			=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/LastModificationDateTime"
				LocalWoUpdateDateTime				=	LocalWoUpdateDateTimeAlpha[1:4] + LocalWoUpdateDateTimeAlpha[6:7] + LocalWoUpdateDateTimeAlpha[9:10]
				LocalWoCreationDateAlpha			=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentDateTime"		
				LocalWoCreationDate					=	LocalWoCreationDateAlpha[1:4] + LocalWoCreationDateAlpha[6:7] + LocalWoCreationDateAlpha[9:10]				
				LocalWoReportedDateTimeAlpha		=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ReportedDateTime"
				LocalWoReportedDateTime				=	LocalWoReportedDateTimeAlpha[1:4] + LocalWoReportedDateTimeAlpha[6:7] + LocalWoReportedDateTimeAlpha[9:10]			
				LocalRequestedStartDateAlpha		=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PlannedTimePeriod/StartDateTime"
				LocalRequestedStartDate				=	LocalRequestedStartDateAlpha[1:4] + LocalRequestedStartDateAlpha[6:7] + LocalRequestedStartDateAlpha[9:10]				
				LocalRequestedEndDateAlpha			=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PlannedTimePeriod/EndDateTime"
				LocalRequestedEndDate				=	LocalRequestedEndDateAlpha[1:4] + LocalRequestedEndDateAlpha[6:7] + LocalRequestedEndDateAlpha[9:10]			
				LocalScheduledStartDateAlpha		=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ScheduledTimePeriod/StartDateTime"
				LocalScheduledStartDate				=	LocalScheduledStartDateAlpha[1:4] + LocalScheduledStartDateAlpha[6:7] + LocalScheduledStartDateAlpha[9:10]		
				LocalScheduledEndDateAlpha			=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ScheduledTimePeriod/EndDateTime"	
				LocalScheduledEndDate				=	LocalScheduledEndDateAlpha[1:4] + LocalScheduledEndDateAlpha[6:7] + LocalScheduledEndDateAlpha[9:10]
				LocalStartDateAlpha					=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ActualTimePeriod/StartDateTime"		
				LocalStartDate						=	LocalStartDateAlpha[1:4] + LocalStartDateAlpha[6:7] + LocalStartDateAlpha[9:10]
				LocalCompletionDateAlpha			=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/ActualTimePeriod/EndDateTime"	
				LocalCompletionDate					=	LocalCompletionDateAlpha[1:4] + LocalCompletionDateAlpha[6:7] + LocalCompletionDateAlpha[9:10]
				LocalClassificationLength			=	MaintenanceOrderBOD select "count (//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Classification)"
				LocalEquipTypeclassificationlen		=	MaintenanceOrderBOD select "count (//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PhysicalAsset/Classification)"
				
				LocalMaintenanceOrderLineLength	=	MaintenanceOrderBOD select "count (//DataArea/MaintenanceOrder/MaintenanceOrderLine)"	
				LocalUserAreaCount			=	MaintenanceOrderBOD select "count (//DataArea/MaintenanceOrder/MaintenanceOrderHeader/UserArea/Property)"
				
				if (LocalWOrderSequence = "Position")
					LocalWoSequence ="1"
				else 
				if (LocalWOrderSequence = "Location")
					LocalWoSequence ="2"
				else
					LocalWoSequence =""
				

				LocalIterator = 1
				while (LocalUserAreaCount >= LocalIterator)	
					LocalUserArea		= MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/UserArea/Property[<LocalIterator>]"
					
					LocalNameValueID	=	LocalUserArea select "/Property/NameValue/@name"
					LocalNameValue		=	LocalUserArea select "/Property/NameValue"	
					if(LocalNameValueID = "eam.CreatedBy")
						LocalCreatedBy = LocalNameValue
					else
					if(LocalNameValueID = "eam.EnteredBy")
						LocalEnteredBy = LocalNameValue
					else
					if(LocalNameValueID = "eam.Criticality")
						LocalCriticality = LocalNameValue
					else
					if(LocalNameValueID = "eam.SafetyFlag")
						LocalSafetyFlag = LocalNameValue
					else
					if(LocalNameValueID = "eam.CNNumber")
						LocalCNNumber = LocalNameValue
					else
					if(LocalNameValueID = "eam.DependFlag")
						LocalDependFlag = LocalNameValue
					else
					if(LocalNameValueID = "eam.ReOpenedFlag")
						LocalReOpenedFlag = LocalNameValue
					else
					if(LocalNameValueID = "eam.PermanentFixPromiseDate")
						LocalPermanentFixPromiseDateAlpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.TempFixPromiseDate")
						LocalTemporaryFixPromiseDateAlpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.DueDate")
						LocalDueDateAlpha  = LocalNameValue
					else
					if(LocalNameValueID = "eam.RouteCode")
						LocalRoute = LocalNameValue
					else
					if(LocalNameValueID = "eam.PrintedFlag")
						LocalPrintedFlag = LocalNameValue
					else	
					if(LocalNameValueID = "eam.MultiEquipFlag")
						LocalMultiEquipFlag = LocalNameValue
					else
					if(LocalNameValueID = "eam.MaintenancePatternCode")
						LocalMaintenancePatternCode = LocalNameValue
					else
					if(LocalNameValueID = "eam.MaintenancePatternSequence")
						LocalMaintenancePatternSequence = LocalNameValue
					else
					if(LocalNameValueID = "eam.TypeCode")
						LocalTypeCode = LocalNameValue
					else
					if(LocalNameValueID = "eam.ClassOrg")
						LocalClassOrg = LocalNameValue
					else
					if(LocalNameValueID = "eam.ServiceRequestID")
						LocalServiceRequest = LocalNameValue
					else							
					if(LocalNameValueID = "eam.ShiftCode")
						LocalShift = LocalNameValue
					else
					if(LocalNameValueID = "eam.MeterUnit")
						LocalMeterUnit = LocalNameValue
					else
					if(LocalNameValueID = "eam.LastMeterReading")
						LocalLastMeterReading = LocalNameValue
					else
					if(LocalNameValueID = "eam.TriggerEventID")
						LocalTriggerEventID = LocalNameValue
					else
					if(LocalNameValueID = "eam.MSProject")
						LocalMSProject = LocalNameValue
					else
					if(LocalNameValueID = "eam.PrintFlag")
						LocalPrintFlag = LocalNameValue
					else
					if(LocalNameValueID = "eam.CallerName")
						LocalCallerName = LocalNameValue
					else
					if(LocalNameValueID = "eam.CustomerID")
						LocalCustomerID = LocalNameValue
					else
					if(LocalNameValueID = "eam.Level1")
						LocalLevel = LocalNameValue
					else
					if(LocalNameValueID = "eam.RejectionReason")
						LocalRejectReason = LocalNameValue
					else
					if(LocalNameValueID = "eam.CustomerContractID")
						LocalAgreement = LocalNameValue
					else
					if(LocalNameValueID = "eam.FromPoint")
						LocalFromPoint = LocalNameValue
					else
					if(LocalNameValueID = "eam.FromRefDesc")
						LocalFromReferenceDescription = LocalNameValue
					else
					if(LocalNameValueID = "eam.FromGeoRef")
						LocalFromGeoReference = LocalNameValue
					else
					if(LocalNameValueID = "eam.ToPoint")
						LocalToPoint = LocalNameValue
					else
					if(LocalNameValueID = "eam.ToRefDesc")
						LocalToReferenceDescription = LocalNameValue
					else
					if(LocalNameValueID = "eam.ToGeoRef")
						LocalToGeoReference = LocalNameValue
					else
					if(LocalNameValueID = "eam.ProviderID")
						LocalProviderID = LocalNameValue
					else
					if(LocalNameValueID = "eam.ProviderOrg")
						LocalProviderOrganization = LocalNameValue
					else
					if(LocalNameValueID = "eam.ServiceCategoryCode")
						LocalServiceCategory = LocalNameValue
					else
					if(LocalNameValueID = "eam.ServiceCategoryOrg")
						LocalServiceCategoryOrganization = LocalNameValue
					else
					if(LocalNameValueID = "eam.ServiceProblemOrg")
						LocalServiceProblemOrganization = LocalNameValue
					else
					if(LocalNameValueID = "eam.EquipUsabilityCode")
						LocalEquipmentUsability = LocalNameValue
					else
					if(LocalNameValueID = "eam.EquipUsabilityOrg")
						LocalEquipmentUsabilityOrganization = LocalNameValue
					else
					if(LocalNameValueID = "eam.WorkAddress")
						LocalWorkAddress = LocalNameValue
					else
					if(LocalNameValueID = "eam.AlertCode")
						LocalAlert = LocalNameValue
					else
					if(LocalNameValueID = "eam.ProductionRequestID")
						LocalProductionRequest = LocalNameValue
					else
					if(LocalNameValueID = "eam.ProductionRequestRevision")
						LocalProductionRequestRevision = LocalNameValue
					else
					if(LocalNameValueID = "eam.ProductionPriority")
						LocalProductionPriority = LocalNameValue
					else
					if(LocalNameValueID = "eam.ProductionStartDate")
						LocalProductionStartAlpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR25")
						LocalDistAccToAccountingEntity = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR26")
						LocalDistAccFD3 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR27")
						LocalDistAccFD4 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR28")
						LocalDistAccGLChartAccount = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR17")
						LocalEAMAsset = LocalNameValue
					
					LocalIterator = LocalIterator + 1
				

				LocalIterator = 1
				while (LocalClassificationLength >= LocalIterator)
					LocalNameValueID	=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Classification[<LocalIterator>]/Codes/Code/@listID" 	
					LocalNameValue		=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/Classification[<LocalIterator>]/Codes/Code"
					if(LocalNameValueID = "Cost Centers")
						LocalCostCode  = LocalNameValue
					else
						if(LocalNameValueID = "Maintenance Order Types")
							LocalJobType   = LocalNameValue
						else
							if(LocalNameValueID = "Departments")
								LocalDepartments    = LocalNameValue
							else
								if(LocalNameValueID = "MRO Classes")
									LocalOrderClass     = LocalNameValue
					LocalIterator = LocalIterator + 1		
				
				LocalDistAccFD5	=	LocalCostCode 	
							

				LocalIterator = 1
				while (LocalEquipTypeclassificationlen >= LocalIterator)
					LocalNameValueID	=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PhysicalAsset/Classification[<LocalIterator>]/Codes/Code/@listID" 	
					LocalNameValue		=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/PhysicalAsset/Classification[<LocalIterator>]/Codes/Code"
					if(LocalNameValueID = "Equipment Types")
						LocalEquipmentType   = LocalNameValue
					LocalIterator = LocalIterator + 1		
						
				LocalPermanentFixPromiseDate		=	LocalPermanentFixPromiseDateAlpha[1:4] + LocalPermanentFixPromiseDateAlpha[6:7] + LocalPermanentFixPromiseDateAlpha[9:10]		
				LocalTemporaryFixPromiseDate		=	LocalTemporaryFixPromiseDateAlpha[1:4] + LocalTemporaryFixPromiseDateAlpha[6:7] + LocalTemporaryFixPromiseDateAlpha[9:10]		
				LocalDueDate						=	LocalDueDateAlpha[1:4] + LocalDueDateAlpha[6:7] + LocalDueDateAlpha[9:10]	
				LocalProductionStart				=	LocalProductionStartAlpha[1:4] + LocalProductionStartAlpha[6:7] + LocalProductionStartAlpha[9:10]	
				
				if(LocalEquipmentType = "Position")
					LocalEAMEquipmentType = "P"
				else 
				if(LocalEquipmentType = "Machine")
					LocalEAMEquipmentType = "A"
				else
				if(LocalEquipmentType = "System")
					LocalEAMEquipmentType = "S"
				else
					LocalEAMEquipmentType = ""
				
				if(DerivedIncludeUDFs)
					LocalEAMAsset						=	LocalEAMAsset	
					LocalDistAccFD3						= 	LocalDistAccFD3
					LocalDistAccFD4						=	LocalDistAccFD4
					LocalDistAccToAccountingEntity 		= 	LocalDistAccToAccountingEntity
					LocalDistAccGLChartAccount			=	LocalDistAccGLChartAccount
				else
					LocalEAMAsset						=	""	
					LocalDistAccFD3						=	""
					LocalDistAccFD4						=	""
					LocalDistAccToAccountingEntity 		=	""
					LocalDistAccGLChartAccount			=	""
				
				
				if(EAMWorkOrderRel exist)
					invoke Update EAMWorkOrderRel
						resume on error
	                   		Error            									= 	true
	                        ErrorMessage     									= 	error message
	                    invoked.FinanceEnterpriseGroup							=	LocalFEG
	                   	invoked.EAMWorkOrder									=	LocalEAMWorkOrder
	                   	invoked.Description										=	LocalDescription
	                   	invoked.Comment											=	LocalWoComment
	                   	invoked.WorkOrderType									=	LocalWoType
	                   	invoked.Priority										=	LocalWoPriority
	                   	invoked.ParentID										=	LocalWoParentID	
	                   	invoked.TargetValue										=	LocalTargetValue
	                   	invoked.EstimatedTotalCost								=	LocalEstimatedWoTotalCost
	                   	invoked.ActualTotalCost									=	LocalActualWoTotalCost
	                   	invoked.PositionFacility								=	LocalWoPositionFacility
	                   	invoked.Sequence										=	LocalWoSequence
	                   	invoked.WorkPackage										=	LocalWorkPackage
	                   	invoked.PreventiveMaintenanceCode						=	LocalPMCode	
	                   	invoked.AssignedByPerson								=	LocalAssignedByPerson
	                   	invoked.ReportedByPerson								=	LocalReportedByPerson
	                   	invoked.ProjectDescription								=	LocalProjectDescription
	                   	invoked.ProjectBudgetID									=	LocalProjectBudgetID
	                   	invoked.PersonAssignedTo								=	LocalPersonAssignedTo
	                   	invoked.ProjectID										=	LocalProjectID
	                   	invoked.ProblemCode										=	LocalProblemCode
	                   	invoked.Status											=	LocalStatus
	                   	invoked.StatusCode										=	LocalStatusCode	
	                   	invoked.StatusDescription								=	LocalStatusDescription
	                   	invoked.EquipmentCode									=	LocalEAMEquipmentCode
	                   	invoked.EquipmentDescription							=	LocalEAMEquipmentDescription	
	                   	invoked.CreatedBy										=	LocalCreatedBy
	                   	invoked.EnteredBy										=	LocalEnteredBy
	                   	invoked.Criticality										=	LocalCriticality
	                   	invoked.Safety											=	LocalSafetyFlag
	                   	invoked.ChangeNotice									=	LocalCNNumber
	                   	invoked.ReportedDate									=	LocalWoReportedDateTime
	                   	invoked.UpdateDate										=	LocalWoUpdateDateTime
	                   	invoked.CreateDate										=	LocalWoCreationDate
	                   	invoked.RequestedStartDate								=	LocalRequestedStartDate
	                   	invoked.RequestedEndDate								=	LocalRequestedEndDate
	                   	invoked.ScheduledStartDate								=	LocalScheduledStartDate
	                   	invoked.ScheduledEndDate								=	LocalScheduledEndDate
	                   	invoked.StartDate										=	LocalStartDate
	                   	invoked.CompletionDate									=	LocalCompletionDate
	                   	invoked.PermanentFixPromiseDate							=	LocalPermanentFixPromiseDate
	                   	invoked.TemporaryFixPromiseDate							=	LocalTemporaryFixPromiseDate
	                   	invoked.DueDate											=	LocalDueDate
	                   	invoked.MultipleEquipment								=	LocalMultiEquipFlag
	                   	invoked.Route											=	LocalRoute 
	                   	invoked.Printed											=	LocalPrintedFlag
	                   	invoked.MaintenancePatternCode							=	LocalMaintenancePatternCode
	                   	invoked.MaintenancePatternSequence						=	LocalMaintenancePatternSequence
	                   	invoked.TypeCode										=	LocalTypeCode
	                   	invoked.ClassOrganization								=	LocalClassOrg
	                   	invoked.ServiceRequest									=	LocalServiceRequest
	                   	invoked.Shift											=	LocalShift
	                   	invoked.MeterUOM										=	LocalMeterUnit
	                   	invoked.LastMeterReading								=	LocalLastMeterReading
	                   	invoked.TriggerEventID									=	LocalTriggerEventID
	                   	invoked.MSProject										=	LocalMSProject
	                   	invoked.Print											=	LocalPrintFlag
	                   	invoked.CallerName										=	LocalCallerName
	                   	invoked.CustomerID										=	LocalCustomerID
	                   	invoked.Level											=	LocalLevel
	                   	invoked.RejectReason									=	LocalRejectReason
	                   	invoked.Agreement    									=   LocalAgreement
						invoked.FromPoint    				 					=   LocalFromPoint
						invoked.FromReferenceDescription   	 					=   LocalFromReferenceDescription
						invoked.FromGeoReference    		 					=   LocalFromGeoReference 
						invoked.ToReferenceDescription    	 					=   LocalToReferenceDescription
						invoked.ToGeoReference    								=   LocalToGeoReference
						invoked.ToPoint     				 					=   LocalToPoint
						invoked.ProviderID    									=   LocalProviderID
						invoked.ProviderOrganization    						=   LocalProviderOrganization
						invoked.ServiceCategory    			 					=   LocalServiceCategory
						invoked.ServiceCategoryOrganization  					=   LocalServiceCategoryOrganization
						invoked.ServiceProblemOrganization   					=   LocalServiceProblemOrganization
						invoked.EquipmentUsability								=   LocalEquipmentUsability
						invoked.EquipmentUsabilityOrganization					=   LocalEquipmentUsabilityOrganization
						invoked.WorkAddress										=   LocalWorkAddress
						invoked.Alert 											=   LocalAlert
						invoked.ProductionRequest     							=   LocalProductionRequest
						invoked.ProductionRequestRevision    					=   LocalProductionRequestRevision
						invoked.ProductionPriority     		 					=   LocalProductionPriority
						invoked.ProductionStart     		 					=   LocalProductionStart
						invoked.CostCode										=   LocalCostCode
						invoked.JobType											=   LocalJobType
						invoked.Department										=   LocalDepartments
						invoked.OrderClass										=   LocalOrderClass
						invoked.EquipmentType									=	LocalEAMEquipmentType
						invoked.Dependent										=	LocalDependFlag
						invoked.Reopened										=	LocalReOpenedFlag
						invoked.Asset											=	LocalEAMAsset	
						invoked.DistributionAccount.FinanceDimension3 			=   LocalDistAccFD3
						invoked.DistributionAccount.FinanceDimension4 			=	LocalDistAccFD4
						invoked.DistributionAccount.FinanceDimension5			=	LocalDistAccFD5
						invoked.DistributionAccount.ToAccountingEntity 			=   LocalDistAccToAccountingEntity 
						invoked.DistributionAccount.GeneralLedgerChartAccount 	=	LocalDistAccGLChartAccount
	                if(Error)
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 						= Error
							invoked.ErrorMessage 				= ErrorMessage
							invoked.Status						= 2
							invoked.CloseDate					= system current timestamp
	               	 	invoke SendMOConfirmBOD
	               	 		invoked.PrmErrorMessage 			= ErrorMessage
							invoked.MaintenanceOrderBOD     	= MaintenanceOrderBOD
							invoked.PrmTrackerID				= LocalFSMInboundBODTracker
			        else
	            	if(LocalUserAreaCount > 0)
	           			if(EAMWorkOrderUserFieldsRel exist)
	   						invoke UpdateEAMWorkOrderUserFields
	    						invoked.PrmInboundTracker 		= LocalFSMInboundBODTracker	
	      						invoked.PrmFEG					=	LocalFEG
	            	   			invoked.MaintenanceOrderBOD    	= 	MaintenanceOrderBOD
						else
							invoke CreateEAMWorkOrderUserFields
	      						invoked.PrmInboundTracker 		= LocalFSMInboundBODTracker	
	      						invoked.PrmFEG					=	LocalFEG
	            	   			invoked.MaintenanceOrderBOD     = MaintenanceOrderBOD
					if(LocalMaintenanceOrderLineLength > 0 and (!FSMInboundBODTrackerRel.Error))
	                	invoke CreateUpdateEAMWorkOrderActivity
	                		invoked.PrmInboundTracker 		=   LocalFSMInboundBODTracker	
	                  		invoked.PrmFEG					=	LocalFEG
	                   		invoked.MaintenanceOrderBOD     =   MaintenanceOrderBOD	
	                   		invoked.PrmProjectID			=	LocalProjectID
	                   		invoked.PrmWOProjectID			=	EAMWOProjectID
	                   		invoked.PrmListID				=	LocalListID
	                   		invoked.PrmCompany				=   LocalEAMCompany
					if(LocalUserAreaCount <= 0 and LocalMaintenanceOrderLineLength <= 0 )
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 					= Error
							invoked.ErrorMessage 			= ErrorMessage
							invoked.Status					= 3
							invoked.CloseDate				= system current timestamp
				else
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 						= true
						invoked.ErrorMessage 				= "EAMWorkOrder does not exist"
						invoked.Status						= 2
						invoked.CloseDate					= system current timestamp
               	 	invoke SendMOConfirmBOD
               	 		invoked.PrmErrorMessage 			= "EAMWorkOrder does not exist"
						invoked.MaintenanceOrderBOD     	= MaintenanceOrderBOD
						invoked.PrmTrackerID				= LocalFSMInboundBODTracker
				

		UpdateEAMWorkOrderUserFields is an Import Action
			restricted			
			Parameters
				MaintenanceOrderBOD 			is XMLDocument
				PrmInboundTracker   			is like FSMInboundBODTracker 
				PrmFEG							is Alpha 10
			Local Fields
				LocalUserArea					is XMLDocument
			Action Rules
				LocalFSMInboundBODTracker 			=   PrmInboundTracker		
				LocalFEG							=   PrmFEG 
				LocalEAMWorkOrder					=   MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentID/ID"	
				LocalUserAreaCount					=	MaintenanceOrderBOD select "count (//DataArea/MaintenanceOrder/MaintenanceOrderHeader/UserArea/Property)"
				LocalActionCode		 				=	MaintenanceOrderBOD select "//DataArea/Sync/ActionCriteria/ActionExpression/@actionCode"
				LocalMaintenanceOrderLineLength		=	MaintenanceOrderBOD select "count (//DataArea/MaintenanceOrder/MaintenanceOrderLine)"

				LocalIterator = 1
				while (LocalUserAreaCount >= LocalIterator)	
					LocalUserArea		= MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/UserArea/Property[<LocalIterator>]"
					LocalNameValueID	=	LocalUserArea select "/Property/NameValue/@name"
					LocalNameValue		=	LocalUserArea select "/Property/NameValue"
					if(LocalNameValueID = "eam.UDFCHKBOX01")
						LocalUDFCHKBOX01 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX02")
						LocalUDFCHKBOX02 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX03")
						LocalUDFCHKBOX03 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX04")
						LocalUDFCHKBOX04 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX05")
						LocalUDFCHKBOX05 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX06")
						LocalUDFCHKBOX06 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX07")
						LocalUDFCHKBOX07 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX08")
						LocalUDFCHKBOX08 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX09")
						LocalUDFCHKBOX09 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHKBOX10")
						LocalUDFCHKBOX10 = LocalNameValue
					else
					
					if(LocalNameValueID = "eam.UDFCHAR01")
						LocalUDFCHAR01 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR02")
						LocalUDFCHAR02 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR03")
						LocalUDFCHAR03 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR04")
						LocalUDFCHAR04 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR05")
						LocalUDFCHAR05 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR06")
						LocalUDFCHAR06 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR07")
						LocalUDFCHAR07 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR08")
						LocalUDFCHAR08 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR09")
						LocalUDFCHAR09 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR10")
						LocalUDFCHAR10 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR11")
						LocalUDFCHAR11 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR12")
						LocalUDFCHAR12 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR13")
						LocalUDFCHAR13 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR14")
						LocalUDFCHAR14 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR15")
						LocalUDFCHAR15 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR16")
						LocalUDFCHAR16 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR17")
						LocalUDFCHAR17 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR18")
						LocalUDFCHAR18 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR19")
						LocalUDFCHAR19 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR20")
						LocalUDFCHAR20 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR21")
						LocalUDFCHAR21 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR22")
						LocalUDFCHAR22 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR23")
						LocalUDFCHAR23 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR24")
						LocalUDFCHAR24 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR25")
						LocalUDFCHAR25 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR26")
						LocalUDFCHAR26 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR27")
						LocalUDFCHAR27 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR28")
						LocalUDFCHAR28 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR29")
						LocalUDFCHAR29 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR30")
						LocalUDFCHAR30 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR31")
						LocalUDFCHAR31 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR32")
						LocalUDFCHAR32 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR33")
						LocalUDFCHAR33 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR34")
						LocalUDFCHAR34 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR35")
						LocalUDFCHAR35 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR36")
						LocalUDFCHAR36 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR37")
						LocalUDFCHAR37 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR38")
						LocalUDFCHAR38 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR39")
						LocalUDFCHAR39 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR40")
						LocalUDFCHAR40 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR41")
						LocalUDFCHAR41 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR42")
						LocalUDFCHAR42 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR43")
						LocalUDFCHAR43 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR44")
						LocalUDFCHAR44 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFCHAR45")
						LocalUDFCHAR45 = LocalNameValue
					else
										
					if(LocalNameValueID = "eam.UDFNUM01")
						LocalUDFNUM01 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM02")
						LocalUDFNUM02 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM03")
						LocalUDFNUM03 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM04")
						LocalUDFNUM04 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM05")
						LocalUDFNUM05 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM06")
						LocalUDFNUM06 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM07")
						LocalUDFNUM07 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM08")
						LocalUDFNUM08 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM09")
						LocalUDFNUM09 = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFNUM10")
						LocalUDFNUM10 = LocalNameValue
					else
					
					if(LocalNameValueID = "eam.UDFDATE01")
						LocalUDFDATE01Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE02")
						LocalUDFDATE02Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE03")
						LocalUDFDATE03Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE04")
						LocalUDFDATE04Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE05")
						LocalUDFDATE05Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE06")
						LocalUDFDATE06Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE07")
						LocalUDFDATE07Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE08")
						LocalUDFDATE08Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE09")
						LocalUDFDATE09Alpha = LocalNameValue
					else
					if(LocalNameValueID = "eam.UDFDATE10")
						LocalUDFDATE10Alpha = LocalNameValue
					LocalIterator = LocalIterator + 1
					
				if (LocalUDFCHKBOX01 = "t")
					LocalUDFCHKBOX01 ="Y"
				else
					LocalUDFCHKBOX01 ="N"
					
				if (LocalUDFCHKBOX02 = "t")
					LocalUDFCHKBOX02 ="Y"
				else
					LocalUDFCHKBOX02 ="N"
					
				if (LocalUDFCHKBOX03 = "t")
					LocalUDFCHKBOX03 ="Y"
				else
					LocalUDFCHKBOX03 ="N"
					
				if (LocalUDFCHKBOX04 = "t")
					LocalUDFCHKBOX04 ="Y"
				else
					LocalUDFCHKBOX04 ="N"
					
				if (LocalUDFCHKBOX05 = "t")
					LocalUDFCHKBOX05 ="Y"
				else
					LocalUDFCHKBOX05 ="N"
					
				if (LocalUDFCHKBOX06 = "t")
					LocalUDFCHKBOX06 ="Y"
				else
					LocalUDFCHKBOX06 ="N"
					
				if (LocalUDFCHKBOX07 = "t")
					LocalUDFCHKBOX07 ="Y"
				else
					LocalUDFCHKBOX07 ="N"
					
				if (LocalUDFCHKBOX08 = "t")
					LocalUDFCHKBOX08 ="Y"
				else
					LocalUDFCHKBOX08 ="N"
					
				if (LocalUDFCHKBOX09 = "t")
					LocalUDFCHKBOX09 ="Y"
				else
					LocalUDFCHKBOX09 ="N"
					
				if (LocalUDFCHKBOX10 = "t")
					LocalUDFCHKBOX10 ="Y"
				else
					LocalUDFCHKBOX10 ="N"
					
					
				LocalUDFDATE01		=	LocalUDFDATE01Alpha[1:4] + LocalUDFDATE01Alpha[6:7] + LocalUDFDATE01Alpha[9:10]		
				LocalUDFDATE02		=	LocalUDFDATE02Alpha[1:4] + LocalUDFDATE02Alpha[6:7] + LocalUDFDATE02Alpha[9:10]		
				LocalUDFDATE03		=	LocalUDFDATE03Alpha[1:4] + LocalUDFDATE03Alpha[6:7] + LocalUDFDATE03Alpha[9:10]		
				LocalUDFDATE04		=	LocalUDFDATE04Alpha[1:4] + LocalUDFDATE04Alpha[6:7] + LocalUDFDATE04Alpha[9:10]		
				LocalUDFDATE05		=	LocalUDFDATE05Alpha[1:4] + LocalUDFDATE05Alpha[6:7] + LocalUDFDATE05Alpha[9:10]		
				LocalUDFDATE06		=	LocalUDFDATE06Alpha[1:4] + LocalUDFDATE06Alpha[6:7] + LocalUDFDATE06Alpha[9:10]		
				LocalUDFDATE07		=	LocalUDFDATE07Alpha[1:4] + LocalUDFDATE07Alpha[6:7] + LocalUDFDATE07Alpha[9:10]		
				LocalUDFDATE08		=	LocalUDFDATE08Alpha[1:4] + LocalUDFDATE08Alpha[6:7] + LocalUDFDATE08Alpha[9:10]		
				LocalUDFDATE09		=	LocalUDFDATE09Alpha[1:4] + LocalUDFDATE09Alpha[6:7] + LocalUDFDATE09Alpha[9:10]		
				LocalUDFDATE10		=	LocalUDFDATE10Alpha[1:4] + LocalUDFDATE10Alpha[6:7] + LocalUDFDATE10Alpha[9:10]
				
					
				invoke Update EAMWorkOrderUserFieldsRel
					resume on error
                   		Error            					= 		true
                        ErrorMessage     					= 		error message
                    invoked.FinanceEnterpriseGroup			=		LocalFEG	
                    invoked.EAMWorkOrder					=		LocalEAMWorkOrder
                    invoked.UserFieldCheckBox.Value[1]		=		LocalUDFCHKBOX01
                    invoked.UserFieldCheckBox.Value[2]		=		LocalUDFCHKBOX02
                    invoked.UserFieldCheckBox.Value[3]		=		LocalUDFCHKBOX03
                    invoked.UserFieldCheckBox.Value[4]		=		LocalUDFCHKBOX04
                    invoked.UserFieldCheckBox.Value[5]		=		LocalUDFCHKBOX05
                    invoked.UserFieldCheckBox.Value[6]		=		LocalUDFCHKBOX06
                    invoked.UserFieldCheckBox.Value[7]		=		LocalUDFCHKBOX07
                    invoked.UserFieldCheckBox.Value[8]		=		LocalUDFCHKBOX08
                    invoked.UserFieldCheckBox.Value[9]		=		LocalUDFCHKBOX09
                    invoked.UserFieldCheckBox.Value[10]		=		LocalUDFCHKBOX10
                    invoked.UserFieldAlpha.Value[1]			=		LocalUDFCHAR01
					invoked.UserFieldAlpha.Value[2]			=		LocalUDFCHAR02					
					invoked.UserFieldAlpha.Value[3]			=		LocalUDFCHAR03					
					invoked.UserFieldAlpha.Value[4]			=		LocalUDFCHAR04					
					invoked.UserFieldAlpha.Value[5]			=		LocalUDFCHAR05					
					invoked.UserFieldAlpha.Value[6]			=		LocalUDFCHAR06					
					invoked.UserFieldAlpha.Value[7]			=		LocalUDFCHAR07					
					invoked.UserFieldAlpha.Value[8]			=		LocalUDFCHAR08					
					invoked.UserFieldAlpha.Value[9]			=		LocalUDFCHAR09					
					invoked.UserFieldAlpha.Value[10]		=		LocalUDFCHAR10					
					invoked.UserFieldAlpha.Value[11]		=		LocalUDFCHAR11					
					invoked.UserFieldAlpha.Value[12]		=		LocalUDFCHAR12					
					invoked.UserFieldAlpha.Value[13]		=		LocalUDFCHAR13					
					invoked.UserFieldAlpha.Value[14]		=		LocalUDFCHAR14					
					invoked.UserFieldAlpha.Value[15]		=		LocalUDFCHAR15					
					invoked.UserFieldAlpha.Value[16]		=		LocalUDFCHAR16					
					invoked.UserFieldAlpha.Value[17]		=		LocalUDFCHAR17					
					invoked.UserFieldAlpha.Value[18]		=		LocalUDFCHAR18					
					invoked.UserFieldAlpha.Value[19]		=		LocalUDFCHAR19					
					invoked.UserFieldAlpha.Value[20]		=		LocalUDFCHAR20					
					invoked.UserFieldAlpha.Value[21]		=		LocalUDFCHAR21					
					invoked.UserFieldAlpha.Value[22]		=		LocalUDFCHAR22					
					invoked.UserFieldAlpha.Value[23]		=		LocalUDFCHAR23					
					invoked.UserFieldAlpha.Value[24]		=		LocalUDFCHAR24					
					invoked.UserFieldAlpha.Value[25]		=		LocalUDFCHAR25					
					invoked.UserFieldAlpha.Value[26]		=		LocalUDFCHAR26					
					invoked.UserFieldAlpha.Value[27]		=		LocalUDFCHAR27					
					invoked.UserFieldAlpha.Value[28]		=		LocalUDFCHAR28					
					invoked.UserFieldAlpha.Value[29]		=		LocalUDFCHAR29					
					invoked.UserFieldAlpha.Value[30]		=		LocalUDFCHAR30
					invoked.UserFieldAlpha.Value[31]		=		LocalUDFCHAR31					
					invoked.UserFieldAlpha.Value[32]		=		LocalUDFCHAR32					
					invoked.UserFieldAlpha.Value[33]		=		LocalUDFCHAR33					
					invoked.UserFieldAlpha.Value[34]		=		LocalUDFCHAR34					
					invoked.UserFieldAlpha.Value[35]		=		LocalUDFCHAR35					
					invoked.UserFieldAlpha.Value[36]		=		LocalUDFCHAR36
					invoked.UserFieldAlpha.Value[37]		=		LocalUDFCHAR37					
					invoked.UserFieldAlpha.Value[38]		=		LocalUDFCHAR38					
					invoked.UserFieldAlpha.Value[39]		=		LocalUDFCHAR39					
					invoked.UserFieldAlpha.Value[40]		=		LocalUDFCHAR40					
					invoked.UserFieldAlpha.Value[41]		=		LocalUDFCHAR41					
					invoked.UserFieldAlpha.Value[42]		=		LocalUDFCHAR42
					invoked.UserFieldAlpha.Value[43]		=		LocalUDFCHAR43					
					invoked.UserFieldAlpha.Value[44]		=		LocalUDFCHAR44					
					invoked.UserFieldAlpha.Value[45]		=		LocalUDFCHAR45	
                    invoked.UserFieldNumeric.Value[1]		=       LocalUDFNUM01 
					invoked.UserFieldNumeric.Value[2]		=       LocalUDFNUM02 
					invoked.UserFieldNumeric.Value[3]		=       LocalUDFNUM03 
					invoked.UserFieldNumeric.Value[4]		=       LocalUDFNUM04 
					invoked.UserFieldNumeric.Value[5]		=       LocalUDFNUM05
					invoked.UserFieldNumeric.Value[6]		=       LocalUDFNUM06
					invoked.UserFieldNumeric.Value[7]		=       LocalUDFNUM07 
					invoked.UserFieldNumeric.Value[8]		=       LocalUDFNUM08 
					invoked.UserFieldNumeric.Value[9]		=       LocalUDFNUM09 
					invoked.UserFieldNumeric.Value[10]		=       LocalUDFNUM10
					invoked.UserFieldDate.Value[1]			=       LocalUDFDATE01 
					invoked.UserFieldDate.Value[2]			=       LocalUDFDATE02 
					invoked.UserFieldDate.Value[3]			=       LocalUDFDATE03 
					invoked.UserFieldDate.Value[4]			=   	LocalUDFDATE04 
					invoked.UserFieldDate.Value[5]			=       LocalUDFDATE05
					invoked.UserFieldDate.Value[6]			=       LocalUDFDATE06 
					invoked.UserFieldDate.Value[7]			=       LocalUDFDATE07 
					invoked.UserFieldDate.Value[8]			=       LocalUDFDATE08 
					invoked.UserFieldDate.Value[9]			=   	LocalUDFDATE09 
					invoked.UserFieldDate.Value[10]			=       LocalUDFDATE10
					
                if(Error)
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 						= Error
						invoked.ErrorMessage 				= ErrorMessage
						invoked.Status						= 2
						invoked.CloseDate					= system current timestamp
					invoke SendMOConfirmBOD
               	 		invoked.PrmErrorMessage 			= ErrorMessage
						invoked.MaintenanceOrderBOD     	= MaintenanceOrderBOD
						invoked.PrmTrackerID				= LocalFSMInboundBODTracker    
				else
					if(LocalMaintenanceOrderLineLength < 0)
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 					= Error
							invoked.ErrorMessage 			= ErrorMessage
							invoked.Status					= 3
							invoked.CloseDate				= system current timestamp
				
		

		CreateUpdateEAMWorkOrderActivity is an Import Action	
			restricted
			Parameters
				MaintenanceOrderBOD 				is XMLDocument
				PrmInboundTracker		   			is like FSMInboundBODTracker 
				PrmFEG								is Alpha 10
				LocalDocumentReferenceLen			is XMLDocument
				PrmProjectID						is Alpha 50
				PrmWOProjectID						is Alpha 50
				PrmListID							is Alpha 20
				PrmCompany							is Numeric 4
			Action Rules
				LocalFSMInboundBODTracker		=	PrmInboundTracker
				LocalFEG						=	PrmFEG		
				LocalEAMWorkOrder				=   MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentID/ID"	
				LocalProjectID					=   PrmProjectID
				EAMWOProjectID					=	PrmWOProjectID
				LocalEAMCompany					=	PrmCompany
				LocalGenericDelimiter			=   DerivedGenericDelimiter
				LocalListID						=	PrmListID
				LocalMaintenanceOrderLineLength	=	MaintenanceOrderBOD select "count (//DataArea/MaintenanceOrder/MaintenanceOrderLine)"	
				LocalIterator = 1

				while(LocalMaintenanceOrderLineLength >= LocalIterator)
					LocalWoActivityID				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderLine[<LocalIterator>]/LineNumber"
					LocalWoActivityNote				=	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderLine[<LocalIterator>]/Description"				
					LocalDocumentReferencecount		=	MaintenanceOrderBOD select "count (//DataArea/MaintenanceOrder/MaintenanceOrderLine[<LocalIterator>]/DocumentReference)"
					EAMWOScheduledStartDate			= 	EAMWorkOrderActivityRel.EAMScheduledStartDate
					LocalEAMScheduledStartDateAlpha = 	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderLine[<LocalIterator>]/ScheduledDateTime"
					LocalEAMScheduledStartDate		= 	LocalEAMScheduledStartDateAlpha[1:4] + LocalEAMScheduledStartDateAlpha[6:7] + LocalEAMScheduledStartDateAlpha[9:10]
					LocalNameValueID				=	""
					LocalNameValue					=	""
					LocalNameValue1					=	""
					LocalDocRefIterator = 1
	
					if((LocalEAMScheduledStartDate != EAMWOScheduledStartDate) and (UpdateRequestedDeliveryDateTimeFlag = "Y") )
						LocalUpdateRequestedDeliveryDateTime = "Y"
						
					if((LocalEAMScheduledStartDate != EAMWOScheduledStartDate) and (UpdateShipDateTimeFromWOFlag = "Y") )
						LocalListDate = "UpdateEAMScheduledStartDate"
					else
						LocalListDate = ""
					
					if(LocalProjectID != EAMWOProjectID and LocalUpdateRequestedDeliveryDateTime = "Y")
						LocalListID =  "UpdateProjectID and UpdateEarlyDeliveryDate"
					else
						if(LocalUpdateRequestedDeliveryDateTime = "Y")
							LocalListID ="UpdateEarlyDeliveryDate"
						else
							if(LocalProjectID != EAMWOProjectID)
								LocalListID = "UpdateProjectID"
							else
								LocalListID = ""
						
					while(LocalDocumentReferencecount >= LocalDocRefIterator)
						LocalDocumentReferenceLen = MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderLine[<LocalIterator>]/DocumentReference[<LocalDocRefIterator>]"
						LocalNameValueID = LocalDocumentReferenceLen select "/DocumentReference/@type"
						LocalNameValue	 = LocalDocumentReferenceLen select "/DocumentReference/DocumentID/ID"
						LocalNameValue1	 = LocalDocumentReferenceLen select "/DocumentReference//LineNumber"
						
						if(LocalNameValueID = "PurchaseOrder")
							LocalPOReference 		 =  LocalNameValue 
							PurchaseOrderLineNum	 =  LocalNameValue1		
							LocalLineReference 		 =  NativeEAMPurchaseOrder		
							LocalCompany			 = 	LocalCompany
							PurchaseOrderID 	 	 =  LocalPurchaseOrder
						
						if(DerivedConfigDocID = "Y")
							LocalCompany = LocalEAMCompany
							PurchaseOrderID = LocalPOReference
						
						if((EAMPOLineRel exist) and ((LocalListID = "UpdateProjectID") or (LocalListID =  "UpdateProjectID and UpdateEarlyDeliveryDate") or (LocalListID ="UpdateEarlyDeliveryDate")))	
		               		invoke UpdateEAMWOPOLine
								invoked.PrmInboundTracker 		= 	LocalFSMInboundBODTracker	
		  						invoked.PrmFEG					=	LocalFEG
		        	   			invoked.MaintenanceOrderBOD    	= 	MaintenanceOrderBOD
		        	   			invoked.PrmCompany			 	= 	LocalCompany
								invoked.PrmPurchaseOrderID 	 	=   PurchaseOrderID
								invoked.PrmProjectID			=	LocalProjectID
								invoked.PrmScheduleStartDate    =   LocalEAMScheduledStartDate
								invoked.PrmPurchaseOrderLineNum	=	PurchaseOrderLineNum
								invoked.PrmListID				=	LocalListID	
							LocalDocRefIterator = LocalDocRefIterator+1	
						else
							LocalDocRefIterator = LocalDocRefIterator+1	
							
					LocalDocRefIterator = 1	
					while(LocalDocumentReferencecount >= LocalDocRefIterator)
						LocalDocumentReferenceLen = MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderLine[<LocalIterator>]/DocumentReference[<LocalDocRefIterator>]"
						LocalNameValueID = LocalDocumentReferenceLen select "/DocumentReference/@type"
						LocalNameValue	 = LocalDocumentReferenceLen select "/DocumentReference/DocumentID/ID"
						LocalNameValue1	 = LocalDocumentReferenceLen select "/DocumentReference//LineNumber"
								
						if(LocalNameValueID = "Requisition")
							LocalRQReference 		 =  LocalNameValue
							RequisitionLineNumber	 =  LocalNameValue1
							LocalRQLineReference	 =  NativeEAMRequisition
							LocalCompany			 = 	LocalCompany
							RequisitionID 	 	 	 =  LocalRequisitionOrder
							
						if(DerivedConfigDocID = "Y")
							LocalCompany 			= LocalEAMCompany
							RequisitionID 			= LocalRQReference
								
						LocalRQFromCompany				=	RequisitionLineRel.FromCompanyLocationBin.FromCompany
						WarehouseDemandLineItem			=	EAMWarehouseDemandLineRel.Item
						LocalComponentSequence			=	EAMWarehouseDemandLineRel.WarehouseDemandLine.ComponentSequence
						LocalDemandDocumentType			=	EAMWarehouseDemandLineRel.WarehouseDemandLine.DemandDocumentType
						LocalInventoryLocation			=	RequisitionLineRel.FromCompanyLocationBin.FromLocation
						LocalAllocatedQuantity			=	EAMWarehouseDemandLineRel.AllocatedQuantity
						LocalOpenQuantity				=	EAMWarehouseDemandLineRel.Quantity
						
						if((EAMWarehouseDemandLineRel exist) and (LocalListDate = "UpdateEAMScheduledStartDate") and ((LocalAllocatedQuantity < LocalOpenQuantity) or (LocalAllocatedQuantity = 0)))
							invoke UpdateEAMWOWarehouseDemandLine
								invoked.MaintenanceOrderBOD    	= 	MaintenanceOrderBOD
								invoked.PrmInboundTracker 		= 	LocalFSMInboundBODTracker	
								invoked.PrmFEG					=	LocalFEG
								invoked.PrmCompany				=   LocalRQFromCompany
								invoked.PrmRequisitionID		=   RequisitionID
								invoked.PrmProjectID			=	LocalProjectID
								invoked.PrmScheduleStartDate    =   LocalEAMScheduledStartDate
								invoked.PrmDemandLineNumber		= 	RequisitionLineNumber
								invoked.PrmDemandSystemCode		=   "RQ"
								invoked.PrmDemandDocument		=   RequisitionID
								invoked.PrmDemandCompany		=  	LocalCompany
								invoked.PrmDemandDocumentType	=   LocalDemandDocumentType	
								invoked.PrmInventoryLocation    =   LocalInventoryLocation
								invoked.PrmComponentSequence    =   LocalComponentSequence
								invoked.PrmItem					= 	WarehouseDemandLineItem
								invoked.PrmWorkOrder			=	LocalEAMWorkOrder
								invoked.PrmWorkOrderActivity	=	LocalWoActivityID	
							LocalDocRefIterator  = LocalDocRefIterator +1	
						else
							LocalDocRefIterator  = LocalDocRefIterator +1	
					
					if(EAMWorkOrderActivityRel exist)
						invoke Update EAMWorkOrderActivityRel
							resume on error
			                   	Error            				= 	true
			                    ErrorMessage     				= 	error message
			                invoked.FinanceEnterpriseGroup		=	LocalFEG
			                invoked.EAMWorkOrder				=	LocalEAMWorkOrder
			                invoked.EAMWorkOrderActivity		=	LocalWoActivityID
			                invoked.ActivityNote				=	LocalWoActivityNote
			                invoked.EAMScheduledStartDate		=	LocalEAMScheduledStartDate
			        else
						invoke Create EAMWorkOrderActivity
							resume on error
			                   	Error            				= true
			                    ErrorMessage     				= error message
			                invoked.FinanceEnterpriseGroup		=	LocalFEG
			                invoked.EAMWorkOrder				=	LocalEAMWorkOrder
			                invoked.EAMWorkOrderActivity		=	LocalWoActivityID
			                invoked.ActivityNote				=	LocalWoActivityNote
	               	
		            if(Error)
	                	LocalFSMInboundBODTracker 				= PrmInboundTracker
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 						= Error
							invoked.ErrorMessage 				= ErrorMessage
							invoked.Status						= 2
							invoked.CloseDate					= system current timestamp
							LocalIterator = LocalMaintenanceOrderLineLength + 1
	               	 	invoke SendMOConfirmBOD
	               	 		invoked.PrmErrorMessage 			= ErrorMessage
							invoked.MaintenanceOrderBOD     	= MaintenanceOrderBOD
							invoked.PrmTrackerID				= LocalFSMInboundBODTracker
	               	else
						LocalIterator		= LocalIterator + 1	
	               	
	               	if(!FSMInboundBODTrackerRel.Error)
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 					= Error
							invoked.ErrorMessage 			= ErrorMessage
							invoked.Status					= 3
							invoked.CloseDate				= system current timestamp		
		
		
		UpdateEAMWOPOLine is an Import Action
			restricted
			Parameters
				MaintenanceOrderBOD 		is XMLDocument
				PrmInboundTracker   		is like FSMInboundBODTracker 
				PrmFEG						is Alpha 10
				PrmCompany					is Numeric 4
				PrmPurchaseOrderID			is Alpha 50
				PrmProjectID				is Alpha 50
				PrmScheduleStartDate        is Alpha 10
				PrmPurchaseOrderLineNum		is Numeric 10
				PrmListID					is Alpha 50
			Action Rules
				LocalEAMWorkOrder			=   	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentID/ID"
				LocalCompany				=		PrmCompany
				PurchaseOrderID				= 		PrmPurchaseOrderID
				LocalProjectID				=		PrmProjectID
				LocalEAMScheduledStartDate  =    	PrmScheduleStartDate
				PurchaseOrderLineNum		=		PrmPurchaseOrderLineNum
				LocalFSMInboundBODTracker 	= 		PrmInboundTracker
				LocalListID					=		PrmListID
				if(EAMPOLineRel exist)
					if(LocalListID = "UpdateProjectID and UpdateEarlyDeliveryDate" )
						invoke Released.Update EAMPOLineRel 
							resume on error
								Error            				= true
								ErrorMessage     				= error message
							invoked.Company				=	LocalCompany
							invoked.PurchaseOrder		=	PurchaseOrderID
							invoked.PurchaseOrderLine	=	PurchaseOrderLineNum
							invoked.EAMProjectID		= 	LocalProjectID
							invoked.EarlyDeliveryDate   = 	LocalEAMScheduledStartDate
					else
						if(LocalListID = "UpdateProjectID")
							invoke Released.Update EAMPOLineRel 
								resume on error
									Error            				= true
									ErrorMessage     				= error message
								invoked.Company				=	LocalCompany
								invoked.PurchaseOrder		=	PurchaseOrderID
								invoked.PurchaseOrderLine	=	PurchaseOrderLineNum
								invoked.EAMProjectID		= 	LocalProjectID
						else
							if(LocalListID ="UpdateEarlyDeliveryDate")
								invoke Released.Update EAMPOLineRel 
									resume on error
										Error            				= true
										ErrorMessage     				= error message
									invoked.Company				=	LocalCompany
									invoked.PurchaseOrder		=	PurchaseOrderID
									invoked.PurchaseOrderLine	=	PurchaseOrderLineNum
									invoked.EarlyDeliveryDate   = 	LocalEAMScheduledStartDate
					if(Error)
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 						= Error
							invoked.ErrorMessage 				= ErrorMessage
							invoked.Status						= 2
							invoked.CloseDate					= system current timestamp
		           	 	invoke SendMOConfirmBOD
		           	 		invoked.PrmErrorMessage 			= ErrorMessage
							invoked.MaintenanceOrderBOD     	= MaintenanceOrderBOD
							invoked.PrmTrackerID				= LocalFSMInboundBODTracker
					else
						invoke ReleasePurchaseOrder Unreleased EAMPOLineRel 
							resume on error
			                   	Error            				= true
			                    ErrorMessage 					= error message
			            if(Error)
							invoke Update FSMInboundBODTrackerRel
								invoked.Error 						= Error
								invoked.ErrorMessage 				= ErrorMessage
								invoked.Status						= 2
								invoked.CloseDate					= system current timestamp
			           	 	invoke SendMOConfirmBOD
			           	 		invoked.PrmErrorMessage 			= ErrorMessage
								invoked.MaintenanceOrderBOD     	= MaintenanceOrderBOD
								invoked.PrmTrackerID				= LocalFSMInboundBODTracker
						else
							invoke Update FSMInboundBODTrackerRel
								invoked.Status					= 3
								invoked.CloseDate				= system current timestamp
														
		UpdateEAMWOWarehouseDemandLine is an Import Action
			restricted
			Parameters
				MaintenanceOrderBOD 		is XMLDocument
				PrmInboundTracker   		is like FSMInboundBODTracker 
				PrmFEG						is Alpha 10
				PrmCompany					is Numeric 4
				PrmRequisitionID			is Numeric 12
				PrmProjectID				is Alpha 50
				PrmScheduleStartDate        is Alpha 10
				PrmDemandLineNumber			is Numeric 6
				PrmDemandSystemCode 		is AlphaUpper 2
				PrmDemandDocument			is Numeric 12 
				PrmDemandCompany			is Numeric 4
				PrmDemandDocumentType       is AlphaUpper 2 
				PrmInventoryLocation		is AlphaUpper 20
				PrmComponentSequence        is Numeric 3
				PrmItem						is AlphaUpper 32
				PrmWorkOrder				is AlphaUpper size 30
				PrmWorkOrderActivity		is Numeric 8
				
			Action Rules
				LocalEAMWorkOrder			=   	MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentID/ID"
				LocalRQFromCompany			=		PrmCompany
				RequisitionID				=		PrmRequisitionID
				LocalProjectID				=		PrmProjectID
				RequisitionID				=		PrmDemandDocument
				LocalCompany				=		PrmDemandCompany
				LocalDemandDocumentType		= 		PrmDemandDocumentType
				LocalInventoryLocation		=		PrmInventoryLocation
				LocalComponentSequence		=		PrmComponentSequence
				RequisitionLineNumber		=		PrmDemandLineNumber
				WarehouseDemandLineItem		=		PrmItem
				LocalEAMScheduledStartDate  =    	PrmScheduleStartDate
				RequisitionLineNumber		= 		PrmDemandLineNumber
				LocalWoActivityID			=		PrmWorkOrderActivity
				LocalFSMInboundBODTracker 	= 		PrmInboundTracker
				if(EAMWarehouseDemandLineRel exist)
					invoke UpdateFromAllocation EAMWarehouseDemandLineRel 
						resume on error
		           			Error            				= true
		            		ErrorMessage     				= error message
						invoked.EstimatedTransactionDate 				=  	LocalEAMScheduledStartDate
						invoked.EAMWorkOrder							=	LocalEAMWorkOrder
						invoked.EAMWorkOrderActivity					=	LocalWoActivityID
						invoked.WarehouseDemand.DemandDocument			= 	RequisitionID
						invoked.WarehouseDemand.DemandCompany			= 	LocalCompany
						invoked.WarehouseDemandLine.LineNumber			= 	RequisitionLineNumber
						invoked.WarehouseDemand.DemandSystemCode		= 	"RQ"
						invoked.Company									=	LocalRQFromCompany
						invoked.WarehouseDemandLine.DemandDocumentType	=	LocalDemandDocumentType
						invoked.InventoryLocation						=	LocalInventoryLocation
						invoked.WarehouseDemandLine.ComponentSequence	=	LocalComponentSequence
						invoked.Item									=	WarehouseDemandLineItem
					
					if(Error)
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 						= Error
							invoked.ErrorMessage 				= ErrorMessage
							invoked.Status						= 2
							invoked.CloseDate					= system current timestamp
		        		invoke SendMOConfirmBOD
		        			invoked.PrmErrorMessage 			= ErrorMessage
							invoked.MaintenanceOrderBOD     	= MaintenanceOrderBOD
							invoked.PrmTrackerID				= LocalFSMInboundBODTracker
					else
						invoke Update FSMInboundBODTrackerRel
							invoked.Status					= 3
							invoked.CloseDate				= system current timestamp	


		DeleteEAMWorkOrder is an Import Action
			restricted			
			Parameters
				MaintenanceOrderBOD 		is XMLDocument
				PrmInboundTracker   		is like FSMInboundBODTracker 
				PrmFEG						is Alpha 10
			Action Rules
				LocalFSMInboundBODTracker 	=   PrmInboundTracker		
				LocalFEG					=   PrmFEG
				LocalEAMWorkOrder			=   MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentID/ID"	
				if(EAMWorkOrderRel exist)
					invoke Delete EAMWorkOrderUserFieldsRel
					invoke Delete EAMWorkOrderRel
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 			= Error
						invoked.ErrorMessage 	= ErrorMessage
						invoked.Status			= 3
						invoked.CloseDate		= system current timestamp   		
               	else
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 						= true
						invoked.ErrorMessage 				= "EAMWorkOrder does not exist"
						invoked.Status						= 2
						invoked.CloseDate					= system current timestamp
               	 	invoke SendMOConfirmBOD
               	 		invoked.PrmErrorMessage 			= "EAMWorkOrder does not exist"
						invoked.MaintenanceOrderBOD     	= MaintenanceOrderBOD
						invoked.PrmTrackerID				= LocalFSMInboundBODTracker			
			
		SendMOConfirmBOD is an Instance Action
			restricted			
			Parameters
				MaintenanceOrderBOD 					is XMLDocument
				PrmErrorMessage 						is Alpha 300
				PrmTrackerID							is Numeric 15
				LocalconfirmBodID						is Alpha 100
			Action Rules
				LocalMaintenanceOrderXML				= MaintenanceOrderBOD
				LocalErrorMessage						= PrmErrorMessage
				LocalTrackerID							= PrmTrackerID
				LocalEAMWorkOrder						= MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentID/ID"	
				LocalToLogicalID						= MaintenanceOrderBOD select "//ApplicationArea/Sender/LogicalID"
				LocalComponentID						= MaintenanceOrderBOD select "//ApplicationArea/Sender/ComponentID"
				LocalBODID								= MaintenanceOrderBOD select "//ApplicationArea/BODID"
				LocalDocumentID							= MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentID/ID"
				LocalaccountingEntity					= MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentID/ID/@accountingEntity"
				LocalOriginalCreateDateTime				= MaintenanceOrderBOD select "//ApplicationArea/CreationDateTime"
				LocalVariationID            			= MaintenanceOrderBOD select "//DataArea/MaintenanceOrder/MaintenanceOrderHeader/DocumentID/ID/@variationID"
				LocalConfirmBOD							= "true"
				LocalMainUserTemplate					= "IONSyncMaintenanceOrder_ConfirmBOD_ST"
				if(UserTemplateRel exists)
					send ion bod
						bod is SyncMaintenanceOrderConfirmBODXML
						bod type is "Confirm.BOD"
						accounting entity is LocalaccountingEntity
						document id is LocalDocumentID	
#endif			

#ifdef module po
		SyncSupplierRMABODImport is an Import Action
			restricted
			bod type is Sync.SupplierRMA			
			Parameters
				SupplierRMABOD 			is XMLDocument
			Local Fields
            	LocalReturnLine			is XMLDocument	
            	LocalReturnLine1		is XMLDocument			
			Action Rules
				LocalVendorReturnReference  = SupplierRMABOD select "//DataArea/SupplierRMA/SupplierRMAHeader/DocumentID/ID"
				LocalReturnLocation     	= SupplierRMABOD select "//DataArea/SupplierRMA/SupplierRMAHeader/ShipFromParty/Location/ID"
				LocalVendorReturnLineCount 	= SupplierRMABOD select "count(//DataArea/SupplierRMA/SupplierRMALine)"
				LocalVariationID            = SupplierRMABOD select "//DataArea/SupplierRMA/SupplierRMAHeader/DocumentID/ID/@variationID"
				LocalBODID                  = SupplierRMABOD select "//ApplicationArea/BODID"
				LocalActionCode 			= SupplierRMABOD select"//DataArea/Sync/ActionCriteria/ActionExpression/@actionCode"
				LocalBODXML					= SupplierRMABOD
				LocalGenericDelimiter		= DerivedGenericDelimiter
				LocalAccountingEntity		= SupplierRMABOD select "//DataArea/SupplierRMA/SupplierRMAHeader/DocumentID/ID/@accountingEntity"
				LocalIterator				= 1
				LocalAccountingEntityID		= LocalAccountingEntity
				if(DerivedConfigDocID = "Y")
					if(FSMBODCRDCleanDocIDRel.DestinationValue entered)	
						LocalAccountingEntityID	= FSMBODCRDCleanDocIDRel.DestinationValue
					else
						LocalAccountingEntityID	= LocalAccountingEntity
				LocalAccountingEntity	=	LocalAccountingEntityID
				while(LocalVendorReturnLineCount >= LocalIterator and Localdocumentreference not entered)
					LocalReturnLine				= SupplierRMABOD select "//DataArea/SupplierRMA/SupplierRMALine[<LocalIterator>]"
					LocalDocumentReferencecount = LocalReturnLine select "count(/SupplierRMALine/DocumentReference)"
					LocalLoop = 1
                	while (LocalDocumentReferencecount >= LocalLoop)
						LocalReturnLine1 = LocalReturnLine select "/SupplierRMALine/DocumentReference[<LocalLoop>]"
						LocalName = LocalReturnLine1 select "/DocumentReference/@type"
						LocalNameValue = LocalReturnLine1 select "/DocumentReference/DocumentID/ID/@location"
						LocalNameValue1 = LocalReturnLine1 select "/DocumentReference/DocumentID/ID"
						if( LocalName = "PurchaseOrder")
							Localdocumentreference = LocalNameValue
							LocalVendorReturnlineReference = LocalNameValue1
						LocalLoop = LocalLoop + 1
					LocalIterator		= LocalIterator + 1
				LocalHeaderReturnLocation    	= NativeLocation
				LocalLineReturnLocation 	= NativeVendorReturnLocation
				if(LocalHeaderReturnLocation entered)
					LocalVendorReturnFromLocation = LocalHeaderReturnLocation
				else
					LocalVendorReturnFromLocation = LocalLineReturnLocation
				LocalLineReference 		 = NativePurchaseOrder
				if(DerivedConfigDocID = "Y")
					LocalVendorReturnPO 	 =  LocalVendorReturnlineReference
					if(DerivedConfigFEG != "Y")
						LocalVendorReturnCompany = LocalAccountingEntityID
					else
					if(DerivedConfigFEG = "Y")
						if(LocalAccountingEntityID entered)
							LocalVendorReturnCompany = NativeEAMCompany
						else
							LocalVendorReturnCompany = ""
				else
					LocalVendorReturnPO 	 =  LocalPurchaseOrder
					LocalVendorReturnCompany =	LocalCompany
				
				if(FSMBODConfigurationSupplierRMARel exists and FSMBODConfigurationSupplierRMARel.Enable)
					if(FSMInboundBODTracker not entered)
						invoke Create FSMInboundBODTracker
							assign result to NewBODTracker
							invoked.Verb 					= 1
							invoked.Noun 					= "SupplierRMA"
							invoked.Direction				= 2					
							invoked.Company					= LocalVendorReturnCompany
							invoked.BODLocation				= LocalVendorReturnFromLocation
							invoked.BODDocumentID			= LocalVendorReturnReference
							invoked.BODVariationID			= LocalVariationID
							invoked.BODID					= LocalBODID
							invoked.Status					= 1
							invoked.BODAccountingEntity		= LocalAccountingEntity
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							initialize invoked.Error			
							initialize invoked.ErrorMessage
						LocalFSMInboundBODTracker = NewBODTracker.FSMInboundBODTracker
					else
						LocalFSMInboundBODTracker 			= FSMInboundBODTracker
						invoke Update FSMInboundBODTrackerRel
							invoked.Company					= LocalVendorReturnCompany
							invoked.BODLocation				= LocalVendorReturnFromLocation
							invoked.BODDocumentID			= LocalVendorReturnReference
							invoked.BODVariationID			= LocalVariationID
							invoked.BODID					= LocalBODID
							invoked.Status					= 1
							invoked.BODAccountingEntity		= LocalAccountingEntity
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							initialize invoked.Error			
							initialize invoked.ErrorMessage
							
					if(LocalActionCode = "Add")
						invoke CreateVendorReturn
							invoked.SupplierRMABOD      		= SupplierRMABOD
		                	invoked.PrmInboundTracker 		  	= LocalFSMInboundBODTracker
		                	invoked.PrmPOCompany 			  	= LocalVendorReturnCompany
		                	invoked.PrmPurchaseOrder		  	= LocalVendorReturnPO
		                	invoked.PrmVendorReturnLocation   	= LocalVendorReturnFromLocation	
		            else
		            	invoke UpdateOrDeleteVendorReturn
		            		invoked.SupplierRMABOD      		= SupplierRMABOD
		                	invoked.PrmInboundTracker 			= LocalFSMInboundBODTracker
		                	invoked.PrmPOCompany 				= LocalVendorReturnCompany
		                	invoked.PrmPurchaseOrder			= LocalVendorReturnPO
		                	invoked.PrmVendorReturnLocation 	= LocalVendorReturnFromLocation
		            		invoked.PrmVendorReturnReference    = LocalVendorReturnReference
	            else 
				if(FSMInboundBODTracker not entered)
					invoke Create FSMInboundBODTracker
						assign result to NewBODTracker
						invoked.Verb 					= 1
						invoked.Noun 					= "SupplierRMA"	
						invoked.Direction				= 2				
						invoked.Company					= LocalVendorReturnCompany
						invoked.BODID					= LocalBODID
						invoked.BODDocumentID			= LocalVendorReturnReference
						invoked.BODVariationID			= LocalVariationID
						invoked.BODLocation				= LocalVendorReturnFromLocation
						invoked.BODAccountingEntity		= LocalAccountingEntity
						invoked.BODXML					= LocalBODXML
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.Error					= true			
						invoked.ErrorMessage			= "Sync SupplierRMA Inbound BOD Service is not Enabled" 
					LocalFSMInboundBODTracker = NewBODTracker.FSMInboundBODTracker
				else
					LocalFSMInboundBODTracker = FSMInboundBODTracker
					invoke Update FSMInboundBODTrackerRel
						invoked.Company					= LocalVendorReturnCompany
						invoked.BODID					= LocalBODID
						invoked.BODDocumentID			= LocalVendorReturnReference
						invoked.BODVariationID			= LocalVariationID
						invoked.BODLocation				= LocalVendorReturnFromLocation
						invoked.BODAccountingEntity		= LocalAccountingEntity
						invoked.BODXML					= LocalBODXML
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.Error					= true			
						invoked.ErrorMessage			= "Sync SupplierRMA Inbound BOD Service is not Enabled" 
							   							
		CreateVendorReturn is an Import Action
			restricted			
			Parameters
				SupplierRMABOD 			is XMLDocument
				PrmInboundTracker   	is like FSMInboundBODTracker 
				PrmPOCompany			is like PurchasingCompany
				PrmPurchaseOrder		is like PurchaseOrder
				PrmVendorReturnLocation	is like InventoryLocation
			Action Rules
				LocalVendorReturnReference     = SupplierRMABOD select "//DataArea/SupplierRMA/SupplierRMAHeader/DocumentID/ID"
				LocalVendorReturnLineCount     = SupplierRMABOD select "count(//DataArea/SupplierRMA/SupplierRMALine)"  
				LocalVendorReturnCompany       = PrmPOCompany
				LocalVendorReturnPO            = PrmPurchaseOrder
				LocalVendorReturnFromLocation  = PrmVendorReturnLocation
				LocalFSMInboundBODTracker 	   = PrmInboundTracker
				invoke Added.CreateFromPurchaseOrder VendorReturn
					assign result to NewVendorReturn 
					resume on error
                   		Error            					= true
                        ErrorMessage     					= error message 
                    invoked.Company         				= LocalVendorReturnCompany
                    invoked.CreatedFromPurchaseOrder   		= LocalVendorReturnPO
                    invoked.ReturnFromLocation				= LocalVendorReturnFromLocation
                    invoked.VendorClaimType					= "CM"
                    invoked.ReferenceNumber					= LocalVendorReturnReference
               	if(Error)
				    LocalFSMInboundBODTracker 				= PrmInboundTracker
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 						= Error
						invoked.ErrorMessage 				= ErrorMessage
						invoked.Status						= 2
						invoked.CloseDate					= system current timestamp
					invoke SendSSRConfirmBOD
						invoked.PrmErrorMessage 			= ErrorMessage
						invoked.SupplierRMABOD      		= SupplierRMABOD
						invoked.PrmTrackerID				= LocalFSMInboundBODTracker
               	else
               	if(LocalVendorReturnLineCount > 0)
               		invoke CreateVendorReturnLine
               			invoked.SupplierRMABOD 			= 	SupplierRMABOD
               			invoked.PrmVendorReturn 		= 	NewVendorReturn.VendorReturn
               			invoked.PrmInboundTracker 		= 	LocalFSMInboundBODTracker
               			invoked.PrmPOCompany			= 	LocalVendorReturnCompany
               			invoked.PrmPurchaseorder		= 	LocalVendorReturnPO	
						invoked.PrmVendorReturnLocation = 	LocalVendorReturnFromLocation	
				
		CreateVendorReturnLine is an Import Action
        	restricted			
			Parameters
				SupplierRMABOD 				is XMLDocument
				PrmVendorReturn   			is like VendorReturn
				PrmInboundTracker   		is like FSMInboundBODTracker
				PrmPOCompany				is like PurchasingCompany
				PrmPurchaseorder			is like PurchaseOrder
				PrmVendorReturnLocation		is like InventoryLocation
			Local Fields
            	LocalReturnLine			is XMLDocument	
            	LocalReturnLine1		is XMLDocument
			Action Rules
				LocalVendorReturnCompany 		= PrmPOCompany
				LocalVendorReturnPO 			= PrmPurchaseorder
				LocalVendorReturnFromLocation 	= PrmVendorReturnLocation
				LocalVendorReturn 				= PrmVendorReturn
                LocalVendorReturnLineCount 		= SupplierRMABOD select "count(//DataArea/SupplierRMA/SupplierRMALine)" 
                LocalFSMInboundBODTracker 		= PrmInboundTracker
                LocalIterator = 1
                while(LocalVendorReturnLineCount >= LocalIterator)
                	LocalReturnLine				= SupplierRMABOD select "//DataArea/SupplierRMA/SupplierRMALine[<LocalIterator>]"
                	LocalReturnedItemQuantity 	= LocalReturnLine select "/SupplierRMALine/Quantity"
                	LocalItemUnitCost 			= LocalReturnLine select "/SupplierRMALine/UnitPrice/Amount"
                	LocalItemUOM  				= LocalReturnLine select "/SupplierRMALine/Quantity/@unitCode"
                	LocalDocumentReferencecount = LocalReturnLine select "count(/SupplierRMALine/DocumentReference)"
                	LocalLoop = 1
                	while (LocalDocumentReferencecount >= LocalLoop)
                		LocalReturnLine1 	= LocalReturnLine select "/SupplierRMALine/DocumentReference[<LocalLoop>]"
                		LocalName 			= LocalReturnLine1 select "/DocumentReference/@type"
                		LocalNameValue1 	= LocalReturnLine1 select "/DocumentReference/LineNumber"
						if(LocalName = "PurchaseOrder")
							LocalPOLineNumber = LocalNameValue1
						LocalLoop = LocalLoop + 1
					if(PurchaseOrderLinesByLineNbrRel exists)
						LocalItem = PurchaseOrderLinesByLineNbrRel.Item
						LocalItemDescription = PurchaseOrderLinesByLineNbrRel.Description
						LocalItemType    = PurchaseOrderLinesByLineNbrRel.ItemType
					invoke Create VendorReturnLine
						resume on error
                   			Error            		      = true
                        	ErrorMessage     		      = error message
						invoked.VendorReturn 	          = LocalVendorReturn
						invoked.Company 		          = LocalVendorReturnCompany
						invoked.ReturnQuantity 	          = LocalReturnedItemQuantity
						invoked.UnitCost	   	          = LocalItemUnitCost
						invoked.EnteredUOM	   		      = LocalItemUOM
						invoked.Item 		   		      = LocalItem
						invoked.Description    		      = LocalItemDescription
						invoked.OriginalPurchaseOrder     = LocalVendorReturnPO
						invoked.ItemType 			      = LocalItemType
						invoked.OriginalPurchaseOrderLine = LocalPOLineNumber
					if(Error)
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 					= Error
							invoked.ErrorMessage 			= ErrorMessage
							invoked.Status					= 2
							invoked.CloseDate				= system current timestamp
						invoke SendSSRConfirmBOD
							invoked.PrmErrorMessage 		= ErrorMessage
							invoked.SupplierRMABOD      	= SupplierRMABOD
							invoked.PrmTrackerID			= LocalFSMInboundBODTracker
						invoke Added.Delete DeleteVendorReturnRel
						LocalIterator = LocalVendorReturnLineCount + 1
					else	
						LocalIterator		= LocalIterator + 1
						if (LocalIterator%20 = 0)
							commit transaction
				
				if(!FSMInboundBODTrackerRel.Error)
					invoke Update FSMInboundBODTrackerRel
						invoked.Status					= 3
						invoked.CloseDate				= system current timestamp
								
		UpdateOrDeleteVendorReturn is an Import Action
			restricted			
			Parameters	
				SupplierRMABOD 				is XMLDocument
				PrmInboundTracker   		is like FSMInboundBODTracker 
				PrmPOCompany				is like PurchasingCompany
				PrmPurchaseOrder			is like PurchaseOrder
				PrmVendorReturnLocation		is like InventoryLocation			
				PrmVendorReturnReference    is Alpha 25
			Action Rules
				LocalVendorReturnCompany 		= PrmPOCompany
				LocalVendorReturnPO 	 		= PrmPurchaseOrder
				LocalVendorReturnFromLocation 	= PrmVendorReturnLocation
				LocalVendorReturnReference    	= PrmVendorReturnReference
				LocalActionCode 				= SupplierRMABOD select"//DataArea/Sync/ActionCriteria/ActionExpression/@actionCode"	
				LocalIterator = 1
				LocalVendorReturnLineCount 		= SupplierRMABOD select "count(//DataArea/SupplierRMA/SupplierRMALine)"
				LocalFSMInboundBODTracker 		= PrmInboundTracker
				if(FindVendorReturnRel exists)
					LocalVendorReturn = FindVendorReturnRel.VendorReturn
					if(LocalActionCode = "Replace")
						while(LocalVendorReturnLineCount >= LocalIterator)
							LocalDocumentReferencecount 	= SupplierRMABOD select "count(//DataArea/SupplierRMA/SupplierRMALine[<LocalIterator>]/DocumentReference)"
                			LocalReturnedItemQuantity = SupplierRMABOD select "//DataArea/SupplierRMA/SupplierRMALine[<LocalIterator>]/Quantity"
							LocalItemUnitCost = SupplierRMABOD select "//DataArea/SupplierRMA/SupplierRMALine[<LocalIterator>]/UnitPrice/Amount"
                			LocalLoop = 1
                			while (LocalDocumentReferencecount >= LocalLoop)
                				LocalName = SupplierRMABOD select "//DataArea/SupplierRMA/SupplierRMALine[<LocalIterator>]/DocumentReference[<LocalLoop>]/@type"
                				LocalNameValue1 = SupplierRMABOD select "//DataArea/SupplierRMA/SupplierRMALine[<LocalIterator>]/DocumentReference[<LocalLoop>]/LineNumber"
								if(LocalName = "PurchaseOrder")
									LocalPOLineNumber = LocalNameValue1
								LocalLoop = LocalLoop + 1
							if(UpdateVendorReturnRel exists)
								LocalVendorReturnLine = UpdateVendorReturnRel.VendorReturnLine
								invoke Update UpdateVendorReturnRel
									resume on error
		               					Error            				= true
		                    			ErrorMessage     				= error message
									invoked.Company 					= LocalVendorReturnCompany
									invoked.VendorReturn 				= LocalVendorReturn
									invoked.OriginalPurchaseOrder     	= LocalVendorReturnPO
									invoked.OriginalPurchaseOrderLine 	= LocalPOLineNumber
									invoked.ReturnQuantity 				= LocalReturnedItemQuantity
									invoked.UnitCost 					= LocalItemUnitCost
								if(Error)
									invoke Update FSMInboundBODTrackerRel
										invoked.Error 					= Error
										invoked.ErrorMessage 			= ErrorMessage
										invoked.Status					= 2
										invoked.CloseDate				= system current timestamp
									invoke SendSSRConfirmBOD
										invoked.PrmErrorMessage 		= ErrorMessage
										invoked.SupplierRMABOD      	= SupplierRMABOD
										invoked.PrmTrackerID			= LocalFSMInboundBODTracker
									LocalIterator = LocalVendorReturnLineCount + 1
								else
									LocalIterator = LocalIterator + 1	
							else
								invoke Update FSMInboundBODTrackerRel
									invoked.Error 						= true
									invoked.ErrorMessage 				= "Error Processing SyncSupplierRMA - Unable to Update VendorReturnLine" +LocalVendorReturnLine +"of VendorReturn"+LocalVendorReturn
									invoked.Status						= 2
									invoked.CloseDate					= system current timestamp
								invoke SendSSRConfirmBOD
									invoked.PrmErrorMessage 			= "Error Processing SyncSupplierRMA - Unable to Update VendorReturnLine" +LocalVendorReturnLine +"of VendorReturn"+LocalVendorReturn
									invoked.SupplierRMABOD      		= SupplierRMABOD
									invoked.PrmTrackerID				= LocalFSMInboundBODTracker
								LocalIterator = LocalVendorReturnLineCount + 1
					else
					if(LocalActionCode = "Delete")
						if(DeleteVendorReturnRel exists)
							invoke Added.Delete DeleteVendorReturnRel
								resume on error
	                   				Error            					= true
	                        		ErrorMessage     					= error message
	                        	
							if(Error)
								invoke Update FSMInboundBODTrackerRel
									invoked.Error 						= Error
									invoked.ErrorMessage 				= ErrorMessage
									invoked.Status						= 2
									invoked.CloseDate					= system current timestamp
								invoke SendSSRConfirmBOD
									invoked.PrmErrorMessage 			= ErrorMessage
									invoked.SupplierRMABOD      		= SupplierRMABOD
									invoked.PrmTrackerID				= LocalFSMInboundBODTracker
						else
							invoke Update FSMInboundBODTrackerRel
								invoked.Error 							= true
								invoked.ErrorMessage 					= "Error Processing SyncSupplierRMA - Unable to Delete" +LocalVendorReturn
								invoked.Status							= 2
								invoked.CloseDate						= system current timestamp
							invoke SendSSRConfirmBOD
								invoked.PrmErrorMessage 				= "Error Processing SyncSupplierRMA - Unable to Delete" +LocalVendorReturn
								invoked.SupplierRMABOD      			= SupplierRMABOD
								invoked.PrmTrackerID					= LocalFSMInboundBODTracker
							LocalIterator = LocalVendorReturnLineCount + 1
										
					if(!FSMInboundBODTrackerRel.Error)
						invoke Update FSMInboundBODTrackerRel
							invoked.Status			= 3
							invoked.CloseDate		= system current timestamp
				else
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 				= true
						invoked.ErrorMessage 		= "Error Processing SyncSupplierRMA - Unable to FindCompany" +LocalVendorReturnCompany + "for Reference" + LocalVendorReturnReference
						invoked.Status				= 2
						invoked.CloseDate			= system current timestamp
					invoke SendSSRConfirmBOD
						invoked.PrmErrorMessage 	= "Error Processing SyncSupplierRMA - Unable to FindCompany" +LocalVendorReturnCompany + "for Reference" + LocalVendorReturnReference
						invoked.SupplierRMABOD      = SupplierRMABOD
						invoked.PrmTrackerID		= LocalFSMInboundBODTracker
								
		SendSSRConfirmBOD is an Instance Action
			restricted			
			Parameters
				SupplierRMABOD 	is XMLDocument
				PrmErrorMessage is Alpha 300
				PrmTrackerID	is Numeric 15
			Action Rules
				LocalSSupplierRMAXML				= SupplierRMABOD
				LocalErrorMessage					= PrmErrorMessage
				LocalTrackerID						= PrmTrackerID
				LocalFromLogicalID					= SupplierRMABOD select "//ApplicationArea/Sender/LogicalID"
				LocalComponentID					= SupplierRMABOD select "//ApplicationArea/Sender/ComponentID"
				LocalBODID							= SupplierRMABOD select "//ApplicationArea/BODID"
				LocalDocumentID						= SupplierRMABOD select "//DataArea/SupplierRMA/SupplierRMAHeader/DocumentID/ID"
				LocalAccountingEntity				= SupplierRMABOD select "//DataArea/SupplierRMA/SupplierRMAHeader/DocumentID/ID/@accountingEntity"
				LocalOriginalCreateDateTime			= SupplierRMABOD select "//ApplicationArea/CreationDateTime"
				LocalVariationID            		= SupplierRMABOD select "//DataArea/SupplierRMA/SupplierRMAHeader/DocumentID/ID/@variationID"
				LocalConfirmBOD						= "true"
				LocalMainUserTemplate				= "IONSyncSupplierRMA_ConfirmBOD_ST"
				if(UserTemplateRel exists)
					send ion bod
						bod is SyncSupplierRMAConfirmBODXML
						bod type is "Confirm.BOD"
						accounting entity is LocalAccountingEntity
						document id is LocalDocumentID
#endif	

    

#ifdef module po
#ifdef module ic   
		ProcessReceiveDeliveryBODImport is an Import Action
			restricted
			bod type is Process.ReceiveDelivery			
			Parameters
				ReceiveDeliveryBOD 				is XMLDocument
			Action Rules
				LocalCompany					= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentID/ID/@location"
				LocalVariationID				= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentID/ID/@variationID"
				LocalBODID						= ReceiveDeliveryBOD select "//ApplicationArea/BODID"
				LocalBODXML						= ReceiveDeliveryBOD
				LocalAccountingEntity			= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentID/ID/@accountingEntity"
				LocalDocumentID					= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentID/ID"
				
				if(FSMBODConfigurationPRDRel exists and FSMBODConfigurationPRDRel.Enable)
					LocalGenericDelimiter		   	= DerivedGenericDelimiter
					LocalNativePurchaseOrder 		= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[1]/PurchaseOrderReference/DocumentID/ID"
					LocalNativeWareHouse			= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/WarehouseLocation/ID"
					LocalItemCount					= ReceiveDeliveryBOD select "count (//DataArea/ReceiveDelivery/ReceiveDeliveryItem)"
					LocalAccountingEntityID			= ReceiveDeliveryBOD select "//DataArea/Process/AccountingEntityID"
					
					if(DerivedConfigDocID = "Y")
						if(FSMBODCRDCleanDocIDRel.DestinationValue entered)
							LocalAccountingEntityID	= FSMBODCRDCleanDocIDRel.DestinationValue
						else
							LocalAccountingEntityID	= LocalAccountingEntity
						
						LocalPONumber	= LocalNativePurchaseOrder
						LocalWareHouse	= LocalNativeWareHouse
						
						if(DerivedConfigFEG != "Y")
							LocalCompany = LocalAccountingEntityID
						else
						if(DerivedConfigFEG = "Y")
							if(LocalAccountingEntityID entered)
								LocalCompany = NativeRDCompany
							else
								LocalCompany = ""
					else
						LocalPONumber		= NativeRDPurchaseOrder
						LocalWareHouse 		= NativeWareHouse
					
					if(DerivedReferenceNoPrefix = "Y")
						LocalPurchaseOrderReceipt 	= LocalWareHouse +"-"+ LocalDocumentID
					else
						LocalPurchaseOrderReceipt 	= LocalDocumentID
					
					if(FSMInboundBODTracker not entered)
						invoke Create FSMInboundBODTracker
							assign result to NewBODTracker
							invoked.Verb 					= 2
							invoked.Noun 					= "ReceiveDelivery"
							invoked.Direction				= 2					
							invoked.Company					= LocalCompany
							invoked.BODAccountingEntity		= LocalAccountingEntity
							invoked.BODDocumentID			= LocalDocumentID
							invoked.BODVariationID			= LocalVariationID
							invoked.BODLocation				= LocalWareHouse
							invoked.BODID					= LocalBODID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							initialize invoked.Error			
							initialize invoked.ErrorMessage					
						LocalFSMInboundBODTracker 		= NewBODTracker.FSMInboundBODTracker
					else
						LocalFSMInboundBODTracker 		= FSMInboundBODTracker
						invoke Update FSMInboundBODTrackerRel
							invoked.Company					= LocalCompany
							invoked.BODAccountingEntity		= LocalAccountingEntity
							invoked.BODDocumentID			= LocalDocumentID
							invoked.BODVariationID			= LocalVariationID
							invoked.BODLocation				= LocalWareHouse
							invoked.BODID					= LocalBODID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							initialize invoked.Error			
							initialize invoked.ErrorMessage	
											
					if (LocalPONumber entered)
						LocalStatus 				= PurchaseOrderReceiptRel.Status
						if(LocalStatus = 0 or PurchaseOrderReceiptRel not exists)
							invoke CreatePurchaseOrderReceipt
								invoked.ReceiveDeliveryBOD		= ReceiveDeliveryBOD
								invoked.PrmInboundTracker		= LocalFSMInboundBODTracker	
								invoked.PrmPurchaseOrderReceipt	= LocalPurchaseOrderReceipt
								invoked.PrmWareHouse			= LocalWareHouse
								invoked.PrmPONumber				= LocalPONumber
								invoked.PrmCompany 				= LocalCompany
						else
						if(LocalStatus != 0)
							LocalLineCounter = 1
							LocalLinesAdded  = 0
							LocalPORInspection				= POReceiptAdjustmentAndInspectionRel.POReceiptAdjustmentAndInspection
							LocalPurchaseOrderReceipt		= PurchaseOrderReceiptRel.PurchaseOrderReceipt
							LocalActionCode					= ReceiveDeliveryBOD select "//DataArea/Process/ActionCriteria/ActionExpression/@actionCode"
							while(LocalItemCount >= LocalLineCounter)									
								LocalQuantity				= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalLineCounter>]/ReceivedQuantity"
								LocalBackOrderedQuantity	= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalLineCounter>]/BackOrderedQuantity"
								LocalLineNumber				= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalLineCounter>]/PurchaseOrderReference/LineNumber"
								 
								if(LocalQuantity = 0)
									LocalLinesAdded = LocalLinesAdded + 1
								else
									if(ReceiptAdjustmentFlag = "Y")
										if(POReceiptAdjustmentAndInspectionRel not exists)
											invoke CreatePOReceiptAdjustmentAndInspection
												invoked.ReceiveDeliveryBOD		= ReceiveDeliveryBOD
												invoked.PrmInboundTracker		= LocalFSMInboundBODTracker
												invoked.PrmCompany 				= LocalCompany
										else	
											invoke UpdatePOReceiptAdjustmentAndInspectionLine
												invoked.ReceiveDeliveryBOD		= ReceiveDeliveryBOD
												invoked.PrmInboundTracker		= LocalFSMInboundBODTracker
												invoked.PrmLineNumber			= LocalLineNumber
												invoked.PrmQuantity				= LocalQuantity
												invoked.PrmPORInspection		= LocalPORInspection
												invoked.PrmPurchaseOrderReceipt	= LocalPurchaseOrderReceipt
												invoked.PrmCompany 				= LocalCompany
											LocalLinesAdded = LocalLinesAdded + 1		
									else
										if(PurchaseOrderReceiptLineRel exists)
											if(POReceiptAdjustmentAndInspectionRel not exists)
												invoke CreatePOReceiptAdjustmentAndInspection
													invoked.ReceiveDeliveryBOD		= ReceiveDeliveryBOD
													invoked.PrmInboundTracker		= LocalFSMInboundBODTracker
													invoked.PrmCompany 				= LocalCompany
													
												if(!FSMInboundBODTrackerRel.Error)
													invoke UpdatePOReceiptAdjustmentAndInspectionLine
														invoked.ReceiveDeliveryBOD		= ReceiveDeliveryBOD
														invoked.PrmInboundTracker		= LocalFSMInboundBODTracker
														invoked.PrmLineNumber			= LocalLineNumber
														invoked.PrmQuantity				= LocalQuantity
														invoked.PrmPORInspection		= LocalPORInspection
														invoked.PrmPurchaseOrderReceipt	= LocalPurchaseOrderReceipt
														invoked.PrmCompany 				= LocalCompany
													LocalLinesAdded = LocalLinesAdded + 1	
											else	
												invoke UpdatePOReceiptAdjustmentAndInspectionLine
													invoked.ReceiveDeliveryBOD		= ReceiveDeliveryBOD
													invoked.PrmInboundTracker		= LocalFSMInboundBODTracker
													invoked.PrmLineNumber			= LocalLineNumber	
													invoked.PrmQuantity				= LocalQuantity
													invoked.PrmPORInspection		= LocalPORInspection
													invoked.PrmPurchaseOrderReceipt	= LocalPurchaseOrderReceipt
													invoked.PrmCompany 				= LocalCompany
												LocalLinesAdded = LocalLinesAdded + 1
										else
											LocalReceiptCounter = LocalReceiptCounter + 1
											invoke CreatePurchaseOrderReceipt
												invoked.ReceiveDeliveryBOD		= ReceiveDeliveryBOD
												invoked.PrmInboundTracker		= LocalFSMInboundBODTracker	
												invoked.PrmPurchaseOrderReceipt	= LocalPurchaseOrderReceipt
												invoked.PrmWareHouse			= LocalWareHouse
												invoked.PrmPONumber				= LocalPONumber	
												invoked.PrmCompany 				= LocalCompany	
												
								LocalLineCounter = LocalLineCounter + 1	
								if (LocalLineCounter%20 = 0)
									commit transaction
							
							if(LocalLineCounter = LocalLinesAdded)
								invoke ReleasePOReceiptAdjustmentAndInspection
									invoked.ReceiveDeliveryBOD		= ReceiveDeliveryBOD
									invoked.PrmInboundTracker		= LocalFSMInboundBODTracker
									invoked.PrmPORInspection		= LocalPORInspection
									invoked.PrmPurchaseOrderReceipt	= LocalPurchaseOrderReceipt
									invoked.PrmCompany 				= LocalCompany
							else	
								invoke SendPRDConfirmBOD 
									invoked.PrmErrorMessage 		= "An error occurred that prevented the Release of the Receipt."
									invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
									invoked.PrmTrackerID			= LocalFSMInboundBODTracker
									invoked.PrmCompany 				= LocalCompany
								invoke SendPRDACKBOD
				                    invoked.PrmErrorMessage 		= "An error occurred that prevented the Release of the Receipt."
				                    invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
				                    invoked.PrmTrackerID			= LocalFSMInboundBODTracker
				                    invoked.PrmAckDocumentID		= LocalPurchaseOrderReceipt
				                    invoked.PrmCompany 				= LocalCompany
								invoke Update FSMInboundBODTrackerRel
									invoked.Error 					= true
									invoked.ErrorMessage 			= "An error occurred that prevented the Release of the Receipt."
									invoked.Status					= 2
									invoked.CloseDate				= system current timestamp	
					else
						invoke CreateInventoryTransaction
							invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
							invoked.PrmInboundTracker		= LocalFSMInboundBODTracker
							invoked.PrmWareHouse			= LocalWareHouse
							invoked.PrmCompany 				= LocalCompany
				else 
				if(FSMInboundBODTracker not entered)
					invoke Create FSMInboundBODTracker
						assign result to NewBODTracker
						invoked.Verb 					= 2
						invoked.Noun 					= "ReceiveDelivery"
						invoked.Direction				= 2					
						invoked.Company					= LocalCompany
						invoked.BODAccountingEntity		= LocalAccountingEntity
						invoked.BODDocumentID			= LocalDocumentID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODLocation				= LocalWareHouse
						invoked.BODID					= LocalBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.Error					= true			
						invoked.ErrorMessage			= "Process Receive Delivery Inbound BOD Service is not Enabled"
					LocalFSMInboundBODTracker = NewBODTracker.FSMInboundBODTracker
				else
					LocalFSMInboundBODTracker = FSMInboundBODTracker
					invoke Update FSMInboundBODTrackerRel
						invoked.Company					= LocalCompany
						invoked.BODAccountingEntity		= LocalAccountingEntity
						invoked.BODDocumentID			= LocalDocumentID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODLocation				= LocalWareHouse
						invoked.BODID					= LocalBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.Error					= true			
						invoked.ErrorMessage			= "Process Receive Delivery Inbound BOD Service is not Enabled"
						
		CreatePurchaseOrderReceipt is an Import Action
			restricted			
			Parameters
				ReceiveDeliveryBOD 			is XMLDocument
				PrmInboundTracker   		is like FSMInboundBODTracker
				PrmPurchaseOrderReceipt		is Numeric 10
				PrmPONumber					is Numeric 12
				PrmWareHouse				is Alpha 20
				PrmCompany					is Numeric 9
			Action Rules
				LocalFSMInboundBODTracker 	= PrmInboundTracker
				LocalCompany				= PrmCompany
				LocalPurchaseOrderReceipt	= PrmPurchaseOrderReceipt
				LocalPONumber				= PrmPONumber
				LocalWareHouse				= PrmWareHouse
				LocalItemCount				= ReceiveDeliveryBOD select "count (//DataArea/ReceiveDelivery/ReceiveDeliveryItem)"
				
				invoke Unreleased.Create PurchaseOrderReceipt
					assign result to NewPurchaseOrderReceipt
					resume on error
                   		Error           				= true
                        ErrorMessage   	 				= error message
					invoked.Company 					= LocalCompany
					invoked.POCode 						= LocalPOCode
					invoked.PORelease 					= LocalPORelease
					invoked.ReferenceNumber 			= LocalPurchaseOrderReceipt
					invoked.PurchaseOrderReceipt 		= LocalPurchaseOrderReceipt
					invoked.PurchaseOrder				= LocalPONumber
					invoked.PurchaseOrderLocation 		= LocalWareHouse
				if(Error)
					invoke SendPRDConfirmBOD
						invoked.PrmErrorMessage 		= ErrorMessage
						invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
						invoked.PrmTrackerID			= LocalFSMInboundBODTracker
						invoked.PrmCompany 				= LocalCompany
					invoke SendPRDACKBOD
	                    invoked.PrmErrorMessage 		= ErrorMessage
	                    invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
	                    invoked.PrmTrackerID			= LocalFSMInboundBODTracker
	                    invoked.PrmAckDocumentID		= LocalPurchaseOrderReceipt
	                    invoked.PrmCompany 				= LocalCompany
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 					= Error
						invoked.ErrorMessage 			= ErrorMessage
						invoked.Status					= 2
						invoked.CloseDate				= system current timestamp
				else
					LocalPurchaseOrderReceipt 			= NewPurchaseOrderReceipt.PurchaseOrderReceipt
					LocalActionCode						= ReceiveDeliveryBOD select "//DataArea/Process/ActionCriteria/ActionExpression/@actionCode"
					LocalLineCounter = 1
					LocalLinesAdded  = 1
					while(LocalItemCount >= LocalLineCounter)
						LocalQuantity				= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalLineCounter>]/ReceivedQuantity"
						LocalBackOrderedQuantity	= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalLineCounter>]/BackOrderedQuantity"
						LocalLineNumber				= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalLineCounter>]/PurchaseOrderReference/LineNumber"
						if(PurchaseOrderReceiptLineRel exists)
							invoke CreatePurchaseOrderReceiptLine
								invoked.ReceiveDeliveryBOD		= ReceiveDeliveryBOD
								invoked.PrmInboundTracker		= LocalFSMInboundBODTracker
								invoked.PrmLineCounter			= LocalLineCounter
								invoked.PrmPurchaseOrderReceipt	= LocalPurchaseOrderReceipt
								invoked.PrmPONumber				= LocalPONumber
								invoked.PrmWareHouse			= LocalWareHouse
								invoked.PrmCompany 				= LocalCompany
						else
							if(LocalQuantity = 0 and PurchaseOrderReceiptLineRel not exists)
								if(LocalBackOrderedQuantity = 0 and LocalActionCode != "Add")
									invoke UpdatePurchaseOrderReceipt
										invoked.ReceiveDeliveryBOD		= ReceiveDeliveryBOD
										invoked.PrmInboundTracker		= LocalFSMInboundBODTracker
										invoked.PrmPurchaseOrderReceipt	= LocalPurchaseOrderReceipt
										invoked.PrmPONumber				= LocalPONumber
										invoked.PrmCompany 				= LocalCompany
								else
									LocalLinesAdded = LocalLinesAdded + 1
							else
								invoke CreatePurchaseOrderReceiptLine
									invoked.ReceiveDeliveryBOD		= ReceiveDeliveryBOD
									invoked.PrmInboundTracker		= LocalFSMInboundBODTracker
									invoked.PrmLineCounter			= LocalLineCounter
									invoked.PrmPurchaseOrderReceipt	= LocalPurchaseOrderReceipt
									invoked.PrmPONumber				= LocalPONumber
									invoked.PrmWareHouse			= LocalWareHouse
									invoked.PrmCompany 				= LocalCompany
								LocalLinesAdded = LocalLinesAdded + 1
						LocalLineCounter = LocalLineCounter + 1
						if (LocalLineCounter%20 = 0)
							commit transaction
					
					if(LocalLineCounter = LocalLinesAdded)
						invoke ReleasePurchaseOrderReceipt
							invoked.ReceiveDeliveryBOD		= ReceiveDeliveryBOD
							invoked.PrmInboundTracker		= LocalFSMInboundBODTracker
							invoked.PrmPurchaseOrderReceipt = LocalPurchaseOrderReceipt
							invoked.PrmPONumber				= LocalPONumber
							invoked.PrmCompany 				= LocalCompany
					else	
						invoke SendPRDConfirmBOD
							invoked.PrmErrorMessage 		= "An error occurred that prevented the Release of the Receipt."
							invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
							invoked.PrmTrackerID			= LocalFSMInboundBODTracker
							invoked.PrmCompany 				= LocalCompany
						invoke SendPRDACKBOD
		                    invoked.PrmErrorMessage 		= "An error occurred that prevented the Release of the Receipt."
		                    invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
		                    invoked.PrmTrackerID			= LocalFSMInboundBODTracker
		                    invoked.PrmAckDocumentID		= LocalPurchaseOrderReceipt
		                    invoked.PrmCompany 				= LocalCompany
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 					= true
							invoked.ErrorMessage 			= "An error occurred that prevented the Release of the Receipt."
							invoked.Status					= 2
							invoked.CloseDate				= system current timestamp
							
		CreatePurchaseOrderReceiptLine is an Import Action
			restricted			
			Parameters
				ReceiveDeliveryBOD 			is XMLDocument
				PrmInboundTracker   		is like FSMInboundBODTracker
				PrmPurchaseOrderReceipt		is Numeric 10
				PrmLineCounter				is Numeric 9
				PrmWareHouse				is Alpha 20
				PrmPONumber					is Numeric 12
				PrmCompany 					is Numeric 9
			Action Rules
				LocalFSMInboundBODTracker 	= PrmInboundTracker
				LocalGenericDelimiter		= DerivedGenericDelimiter
				LocalCompany				= PrmCompany
				LocalPONumber				= PrmPONumber
				LocalIterator				= PrmLineCounter
				LocalWareHouse				= PrmWareHouse
				LocalPurchaseOrderReceipt	= PrmPurchaseOrderReceipt
				LocalPORelease 				= PurchaseOrderReceiptRel.PORelease
				LocalPOCode 				= PurchaseOrderReceiptRel.POCode
				LocalNativeItem				= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalIterator>]/ItemID/ID"
				LocalQuantity				= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalIterator>]/ReceivedQuantity"
				LocalLineNumber				= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalIterator>]/PurchaseOrderReference/LineNumber"
				LocalItemGroup 				= InventoryCompanyRel.ItemGroup
				if(DerivedConfigDocID = "Y")
					LocalItem				= LocalNativeItem	
				else
					LocalItem				= NativeItem
				
				if(ItemRel exists)
					LocalItemType			= ""
				else
					LocalItemType			= "X"
				
				if(PurchaseOrderReceiptLineRel exists)
					LocalOrigRecQty			= PurchaseOrderReceiptLineRel.EnteredReceivedQuantity
					LocalTotalRecQty		= LocalOrigRecQty + LocalQuantity
				else
					LocalTotalRecQty		= LocalQuantity
				
				if(PurchaseOrderLineRel exists)
					LocalVendorPriceUOM 	= PurchaseOrderLineRel.VendorPriceUOM
				
				invoke Create PurchaseOrderReceiptLine
					resume on error
                   		Error           				= true
                        ErrorMessage   	 				= error message
					invoked.Company 					= LocalCompany
					invoked.Item 						= LocalItem
					invoked.PurchaseOrderReceiptLine 	= LocalLineNumber
					invoked.PurchaseOrderReceipt 		= LocalPurchaseOrderReceipt
					invoked.EnteredReceivedQuantity		= LocalTotalRecQty
					invoked.OriginalReceivedQuantity 	= LocalTotalRecQty
					invoked.PurchaseOrderLine			= LocalLineNumber
					invoked.ShipToLocation				= LocalWareHouse
					invoked.ItemType					= LocalItemType
					invoked.VendorPriceUOM				= LocalVendorPriceUOM
				if(Error)
					invoke SendPRDConfirmBOD
						invoked.PrmErrorMessage 		= ErrorMessage
						invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
						invoked.PrmTrackerID			= LocalFSMInboundBODTracker
						invoked.PrmCompany 				= LocalCompany
					invoke SendPRDACKBOD
	                    invoked.PrmErrorMessage 		= ErrorMessage
	                    invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
	                    invoked.PrmTrackerID			= LocalFSMInboundBODTracker
	                    invoked.PrmAckDocumentID		= LocalPurchaseOrderReceipt
	                    invoked.PrmCompany 				= LocalCompany
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 					= Error
						invoked.ErrorMessage 			= ErrorMessage
						invoked.Status					= 2
						invoked.CloseDate				= system current timestamp
    			else
    				if(LocalBackOrderedQuantity = 0 and LocalActionCode != "Add")
    					invoke Update PurchaseOrderReceiptLineRel
							invoked.Company 					= LocalCompany
							invoked.Item 						= LocalItem
							invoked.PurchaseOrderReceiptLine 	= LocalLineNumber
							invoked.PurchaseOrderReceipt 		= LocalPurchaseOrderReceipt
							invoked.EnteredReceivedQuantity		= LocalTotalRecQty
							invoked.OriginalReceivedQuantity 	= LocalTotalRecQty
							invoked.PurchaseOrderLine			= LocalLineNumber	
    				
    	UpdatePurchaseOrderReceipt is an Import Action
			restricted			
			Parameters
				ReceiveDeliveryBOD 			is XMLDocument
				PrmInboundTracker   		is like FSMInboundBODTracker
				PrmPurchaseOrderReceipt		is Numeric 10
				PrmWareHouse				is Alpha 20
				PrmLineCounter				is Numeric 9
				PrmPONumber					is Numeric 12
				PrmCompany 					is Numeric 9
			Action Rules
				LocalFSMInboundBODTracker 	= PrmInboundTracker
				LocalCompany				= PrmCompany
				LocalPurchaseOrderReceipt	= PrmPurchaseOrderReceipt
				LocalPONumber				= PrmPONumber
				LocalIterator				= PrmLineCounter
				LocalWareHouse				= PrmWareHouse
				LocalLineNumber				= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalIterator>]/PurchaseOrderReference/LineNumber"
				LocalPORelease 				= PurchaseOrderReceiptRel.PORelease
				LocalPOCode 				= PurchaseOrderReceiptRel.POCode
				
				if(PurchaseOrderReceiptLineRel exists)
					LocalOrigRecQty			= PurchaseOrderReceiptLineRel.EnteredReceivedQuantity
					LocalTotalRecQty		= LocalOrigRecQty + LocalQuantity
				else
					LocalTotalRecQty		= LocalQuantity
				if(PurchaseOrderLineRel exists)
					LocalVendorPriceUOM 	= PurchaseOrderLineRel.VendorPriceUOM
				
				invoke Unreleased.Update PurchaseOrderReceiptRel
					resume on error
                   		Error           				= true
                        ErrorMessage   	 				= error message
					invoked.Company 					= LocalCompany
					invoked.PurchaseOrderReceipt		= LocalPurchaseOrderReceipt
					invoked.POCode 						= LocalPOCode
					invoked.PORelease 					= LocalPORelease
					invoked.ReferenceNumber 			= LocalPurchaseOrderReceipt
					
		CreatePOReceiptAdjustmentAndInspection is an Import Action
			restricted			
			Parameters
				ReceiveDeliveryBOD 			is XMLDocument
				PrmInboundTracker   		is like FSMInboundBODTracker
				PrmCompany					is Numeric 9
			Action Rules
				LocalFSMInboundBODTracker 	= PrmInboundTracker
				LocalCompany				= PrmCompany
				LocalReferenceNumber		= PurchaseOrderReceiptLineRel.ReferenceNumber
				LocalPurchaseOrderReceipt   = PurchaseOrderReceiptLineRel.PurchaseOrderReceipt
				
				invoke Unreleased.CreateAdjustment POReceiptAdjustmentAndInspection
					resume on error
                   		Error           				= true
                        ErrorMessage   	 				= error message
					invoked.Company 					= LocalCompany
					invoked.ReferenceNumber 			= LocalReferenceNumber
					invoked.PurchaseOrderReceipt 		= LocalPurchaseOrderReceipt
					invoked.AdjustmentInspectionDocumentType = "RA"
				if(Error)
					invoke SendPRDConfirmBOD
						invoked.PrmErrorMessage 		= ErrorMessage
						invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
						invoked.PrmTrackerID			= LocalFSMInboundBODTracker
						invoked.PrmCompany 				= LocalCompany
					invoke SendPRDACKBOD
	                    invoked.PrmErrorMessage 		= ErrorMessage
	                    invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
	                    invoked.PrmTrackerID			= LocalFSMInboundBODTracker
	                    invoked.PrmAckDocumentID		= LocalPurchaseOrderReceipt
	                    invoked.PrmCompany 				= LocalCompany
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 					= Error
						invoked.ErrorMessage 			= ErrorMessage
						invoked.Status					= 2
						invoked.CloseDate				= system current timestamp			
		
		UpdatePOReceiptAdjustmentAndInspectionLine is an Import Action
			restricted			
			Parameters
				ReceiveDeliveryBOD 			is XMLDocument
				PrmInboundTracker   		is like FSMInboundBODTracker
				PrmLineNumber				is Numeric 9
				PrmQuantity					is Decimal 13.4
				PrmPORInspection			is Numeric 10
				PrmPurchaseOrderReceipt		is Numeric 10
				PrmCompany					is Numeric 9
			Action Rules
				LocalFSMInboundBODTracker 	= PrmInboundTracker
				LocalCompany				= PrmCompany
				LocalLineNumber				= PrmLineNumber
				LocalQuantity				= PrmQuantity
				LocalPORInspection			= PrmPORInspection
				LocalPurchaseOrderReceipt   = PrmPurchaseOrderReceipt
				
				invoke Unreleased.UpdateAdjustment POReceiptAdjustmentAndInspectionLineRel
					resume on error
                   		Error           				= true
                        ErrorMessage   	 				= error message
					invoked.Company 					= LocalCompany
					invoked.PurchaseOrderReceiptLine 	= LocalLineNumber
					invoked.PurchaseOrderReceipt 		= LocalPurchaseOrderReceipt
					invoked.Quantity 					= LocalQuantity
					invoked.POReceiptAdjustmentAndInspection= LocalPORInspection
				if(Error)
					invoke SendPRDConfirmBOD
						invoked.PrmErrorMessage 		= ErrorMessage
						invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
						invoked.PrmTrackerID			= LocalFSMInboundBODTracker
						invoked.PrmCompany 				= LocalCompany
					invoke SendPRDACKBOD
	                    invoked.PrmErrorMessage 		= ErrorMessage
	                    invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
	                    invoked.PrmTrackerID			= LocalFSMInboundBODTracker
	                    invoked.PrmAckDocumentID		= LocalPurchaseOrderReceipt
	                    invoked.PrmCompany 				= LocalCompany
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 					= Error
						invoked.ErrorMessage 			= ErrorMessage
						invoked.Status					= 2
						invoked.CloseDate				= system current timestamp
		
		ReleasePurchaseOrderReceipt is an Import Action
			restricted			
			Parameters
				ReceiveDeliveryBOD 			is XMLDocument
				PrmInboundTracker   		is like FSMInboundBODTracker
				PrmPurchaseOrderReceipt		is Numeric 10
				PrmPONumber					is Numeric 12
				PrmCompany 					is Numeric 9
			Action Rules
				LocalFSMInboundBODTracker 	= PrmInboundTracker
				LocalCompany				= PrmCompany
				LocalPurchaseOrderReceipt	= PrmPurchaseOrderReceipt
				LocalPONumber				= PrmPONumber
				
				invoke Unreleased.Release PurchaseOrderReceiptRel
					resume on error
                   		Error           				= true
                        ErrorMessage   	 				= error message
				if(Error)
					invoke SendPRDConfirmBOD
						invoked.PrmErrorMessage 		= ErrorMessage
						invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
						invoked.PrmTrackerID			= LocalFSMInboundBODTracker
						invoked.PrmCompany 				= LocalCompany
					invoke SendPRDACKBOD
	                    invoked.PrmErrorMessage 		= ErrorMessage
	                    invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
	                    invoked.PrmTrackerID			= LocalFSMInboundBODTracker
	                    invoked.PrmAckDocumentID		= LocalPurchaseOrderReceipt
	                    invoked.PrmCompany 				= LocalCompany
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 					= Error
						invoked.ErrorMessage 			= ErrorMessage
						invoked.Status					= 2
						invoked.CloseDate				= system current timestamp
				else
					invoke Update FSMInboundBODTrackerRel
						invoked.Status					= 3
						invoked.CloseDate				= system current timestamp
					invoke SendPRDACKBOD
                        invoked.PrmErrorMessage 		= "PurchaseOrderReceipt Released Sucessfully"
                        invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
                        invoked.PrmTrackerID			= LocalFSMInboundBODTracker
                        invoked.PrmAckDocumentID		= LocalPurchaseOrderReceipt
                        invoked.PrmCompany 				= LocalCompany
		
		ReleasePOReceiptAdjustmentAndInspection is an Import Action
			restricted			
			Parameters
				ReceiveDeliveryBOD 			is XMLDocument
				PrmInboundTracker   		is like FSMInboundBODTracker
				PrmPORInspection			is Numeric 10
				PrmPurchaseOrderReceipt		is Numeric 10
				PrmCompany 					is Numeric 9
			Action Rules
				LocalFSMInboundBODTracker 	= PrmInboundTracker
				LocalCompany				= PrmCompany
				LocalPORInspection			= PrmPORInspection
				LocalPurchaseOrderReceipt	= PrmPurchaseOrderReceipt
				
				invoke Unreleased.ReleaseAdjustment ReleasePOReceiptAdjustmentAndInspectionRel
					resume on error
                   		Error           				= true
                        ErrorMessage   	 				= error message
				if(Error)
					invoke SendPRDConfirmBOD
						invoked.PrmErrorMessage 		= ErrorMessage
						invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
						invoked.PrmTrackerID			= LocalFSMInboundBODTracker
						invoked.PrmCompany 				= LocalCompany
					invoke SendPRDACKBOD
	                    invoked.PrmErrorMessage 		= ErrorMessage
	                    invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
	                    invoked.PrmTrackerID			= LocalFSMInboundBODTracker
	                    invoked.PrmAckDocumentID		= LocalPurchaseOrderReceipt
	                    invoked.PrmCompany 				= LocalCompany
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 					= Error
						invoked.ErrorMessage 			= ErrorMessage
						invoked.Status					= 2
						invoked.CloseDate				= system current timestamp
				else
					invoke Update FSMInboundBODTrackerRel
						invoked.Status					= 3
						invoked.CloseDate				= system current timestamp
					invoke SendPRDACKBOD
                        invoked.PrmErrorMessage 		= "POReceiptAdjustmentAndInspection Released Sucessfully"
                        invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
                        invoked.PrmTrackerID			= LocalFSMInboundBODTracker
                        invoked.PrmAckDocumentID		= LocalPurchaseOrderReceipt
                        invoked.PrmCompany 				= LocalCompany
		
		CreateInventoryTransaction is an Import Action
			restricted			
			Parameters
				ReceiveDeliveryBOD 			is XMLDocument
				PrmInboundTracker   		is like FSMInboundBODTracker
				PrmWareHouse				is Alpha 20
				PrmCompany					is Numeric 9
			Action Rules
				LocalFSMInboundBODTracker 	= PrmInboundTracker
				LocalCompany				= PrmCompany
				LocalDocumentDateAlpha		= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentDateTime"
				LocalDocumentDate			= LocalDocumentDateAlpha[1:4] + LocalDocumentDateAlpha[6:7] + LocalDocumentDateAlpha[9:10] + LocalDocumentDateAlpha[12:13] + LocalDocumentDateAlpha[15:16] + LocalDocumentDateAlpha[18:19] + "00"
				LocalWareHouse				= PrmWareHouse
				LocalItemCount				= ReceiveDeliveryBOD select "count (//DataArea/ReceiveDelivery/ReceiveDeliveryItem)"
				LocalDocumentID				= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentID/ID"
				
				

				LocalUserAreaCount	=		ReceiveDeliveryBOD select "count (//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/UserArea/Property)"
				LocalIterator = 1
				while (LocalUserAreaCount >= LocalIterator)	
					LocalNameValueID		= 	ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/UserArea/Property[<LocalIterator>]/NameValue/@name"
					LocalNameValue			=	ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/UserArea/Property[<LocalIterator>]/NameValue"						
					if(LocalNameValueID = "fsm.POReceiptIndicator")
						POReceiptIndicator  = LocalNameValue						
					LocalIterator = LocalIterator + 1

				
				if(DerivedDefaultCreditCodeBlock = "Y" and POReceiptIndicator ="IC")
					LocalDocumentDateAlpha		= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/ActualDeliveryDateTime"				
					LocalDocumentDate			= LocalDocumentDateAlpha[1:4] + LocalDocumentDateAlpha[6:7] + LocalDocumentDateAlpha[9:10] + LocalDocumentDateAlpha[12:13] + LocalDocumentDateAlpha[15:16] + LocalDocumentDateAlpha[18:19] + "00"					
					
				if(DerivedDefaultCreditCodeBlock = "Y" and POReceiptIndicator ="IC")
					invoke Unreleased.Create InventoryTransaction
						assign result to NewInventoryTransaction
						resume on error
							Error           								= true
							ErrorMessage   	 								= error message
						invoked.Company 									= LocalCompany
						invoked.InventoryLocation 							= LocalWareHouse
						invoked.TransactionDate 							= LocalDocumentDate
						invoked.InventoryDocumentType 						= "RC"
						invoked.Reference1    								= LocalDocumentID
					
				else
					invoke Unreleased.Create InventoryTransaction
						assign result to NewInventoryTransaction
						resume on error
							Error           								= true
							ErrorMessage   	 								= error message
						invoked.Company 									= LocalCompany
						invoked.InventoryLocation 							= LocalWareHouse
						invoked.TransactionDate 							= LocalDocumentDate
						invoked.InventoryDocumentType 						= "IS"
						invoked.FromToCompanyLocation.FromToCompany 		= LocalCompany
						invoked.FromToCompanyLocation.FromToLocation		= LocalWareHouse
						invoked.FromToCompanyLocation.RequestingLocation 	= LocalWareHouse
				if(Error)
					invoke SendPRDConfirmBOD
						invoked.PrmErrorMessage 		= ErrorMessage
						invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
						invoked.PrmTrackerID			= LocalFSMInboundBODTracker
						invoked.PrmCompany 				= LocalCompany
					invoke SendPRDACKBOD
	                    invoked.PrmErrorMessage 		= ErrorMessage
	                    invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
	                    invoked.PrmTrackerID			= LocalFSMInboundBODTracker
	                    invoked.PrmAckDocumentID		= LocalDocumentID
	                    invoked.PrmCompany 				= LocalCompany
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 					= Error
						invoked.ErrorMessage 			= ErrorMessage
						invoked.Status					= 2
						invoked.CloseDate				= system current timestamp
				else
					LocalInventoryTransaction 			= NewInventoryTransaction.InventoryTransaction
					if(LocalItemCount > 0)
						invoke CreateInventoryTransactionLine
							invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
							invoked.PrmInboundTracker		= LocalFSMInboundBODTracker
							invoked.PrmWareHouse			= LocalWareHouse
							invoked.PrmInventoryTransaction = LocalInventoryTransaction
							invoked.PrmCompany 				= LocalCompany
							invoked.PrmPOReceiptIndicator	= POReceiptIndicator
					else
						invoke Unreleased.Delete InventoryTransactionRel
						invoke SendPRDConfirmBOD
							invoked.PrmErrorMessage 		= "InventoryTransaction has no Lines"
							invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
							invoked.PrmTrackerID			= LocalFSMInboundBODTracker
							invoked.PrmCompany 				= LocalCompany
						invoke SendPRDACKBOD
		                    invoked.PrmErrorMessage 		= "InventoryTransaction has no Lines"
		                    invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
		                    invoked.PrmTrackerID			= LocalFSMInboundBODTracker
		                    invoked.PrmAckDocumentID		= LocalInventoryTransaction
		                    invoked.PrmCompany 				= LocalCompany
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 					= true
							invoked.ErrorMessage 			= "InventoryTransaction has no Lines"
							invoked.Status					= 2
							invoked.CloseDate				= system current timestamp
								
		CreateInventoryTransactionLine is an Import Action
			restricted			
			Parameters
				ReceiveDeliveryBOD 			is XMLDocument
				PrmInboundTracker   		is like FSMInboundBODTracker
				PrmWareHouse				is Alpha 20
				PrmInventoryTransaction		is Numeric 10
				PrmCompany					is Numeric 9
				PrmPOReceiptIndicator		is Alpha 20	
				
			Local Fields
				LocalLine 					is XMLDocument
			Action Rules
				LocalFSMInboundBODTracker 	= PrmInboundTracker
				LocalInventoryTransaction	= PrmInventoryTransaction
				LocalWareHouse				= PrmWareHouse
				LocalGenericDelimiter		= DerivedGenericDelimiter
				LocalCompany				= PrmCompany
				LocalItemCount				= ReceiveDeliveryBOD select "count (//DataArea/ReceiveDelivery/ReceiveDeliveryItem)"
				LocalLineCounter			= 1
				LocalLinesAdded				= 1
				POReceiptIndicator			= PrmPOReceiptIndicator
				
				while(LocalItemCount >= LocalLineCounter)
					LocalLine					= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalLineCounter>]"
					LocalNativeItem				= LocalLine select "/ReceiveDeliveryItem/ItemID/ID"
					LocalQuantity				= LocalLine select "/ReceiveDeliveryItem/ReceivedQuantity"
					LocalTotalRecQty			= LocalQuantity * -1
					LocalTransactionUOM			= LocalLine select "/ReceiveDeliveryItem/ReceivedQuantity/@unitCode"
					LocalClassificationLength	= LocalLine select "count (/ReceiveDeliveryItem/Classification/Codes/Code)"
					LocalUnitCost				= 5
					if(DerivedConfigDocID = "Y")
						LocalItem				= LocalNativeItem	
					else
						LocalItem				= NativeItem
					initialize LocalChartAccount
					initialize LocalAccountingUnit
					initialize LocalAccount
					initialize LocalCreditCodeAE						
					initialize LocalCreditCodeAccountingUnit			
					initialize LocalCreditCodeGLCAccount				
					initialize LocalCreditCodeProject					
					initialize LocalCreditCodefsmDimension1			
					initialize LocalCreditCodefsmDimension2			
					initialize LocalCreditCodefsmDimension3			
					initialize LocalCreditCodefsmDimension4			
					initialize LocalCreditCodefsmDimension5			
					initialize LocalCreditCodefsmDimension6			
					initialize LocalCreditCodefsmDimension7			
					initialize LocalCreditCodefsmDimension8			
					initialize LocalCreditCodefsmDimension9			
					initialize LocalCreditCodefsmDimension10			
					initialize LocalInvLineRef							
			
					LocalLoop = 1
					while (LocalClassificationLength >= LocalLoop) 			
						LocalNameValueID	= LocalLine select "/ReceiveDeliveryItem/Classification/Codes/Code[<LocalLoop>]/@listID"
						LocalNameValue		= LocalLine select "/ReceiveDeliveryItem/Classification/Codes/Code[<LocalLoop>]"
						if(LocalNameValueID = "Cost Centers")
							LocalAccount	= LocalNameValue	
						LocalLoop = LocalLoop + 1
					
					LocalNativeAccount	= LocalAccount
					if(LocalAccount entered)
						LocalAccount = NativeAccount
					else
						LocalChartAccount   = ""
						LocalAccountingUnit = ""
					
					
					if(DerivedDefaultCreditCodeBlock = "Y" and POReceiptIndicator ="IC")
						LocalUserAreaCount			= LocalLine select "count (/ReceiveDeliveryItem/UserArea/Property)"
						LocalIterator = 1
						while (LocalUserAreaCount >= LocalIterator)
							LocalNameValueID	=	LocalLine select "/ReceiveDeliveryItem/UserArea/Property[<LocalIterator>]/NameValue/@name"
							LocalNameValue		=	LocalLine select "/ReceiveDeliveryItem/UserArea/Property[<LocalIterator>]/NameValue"
							
							if(LocalNameValueID = "fsm.AccountingEntity")
								LocalCreditCodeAE  = LocalNameValue								
							else
							if(LocalNameValueID = "fsm.AccountingUnit")
								LocalCreditCodeAccountingUnit  = LocalNameValue								
							else
							if(LocalNameValueID = "fsm.Account")
								LocalCreditCodeGLCAccount      = LocalNameValue								
							else
							if(LocalNameValueID = "fsm.Project")
								LocalCreditCodeProject    = LocalNameValue								
							else
							if(LocalNameValueID = "fsm.Finance 1 Dimensions")
								LocalCreditCodefsmDimension1  = LocalNameValue								
							else
							if(LocalNameValueID = "fsm.Finance 2 Dimensions")
								LocalCreditCodefsmDimension2  = LocalNameValue								
							else
							if(LocalNameValueID = "fsm.Finance 3 Dimensions")
								LocalCreditCodefsmDimension3  = LocalNameValue								
							else
							if(LocalNameValueID = "fsm.Finance 4 Dimensions")
								LocalCreditCodefsmDimension4  = LocalNameValue								
							else
							if(LocalNameValueID = "fsm.Finance 5 Dimensions")
								LocalCreditCodefsmDimension5  = LocalNameValue								
							else
							if(LocalNameValueID = "fsm.Finance 6 Dimensions")
								LocalCreditCodefsmDimension6  = LocalNameValue								
							else
							if(LocalNameValueID = "fsm.Finance 7 Dimensions")
								LocalCreditCodefsmDimension7  = LocalNameValue								
							else
							if(LocalNameValueID = "fsm.Finance 8 Dimensions")
								LocalCreditCodefsmDimension8  = LocalNameValue								
							else
							if(LocalNameValueID = "fsm.Finance 9 Dimensions")
								LocalCreditCodefsmDimension9  = LocalNameValue								
							else
							if(LocalNameValueID = "fsm.Finance 10 Dimensions")
								LocalCreditCodefsmDimension10	= LocalNameValue								
							else
							if(LocalNameValueID = "IPSReference")
								LocalInvLineRef  = LocalNameValue
								
							LocalIterator = LocalIterator + 1														
					
					if(DerivedDefaultCreditCodeBlock = "Y" and POReceiptIndicator ="IC")
						invoke Unreleased.Create InventoryTransactionLine
							assign result to NewInventoryTransactionLine
							resume on error
								Error           							= 	true
								ErrorMessage   	 							= 	error message
							invoked.Company 								=	LocalCompany
							invoked.InventoryLocation 						=	LocalWareHouse
							invoked.InventoryTransaction 					=	LocalInventoryTransaction
							invoked.Item 									=	LocalItem
							invoked.Reference								=	LocalInvLineRef
							invoked.TransactionUOM							=	LocalTransactionUOM
							invoked.OffsetAccount.ToAccountingEntity		=	LocalCreditCodeAE
							invoked.OffsetAccount.AccountingUnit			=	LocalCreditCodeAccountingUnit
							invoked.OffsetAccount.GeneralLedgerChartAccount	=	LocalCreditCodeGLCAccount
							invoked.OffsetAccount.Project					=	LocalCreditCodeProject
							invoked.OffsetAccount.FinanceDimension1			=	LocalCreditCodefsmDimension1
							invoked.OffsetAccount.FinanceDimension2			=	LocalCreditCodefsmDimension2
							invoked.OffsetAccount.FinanceDimension3			=	LocalCreditCodefsmDimension3
							invoked.OffsetAccount.FinanceDimension4			=	LocalCreditCodefsmDimension4
							invoked.OffsetAccount.FinanceDimension5			=	LocalCreditCodefsmDimension5
							invoked.OffsetAccount.FinanceDimension6			=	LocalCreditCodefsmDimension6
							invoked.OffsetAccount.FinanceDimension7			=	LocalCreditCodefsmDimension7
							invoked.OffsetAccount.FinanceDimension8			=	LocalCreditCodefsmDimension8
							invoked.OffsetAccount.FinanceDimension9			=	LocalCreditCodefsmDimension9
							invoked.OffsetAccount.FinanceDimension10		=	LocalCreditCodefsmDimension10
							invoked.TransientQuantityValue					=	LocalQuantity
							invoked.TransactionSystemCode					=	"IC"
					else
						invoke Unreleased.Create InventoryTransactionLine
							assign result to NewInventoryTransactionLine
							resume on error
								Error           							= true
								ErrorMessage   	 							= error message
							invoked.Company 								= LocalCompany
							invoked.InventoryLocation 						= LocalWareHouse
							invoked.InventoryTransaction 					= LocalInventoryTransaction
							invoked.Item 									= LocalItem
							invoked.Quantity 								= LocalTotalRecQty
							invoked.TransactionUOM							= LocalTransactionUOM
							invoked.OffsetAccount.GeneralLedgerChartAccount = LocalChartAccount
							invoked.OffsetAccount.AccountingUnit			= LocalAccountingUnit
							invoked.UnitCost								= LocalUnitCost
							invoked.TransactionSystemCode					= "IC"	
					if(Error)
						invoke SendPRDConfirmBOD
							invoked.PrmErrorMessage 		= ErrorMessage
							invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
							invoked.PrmTrackerID			= LocalFSMInboundBODTracker
							invoked.PrmCompany 				= LocalCompany
						invoke SendPRDACKBOD
		                    invoked.PrmErrorMessage 		= ErrorMessage
		                    invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
		                    invoked.PrmTrackerID			= LocalFSMInboundBODTracker
		                    invoked.PrmAckDocumentID		= LocalInventoryTransaction
		                    invoked.PrmCompany 				= LocalCompany
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 					= Error
							invoked.ErrorMessage 			= ErrorMessage
							invoked.Status					= 2
							invoked.CloseDate				= system current timestamp
						LocalLineCounter = LocalItemCount + 1		
					else
						LocalLinesAdded  	= LocalLinesAdded + 1
						LocalLotCounter  	= 1 
						LocalLotAdded 		= 1
						LocalLotCount	 	= LocalLine select "count (/ReceiveDeliveryItem/SerializedLot)"
						LocalITLineNumber 	= NewInventoryTransactionLine.InventoryTransactionLine.LineNumber
						
						while(LocalLotCount >= LocalLotCounter)
							LocalLot			= LocalLine select "/ReceiveDeliveryItem/SerializedLot[<LocalLotCounter>]/Lot/LotIDs/ID"
							LocalLotQuantity	= LocalLine select "/ReceiveDeliveryItem/SerializedLot[<LocalLotCounter>]/ItemQuantity"
							
							invoke Unreleased.Create InventoryTransactionLineDetail
								resume on error
									Error           								= true
									ErrorMessage   	 								= error message
								invoked.Company 									= LocalCompany
								invoked.InventoryLocation 							= LocalWareHouse
								invoked.InventoryTransaction 						= LocalInventoryTransaction
								invoked.TransactionSystemCode 						= "IC"
								invoked.Lot 										= LocalLot
								invoked.Quantity									= LocalLotQuantity
								invoked.InventoryTransactionLine.WarehouseShipment 	= LocalWareHouse
								invoked.InventoryTransactionLine.LineNumber			= LocalITLineNumber
							if(Error)
								invoke SendPRDConfirmBOD
									invoked.PrmErrorMessage 		= ErrorMessage
									invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
									invoked.PrmTrackerID			= LocalFSMInboundBODTracker
									invoked.PrmCompany 				= LocalCompany
								invoke SendPRDACKBOD
				                    invoked.PrmErrorMessage 		= ErrorMessage
				                    invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
				                    invoked.PrmTrackerID			= LocalFSMInboundBODTracker
				                    invoked.PrmAckDocumentID		= LocalInventoryTransaction
				                    invoked.PrmCompany 				= LocalCompany
								invoke Update FSMInboundBODTrackerRel
									invoked.Error 					= Error
									invoked.ErrorMessage 			= ErrorMessage
									invoked.Status					= 2
									invoked.CloseDate				= system current timestamp
								LocalLotCounter  = LocalLotCount + 1
								LocalLineCounter = LocalItemCount + 1
							else
								LocalLotCounter 	= LocalLotCounter + 1
								LocalLotAdded		= LocalLotAdded + 1
								if (LocalLotCounter%20 = 0)
									commit transaction
						LocalLineCounter = LocalLineCounter + 1
						if (LocalLineCounter%20 = 0)
							commit transaction
				
				if((LocalLineCounter = LocalLinesAdded) and (LocalLotCounter = LocalLotAdded))
					invoke ReleaseInventoryTransaction
						invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
						invoked.PrmInboundTracker		= LocalFSMInboundBODTracker
						invoked.PrmWareHouse			= LocalWareHouse
						invoked.PrmInventoryTransaction = LocalInventoryTransaction	
						invoked.PrmCompany 				= LocalCompany
						invoked.PrmPOReceiptIndicator	= POReceiptIndicator
						
				else
					invoke Unreleased.Delete InventoryTransactionRel
					invoke SendPRDConfirmBOD
						invoked.PrmErrorMessage 		= "InventoryTransactionLine or InventoryTransactionLineDetail has Errors"
						invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
						invoked.PrmTrackerID			= LocalFSMInboundBODTracker
						invoked.PrmCompany 				= LocalCompany
					invoke SendPRDACKBOD
	                    invoked.PrmErrorMessage 		= "InventoryTransactionLine or InventoryTransactionLineDetail has Errors"
	                    invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
	                    invoked.PrmTrackerID			= LocalFSMInboundBODTracker
	                    invoked.PrmAckDocumentID		= LocalInventoryTransaction
	                    invoked.PrmCompany 				= LocalCompany
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 					= true
						invoked.ErrorMessage 			= "InventoryTransactionLine or InventoryTransactionLineDetail has Errors"
						invoked.Status					= 2
						invoked.CloseDate				= system current timestamp
									
		ReleaseInventoryTransaction is an Import Action
			restricted			
			Parameters
				ReceiveDeliveryBOD 			is XMLDocument
				PrmInboundTracker   		is like FSMInboundBODTracker
				PrmWareHouse				is Alpha 20
				PrmInventoryTransaction		is Numeric 10
				PrmCompany 					is Numeric 9
				PrmPOReceiptIndicator		is Alpha 20	
				
			Local Fields
				LocalLine 					is XMLDocument
			Action Rules
				LocalFSMInboundBODTracker 	= PrmInboundTracker
				LocalInventoryTransaction	= PrmInventoryTransaction
				LocalWareHouse				= PrmWareHouse
				LocalCompany				= PrmCompany
				POReceiptIndicator			= PrmPOReceiptIndicator
				invoke Unreleased.Release InventoryTransactionRel
					resume on error
						Error           	= true
						ErrorMessage   	 	= error message
				if(Error)
					invoke SendPRDConfirmBOD
						invoked.PrmErrorMessage 		= ErrorMessage
						invoked.ReceiveDeliveryBOD      = ReceiveDeliveryBOD
						invoked.PrmTrackerID			= LocalFSMInboundBODTracker
						invoked.PrmCompany 				= LocalCompany
					invoke SendPRDACKBOD
	                    invoked.PrmErrorMessage 		= ErrorMessage
	                    invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
	                    invoked.PrmTrackerID			= LocalFSMInboundBODTracker
	                    invoked.PrmAckDocumentID		= LocalInventoryTransaction
	                    invoked.PrmCompany 				= LocalCompany
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 					= Error
						invoked.ErrorMessage 			= ErrorMessage
						invoked.Status					= 2
						invoked.CloseDate				= system current timestamp	
				else
					invoke SendPRDACKBOD
                        invoked.PrmErrorMessage 		= "InventoryTransaction Released Sucessfully"
                        invoked.ReceiveDeliveryBOD     	= ReceiveDeliveryBOD
                        invoked.PrmTrackerID			= LocalFSMInboundBODTracker
                        invoked.PrmAckDocumentID		= LocalInventoryTransaction
                        invoked.PrmCompany 				= LocalCompany
						invoked.PrmPOReceiptIndicator	= POReceiptIndicator
						invoked.PrmWareHouse			= LocalWareHouse
						invoked.PrmInventoryTransaction = LocalInventoryTransaction						
					invoke Update FSMInboundBODTrackerRel
						invoked.Status					= 3
						invoked.CloseDate				= system current timestamp
					
		SendPRDConfirmBOD is an Instance Action
			restricted			
			Parameters
				ReceiveDeliveryBOD 						is XMLDocument
				PrmErrorMessage 						is Alpha 300
				PrmTrackerID							is Numeric 15
				PrmCompany								is Numeric 9
			Action Rules
				LocalErrorMessage						= PrmErrorMessage
				LocalTrackerID							= PrmTrackerID
				LocalCompany							= PrmCompany
				LocalPReceiveDeliveryXML				= ReceiveDeliveryBOD
				LocalFromLogicalID						= ReceiveDeliveryBOD select "//ApplicationArea/Sender/LogicalID"
				LocalComponentID						= ReceiveDeliveryBOD select "//ApplicationArea/Sender/ComponentID"
				LocalBODID								= ReceiveDeliveryBOD select "//ApplicationArea/BODID"
				LocalOriginalDateTime					= ReceiveDeliveryBOD select "//ApplicationArea/CreationDateTime"
				LocalAccountingEntity					= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentID/ID/@accountingEntity"
				LocalDocumentID							= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentID/ID"
				LocalConfirmBOD							= "true"
				LocalMainUserTemplate					= "IONProcessReceiveDelivery_ConfirmBOD_ST"
				if(UserTemplateRel exists)
					send ion bod
						bod is ProcessReceiveDeliveryConfirmBODXML
						bod type is "Confirm.BOD"
						accounting entity is LocalAccountingEntity
						document id is LocalDocumentID
		
		SendPRDACKBOD is an Instance Action
			restricted			
			Parameters
				ReceiveDeliveryBOD 						is XMLDocument
				PrmErrorMessage 						is Alpha 300
				PrmTrackerID							is Numeric 15
				PrmAckDocumentID						is Alpha 100
				PrmCompany								is Numeric 9
				PrmPOReceiptIndicator					is Alpha 20
				PrmWareHouse							is Alpha 20
				PrmInventoryTransaction					is Numeric 10				
			Action Rules
				LocalErrorMessage						= PrmErrorMessage
				LocalTrackerID							= PrmTrackerID
				LocalAckDocumentID						= PrmAckDocumentID
				LocalCompany							= PrmCompany
				POReceiptIndicator						= PrmPOReceiptIndicator
				LocalInventoryTransaction				= PrmInventoryTransaction
				LocalWareHouse							= PrmWareHouse				
				LocalFromLogicalID						= ReceiveDeliveryBOD select "//ApplicationArea/Sender/LogicalID"
				LocalComponentID						= ReceiveDeliveryBOD select "//ApplicationArea/Sender/ComponentID"
				LocalBODID								= ReceiveDeliveryBOD select "//ApplicationArea/BODID"
				LocalTaskID								= ReceiveDeliveryBOD select "//ApplicationArea/Sender/TaskID"
				LocalReferenceID						= ReceiveDeliveryBOD select "//ApplicationArea/Sender/ReferenceID"
				LocalConfirmationCode					= ReceiveDeliveryBOD select "//ApplicationArea/Sender/ConfirmationCode"
				LocalAuthorizationID					= ReceiveDeliveryBOD select "//ApplicationArea/Sender/AuthorizationID"
				LocalOriginalDateTime					= ReceiveDeliveryBOD select "//ApplicationArea/CreationDateTime"
				LocalDocumentID							= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentID/ID"
				LocalAccountingEntity					= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentID/ID/@accountingEntity"
				LocalMainUserTemplate					= "IONProcessReceiveDelivery_AcknowledgeBOD_ST"
				if(LocalAckDocumentID entered)
					LocalAckDocumentID = LocalAckDocumentID
				else
					LocalAckDocumentID = LocalDocumentID 
					
				if(DerivedDefaultCreditCodeBlock = "Y" and POReceiptIndicator ="IC")
					if (InventoryTransactionLineRel exists)
						initialize BODLineCount
						for each InventoryTransactionLineRel
							BODLineCount +=1
							INVLineNum = BODLineCount
							InvLineQuantity = each.TransientQuantityValue
							InvLineUnitCost = each.TransientUnitCostValue
							LocalInvLineRef = each.Reference
							ProcessReceiveDeliveryLineAckXML += template.IONProcessReceiveDeliveryLine_AcknowledgeBOD_ST document for this instance	
					else
						initialize ProcessReceiveDeliveryLineAckXML

				if(UserTemplateRel exists)
					send ion bod
						bod is ProcessReceiveDeliveryAcknowledgeBODXML
						bod type is "Acknowledge.ReceiveDelivery"
						accounting entity is LocalAccountingEntity
						document id is LocalDocumentID
#endif
#endif


#ifdef module wh
		SyncShipmentBODImport is an Import Action
			restricted
			bod type is Sync.Shipment
			Parameters
				ShipmentBOD 	is XMLDocument
            Action Rules	
            	LocalShipLocation	 	= ShipmentBOD select "//DataArea/Sync/LocationID"
            	LocalGenericDelimiter	= DerivedGenericDelimiter
            	LocalNativeCompany		= NativeShipCompany
            	LocalCompany			= LocalCompany
            	LocalLocation			= LocalLocation
            	LocalBODID				= ShipmentBOD select "//ApplicationArea/BODID"
            	LocalBODXML				= ShipmentBOD
            	LocalShipDocID  		= ShipmentBOD select "//DataArea/Shipment/ShipmentHeader/DocumentID/ID"
            	LocalVariationID 		= ShipmentBOD select "//DataArea/Shipment/ShipmentHeader/DocumentID/ID/@variationID"
            	LocalaccountingEntity 	= ShipmentBOD select "//DataArea/Sync/AccountingEntityID"
            	LocalAccountingEntity   = ShipmentBOD select "//DataArea/Shipment/ShipmentHeader/DocumentID/ID/@accountingEntity"
            	LocalPOString			= ShipmentBOD select "//DataArea/Shipment/ShipmentItem/PurchaseOrderReference/DocumentID/ID"
            	LocalReferenceID		= ShipmentBOD select "//DataArea/Shipment/ShipmentHeader/DocumentID/ID"
            	if(LocalGenericDelimiter not entered)
					LocalGenericDelimiter = "-"
					
				if(DerivedConfigDocID  = "Y")
					LocalLocation	 = ShipmentBOD select "//DataArea/Sync/LocationID"
				else
					LocalCompany	 = LocalNativeCompany
					LocalLocation	 = LocalLocation
				
				if(DerivedConfigDocID  = "Y")
					if(DESTAEVSCSFGLCCleanDocIDRel.DestinationValue entered)	
						LocalAccountingEntityID	= DESTAEVSCSFGLCCleanDocIDRel.DestinationValue
					else
						LocalAccountingEntityID	= LocalaccountingEntity
					if(DerivedConfigFEG != "Y")
						LocalShipmentCompany		= LocalAccountingEntityID
					else
					if(DerivedConfigFEG	= "Y")
						LocalShipmentCompany		= NativeShipmentCompany
					LocalCompany					= LocalShipmentCompany
            	
            	if(FSMBODConfigurationSyncShipmentRel exists and FSMBODConfigurationSyncShipmentRel.Enable)	
					if(FSMInboundBODTracker not entered)
						invoke Create FSMInboundBODTracker
							assign result to NewBODTracker
							invoked.Verb 					= 1
							invoked.Noun 					= "Shipment"
							invoked.Direction				= 2					
							invoked.Company					= LocalCompany
							invoked.BODDocumentID			= LocalShipDocID
							invoked.BODVariationID			= LocalVariationID
							invoked.BODLocation				= LocalLocation
							invoked.BODID					= LocalBODID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							invoked.BODAccountingEntity		= LocalAccountingEntity
							initialize invoked.Error			
							initialize invoked.ErrorMessage
	            		LocalFSMInboundBODTracker 			= NewBODTracker.FSMInboundBODTracker
	            	else
						LocalFSMInboundBODTracker = FSMInboundBODTracker
						invoke Update FSMInboundBODTrackerRel
							invoked.Company					= LocalCompany
							invoked.BODDocumentID			= LocalShipDocID
							invoked.BODVariationID			= LocalVariationID
							invoked.BODLocation				= LocalLocation
							invoked.BODID					= LocalBODID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							invoked.BODAccountingEntity		= LocalAccountingEntity
							initialize invoked.Error			
							initialize invoked.ErrorMessage
	            	
	            	LocalDocReference	= ShipmentBOD select "//DataArea/Shipment/ShipmentHeader/DocumentReference"
	            	if(LocalDocReference not entered)
						invoke Update FSMInboundBODTrackerRel
							invoked.Status						= 3
							invoked.CloseDate					= system current timestamp
	            	else
	            		LocalShipmentStatus				= ShipmentBOD select "//DataArea/Shipment/ShipmentHeader/Status/Code"
						LocalDocType					= ShipmentBOD select "//DataArea/Shipment/ShipmentHeader/DocumentReference/@type"		
	            		LocalAlterDocId					= ShipmentBOD select "//DataArea/Shipment/ShipmentHeader/AlternateDocumentID"
	            		if(LocalAlterDocId not entered)
	            			initialize LocalShipmentNumber
							if ((LocalShipmentStatus = "Shipped" and  LocalDocType = "SupplierRMA" and LocalShipmentNumber not entered) or (LocalShipmentStatus = "Canceled" and LocalDocType = "SupplierRMA" and LocalShipmentNumber not entered))
								if (DerivedConfigDocID  = "Y")
									LocalPONumber		= LocalPOString
								else 
								if (LocalPOString entered)
									LocalCounter = 1
									for each LocalPOString split on "<DerivedGenericDelimiter>"
										if (LocalCounter = 1)
											LocalPOCompany = each
										else
											LocalPONumber = each
										LocalCounter = LocalCounter + 1
									LocalCompany		= LocalPOCompany
									LocalPONumber		= LocalPONumber
									
								if (LocalPONumber not entered)
									invoke Update FSMInboundBODTrackerRel
										invoked.Error 									= Error
										invoked.ErrorMessage 							= "PO Reference Number not found"
										invoked.Status									= 2
										invoked.CloseDate								= system current timestamp
									invoke SendShipmentConfirmBOD
										invoked.ShipmentBOD				= ShipmentBOD			
										invoked.PrmCompany				= LocalCompany
										invoked.PrmLocation				= LocalLocation
										invoked.PrmTrackerID			= LocalFSMInboundBODTracker
										invoked.PrmHDReturnMsg			= "PO Reference Number not found"
								else
								if (VendorReturnRel exists)
									LocalReturnNumber		= VendorReturnRel.VendorReturn
									LocalIterator			= 1
									LocalVendorReturnLine	= 1
									if(VendorReturnLineRel exists)
										LocalReturnLineNumber	= ShipmentBOD select "count(//DataArea/Shipment/ShipmentItem)"
										while(LocalReturnLineNumber >= LocalIterator)
											LocalReturnLineUOM		  = ShipmentBOD select "//DataArea/Shipment/ShipmentItem[<LocalIterator>]/ShippedQuantity/@unitCode"
											LocalLineNumber			  = ShipmentBOD select "//DataArea/Shipment/ShipmentItem[<LocalIterator>]/LineNumber"
											LocalReturnedItemQuantity = ShipmentBOD select "//DataArea/Shipment/ShipmentItem[<LocalIterator>]/ShippedQuantity"
											if(LocalReturnedItemQuantity = 0)
												LocalLineFC 	= "D"
											else
												LocalLineFC		= "C"
											if(LocalLineNumber entered)
												LocalLineNumber = LocalLineNumber/10
											if(VendorReturnLineRelation exists)
												LocalDescription		  = VendorReturnLineRelation.Description
												LocalItemType			  = VendorReturnLineRelation.ItemType
												LocalUnitCost			  = VendorReturnLineRelation.UnitCost
												invoke Update VendorReturnLineRelation
													resume on error
														Error            				= true
														ErrorMessage     				= error message
													invoked.Company 					= LocalCompany
													invoked.VendorReturn				= LocalReturnNumber
													invoked.VendorReturnLine			= LocalLineNumber
													invoked.ReturnQuantity				= LocalReturnedItemQuantity
													invoked.EnteredUOM					= LocalReturnLineUOM
													invoked.Description					= LocalDescription
													invoked.ItemType					= LocalItemType
													invoked.UnitCost					= LocalUnitCost
												if(Error)
													invoke Update FSMInboundBODTrackerRel
														invoked.Error 									= Error
														invoked.ErrorMessage 							= ErrorMessage
														invoked.Status									= 2
														invoked.CloseDate								= system current timestamp
													invoke SendShipmentConfirmBOD
														invoked.ShipmentBOD				= ShipmentBOD			
														invoked.PrmCompany				= LocalCompany
														invoked.PrmLocation				= LocalLocation
														invoked.PrmTrackerID			= LocalFSMInboundBODTracker
														invoked.PrmHDReturnMsg			= ErrorMessage
											LocalIterator = LocalIterator + 1				
											
									LocalStatus	= VendorReturnRel.Status
									if(LocalStatus = 0 or LocalStatus = 1)
										if(LocalStatus = 0 or LocalStatus not entered)
											invoke Added.Authorize VendorReturnRel
												resume on error
													Error            				= true
													ErrorMessage     				= error message
											if(Error)
												invoke Update FSMInboundBODTrackerRel
													invoked.Error 					= Error
													invoked.ErrorMessage 			= ErrorMessage
													invoked.Status					= 2
													invoked.CloseDate				= system current timestamp
												invoke SendShipmentConfirmBOD
													invoked.ShipmentBOD				= ShipmentBOD			
													invoked.PrmCompany				= LocalCompany
													invoked.PrmLocation				= LocalLocation
													invoked.PrmTrackerID			= LocalFSMInboundBODTracker
													invoked.PrmHDReturnMsg			= ErrorMessage
											else
												LocalStatus	= VendorReturnRel.Status
												
										if(LocalStatus = 1)
											invoke AuthorizedByVendor.Ship VendorReturnRel
												resume on error
													Error            				= true
													ErrorMessage     				= error message
											if(Error)
												invoke Update FSMInboundBODTrackerRel
													invoked.Error 									= Error
													invoked.ErrorMessage 							= ErrorMessage
													invoked.Status									= 2
													invoked.CloseDate								= system current timestamp
												invoke SendShipmentConfirmBOD
													invoked.ShipmentBOD				= ShipmentBOD			
													invoked.PrmCompany				= LocalCompany
													invoked.PrmLocation				= LocalLocation
													invoked.PrmTrackerID			= LocalFSMInboundBODTracker
													invoked.PrmHDReturnMsg			= ErrorMessage
											else
												invoke Update FSMInboundBODTrackerRel
													invoked.Status					= 3
													invoked.CloseDate				= system current timestamp
												
									else
										invoke Update FSMInboundBODTrackerRel
											invoked.Error 					= Error
											invoked.ErrorMessage 			= "Vendor Return already in closed or shipped state"
											invoked.Status					= 2
											invoked.CloseDate				= system current timestamp
										invoke SendShipmentConfirmBOD
											invoked.ShipmentBOD				= ShipmentBOD			
											invoked.PrmCompany				= LocalCompany
											invoked.PrmLocation				= LocalLocation
											invoked.PrmTrackerID			= LocalFSMInboundBODTracker
											invoked.PrmHDReturnMsg			= "Vendor Return already in closed or shipped state"
												
								else
									invoke Update FSMInboundBODTrackerRel
										invoked.Error 					= Error
										invoked.ErrorMessage 			= "Vendor Return Number not found"
										invoked.Status					= 2
										invoked.CloseDate				= system current timestamp
									invoke SendShipmentConfirmBOD
										invoked.ShipmentBOD				= ShipmentBOD			
										invoked.PrmCompany				= LocalCompany
										invoked.PrmLocation				= LocalLocation
										invoked.PrmTrackerID			= LocalFSMInboundBODTracker
										invoked.PrmHDReturnMsg			= "Vendor Return Number not found"
							else
								invoke Update FSMInboundBODTrackerRel
									invoked.Status						= 3
									invoked.CloseDate					= system current timestamp
										
	            		else
	            			if(DerivedConfigDocID  = "Y")
	            				LocalShipmentNumber				= ShipmentBOD select "//DataArea/Shipment/ShipmentHeader/AlternateDocumentID/ID"
	            			else
		            			LocalDocNumber					= ShipmentBOD select "//DataArea/Shipment/ShipmentHeader/AlternateDocumentID/ID"
		            			LocalShipmentNumber				= NativeShipmentNumber   
	            			if(LocalDocType = "SalesOrder" or LocalDocType = "Shipment")
	            				LocalDocTypeBoolean = true
	            			else
	            				LocalDocTypeBoolean = false
	            				
	            			if((LocalShipmentStatus = "Shipped" and  LocalDocTypeBoolean and LocalShipmentNumber entered) or (LocalShipmentStatus = "Canceled" and LocalDocTypeBoolean and LocalShipmentNumber entered))
								if(WarehouseShipmentRel not exists or WarehouseShipmentRel.Status >= 3)
	            					if(WarehouseShipmentRel.Status > 3)
	            						LocalHDreturnCode = "1"
										LocalReturnCode = LocalHDreturnCode
										LocalHDreturnMsg = "Shipment has been released; cannot maintain"
	            					else
	            						LocalHDreturnCode = "1" 
										LocalHDreturnMsg = "Shipment does not exist"
										LocalReturnCode = LocalHDreturnCode
	            					if(LocalHDreturnCode not entered and LocalLNreturnCode not entered and LocalDTreturnCode not entered)
										invoke Update FSMInboundBODTrackerRel
											invoked.Status						= 3
											invoked.CloseDate					= system current timestamp	
	            					else
	            						invoke SendShipmentConfirmBOD
	            							invoked.ShipmentBOD				= ShipmentBOD			
	            							invoked.PrmCompany				= LocalCompany
	            							invoked.PrmLocation				= LocalLocation
	            							invoked.PrmTrackerID			= LocalFSMInboundBODTracker
	            							invoked.PrmHDReturnMsg			= LocalHDreturnMsg
	            						
	            						invoke Update FSMInboundBODTrackerRel
											invoked.Error 						= true
											invoked.ErrorMessage 				= LocalHDreturnMsg
											invoked.Status						= 2
											invoked.CloseDate					= system current timestamp
	            				else
	            					LocalShipItem			= ShipmentBOD select "count(//DataArea/Shipment/ShipmentItem)"
	            					LocalShipmentUnitCount	= ShipmentBOD select "count(//DataArea/Shipment/ShipmentUnit)"
	            					LocalRequestingCompany  = WarehouseShipmentRel.CompanyAndLocation.RequestingCompany 
	            					LocalRequestingLocation = WarehouseShipmentRel.CompanyAndLocation.RequestingLocation
	            					if(RequestingLocationRel exists)
	            						LocalFillOrKill	= RequestingLocationRel.FillOrKill
	            					if(LocalShipItem > 0)
	            						LocalItemCounter	= 1
		            					while(LocalItemCounter <= LocalShipItem)
		            						LocalShippedQty	= ShipmentBOD select "//DataArea/Shipment/ShipmentItem[<LocalItemCounter>]/ShippedQuantity"
		            						if(LocalShippedQty = 0 or LocalShippedQty = 0.00000)
		            							LocalItemNumber	= ShipmentBOD select "//DataArea/Shipment/ShipmentItem[<LocalItemCounter>]/SalesOrderReference/LineNumber"
		            							if(WarehouseShipmentLineRel exists)
		            								LocalPrintedQuantity	=  WarehouseShipmentLineRel.PrintedQuantity
		            							if(WarehouseShipmentLineRel exists and LocalFillOrKill = "K")
		            								invoke Void WarehouseShipmentLineRel
		            									resume on error
									               			Error            							   	= true
									                    	ErrorMessage     							   	= error message 
														invoked.PrmTransactionQuantity						= 0
		            								if(Error)
														invoke Update FSMInboundBODTrackerRel
															invoked.Error 									= Error
															invoked.ErrorMessage 							= ErrorMessage
															invoked.Status									= 2
															invoked.CloseDate								= system current timestamp
														invoke SendShipmentConfirmBOD
					            							invoked.ShipmentBOD				= ShipmentBOD			
					            							invoked.PrmCompany				= LocalCompany
					            							invoked.PrmLocation				= LocalLocation
					            							invoked.PrmTrackerID			= LocalFSMInboundBODTracker
					            							invoked.PrmHDReturnMsg			= ErrorMessage
					            						LocalItemCounter = LocalShipItem + 1
					            					else
					            						LocalSerializedLotCount	= ShipmentBOD select "count(//DataArea/Shipment/ShipmentItem[<LocalItemCounter>]/SerializedLot)"
		            									LocalItemCounter = LocalItemCounter + 1
		            							else
		            							if(WarehouseShipmentLineRel exists and LocalFillOrKill = "F")
		            								invoke Backorder WarehouseShipmentLineRel
		            									resume on error
									               			Error            							   	= true
									                    	ErrorMessage     							   	= error message 
														invoked.PrmTransactionQuantity						= 0
		            								if(Error)
														invoke Update FSMInboundBODTrackerRel
															invoked.Error 									= Error
															invoked.ErrorMessage 							= ErrorMessage
															invoked.Status									= 2
															invoked.CloseDate								= system current timestamp
														invoke SendShipmentConfirmBOD
					            							invoked.ShipmentBOD				= ShipmentBOD			
					            							invoked.PrmCompany				= LocalCompany
					            							invoked.PrmLocation				= LocalLocation
					            							invoked.PrmTrackerID			= LocalFSMInboundBODTracker
					            							invoked.PrmHDReturnMsg			= ErrorMessage
					            						LocalItemCounter = LocalShipItem + 1
					            					else
						            					LocalSerializedLotCount	= ShipmentBOD select "count(//DataArea/Shipment/ShipmentItem[<LocalItemCounter>]/SerializedLot)"
		            									LocalItemCounter = LocalItemCounter + 1	
		            							else
		            							if(WarehouseShipmentLineRel not exists)
		            								LocalSerializedLotCount	= ShipmentBOD select "count(//DataArea/Shipment/ShipmentItem[<LocalItemCounter>]/SerializedLot)"
	            									LocalItemCounter = LocalItemCounter + 1
	            							LocalItemCounter = LocalItemCounter + 1
	            					if(LocalShipmentUnitCount > 0)
	            						LocalShipUnitIterator	= 1
	            						LocalContainerID  		= ShipmentBOD select "//DataArea/Shipment/ShipmentUnit[<LocalShipUnitIterator>]/ContainerID"
										LocalContainerType 		= ShipmentBOD select "//DataArea/Shipment/ShipmentUnit[<LocalShipUnitIterator>]/SpecializedLogisticUnit/ShipmentUnitType"
		            					while(LocalShipUnitIterator <= LocalShipmentUnitCount)
		            						LocalShipmentUnitItemCount	= ShipmentBOD select "count(//DataArea/Shipment/ShipmentUnit[<LocalShipUnitIterator>]/ShipmentUnitItem)"
		            						if(LocalShipmentUnitItemCount > 0)
		            							LocalShipUnitItemIterator	= 1
		            							while(LocalShipUnitItemIterator <= LocalShipmentUnitItemCount)
		            								LocalItemNumber	= ShipmentBOD select "//DataArea/Shipment/ShipmentUnit[<LocalShipUnitIterator>]/ShipmentUnitItem[<LocalShipUnitItemIterator>]/SalesOrderReference/LineNumber"
		            								LocalItem		= ShipmentBOD select "//DataArea/Shipment/ShipmentUnit[<LocalShipUnitIterator>]/ShipmentUnitItem[<LocalShipUnitItemIterator>]/ItemID/ID"
		            								LocalItemUOM	= ShipmentBOD select "//DataArea/Shipment/ShipmentUnit[<LocalShipUnitIterator>]/ShipmentUnitItem[<LocalShipUnitItemIterator>]/ShippedQuantity/@unitCode"
		            								if(LocalItem not entered)
		            									LocalItem		= ""
		            								else
		            									if(DerivedConfigDocID  = "Y")
		            										LocalItem	= ShipmentBOD select "//DataArea/Shipment/ShipmentUnit[<LocalShipUnitIterator>]/ShipmentUnitItem[<LocalShipUnitItemIterator>]/ItemID/ID"
		            									else
		            										LocalItem	= NativeTrackItem
		            								if(WarehouseShipmentLineRel exists)
		            									LocalPrintedQuantity	=  WarehouseShipmentLineRel.PrintedQuantity
		            									LocalShippedQty			= ShipmentBOD select "//DataArea/Shipment/ShipmentUnit[<LocalShipUnitIterator>]/ShipmentUnitItem[<LocalShipUnitItemIterator>]/ShippedQuantity"
		            									if(LocalShippedQty > 0)
		            										if(LocalPrintedQuantity = LocalShippedQty)
		            											LocalBackOrderQuantity	= 0
		            										else
		            											LocalBackOrderQuantity  = LocalShippedQty
		            									else
		            										LocalBackOrderQuantity 		= LocalShippedQty
		            									if(LocalSerializedLotCount > 0)
		            										invoke Create WarehouseShipmentTrackingDetail
		            											resume on error
											               			Error            							   	= true
											                    	ErrorMessage     							   	= error message 
																invoked.Company										= LocalCompany
																invoked.InventoryLocation							= LocalLocation
																invoked.WarehouseShipment							= LocalShipmentNumber
																invoked.WarehouseShipmentTracking					= LocalContainerID
																invoked.Item										= LocalItem
																invoked.Quantity									= LocalShippedQty
																invoked.UnitOfMeasure								= LocalItemUOM
															if(Error)
																invoke Update FSMInboundBODTrackerRel
																	invoked.Error 									= Error
																	invoked.ErrorMessage 							= ErrorMessage
																	invoked.Status									= 2
																	invoked.CloseDate								= system current timestamp
																invoke SendShipmentConfirmBOD
							            							invoked.ShipmentBOD				= ShipmentBOD			
							            							invoked.PrmCompany				= LocalCompany
							            							invoked.PrmLocation				= LocalLocation
							            							invoked.PrmTrackerID			= LocalFSMInboundBODTracker
							            							invoked.PrmHDReturnMsg			= ErrorMessage
							            						LocalShipUnitItemIterator = LocalShipmentUnitItemCount + 1
		            									invoke Update WarehouseShipmentLineRel
			            									resume on error
										               			Error            							   	= true
										                    	ErrorMessage     							   	= error message 
															invoked.ShippedQuantity								= LocalShippedQty
			            								if(Error)
															invoke Update FSMInboundBODTrackerRel
																invoked.Error 									= Error
																invoked.ErrorMessage 							= ErrorMessage
																invoked.Status									= 2
																invoked.CloseDate								= system current timestamp
															invoke SendShipmentConfirmBOD
						            							invoked.ShipmentBOD				= ShipmentBOD			
						            							invoked.PrmCompany				= LocalCompany
						            							invoked.PrmLocation				= LocalLocation
						            							invoked.PrmTrackerID			= LocalFSMInboundBODTracker
						            							invoked.PrmHDReturnMsg			= ErrorMessage
						            						LocalShipUnitItemIterator = LocalShipmentUnitItemCount + 1
						            					else
						            						if((LocalBackOrderQuantity > 0 or LocalShippedQty = 0) and (LocalFillOrKill = "K"))
						            							invoke Void WarehouseShipmentLineRel
					            									resume on error
												               			Error            							   	= true
												                    	ErrorMessage     							   	= error message 
																	invoked.PrmTransactionQuantity						= LocalBackOrderQuantity
					            								if(Error)
																	invoke Update FSMInboundBODTrackerRel
																		invoked.Error 									= Error
																		invoked.ErrorMessage 							= ErrorMessage
																		invoked.Status									= 2
																		invoked.CloseDate								= system current timestamp
																	invoke SendShipmentConfirmBOD
								            							invoked.ShipmentBOD				= ShipmentBOD			
								            							invoked.PrmCompany				= LocalCompany
								            							invoked.PrmLocation				= LocalLocation
								            							invoked.PrmTrackerID			= LocalFSMInboundBODTracker
								            							invoked.PrmHDReturnMsg			= ErrorMessage
								            						LocalShipUnitItemIterator = LocalShipmentUnitItemCount + 1
								            					else
								            						LocalShipUnitItemIterator = LocalShipUnitItemIterator + 1
								            				else
								            				if((LocalBackOrderQuantity > 0 or LocalShippedQty = 0) and (LocalFillOrKill = "F"))
								            					invoke Backorder WarehouseShipmentLineRel
					            									resume on error
												               			Error            							   	= true
												                    	ErrorMessage     							   	= error message 
																	invoked.PrmTransactionQuantity						= LocalBackOrderQuantity
					            								if(Error)
																	invoke Update FSMInboundBODTrackerRel
																		invoked.Error 									= Error
																		invoked.ErrorMessage 							= ErrorMessage
																		invoked.Status									= 2
																		invoked.CloseDate								= system current timestamp
																	invoke SendShipmentConfirmBOD
								            							invoked.ShipmentBOD				= ShipmentBOD			
								            							invoked.PrmCompany				= LocalCompany
								            							invoked.PrmLocation				= LocalLocation
								            							invoked.PrmTrackerID			= LocalFSMInboundBODTracker
								            							invoked.PrmHDReturnMsg			= ErrorMessage
								            					else
								            						LocalShipUnitItemIterator = LocalShipUnitItemIterator + 1
								            				else
								            					LocalShipUnitItemIterator = LocalShipUnitItemIterator + 1
		            								else
		            									LocalShipUnitItemIterator = LocalShipUnitItemIterator + 1
		            						LocalShipUnitIterator = LocalShipUnitIterator + 1
		            				if(!Error)
		            					invoke Printed.Finish WarehouseShipmentRel
											resume on error
								           		Error            				= true
								                ErrorMessage     				= error message
										if(Error)
											invoke Update FSMInboundBODTrackerRel
												invoked.Error 									= Error
												invoked.ErrorMessage 							= ErrorMessage
												invoked.Status									= 2
												invoked.CloseDate								= system current timestamp
											invoke SendShipmentConfirmBOD
		            							invoked.ShipmentBOD				= ShipmentBOD			
		            							invoked.PrmCompany				= LocalCompany
		            							invoked.PrmLocation				= LocalLocation
		            							invoked.PrmTrackerID			= LocalFSMInboundBODTracker
		            							invoked.PrmHDReturnMsg			= ErrorMessage
									if(!Error)
										invoke Shipped.Release WarehouseShipmentRel	
											resume on error
								           		Error            										= true
								                ErrorMessage     										= error message	
										if(Error)
											invoke Update FSMInboundBODTrackerRel
												invoked.Error 									= Error
												invoked.ErrorMessage 							= ErrorMessage
												invoked.Status									= 2
												invoked.CloseDate								= system current timestamp
											invoke SendShipmentConfirmBOD
		            							invoked.ShipmentBOD				= ShipmentBOD			
		            							invoked.PrmCompany				= LocalCompany
		            							invoked.PrmLocation				= LocalLocation
		            							invoked.PrmTrackerID			= LocalFSMInboundBODTracker
		            							invoked.PrmHDReturnMsg			= ErrorMessage
									
									if(!Error)
										invoke Update FSMInboundBODTrackerRel
											invoked.Status						= 3
											invoked.CloseDate					= system current timestamp	
							else
								invoke Update FSMInboundBODTrackerRel
									invoked.Status						= 3
									invoked.CloseDate					= system current timestamp															
            	else
				if(FSMInboundBODTracker not entered)
					invoke Create FSMInboundBODTracker
						assign result to NewBODTracker
						invoked.Verb 					= 1
						invoked.Noun 					= "Shipment"
						invoked.Direction				= 2					
						invoked.Company					= LocalCompany
						invoked.BODLocation				= LocalLocation
						invoked.BODDocumentID			= LocalShipDocID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODID					= LocalBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.BODAccountingEntity		= LocalAccountingEntity
						invoked.Error					= true
						invoked.ErrorMessage			= "Sync Shipment Inbound BOD Service is not Enabled"	
					LocalFSMInboundBODTracker = NewBODTracker.FSMInboundBODTracker
				else
					LocalFSMInboundBODTracker = FSMInboundBODTracker
					invoke Update FSMInboundBODTrackerRel
						invoked.Company					= LocalCompany
						invoked.BODLocation				= LocalLocation
						invoked.BODDocumentID			= LocalShipDocID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODID					= LocalBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.BODAccountingEntity		= LocalAccountingEntity
						invoked.Error					= true
						invoked.ErrorMessage			= "Sync Shipment Inbound BOD Service is not Enabled"
						
		SendShipmentConfirmBOD is an Instance Action
			restricted			
			Parameters
				ShipmentBOD 							is XMLDocument
				PrmCompany								is Alpha size 12
				PrmTrackerID							is Numeric 15
				PrmHDReturnMsg							is Alpha 100
				PrmLocation								is Alpha 20
			Action Rules
				LocalBODXML				= ShipmentBOD
				LocalCompany			= PrmCompany
				LocalLNreturnMsg		= PrmHDReturnMsg
				LocalDTreturnMsg		= PrmHDReturnMsg
				LocalHDreturnMsg		= PrmHDReturnMsg
				LocalComponentID		= "Lawson Warehouse Management"
				LocalTrackerID			= PrmTrackerID
				LocalSenderLogicalID	= ShipmentBOD select "//ApplicationArea/Sender/LogicalID"
				LocalSenderComponentID	= ShipmentBOD select "//ApplicationArea/Sender/ComponentID"
    			LocalCreateDateTime		= ShipmentBOD select "//DataArea/Shipment/ShipmentHeader/DocumentDateTime"
    			LocalSenderBODID		= ShipmentBOD select "ApplicationArea/BODID"            	
            	LocalLocation			= PrmLocation
            	LocalShipDocID 			= ShipmentBOD select "//DataArea/Shipment/ShipmentHeader/DocumentID/ID"
            	LocalShipLocation		= ShipmentBOD select "//DataArea/Sync/LocationID"
            	LocalMainUserTemplate	= "IONSyncShipment_ConfirmBOD_ST"
				if(UserTemplateRel exists)
	            	send ion bod
						bod is ShipmentConfirmBODXML
						bod type is "Confirm.BOD"
						accounting entity is LocalShipLocation
						document id is LocalShipDocID	
#endif				

		AcknowledgeAdvanceShipNoticeImport is an Import Action
			restricted
			bod type is Acknowledge.AdvanceShipNotice			
			Parameters
				AdvanceShipNoticeBOD			 	is XMLDocument
            Action Rules
				LocalBODXML						= AdvanceShipNoticeBOD
            	LocalVariationID             	= AdvanceShipNoticeBOD select "//DataArea/AdvanceShipNotice/AdvanceShipNoticeHeader/DocumentID/ID/@variationID"
            	LocalSenderLogicalID			= AdvanceShipNoticeBOD select "//ApplicationArea/Sender/LogicalID"
            	LocalDocumentID					= AdvanceShipNoticeBOD select "//DataArea/AdvanceShipNotice/AdvanceShipNoticeHeader/DocumentID/ID"
            	LocalBODID						= AdvanceShipNoticeBOD select "//ApplicationArea/BODID"
				LocalActionCode					= AdvanceShipNoticeBOD select "//DataArea/Acknowledge/ResponseCriteria/ResponseExpression"
				LocalaccountingEntity			= AdvanceShipNoticeBOD select "//DataArea/Acknowledge/AccountingEntityID"
				
				if(FSMBODConfigurationAckAdvanceShipNoticeRel exists and FSMBODConfigurationAckAdvanceShipNoticeRel.Enable)
					if(FSMInboundBODTracker not entered)
						invoke Create FSMInboundBODTracker
							assign result to NewBODTracker
							invoked.Verb 					= 5
							invoked.Noun 					= "AdvanceShipNotice"
							invoked.Direction				= 2					
							invoked.BODAccountingEntity		= LocalaccountingEntity
							invoked.BODDocumentID			= LocalDocumentID
							invoked.BODVariationID			= LocalVariationID
							invoked.BODID					= LocalBODID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							initialize invoked.Error			
							initialize invoked.ErrorMessage
						LocalFSMInboundBODTracker 			= NewBODTracker.FSMInboundBODTracker	
					else 
						LocalFSMInboundBODTracker		= FSMInboundBODTracker
						invoke Update FSMInboundBODTrackerRel
							invoked.BODAccountingEntity		= LocalaccountingEntity
							invoked.BODDocumentID			= LocalDocumentID
							invoked.BODVariationID			= LocalVariationID
							invoked.BODID					= LocalBODID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							initialize invoked.Error			
							initialize invoked.ErrorMessage
							
					if(LocalActionCode	= "Rejected")
						if (DerivedMailFrom entered and DerivedSendTo entered)
							send email
								to DerivedSendTo
								from DerivedMailFrom
								subject "ProcessAdvanceShipNotice_\BOD_was_\Rejected"
								Contents
									"Message:_\ProcessAdvanceShipNotice_\BOD_has_been_rejected_by_the_target_system."
									"ASN_\ID:<LocalDocumentID>"
									"Target_\Accounting_\Entity:<LocalaccountingEntity>"
									"Target_\System:<LocalSenderLogicalID>"
									"TrackerID:<LocalFSMInboundBODTracker>"
						invoke Update FSMInboundBODTrackerRel
							invoked.Status		= 3
							invoked.CloseDate	= system current timestamp
					else
						invoke Update FSMInboundBODTrackerRel
							invoked.Status		= 3
							invoked.CloseDate	= system current timestamp
							
				else
				if(FSMInboundBODTracker not entered)
					invoke Create FSMInboundBODTracker
						assign result to NewBODTracker
						invoked.Verb 					= 5
						invoked.Noun 					= "AdvanceShipNotice"
						invoked.Direction				= 2					
						invoked.BODAccountingEntity		= LocalaccountingEntity
						invoked.BODDocumentID			= LocalDocumentID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODID					= LocalBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.Error					= true
						invoked.ErrorMessage			= "Acknowledge AdvanceShipNotice Inbound BOD Service is not Enabled"
					LocalFSMInboundBODTracker = NewBODTracker.FSMInboundBODTracker
				else
					LocalFSMInboundBODTracker = FSMInboundBODTracker
					invoke Update FSMInboundBODTrackerRel
						invoked.BODAccountingEntity		= LocalaccountingEntity
						invoked.BODDocumentID			= LocalDocumentID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODID					= LocalBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.Error					= true
						invoked.ErrorMessage			= "Acknowledge AdvanceShipNotice Inbound BOD Service is not Enabled"
						

			

		AcknowledgeShipmentImport is an Import Action
			restricted
			bod type is Acknowledge.Shipment			
			Parameters
				AcknowledgeShipmentBOD 		is XMLDocument
			Action Rules
				LocalBODXML 			= AcknowledgeShipmentBOD
				LocalDocumentID			= AcknowledgeShipmentBOD select "//DataArea/Shipment/ShipmentHeader/DocumentID/ID"
				LocalAccountingEntity	= AcknowledgeShipmentBOD select "//DataArea/Acknowledge/AccountingEntityID"
				LocalBODID				= AcknowledgeShipmentBOD select "//ApplicationArea/BODID"
				LocalVariationID		= AcknowledgeShipmentBOD select "//DataArea/Shipment/ShipmentHeader/DocumentID/ID/@variationID"
				
				if(FSMBODConfigurationAckShipmentRel exists and FSMBODConfigurationAckShipmentRel.Enable)
					if(FSMInboundBODTracker not entered)
						invoke Create FSMInboundBODTracker
							assign result to NewBODTracker
							invoked.Verb 					= 5
							invoked.Noun 					= "Shipment"
							invoked.Direction				= 2					
							invoked.BODDocumentID			= LocalDocumentID
							invoked.BODAccountingEntity		= LocalAccountingEntity
							invoked.BODVariationID			= LocalVariationID
							invoked.BODID					= LocalBODID
							invoked.Status					= 3
							invoked.StartDate				= system current timestamp
							invoked.CloseDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							initialize invoked.Error			
							initialize invoked.ErrorMessage
						LocalFSMInboundBODTracker = NewBODTracker.FSMInboundBODTracker					
					else
						LocalFSMInboundBODTracker = FSMInboundBODTracker
						invoke Update FSMInboundBODTrackerRel
							invoked.BODAccountingEntity		= LocalAccountingEntity
							invoked.BODDocumentID			= LocalDocumentID
							invoked.BODVariationID			= LocalVariationID
							invoked.BODID					= LocalBODID
							invoked.Status					= 3
							invoked.StartDate				= system current timestamp
							invoked.CloseDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							initialize invoked.Error			
							initialize invoked.ErrorMessage	
				else
				if(FSMInboundBODTracker not entered)
					invoke Create FSMInboundBODTracker
						assign result to NewBODTracker
						invoked.Verb 					= 5
						invoked.Noun 					= "Shipment"
						invoked.Direction				= 2					
						invoked.Company					= LocalAccountingEntity
						invoked.BODAccountingEntity		= LocalAccountingEntity
						invoked.BODDocumentID			= LocalDocumentID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODID					= LocalBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.Error					= true
						invoked.ErrorMessage			= "Acknowledge Shipment Inbound BOD Service is not Enabled"	
					LocalFSMInboundBODTracker = NewBODTracker.FSMInboundBODTracker
				else
					LocalFSMInboundBODTracker = FSMInboundBODTracker
					invoke Update FSMInboundBODTrackerRel
						invoked.Company					= LocalAccountingEntity
						invoked.BODAccountingEntity		= LocalAccountingEntity
						invoked.BODDocumentID			= LocalDocumentID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODID					= LocalBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.Error					= true
						invoked.ErrorMessage			= "Acknowledge Shipment Inbound BOD Service is not Enabled"	



		AcknowledgePurchaseOrderImport is an Import Action
			restricted
			bod type is Acknowledge.PurchaseOrder			
			Parameters
				AcknowledgePurchaseOrderBOD 		is XMLDocument
			Action Rules
				LocalBODXML 			= AcknowledgePurchaseOrderBOD
				LocalDocumentID			= AcknowledgePurchaseOrderBOD select "//DataArea/PurchaseOrder/PurchaseOrderHeader/DocumentID/ID"
				LocalaccountingEntity	= AcknowledgePurchaseOrderBOD select "//DataArea/Acknowledge/AccountingEntityID"
				LocalBODID				= AcknowledgePurchaseOrderBOD select "//ApplicationArea/BODID"
				LocalVariationID		= AcknowledgePurchaseOrderBOD select "//DataArea/PurchaseOrder/PurchaseOrderHeader/DocumentID/ID/@variationID"
				LocalAlternateDocumentID = AcknowledgePurchaseOrderBOD select "//DataArea/PurchaseOrder/PurchaseOrderHeader/AlternateDocumentID[1]/ID"
				LocalGenericDelimiter	= DerivedGenericDelimiter
				LocalCSFPurchaseOrder 	= NativeAcknowledgePurchaseOrder
				LocalPurchaseOrder		= LocalDocumentID				
				LocalAccountingEntity 	= FSMBODCrossReferenceDetailRel.DestinationValue
				LocalCompany 			= NativeAcknowledgePOCompany
				
				if(FSMBODConfigurationAckPurchaseOrderRel exists and FSMBODConfigurationAckPurchaseOrderRel.Enable)
					if(FSMInboundBODTracker not entered)
						invoke Create FSMInboundBODTracker
							assign result to NewBODTracker
							invoked.Verb 					= 5
							invoked.Noun 					= "PurchaseOrder"
							invoked.Direction				= 2					
							invoked.Company					= LocalCompany
							invoked.BODDocumentID			= LocalDocumentID
							invoked.BODAccountingEntity		= LocalaccountingEntity
							invoked.BODVariationID			= LocalVariationID
							invoked.BODID					= LocalBODID
							invoked.Status					= 3
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							initialize invoked.Error			
							initialize invoked.ErrorMessage
						LocalFSMInboundBODTracker = NewBODTracker.FSMInboundBODTracker					
					else
						LocalFSMInboundBODTracker = FSMInboundBODTracker
						invoke Update FSMInboundBODTrackerRel
							invoked.Company					= LocalCompany
							invoked.BODAccountingEntity		= LocalaccountingEntity
							invoked.BODDocumentID			= LocalDocumentID
							invoked.BODVariationID			= LocalVariationID
							invoked.BODID					= LocalBODID
							invoked.Status					= 3
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							initialize invoked.Error			
							initialize invoked.ErrorMessage	
					
					if(PurchaseOrderRel exists)
						invoke UpdateReferenceField PurchaseOrderRel
							resume on error
	                   			Error            			= true
	                        	ErrorMessage     			= error message
							invoked.ParmReference1  		= LocalPurchaseOrder
						if(Error)
							invoke Update FSMInboundBODTrackerRel
								invoked.Error 				= Error
								invoked.ErrorMessage 		= ErrorMessage
								invoked.Status				= 2
								invoked.CloseDate			= system current timestamp
						else
							invoke Update FSMInboundBODTrackerRel
								invoked.Status				= 3
								invoked.CloseDate			= system current timestamp
					else
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 					= true
							invoked.ErrorMessage 			= "Purchase Order does not exist"
							invoked.Status					= 2
							invoked.CloseDate				= system current timestamp
				else
				if(FSMInboundBODTracker not entered)
					invoke Create FSMInboundBODTracker
						assign result to NewBODTracker
						invoked.Verb 					= 5
						invoked.Noun 					= "PurchaseOrder"
						invoked.Direction				= 2					
						invoked.Company					= LocalCompany
						invoked.BODAccountingEntity		= LocalaccountingEntity
						invoked.BODDocumentID			= LocalDocumentID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODID					= LocalBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.Error					= true
						invoked.ErrorMessage			= "Acknowledge PurchaseOrder Inbound BOD Service is not Enabled"
					LocalFSMInboundBODTracker = NewBODTracker.FSMInboundBODTracker
				else
					LocalFSMInboundBODTracker = FSMInboundBODTracker
					invoke Update FSMInboundBODTrackerRel
						invoked.Company					= LocalCompany
						invoked.BODAccountingEntity		= LocalaccountingEntity
						invoked.BODDocumentID			= LocalDocumentID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODID					= LocalBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.Error					= true
						invoked.ErrorMessage			= "Acknowledge PurchaseOrder Inbound BOD Service is not Enabled"
						

						

#ifdef module po
		SyncAdvanceShipNoticeBODImport is an Import Action
			restricted
			bod type is Sync.AdvanceShipNotice
			Parameters
				AdvanceShipNoticeBOD 	is XMLDocument
            Action Rules
            	LocalGenericDelimiter			= DerivedGenericDelimiter
            	LocalStatusDescription 			= AdvanceShipNoticeBOD select "//DataArea/AdvanceShipNotice/AdvanceShipNoticeHeader/Status/Code"
            	LocalaccountingEntity 			= AdvanceShipNoticeBOD select "//DataArea/Sync/AccountingEntityID"
            	LocalAE							= AdvanceShipNoticeBOD select "//DataArea/AdvanceShipNotice/AdvanceShipNoticeHeader/DocumentID/ID/@accountingEntity"
            	LocalPOString 					= AdvanceShipNoticeBOD select "//DataArea/AdvanceShipNotice/AdvanceShipNoticeHeader/DocumentReference/DocumentID/ID"
            	if(DerivedConfigDocID = "Y")
            		LocalPONumber		= LocalPOString
            		if(FSMAdvanceShipNoticeCleanDocIDRel.DestinationValue entered)
            			LocalCleanDocIDCompany = FSMAdvanceShipNoticeCleanDocIDRel.DestinationValue
            		else
            			LocalCleanDocIDCompany = LocalaccountingEntity
	            	if(DerivedConfigFEG != "Y")
	            		LocalCompany	= LocalCleanDocIDCompany
	            	else
	            	if(DerivedConfigFEG = "Y")
	            		if(LocalCleanDocIDCompany entered)
	            			LocalaccountingEntity = LocalCleanDocIDCompany
	            			LocalCompany		  = NativeASNCompany
            	else
	            	if(LocalaccountingEntity entered)
	            		LocalCompany 				= NativeASNCompany
	            	else
	            		LocalCompany				= ""
	            	if(LocalPOString entered)
	            		LocalPOString 				= NativePONumber
	            	else
	            		LocalPONumber				= ""
            	LocalDocumentID 				= AdvanceShipNoticeBOD select "//DataArea/AdvanceShipNotice/AdvanceShipNoticeHeader/DocumentID/ID"
            	LocalVariationID				= AdvanceShipNoticeBOD select "//DataArea/AdvanceShipNotice/AdvanceShipNoticeHeader/DocumentID/ID/@variationID"
            	LocalSenderBODID				= AdvanceShipNoticeBOD select "//ApplicationArea/BODID"
            	LocalBODXML						= AdvanceShipNoticeBOD
            	
            	if(FSMBODConfigurationASNRel exists and FSMBODConfigurationASNRel.Enable)
					if(FSMInboundBODTracker not entered)
						invoke Create FSMInboundBODTracker
							assign result to NewBODTracker
							invoked.Verb 					= 1
							invoked.Noun 					= "AdvanceShipNotice"
							invoked.Direction				= 2					
							invoked.Company					= LocalCompany
							invoked.BODDocumentID			= LocalDocumentID
							invoked.BODVariationID			= LocalVariationID
							invoked.BODID					= LocalSenderBODID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							invoked.BODAccountingEntity		= LocalAE
							initialize invoked.Error			
							initialize invoked.ErrorMessage
						LocalFSMInboundBODTracker 			= NewBODTracker.FSMInboundBODTracker
					else 
						LocalFSMInboundBODTracker		= FSMInboundBODTracker
						invoke Update FSMInboundBODTrackerRel
							invoked.Company					= LocalCompany
							invoked.BODDocumentID			= LocalDocumentID
							invoked.BODVariationID			= LocalVariationID
							invoked.BODID					= LocalSenderBODID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							invoked.BODAccountingEntity		= LocalAE
							initialize invoked.Error			
							initialize invoked.ErrorMessage
	            	
	            	if(LocalStatusDescription ="Closed")
	            		if(ASNPurchaseOrderReceiptRel exists)
	            			invoke Unreleased.Release ASNPurchaseOrderReceiptRel
	            				resume on error
			                   		Error            							= true
			                        ErrorMessage     							= error message
	            		
		            		if(Error)
		            			invoke SendASNConfirmBOD
			            			invoked.AdvanceShipNoticeBOD	= AdvanceShipNoticeBOD
			            			invoked.PrmCompany				= LocalCompany
			            			invoked.PrmErrorMessage			= ErrorMessage
			            			invoked.PrmTrackerID			= LocalFSMInboundBODTracker
			            			
			            		invoke Update FSMInboundBODTrackerRel
									invoked.Error 						= true
									invoked.ErrorMessage 				= ErrorMessage
									invoked.Status						= 2
									invoked.CloseDate					= system current timestamp	
		            		else
								invoke Update FSMInboundBODTrackerRel
									invoked.Status						= 3
									invoked.CloseDate					= system current timestamp
	            		else
	            			invoke Update FSMInboundBODTrackerRel
								invoked.Error 						= true
								invoked.ErrorMessage 				= "PurchaseOrderReceipt does not exists"
								invoked.Status						= 2
								invoked.CloseDate					= system current timestamp
	            			
	            			LocalErrorMessage	= "PurchaseOrderReceipt does not exists"
	            			invoke SendASNConfirmBOD
		            			invoked.AdvanceShipNoticeBOD	= AdvanceShipNoticeBOD
		            			invoked.PrmCompany				= LocalCompany
		            			invoked.PrmErrorMessage			= LocalErrorMessage 
		            			invoked.PrmTrackerID			= LocalFSMInboundBODTracker	
	            	else
						invoke Update FSMInboundBODTrackerRel
							invoked.Status						= 3
							invoked.CloseDate					= system current timestamp
				else
				if(FSMInboundBODTracker not entered)
					invoke Create FSMInboundBODTracker
						assign result to NewBODTracker
						invoked.Verb 					= 1
						invoked.Noun 					= "AdvanceShipNotice"
						invoked.Direction				= 2					
						invoked.Company					= LocalCompany
						invoked.BODDocumentID			= LocalDocumentID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODID					= LocalSenderBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.BODAccountingEntity		= LocalaccountingEntity
						invoked.Error					= true
						invoked.ErrorMessage			= "Sync AdvanceShipNotice Inbound BOD Service is not Enabled"
					LocalFSMInboundBODTracker = NewBODTracker.FSMInboundBODTracker
				else
					LocalFSMInboundBODTracker = FSMInboundBODTracker
					invoke Update FSMInboundBODTrackerRel
						invoked.Company					= LocalCompany
						invoked.BODDocumentID			= LocalDocumentID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODID					= LocalSenderBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.BODAccountingEntity		= LocalaccountingEntity
						invoked.Error					= true
						invoked.ErrorMessage			= "Sync AdvanceShipNotice Inbound BOD Service is not Enabled"
						
		SendASNConfirmBOD is an Instance Action
			restricted			
			Parameters
				AdvanceShipNoticeBOD 					is XMLDocument
				PrmCompany								is Alpha size 12
				PrmTrackerID							is Numeric 15
				PrmErrorMessage							is Alpha 300
			Action Rules
				LocalBODXML				= AdvanceShipNoticeBOD
				LocalToLogicalID		= AdvanceShipNoticeBOD select "//ApplicationArea/Sender/LogicalID"
				LocalCompany			= PrmCompany
				LocalLocation			= AdvanceShipNoticeBOD select "//DataArea/AdvanceShipNotice/AdvanceShipNoticeHeader/WarehouseLocation/ID"
				LocalComponentID 		= AdvanceShipNoticeBOD select "//ApplicationArea/Sender/ComponentID"
				LocalSenderComponentID	= "Lawson Warehouse Management"
				LocalBODID				= AdvanceShipNoticeBOD select "//ApplicationArea/BODID"
				LocalTrackerID			= PrmTrackerID
				LocalErrorMessage		= PrmErrorMessage
				LocalMainUserTemplate	= "IONSyncAdvanceShipNotice_ConfirmBOD_ST"
				LocalDocumentID 		= AdvanceShipNoticeBOD select "//DataArea/AdvanceShipNotice/AdvanceShipNoticeHeader/DocumentID/ID"
				LocalOriginalCreateDateTime	= AdvanceShipNoticeBOD select "//ApplicationArea/CreationDateTime"
				LocalaccountingEntity 		= AdvanceShipNoticeBOD select "//DataArea/Sync/AccountingEntityID"
				if(UserTemplateRel exists)
					send ion bod
						bod is SyncASNConfirmBODXML
						bod type is "Confirm.BOD"
						accounting entity is LocalaccountingEntity
						document id is LocalDocumentID
#endif						


#ifdef module po
		SyncReceiveDeliveryBODImport is an Import Action
			restricted
			bod type is Sync.ReceiveDelivery	
			Parameters
				ReceiveDeliveryBOD 			is XMLDocument
            Action Rules
            	LocalGenericDelimiter	= DerivedGenericDelimiter
            	LocalDocumentID			= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentID/ID"
            	LocalAE					= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentID/ID/@accountingEntity"
            	LocalActionCode			= ReceiveDeliveryBOD select "//DataArea/Sync/ActionCriteria/ActionExpression/@actionCode"
            	LocalaccountingEntity	= ReceiveDeliveryBOD select "//DataArea/Sync/AccountingEntityID"

            	if(DerivedConfigDocID = "Y")
            		if(FSMAdvanceShipNoticeCleanDocIDRel.DestinationValue entered)
            			LocalAccountingEntityID = FSMAdvanceShipNoticeCleanDocIDRel.DestinationValue
            		else
            			LocalAccountingEntityID = LocalaccountingEntity
            			
            		if(DerivedConfigFEG != "Y")
	            		LocalCompany	= LocalAccountingEntityID
	            	else
	            	if(DerivedConfigFEG = "Y")	
	            		if(LocalAccountingEntityID entered)
	            			LocalaccountingEntity	= LocalAccountingEntityID
	            			LocalCompany	= NativeASNCompany
	            		else
	            			LocalCompany	= ""
    			else
    			if(LocalaccountingEntity entered)
    				LocalCompany		= NativeASNCompany
    			else
    				LocalCompany		= ""
    			
    			LocalPOString			= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentReference/DocumentID/ID"
    			
    			if(LocalPOString entered)
    				LocalPOString 		= NativePONumber
    			else
    				LocalPONumber		= ""
    			LocalBillOfLading		= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/BillOfLadingID"
    			LocalReturnLocation		= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/WarehouseLocation/ID"
    			if(LocalReturnLocation entered)
    				LocalLocation		= NativeLocation
            	else
            		LocalLocation		= ""
            	LocalHeaderDescription	= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/Description"
            	LocalVariationID		= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentID/ID/@variationID"
            	LocalSenderBODID		= ReceiveDeliveryBOD select "//ApplicationArea/BODID"
            	LocalBODXML				= ReceiveDeliveryBOD
            	

            	if(DerivedConfigDocID = "Y")
            		LocalPONumber		= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentReference/DocumentID/ID"
            		LocalLocation		=	LocalReturnLocation
            	
            	if(FSMBODConfigurationSRDRel exists and FSMBODConfigurationSRDRel.Enable)
            		if(FSMInboundBODTracker not entered)
						invoke Create FSMInboundBODTracker
							assign result to NewBODTracker
							invoked.Verb 					= 1
							invoked.Noun 					= "ReceiveDelivery"
							invoked.Direction				= 2					
							invoked.Company					= LocalCompany
							invoked.BODAccountingEntity		= LocalAE
							invoked.BODDocumentID			= LocalDocumentID
							invoked.BODVariationID			= LocalVariationID
							invoked.BODLocation				= LocalLocation
							invoked.BODID					= LocalSenderBODID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							initialize invoked.Error			
							initialize invoked.ErrorMessage					
						LocalFSMInboundBODTracker 		= NewBODTracker.FSMInboundBODTracker
            		else
						LocalFSMInboundBODTracker 		= FSMInboundBODTracker
						invoke Update FSMInboundBODTrackerRel
							invoked.Company					= LocalCompany
							invoked.BODAccountingEntity		= LocalAE
							invoked.BODDocumentID			= LocalDocumentID
							invoked.BODVariationID			= LocalVariationID
							invoked.BODLocation				= LocalLocation
							invoked.BODID					= LocalSenderBODID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							initialize invoked.Error			
							initialize invoked.ErrorMessage	
            		LocalSubDescriptionExists = -1
            		if(LocalHeaderDescription entered)
            			LocalHeaderSubDescription	= "Direct Order"
            			if(LocalHeaderDescription entered)
            				LocalSubDescriptionExists	= NativeHeaderDescription
            			else
            				LocalSubDescriptionExists	= -1
        			if(LocalHeaderDescription entered and LocalSubDescriptionExists > -1)
						invoke Update FSMInboundBODTrackerRel
							invoked.Status						= 3
							invoked.CloseDate					= system current timestamp
            		else
	            		LocalDocRefType	= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentReference/@type"		
	            		if(LocalDocRefType = "CustomerReturn" or LocalDocRefType = "Transfer")
	            			invoke Update FSMInboundBODTrackerRel
								invoked.Status						= 3
								invoked.CloseDate					= system current timestamp
	            		else
	            			if(ASNPurchaseOrderReceiptRel exists)
	            				LocalPurchaseOrderReceipt	= ASNPurchaseOrderReceiptRel.PurchaseOrderReceipt
	            			else
	            				LocalPurchaseOrderReceipt	= ""
	        				if(ASNPurchaseOrderReceiptRel exists and DerivedUpdateReleaseReceipt = "Y")
	        					invoke Unreleased.Update ASNPurchaseOrderReceiptRel
	        						resume on error
				                   		Error           				= true
				                        ErrorMessage   	 				= error message
									invoked.Company 					= LocalCompany
									invoked.PurchaseOrder				= LocalPONumber
									invoked.POCode						= LocalPOCode
									invoked.PORelease					= LocalPORelease
									invoked.PurchaseOrderReceipt		= LocalPurchaseOrderReceipt
									invoked.BillOfLading				= LocalBillOfLading
	        				else
	        					LocalPurchaseOrderReceipt	= ""
	        					invoke Unreleased.Create PurchaseOrderReceipt
	        						assign result to NewPurchaseOrderReceipt
	        						resume on error
				                   		Error           				= true
				                        ErrorMessage   	 				= error message
									invoked.Company 					= LocalCompany
									invoked.PurchaseOrder				= LocalPONumber
									invoked.POCode						= LocalPOCode
									invoked.PORelease					= LocalPORelease
									invoked.PurchaseOrderReceipt		= LocalPurchaseOrderReceipt
									invoked.BillOfLading				= LocalBillOfLading
								
								LocalPurchaseOrderReceipt				= NewPurchaseOrderReceipt.PurchaseOrderReceipt
							if(Error)
								invoke Update FSMInboundBODTrackerRel
									invoked.Error 						= true
									invoked.ErrorMessage 				= ErrorMessage
									invoked.Status						= 2
									invoked.CloseDate					= system current timestamp
							
								invoke SendSyncReceiveDeliveryConfirmBOD
									invoked.ReceiveDeliveryBOD 			= ReceiveDeliveryBOD
									invoked.PrmCompany					= LocalCompany
									invoked.PrmTrackerID				= LocalFSMInboundBODTracker
									invoked.PrmErrorMessage				= ErrorMessage
							else
								invoke PurchaseOrderReceiptLines
									invoked.ReceiveDeliveryBOD 			= ReceiveDeliveryBOD
									invoked.PrmInboundTracker   		= LocalFSMInboundBODTracker
									invoked.PrmCompany					= LocalCompany	
									invoked.PrmPurchaseOrderReceipt		= LocalPurchaseOrderReceipt
									invoked.PrmPurchaseOrder			= LocalPONumber
									invoked.PrmLocation					= LocalLocation
				else 
				if(FSMInboundBODTracker not entered)
					invoke Create FSMInboundBODTracker
						assign result to NewBODTracker
						invoked.Verb 					= 1
						invoked.Noun 					= "ReceiveDelivery"
						invoked.Direction				= 2					
						invoked.Company					= LocalCompany
						invoked.BODAccountingEntity		= LocalaccountingEntity
						invoked.BODDocumentID			= LocalDocumentID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODLocation				= LocalLocation
						invoked.BODID					= LocalSenderBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.Error					= true			
						invoked.ErrorMessage			= "Sync Receive Delivery Inbound BOD Service is not Enabled"
					LocalFSMInboundBODTracker = NewBODTracker.FSMInboundBODTracker
				else
					LocalFSMInboundBODTracker = FSMInboundBODTracker
					invoke Update FSMInboundBODTrackerRel
						invoked.Company					= LocalCompany
						invoked.BODAccountingEntity		= LocalaccountingEntity
						invoked.BODDocumentID			= LocalDocumentID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODLocation				= LocalLocation
						invoked.BODID					= LocalSenderBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.CloseDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.Error					= true			
						invoked.ErrorMessage			= "Sync Receive Delivery Inbound BOD Service is not Enabled"
						
		PurchaseOrderReceiptLines is an Import Action
			restricted			
			Parameters
				ReceiveDeliveryBOD 			is XMLDocument
				PrmInboundTracker   		is like FSMInboundBODTracker
				PrmPurchaseOrderReceipt		is Numeric 10
				PrmPurchaseOrder			is Numeric 10
				PrmCompany					is Numeric 4
				PrmLocation					is Alpha 20
			Local Fields
				LocalPOReceiptLines 			is XMLDocument
			Action Rules
				LocalGenericDelimiter		= DerivedGenericDelimiter
				LocalLocation				= PrmLocation
				LocalFSMInboundBODTracker 	= PrmInboundTracker
				LocalPurchaseOrderReceipt	= PrmPurchaseOrderReceipt
				LocalPONumber				= PrmPurchaseOrder
				LocalCompany				= PrmCompany
				LocalActionCode				= ReceiveDeliveryBOD select "//DataArea/Sync/ActionCriteria/ActionExpression/@actionCode"
				LocalPORLines				= ReceiveDeliveryBOD select "count(//DataArea/ReceiveDelivery/ReceiveDeliveryItem)"		
				LocalLineCounter			= 1
				LocalNumOfLines				= 0
				LocalNumberOfLinesAdded 	= 0
				while(LocalPORLines >= LocalLineCounter)
					LocalPOReceiptLines		= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalLineCounter>]"
					LocalNativeItem			= LocalPOReceiptLines select "/ReceiveDeliveryItem/ItemID/ID"
					if(DerivedConfigDocID = "Y")
						LocalItem = LocalNativeItem
					if(LocalNativeItem entered)
						LocalItem			= NativeItem
					else
						LocalItem			= ""
					LocalLineNumber			= LocalPOReceiptLines select "/ReceiveDeliveryItem/PurchaseOrderReference/LineNumber"
					LocalQuantity			= LocalPOReceiptLines select "/ReceiveDeliveryItem/ReceivedQuantity"
					LocalBOQuantity			= LocalPOReceiptLines select "/ReceiveDeliveryItem/BackOrderedQuantity"
					LocalUOM				= LocalPOReceiptLines select "/ReceiveDeliveryItem/ReceivedQuantity/@unitCode"
					LocalNumOfLines	 		= LocalNumOfLines + 1
					LocalHoldCodes			= LocalPOReceiptLines select "/ReceiveDeliveryItem/HoldCodes/Code"
					if(ItemLocationRel exists and LocalHoldCodes entered and ItemLocationRel.BinTracked = true)
						LocalPreferedHoldBin 		= ItemLocationRel.PreferredHoldBin
						if(LocalPreferedHoldBin entered)
							LocalPreferedHoldBin	= ItemLocationRel.PreferredHoldBin
						else
							LocalPreferedHoldBin	= ItemLocationRel.PreferredBin		
					else
						LocalPreferedHoldBin = ""
					if(PurchaseOrderReceiptLineRel not exists and LocalQuantity = 0)
						if(LocalActionCode != "Add" and LocalBOQuantity = 0)
							invoke Update PurchaseOrderReceiptLineRel
								invoked.Company 					= LocalCompany
								invoked.PurchaseOrderReceipt 		= LocalPurchaseOrderReceipt
								invoked.PurchaseOrderReceiptLine 	= LocalLineNumber
								invoked.PurchaseOrder 				= LocalPONumber
								invoked.EnteredReceivedQuantity		= 0
								invoked.ReceivedUOM					= LocalUOM
						LocalLineCounter = LocalLineCounter + 1
							
						LocalNumberOfLinesAdded = LocalNumberOfLinesAdded +1 
					else
						if(PurchaseOrderReceiptLineRel exists)
							LocalTotReceivedQuantity	= PurchaseOrderReceiptLineRel.EnteredReceivedQuantity + LocalQuantity
							LocalAction					= "Update"
							LocalLineFC 				= "C"     						
						else
							LocalTotReceivedQuantity	= LocalQuantity
							LocalAction					= "Create"
							LocalLineFC 				= "A"
						if(LocalTotReceivedQuantity = 0)
							LocalLineFC 				= "D"
						if(SRDPurchaseOrderRel exists and SRDPurchaseOrderRel.Released = true)
							if(LocalAction					= "Update")
								invoke Update PurchaseOrderReceiptLineRel
									resume on error
				                   		Error           				= true
				                        ErrorMessage   	 				= error message
									invoked.Company 					= LocalCompany
									invoked.PurchaseOrderReceipt 		= LocalPurchaseOrderReceipt
									invoked.PurchaseOrderReceiptLine 	= LocalLineNumber
									invoked.PurchaseOrder 				= LocalPONumber
									invoked.PurchaseOrderLine			= LocalLineNumber
									invoked.EnteredReceivedQuantity		= LocalTotReceivedQuantity
									invoked.OriginalReceivedQuantity 	= LocalTotReceivedQuantity
									invoked.ReceivedUOM					= LocalUOM
									invoked.Bin							= LocalPreferedHoldBin
									invoked.ShipToLocation				= LocalLocation
							if(LocalAction					= "Create")
								invoke Create PurchaseOrderReceiptLine
									resume on error
				                   		Error           				= true
				                        ErrorMessage   	 				= error message
									invoked.Company 					= LocalCompany
									invoked.PurchaseOrderReceipt 		= LocalPurchaseOrderReceipt
									invoked.PurchaseOrderReceiptLine 	= LocalLineNumber
									invoked.PurchaseOrder 				= LocalPONumber
									invoked.Item 						= LocalItem
									invoked.PurchaseOrderLine			= LocalLineNumber
									invoked.EnteredReceivedQuantity		= LocalTotReceivedQuantity
									invoked.OriginalReceivedQuantity 	= LocalTotReceivedQuantity
									invoked.ReceivedUOM					= LocalUOM
									invoked.Bin							= LocalPreferedHoldBin	
									invoked.ShipToLocation				= LocalLocation		
							if(Error)
								invoke Update FSMInboundBODTrackerRel
									invoked.Error 						= true
									invoked.ErrorMessage 				= ErrorMessage
									invoked.Status						= 2
									invoked.CloseDate					= system current timestamp
							
								invoke SendSyncReceiveDeliveryConfirmBOD
									invoked.ReceiveDeliveryBOD 			= ReceiveDeliveryBOD
									invoked.PrmCompany					= LocalCompany
									invoked.PrmTrackerID				= LocalFSMInboundBODTracker
									invoked.PrmErrorMessage				= ErrorMessage
								LocalLineCounter	= LocalPORLines	+1
						if(PurchaseOrderReceiptLineRel.BuyerMessageDisplay entered)
							LocalBuyer	= SRDPurchaseOrderRel.Buyer
							invoke Unreleased.UpdateManualMessage PORPurchaseOrderBuyerMessageRel
						if(LocalActionCode != "Add" and LocalBOQuantity = 0)
							invoke Update PurchaseOrderReceiptLineRel
								invoked.Company 					= LocalCompany
								invoked.PurchaseOrderReceipt 		= LocalPurchaseOrderReceipt
								invoked.PurchaseOrderReceiptLine 	= LocalLineNumber
								invoked.EnteredReceivedQuantity		= LocalTotReceivedQuantity
								invoked.ReceivedUOM					= LocalUOM
						if(!Error)
							LocalNumberOfLinesAdded = LocalNumberOfLinesAdded + 1
						if(LocalLineFC = "D")
							LocalLineCounter = LocalLineCounter + 1
						else
							if(PurchaseOrderLineRel.ItemType = "I")
								LocalLineCounter = LocalLineCounter + 1
								LocalSerailOrLotCounter	= 1
								LocalSerailOrLot	= LocalPOReceiptLines select "count(/ReceiveDeliveryItem/SerializedLot)"
								LocalLotCounter = 0
								if(LocalSerailOrLot > 0)
									LocalTotSerailNum		= ""
									LocalTotSerailNum		= LocalPOReceiptLines select "count(/ReceiveDeliveryItem/SerializedLot/SerialNumber)"
									if(LocalTotSerailNum entered)  
										while(LocalSerailOrLotCounter <= LocalTotSerailNum)
											LocalSerialNum	=	LocalPOReceiptLines select "/ReceiveDeliveryItem/SerializedLot[1]/SerialNumber[<LocalSerailOrLotCounter>]"
											invoke Create PurchaseOrderTransactionDetail
												resume on error
							                   		Error           				= true
							                        ErrorMessage   	 				= error message
												invoked.Company															= LocalCompany
												invoked.PurchaseOrderReceipt											= LocalPurchaseOrderReceipt
												invoked.Item															= LocalItem
												invoked.Quantity														= LocalQuantity
												invoked.Serial															= LocalSerialNum
												invoked.PurchaseOrderTransactionDetail.PurchaseTransactionDocumentType	= "PO"
												invoked.PurchaseOrderTransactionDetail.DocumentNumberNumeric			= LocalPurchaseOrderReceipt
												invoked.PurchaseOrderTransactionDetail.LineNumber						= LocalLineNumber
												invoked.PurchaseOrderTransactionDetail.TransactionSequence				= LocalSerailOrLotCounter
												invoked.ReceivingLocation												= LocalLocation
											
											LocalSerailOrLotCounter = LocalSerailOrLotCounter +1
									else 
										LocalLotNum	= LocalPOReceiptLines select "/ReceiveDeliveryItem/SerializedLot/Lot/LotIDs/ID"
										LocalQuantity  = LocalPOReceiptLines select "/ReceiveDeliveryItem/SerializedLot[<LocalSerailOrLotCounter>]/Lot/Quantity"
										invoke Create PurchaseOrderTransactionDetail
											resume on error
						                   		Error           				= true
						                        ErrorMessage   	 				= error message
											invoked.Company															= LocalCompany
											invoked.PurchaseOrderReceipt											= LocalPurchaseOrderReceipt
											invoked.Item															= LocalItem
											invoked.Quantity														= LocalQuantity
											invoked.Lot															    = LocalLotNum
											invoked.PurchaseOrderTransactionDetail.PurchaseTransactionDocumentType	= "PO"
											invoked.PurchaseOrderTransactionDetail.DocumentNumberNumeric			= LocalPurchaseOrderReceipt
											invoked.PurchaseOrderTransactionDetail.LineNumber						= LocalLineNumber
											invoked.PurchaseOrderTransactionDetail.TransactionSequence				= LocalSerailOrLotCounter
											invoked.ReceivingLocation												= LocalLocation
										LocalSerailOrLotCounter = LocalSerailOrLotCounter + 1
													
							else
								LocalLineCounter = LocalLineCounter + 1
				if(DerivedUpdateReleaseReceipt = "Y")
					invoke Update FSMInboundBODTrackerRel


						invoked.Status						= 3
						invoked.CloseDate					= system current timestamp
				else
				if((DerivedUpdateReleaseReceipt = "N" or DerivedUpdateReleaseReceipt not entered) and (!FSMInboundBODTrackerRel.Error))
					if(SRDPurchaseOrderRel.Released = true)
						if(LocalNumOfLines = LocalNumberOfLinesAdded)
							invoke Unreleased.Release PurchaseOrderReceiptRel
								resume on error
			                   		Error           				= true
			                        ErrorMessage   	 				= error message
			                if(Error)
								invoke Update FSMInboundBODTrackerRel
									invoked.Error 						= true
									invoked.ErrorMessage 				= ErrorMessage
									invoked.Status						= 2
									invoked.CloseDate					= system current timestamp
							
								invoke SendSyncReceiveDeliveryConfirmBOD
									invoked.ReceiveDeliveryBOD 			= ReceiveDeliveryBOD
									invoked.PrmCompany					= LocalCompany
									invoked.PrmTrackerID				= LocalFSMInboundBODTracker
									invoked.PrmErrorMessage				= ErrorMessage 
							else
								invoke Update FSMInboundBODTrackerRel
									invoked.Status						= 3
									invoked.CloseDate					= system current timestamp
					else
						invoke Update FSMInboundBODTrackerRel
							invoked.Status						= 3
							invoked.CloseDate					= system current timestamp
		
		SendSyncReceiveDeliveryConfirmBOD is an Instance Action
			restricted			
			Parameters
				ReceiveDeliveryBOD 					is XMLDocument
				PrmCompany								is Alpha size 12
				PrmTrackerID							is Numeric 15
				PrmErrorMessage							is Alpha 300
			Action Rules
				LocalTrackerID					= PrmTrackerID
				LocalErrorMessage				= PrmErrorMessage
				LocalCompany   					= PrmCompany
				LocalBODXML						= ReceiveDeliveryBOD
				LocalSenderBODID				= ReceiveDeliveryBOD select "//ApplicationArea/BODID"
				LocalToLogicalID       			= ReceiveDeliveryBOD select "//ApplicationArea/Sender/LogicalID"
				LocalaccountingEntity			= ReceiveDeliveryBOD select "//DataArea/Sync/AccountingEntityID"
				LocalCreateDateTime				= ReceiveDeliveryBOD select "//ApplicationArea/CreationDateTime"
				LocalMainUserTemplate			= "IONSyncReceiveDelivery_ConfirmBOD_ST"
				LocalDocumentID					= ReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentID/ID"
				if(UserTemplateRel exists)
					send ion bod
						bod is SyncReceiveDeliveryConfirmBODXML
						bod type is "Confirm.BOD"
						document id is LocalDocumentID
						
#endif		

		LoadReceiveDeliveryBODImport is an Import Action
			restricted
			bod type is Load.ReceiveDelivery
			Parameters
				LoadReceiveDeliveryBOD is XMLDocument
			Action Rules
				LocalBODID           = LoadReceiveDeliveryBOD select "//ApplicationArea/BODID"
				LocalBODXML			 = LoadReceiveDeliveryBOD
				LocalCompany 		 = LoadReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentReference/DocumentID/ID/@accountingEntity"
				LocalPurchaseOrder	 = LoadReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentReference/DocumentID/ID"
				LocalVendor			 = PurchaseOrderLoadRDRel.Vendor		
				if(FSMBODConfigurationLoadReceiveDeliveryRel exists and FSMBODConfigurationLoadReceiveDeliveryRel.Enable)
					if(FSMInboundBODTracker not entered)
						invoke Create FSMInboundBODTracker
							assign result to NewBODTracker
							invoked.Verb 					= 3
							invoked.Noun 					= "ReceiveDelivery"	
							invoked.Direction				= 2				
							invoked.Company					= LocalCompany
							invoked.BODAccountingEntity		= LocalCompany
							invoked.BODDocumentID			= LocalPurchaseOrder
							invoked.BODID					= LocalBODID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							invoked.Vendor					= LocalVendor
							invoked.RunGroup				= DerivedRunGroup
							initialize invoked.Error			
							initialize invoked.ErrorMessage					
						LocalFSMInboundBODTracker 		= NewBODTracker.FSMInboundBODTracker
					else
						LocalFSMInboundBODTracker 		= FSMInboundBODTracker
						invoke Update FSMInboundBODTrackerRel
							invoked.Company					= LocalCompany
							invoked.BODAccountingEntity		= LocalCompany
							invoked.BODDocumentID			= LocalPurchaseOrder
							invoked.BODID					= LocalBODID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							invoked.Vendor					= LocalVendor
							invoked.RunGroup				= DerivedRunGroup
							initialize invoked.Error			
							initialize invoked.ErrorMessage	
					
					invoke CreatePOReceiptImport
						invoked.LoadReceiveDeliveryBOD			= LoadReceiveDeliveryBOD
						invoked.PrmInboundTracker				= LocalFSMInboundBODTracker
						invoked.PrmPurchaseOrderReceiptImport	= DerivedCurrentTimeStamp
						invoked.PrmCompany						= LocalCompany
						invoked.PrmRunGroup						= DerivedRunGroup
						invoked.PrmVendor						= LocalVendor
								
				else 
				if(FSMInboundBODTracker not entered)
					invoke Create FSMInboundBODTracker
						assign result to NewBODTracker
						invoked.Verb 					= 3
						invoked.Noun 					= "ReceiveDelivery"	
						invoked.Direction				= 2				
						invoked.BODDocumentID			= LocalPurchaseOrder
						invoked.BODID					= LocalBODID
						invoked.Status					= 4
						invoked.Company					= LocalCompany
						invoked.StartDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.CloseDate				= system current timestamp
						invoked.Error					= true			
						invoked.ErrorMessage			= "Load ReceiveDelivery Inbound BOD Service is not Enabled"
					LocalFSMInboundBODTracker = NewBODTracker.FSMInboundBODTracker
				else
					LocalFSMInboundBODTracker = FSMInboundBODTracker
					invoke Update FSMInboundBODTrackerRel
						invoked.BODDocumentID			= LocalPurchaseOrder
						invoked.BODID					= LocalBODID
						invoked.Status					= 4
						invoked.Company					= LocalCompany
						invoked.StartDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.CloseDate				= system current timestamp
						invoked.Error					= true			
						invoked.ErrorMessage			= "Load ReceiveDelivery Inbound BOD Service is not Enabled"
							
		CreatePOReceiptImport is an Import Action
			restricted
			Parameters
				LoadReceiveDeliveryBOD			is XMLDocument
				PrmInboundTracker   			is like FSMInboundBODTracker
				PrmPurchaseOrderReceiptImport	is Alpha size 25
				PrmCompany						is like PayablesCompany
				PrmRunGroup						is Alpha 30
				PrmVendor						is like Vendor
			Action Rules
				LocalFSMInboundBODTracker 		= PrmInboundTracker
				LocalPurchaseOrder				= LoadReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryHeader/DocumentReference/DocumentID/ID"
				LocalLineCounter				= LoadReceiveDeliveryBOD select "count(//DataArea/ReceiveDelivery/ReceiveDeliveryItem)"
				LocalRunGroup					= PrmRunGroup
				LocalCompany					= PrmCompany
				LocalVendor						= PrmVendor
				invoke CreateNoRules PurchaseOrderReceiptImport
					assign result to NewPurchaseOrderReceiptImport
					resume on error
                   		Error            					= true
                        ErrorMessage     					= error message 
                    invoked.Company							= LocalCompany
                    invoked.PurchaseOrderReceiptImport		= PrmPurchaseOrderReceiptImport
                    invoked.RunGroup						= LocalRunGroup
                    invoked.Vendor							= LocalVendor
                    invoked.PurchaseOrder					= LocalPurchaseOrder
              	LocalReferenceNumber = NewPurchaseOrderReceiptImport.PurchaseOrderReceiptImport
                if(LocalLineCounter > 0)
               		invoke CreatePOReceiptLineImport
               			invoked.LoadReceiveDeliveryBOD	= LoadReceiveDeliveryBOD
               			invoked.PrmInboundTracker 		= LocalFSMInboundBODTracker
               			invoked.PrmCompany				= LocalCompany
               			invoked.PrmRunGroup				= LocalRunGroup 
               			invoked.PrmReferenceNumber		= LocalReferenceNumber
       			else
       				LocalErrorMessage = "NoLinesExistsForReceipt"
       				invoke Update FSMInboundBODTrackerRel
							invoked.Error 						= true
							invoked.ErrorMessage 				= LocalErrorMessage
							invoked.Status						= 2
							invoked.CloseDate					= system current timestamp
						
       				invoke LoadReceiveDeliveryPulseAlert
						invoked.LoadReceiveDeliveryBOD	= LoadReceiveDeliveryBOD
						
       	CreatePOReceiptLineImport is an Import Action
       		restricted
       		Parameters
       			LoadReceiveDeliveryBOD 			is XMLDocument
				PrmInboundTracker   			is like FSMInboundBODTracker
				PrmCompany						is like PayablesCompany
				PrmRunGroup						is Alpha 30
				PrmReferenceNumber				is Alpha 25
       		Action Rules
       			LocalCompany			  = PrmCompany
       			LocalLineCounter		  = LoadReceiveDeliveryBOD select "count(//DataArea/ReceiveDelivery/ReceiveDeliveryItem)"
       			LocalFSMInboundBODTracker = PrmInboundTracker
       			LocalReferenceNumber	  = PrmReferenceNumber
       			LocalRunGroup			  = PrmRunGroup	  
       			LocalIterator = 1
       			while (LocalLineCounter >= LocalIterator)
       				LocalItem				= LoadReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalIterator>]/ItemID/ID"
       				LocalReceivedQuantity	= LoadReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalIterator>]/ReceivedQuantity"
       				LocalReceivedUOM		= LoadReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalIterator>]/ReceivedQuantity/@unitCode"
       				LocalLineNumber			= LoadReceiveDeliveryBOD select "//DataArea/ReceiveDelivery/ReceiveDeliveryItem[<LocalIterator>]/LineNumber"
       				invoke CreateNoRules PurchaseOrderReceiptLineImport
       					resume on error
                   			Error            					= true
                        	ErrorMessage     					= error message 
       					invoked.Company										= LocalCompany
       					invoked.PurchaseOrderReceiptImport					= LocalReferenceNumber
       					invoked.RunGroup									= LocalRunGroup
       					invoked.PurchaseOrderReceiptLineImport.LineNumber	= LocalLineNumber
       					invoked.Item										= LocalItem
       					invoked.EnteredReceivedQuantity						= LocalReceivedQuantity
       					invoked.ReceivedUOM									= LocalReceivedUOM
       				if(Error)
						invoke Update FSMInboundBODTrackerRel
							invoked.Error 						= Error
							invoked.ErrorMessage 				= ErrorMessage
							invoked.Status						= 2
							invoked.CloseDate					= system current timestamp 
						LocalIterator = LocalLineCounter + 1
					else	
						LocalIterator		= LocalIterator + 1
						if (LocalIterator%20 = 0)
							commit transaction
				if(!FSMInboundBODTrackerRel.Error)
					invoke Update FSMInboundBODTrackerRel
						invoked.Status					= 3
						invoked.CloseDate				= system current timestamp		
		
		LoadReceiveDeliveryPulseAlert is an Instance Action
			restricted
			Parameters
				LoadReceiveDeliveryBOD	is XMLDocument 
			Action Rules
				LocalSender					= LoadReceiveDeliveryBOD select "//ApplicationArea/Sender/ComponentID"	
				LocalPulseAlertDescription	= "PurchaseOrderReceipt " + DerivedPORIReference + " from "+ LocalSender  + " failed while processing."
				LocalErrorMessage 			= "NoLinesExistsForReceipt"
				LocalMainUserTemplate 		= "IONLoadReceiveDeliveryAlert_ST"
				if (FSMBODConfigurationPulseAlertRel exists and FSMBODConfigurationPulseAlertRel.Enable)
          			if(FSMBODConfigurationLoadReceiveDeliveryRel exists and FSMBODConfigurationLoadReceiveDeliveryRel.Enable)
          				if (UserTemplateRel exists)
							invoke TriggerPulseAlert FSMBODConfigurationPulseAlertRel
								invoked.PrmActorGroup 	= "PORECEIPTFAILUREGROUP" 
								invoked.PrmMainXML 		= LoadReceiveDeliveryPulseAlertXML	
								invoked.PrmDescription	= LocalPulseAlertDescription
								invoked.PrmBODID		= DerivedLoadReceiveDeliveryPulseAlertBODID				
				


		ProcessPurchaseOrderBODImport is an Import Action
			restricted
			bod type is Process.PurchaseOrder		
			Parameters
				ProcessPurchaseOrderBOD			is XMLDocument		
			Action Rules
				LocalBODXML					 = ProcessPurchaseOrderBOD
				LocalVariationID             = BODCurrentTimeStamp
				LocalAccountingEntity	   	 = ProcessPurchaseOrderBOD select "//DataArea/PurchaseOrder/PurchaseOrderHeader/DocumentID/ID/@accountingEntity"
				LocalBODID                   = ProcessPurchaseOrderBOD select "//ApplicationArea/BODID"	
				LocalDocumentID				 = ProcessPurchaseOrderBOD select "//DataArea/PurchaseOrder/PurchaseOrderHeader/DocumentID/ID"
				LocalPOLineLength		 	 = ProcessPurchaseOrderBOD select "count(//DataArea/PurchaseOrder/PurchaseOrderLine)"
				LocalGenericDelimiter		 = DerivedGenericDelimiter
				LocalPOCompany				 = NativePOCompany
				LocalCancelRemaining		 = DerivedCancelRemaining
				
				if(FSMBODConfigurationProcessPurchaseOrderRel exists and FSMBODConfigurationProcessPurchaseOrderRel.Enable)
					if(FSMInboundBODTracker not entered)
						invoke Create FSMInboundBODTracker
							assign result to NewBODTracker
							invoked.Verb 					= 2
							invoked.Noun 					= "ProcessPurchaseOrder"
							invoked.Direction				= 2					
							invoked.BODDocumentID			= LocalDocumentID
							invoked.BODVariationID			= LocalVariationID
							invoked.BODID					= LocalBODID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							invoked.BODAccountingEntity		= LocalAccountingEntity
							invoked.Company					= LocalCompany
							initialize invoked.Error			
							initialize invoked.ErrorMessage
						LocalFSMInboundBODTracker = NewBODTracker.FSMInboundBODTracker
					else
						LocalFSMInboundBODTracker = FSMInboundBODTracker
						invoke Update FSMInboundBODTrackerRel
							invoked.BODDocumentID			= LocalDocumentID
							invoked.BODVariationID			= LocalVariationID
							invoked.BODID					= LocalBODID
							invoked.Status					= 1
							invoked.StartDate				= system current timestamp
							invoked.BODXML					= LocalBODXML
							invoked.BODAccountingEntity		= LocalAccountingEntity
							invoked.Company					= LocalCompany
							initialize invoked.Error			
							initialize invoked.ErrorMessage

					if(LocalCancelRemaining = "Y")
						invoke ProcessPOReadingValues
							invoked.ProcessPurchaseOrderBOD	= ProcessPurchaseOrderBOD
			                invoked.PrmInboundTracker 		= LocalFSMInboundBODTracker
			                invoked.PrmCompany 				= LocalCompany
			                invoked.PrmPurchaseOrder		= LocalPONumber
			        else
						invoke Update FSMInboundBODTrackerRel
							invoked.Status						= 3
							invoked.CloseDate					= system current timestamp
			    else 
			    if(FSMInboundBODTracker not entered)
					invoke Create FSMInboundBODTracker
						assign result to NewBODTracker
						invoked.Verb 					= 2
						invoked.Noun 					= "ProcessPurchaseOrder"
						invoked.Direction				= 2					
						invoked.BODDocumentID			= LocalDocumentID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODID					= LocalBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.BODAccountingEntity		= LocalAccountingEntity
						invoked.CloseDate				= system current timestamp
						invoked.Error					= true			
						invoked.ErrorMessage			= "Process PurchaseOrder Inbound BOD Service is not Enabled"
					LocalFSMInboundBODTracker = NewBODTracker.FSMInboundBODTracker
				else
					LocalFSMInboundBODTracker = FSMInboundBODTracker
					invoke Update FSMInboundBODTrackerRel
						invoked.BODDocumentID			= LocalDocumentID
						invoked.BODVariationID			= LocalVariationID
						invoked.BODID					= LocalBODID
						invoked.Status					= 4
						invoked.StartDate				= system current timestamp
						invoked.BODXML					= LocalBODXML
						invoked.BODAccountingEntity		= LocalAccountingEntity
						invoked.CloseDate				= system current timestamp
						invoked.Error					= true			
						invoked.ErrorMessage			= "Process PurchaseOrder Inbound BOD Service is not Enabled"
						
		ProcessPOReadingValues is an Import Action 
			restricted
			Parameters
				ProcessPurchaseOrderBOD 		is XMLDocument
				PrmInboundTracker   			is like FSMInboundBODTracker
				PrmCompany						is Numeric 4
				PrmPurchaseOrder				is Numeric 12
			Action Rules
				LocalFSMInboundBODTracker 			= PrmInboundTracker	
				LocalCompany						= PrmCompany
				LocalPONumber						= PrmPurchaseOrder
				LocalIterator						= 1
				LocalPOLineLength					= ProcessPurchaseOrderBOD select "count(//DataArea/PurchaseOrder/PurchaseOrderLine)"
				if(LocalPOLineLength > 0)
					while(LocalPOLineLength >= LocalIterator)
							LocalPOLineStatus		= ProcessPurchaseOrderBOD select "//DataArea/PurchaseOrder/PurchaseOrderLine[<LocalIterator>]/Status/Code"
							LocalLineNumber			= ProcessPurchaseOrderBOD select "//DataArea/PurchaseOrder/PurchaseOrderLine[<LocalIterator>]/LineNumber"
							if(LocalPOLineStatus = "Canceled")
								if(PurchaseOrderLineRel exists)
									LocalRemainingQuantity	= PurchaseOrderLineRel.RemainingQuantity
									if(LocalRemainingQuantity != 0)
										invoke CancelLine PurchaseOrderLineRel
											resume on error
						                   		Error            				= true
						                        ErrorMessage     				= error message 
											invoked.PrmCancelQuantity			= LocalRemainingQuantity
											invoked.PrmPurchaseOrderReceipt     = true
											invoked.PrmPurchaseOrderReceiptLine = true
											invoked.CancelFromPurchaseOrderReceipt = true
										if(Error)
											invoke Update FSMInboundBODTrackerRel
												invoked.Error 						= Error
												invoked.ErrorMessage 				= ErrorMessage
												invoked.Status						= 2
												invoked.CloseDate					= system current timestamp
											invoke SendProcessPurchaseOrderConfirmBOD
												invoked.PrmErrorMessage 			= ErrorMessage
												invoked.ProcessPurchaseOrderBOD		= ProcessPurchaseOrderBOD
												invoked.PrmTrackerID				= LocalFSMInboundBODTracker
											invoke SendProcessPurchaseOrderACKBOD
						                        invoked.PrmErrorMessage 			= ErrorMessage
						                        invoked.ProcessPurchaseOrderBOD     = ProcessPurchaseOrderBOD
						                        invoked.PrmTrackerID				= LocalFSMInboundBODTracker
						                        invoked.PrmLineNumber				= LocalLineNumber
						                        invoked.POLineXML					+= template.IONProcessPurchaseOrder_POLineXML_ST document for this instance
						                  	LocalIterator	= LocalIterator + 1
						                else
						             		LocalErrorMessage	 = "Line canceled successfully."	
											LocalLineNumber		 = LocalLineNumber
						                    LocalPOLineXML 		+= template.IONProcessPurchaseOrder_POLineXML_ST document for this instance
						                    LocalIterator		 = LocalIterator + 1
				            		else
						             	LocalErrorMessage	 = "Cannot cancel the Line, remaining quantity is :" +LocalRemainingQuantity
						             	LocalLineNumber		 = LocalLineNumber						             	
						                LocalPOLineXML 		+= template.IONProcessPurchaseOrder_POLineXML_ST document for this instance
						               	LocalIterator		 = LocalIterator + 1
						                    
								else
									invoke Update FSMInboundBODTrackerRel
										invoked.Error 						= true
										invoked.ErrorMessage 				= "Unable to find PurchaseOrder for Company:"+LocalCompany+" " +"PurchaseOrder:"+ LocalPONumber+" "+"LineNumber:"+LocalLineNumber
										invoked.Status						= 2
										invoked.CloseDate					= system current timestamp
									invoke SendProcessPurchaseOrderConfirmBOD
										invoked.PrmErrorMessage 			= "Unable to find PurchaseOrder for Company:"+LocalCompany+" " +"PurchaseOrder:"+ LocalPONumber+" "+"LineNumber:"+LocalLineNumber
										invoked.ProcessPurchaseOrderBOD		= ProcessPurchaseOrderBOD
										invoked.PrmTrackerID				= LocalFSMInboundBODTracker
									invoke SendProcessPurchaseOrderACKBOD
				                        invoked.PrmErrorMessage 			= "Unable to find PurchaseOrder for Company:"+LocalCompany+" " +"PurchaseOrder:"+ LocalPONumber+" "+"LineNumber:"+LocalLineNumber
				                        invoked.ProcessPurchaseOrderBOD     = ProcessPurchaseOrderBOD
				                        invoked.PrmTrackerID				= LocalFSMInboundBODTracker
				                   	LocalIterator	= LocalIterator + 1
							else
								LocalIterator	= LocalIterator + 1
						
				else
					invoke Update FSMInboundBODTrackerRel
						invoked.Error 						= true
						invoked.ErrorMessage 				= "DoesNotExistException: No Lines exists"
						invoked.Status						= 2
						invoked.CloseDate					= system current timestamp
					invoke SendProcessPurchaseOrderConfirmBOD
						invoked.PrmErrorMessage 			= "DoesNotExistException: No Lines exists"
						invoked.ProcessPurchaseOrderBOD		= ProcessPurchaseOrderBOD
						invoked.PrmTrackerID				= LocalFSMInboundBODTracker
					invoke SendProcessPurchaseOrderACKBOD
                        invoked.PrmErrorMessage 			= "DoesNotExistException: No Lines exists"
                        invoked.ProcessPurchaseOrderBOD     = ProcessPurchaseOrderBOD
                        invoked.PrmTrackerID				= LocalFSMInboundBODTracker
                        
                if(!FSMInboundBODTrackerRel.Error)
					invoke Update FSMInboundBODTrackerRel
						invoked.Status						= 3
						invoked.CloseDate					= system current timestamp
					invoke SendProcessPurchaseOrderACKBOD
	                	invoked.PrmErrorMessage 			= ErrorMessage
	                	invoked.ProcessPurchaseOrderBOD     = ProcessPurchaseOrderBOD
	                	invoked.PrmTrackerID				= LocalFSMInboundBODTracker
	                	invoked.POLineXML					= LocalPOLineXML	 
						
				
		SendProcessPurchaseOrderACKBOD is an Instance Action
			restricted			
			Parameters
				ProcessPurchaseOrderBOD 				is XMLDocument
				PrmErrorMessage 						is Alpha 300
				PrmTrackerID							is Numeric 15
				PrmLineNumber							is Numeric 6
				POLineXML								is XMLDocument
			Action Rules
				LocalProcessPurchaseOrderXML			= ProcessPurchaseOrderBOD
				LocalTrackerID							= PrmTrackerID
				LocalLineNumber							= PrmLineNumber
				LocalErrorMessage						= PrmErrorMessage
				LocalPOLineXML							= POLineXML
				LocalToLogicalID						= ProcessPurchaseOrderBOD select "//ApplicationArea/Sender/LogicalID"
				LocalComponentID						= ProcessPurchaseOrderBOD select "//ApplicationArea/Sender/ComponentID"
				LocalOriginalCreateDateTime				= ProcessPurchaseOrderBOD select "//ApplicationArea/CreationDateTime"
				LocalBODID								= ProcessPurchaseOrderBOD select "//ApplicationArea/BODID"
				LocalDocumentID				       	    = ProcessPurchaseOrderBOD select "//DataArea/PurchaseOrder/PurchaseOrderHeader/DocumentID/ID"
				LocalAccountingEntity	   		   	    = ProcessPurchaseOrderBOD select "//DataArea/PurchaseOrder/PurchaseOrderHeader/DocumentID/ID/@accountingEntity"
				LocalMainUserTemplate					= "IONProcessPurchaseOrder_AcknowledgeBOD_ST"
				if(UserTemplateRel exists)
					send ion bod
						bod is ProcessPurchaseOrderAcknowledgeBODXML
						bod type is "Acknowledge.PurchaseOrder"	
						accounting entity is LocalAccountingEntity
						document id is LocalDocumentID
				
		SendProcessPurchaseOrderConfirmBOD is an Instance Action
			restricted			
			Parameters
				ProcessPurchaseOrderBOD 	is XMLDocument
				PrmErrorMessage		        is Alpha 300
				PrmTrackerID			    is Numeric 15
			Action Rules
				LocalProcessPurchaseOrderXML		= ProcessPurchaseOrderBOD
				LocalErrorMessage					= PrmErrorMessage
				LocalTrackerID						= PrmTrackerID
				LocalToLogicalID					= ProcessPurchaseOrderBOD select "//ApplicationArea/Sender/LogicalID"
				LocalComponentID					= ProcessPurchaseOrderBOD select "//ApplicationArea/Sender/ComponentID"
				LocalOriginalCreateDateTime			= ProcessPurchaseOrderBOD select "//ApplicationArea/CreationDateTime"
				LocalBODID							= ProcessPurchaseOrderBOD select "//ApplicationArea/BODID"
				LocalDocumentID				        = ProcessPurchaseOrderBOD select "//DataArea/PurchaseOrder/PurchaseOrderHeader/DocumentID/ID"
				LocalAccountingEntity	   		    = ProcessPurchaseOrderBOD select "//DataArea/PurchaseOrder/PurchaseOrderHeader/DocumentID/ID/@accountingEntity"
				LocalConfirmBOD						= "true"
				LocalMainUserTemplate				= "IONProcessPurchaseOrder_ConfirmBOD_ST"
				if(UserTemplateRel exists)
					send ion bod
						bod is ProcessPurchaseOrderConfirmBODXML
						bod type is "Confirm.BOD"
						accounting entity is LocalAccountingEntity
						document id is LocalDocumentID				

