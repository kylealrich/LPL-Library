ExpenseManagementStagingDetail is a BusinessClass
    owned by ap
    prefix is XME
    sql name is XMStagingDetail
    classic name is CTXMEXPDTL

    Ontology
        symbolic key is ExpenseManagementStagingDetail
            classic set name is XMESET1
            sql name is XMStagingDetail
            classic name is OBJID

    Patterns
        implements StaticJava
        disable AuditIndex

    Persistent Fields

        RelatedInterfaceDetail		is an ExpenseManagementStagingDetail
		RelatedLineSequence			is Numeric 3
        BaseAmount      			is an InternationalAmount
        BaseCurrency     			is a Currency
        ExchangeRate				is a CurrencyRate
        TransactionAmount      		is an InternationalAmount
        TransactionCurrency     	is a Currency
        TransactionDate         	is Date
        PayMethod      				is Numeric size 9
        Personal     				is Numeric size 4
        AccountingEntity
        ExpenseManagementInterfaceExpenseType
        IsCashAdvance				is Boolean
        FinanceStructure			is a FinanceCodeBlock
        ApprovedBaseAmount  		is an InternationalAmount
        ApprovedBaseCurrency 		is a Currency
        ApprovedTransactionAmount  	is an InternationalAmount
        ApprovedTransactionCurrency is a Currency
        Billable     				is Boolean
        Status        				is Numeric size 4
        SpecialCode   				is Numeric size 4
        CreditCardNumber			is Alpha 16
        CreditCardIssuer			is Alpha 250
		TaxCode											
		
	Local Fields

		
	Derived Fields
			
	Field Rules
		RelatedLineSequence
			if (RelatedInterfaceDetail entered)
				required
        PayMethod
            required
				
	Conditions
		HasRelatedLines
			restricted
			when (RelatedLinesRel exists)
			
		FirstRelatedLine
			restricted
			when (RelatedInterfaceDetail entered
			and   RelatedLineSequence = 1)

		RelatedLineNotFirst
			restricted
			when (RelatedInterfaceDetail entered
			and   RelatedLineSequence != 1)

	Relations
		
        ExpenseManagementInterfaceCreditCardIssuerRel
            one-to-one relation to ExpenseManagementInterfaceCreditCardIssuer
            Field Mapping uses symbolic key
                related.FinanceEnterpriseGroup						= VendorGroup.BusinessGroup.FinanceEnterpriseGroup
                related.ExpenseManagementInterfaceCreditCardIssuer	= CreditCardIssuer

        RelatedLinesRel
            one-to-many relation to ExpenseManagementStagingDetail
            Field Mapping uses ByRelatedDetail
                related.VendorGroup								= VendorGroup
                related.ExpenseManagementStagingHeader			= ExpenseManagementStagingHeader
                related.RelatedInterfaceDetail					= ExpenseManagementStagingDetail

    Sets








        ByRelatedDetail
            indexed
            Sort Order
            	VendorGroup
                ExpenseManagementStagingHeader
                RelatedInterfaceDetail
                ExpenseManagementStagingDetail
                
        ByCreditCardIssuer
            indexed
            Sort Order
            	VendorGroup
                ExpenseManagementStagingHeader
                CreditCardIssuer
                CreditCardNumber
                ExpenseManagementStagingDetail

	Rule Blocks
		ValidateData
			if (VendorGroup.FinanceEnterpriseGroup.AccountingUnitOrder not entered)
				FinanceStructure.AccountingUnit		= blank
			if (VendorGroup.FinanceEnterpriseGroup.ProjectOrder not entered)
				FinanceStructure.Project 			= blank

	Actions
		Create is a Create Action
			Exit Rules
				include ValidateData
						
		Update is an Update Action
			Exit Rules
				include ValidateData

		FastUpdate is an Update Action
			restricted
			bypass field rules
			Exit Rules
				include ValidateData

		Delete is a Delete Action
		
		Purge is a Purge Action
	
		
					
