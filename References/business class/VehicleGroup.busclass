VehicleGroup is a BusinessClass
    owned by wh
    prefix is VHGP

    Ontology
        symbolic key is VehicleGroup

    Patterns 
        disable AuditIndex
    
    Persistent Fields
        Description
        WeekDaysFlag
        NonOperatingDateAndDescription

    Conditions
        RecordExists
            when (VehicleGroup exists)

        RelatesToVehicle
            when (AssignedVehicleRel exists)
            
        RelatesToUnreleasedLoadNumber
            when (VehicleInUseRel exists)

    Relations
        AssignedVehicleRel 
            one-to-many relation to Vehicle
            Field Mapping uses ByVehicleGroup 
                related.Company              = Company
                related.AssignedVehicleGroup = VehicleGroup

        UnassignedVehicleRel
            one-to-many relation to Vehicle
            Field Mapping uses ByVehicleGroup 
                related.Company              = Company
                related.AssignedVehicleGroup = blank
        
        VehicleInUseRel
            one-to-many relation to Vehicle
            Field Mapping uses ByVehicleGroup 
                related.Company              = Company
                related.AssignedVehicleGroup = VehicleGroup
            Instance Selection
                where (related.Vehicle.IsVehicleUsed)

	Field Rules
        Description
            required
        
        WeekDaysFlag
            required
                "AtLeastOne_Operating_DayIsRequired"

	Actions		
        Create is a Create Action
        Update is an Update Action
            valid when (not RelatesToUnreleasedLoadNumber)
        Delete is a Delete Action
            valid when (not RelatesToVehicle)
            
                    
            

    
				

