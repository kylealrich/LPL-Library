BudgetTemplateRecalculate is a BusinessClass
	owned by GeneralLedger
	prefix is BUDTR
   
    Ontology
    	symbolic key is BudgetTemplateRecalculate

    Patterns
 		disable Auditing 
 		disable EffectiveDated

    Persistent Fields

        AccountingEntity

        AccountingUnit

        GeneralLedgerChartAccount 
        	default label is "GlobalLedgerChartAccount"

        Project

        FinanceDimension1

        FinanceDimension2

        FinanceDimension3

        FinanceDimension4

        FinanceDimension5

        FinanceDimension6

        FinanceDimension7

        FinanceDimension8

        FinanceDimension9

        FinanceDimension10 


		Processed					is Boolean
		CodeBlockDimensionType
		
    Transient Fields

	Local Fields
		
	Derived Fields
        DimensionCode        is a StringField
            type is Alpha 105
            restricted
            AccountingEntity.DerivedSequenceNumber
            AccountingUnit.DerivedSequenceNumber
            GeneralLedgerChartAccount.DerivedSequenceNumber
            Project.DerivedSequenceNumber
			FinanceDimension1.DerivedSequenceNumber
			FinanceDimension2.DerivedSequenceNumber
			FinanceDimension3.DerivedSequenceNumber
			FinanceDimension4.DerivedSequenceNumber
			FinanceDimension5.DerivedSequenceNumber
			FinanceDimension6.DerivedSequenceNumber
			FinanceDimension7.DerivedSequenceNumber
			FinanceDimension8.DerivedSequenceNumber
			FinanceDimension9.DerivedSequenceNumber
			FinanceDimension10.DerivedSequenceNumber

	Conditions

	Relations
	
	Sets
		ByCodeBlockDimensionType
			duplicates
			Sort Order
				FinanceEnterpriseGroup
				Scenario
				BudgetTemplate
				CodeBlockDimensionType
		ByAccountingUnit
			Sort Order
				FinanceEnterpriseGroup
				Scenario
				BudgetTemplate
				AccountingEntity
				AccountingUnit
			Instance Selection
				where (CodeBlockDimensionType.AccountingUnit)
		ByProject
			Sort Order
				FinanceEnterpriseGroup
				Scenario
				BudgetTemplate
				Project
			Instance Selection
				where (CodeBlockDimensionType.Project)
		ByAccount
			Sort Order
				FinanceEnterpriseGroup
				Scenario
				BudgetTemplate
				GeneralLedgerChartAccount
			Instance Selection
				where (CodeBlockDimensionType.Account)
		ByFinanceDimension1
			Sort Order
				FinanceEnterpriseGroup
				Scenario
				BudgetTemplate
				FinanceDimension1
			Instance Selection
				where (CodeBlockDimensionType.Dimension1)
		ByFinanceDimension2
			Sort Order
				FinanceEnterpriseGroup
				Scenario
				BudgetTemplate
				FinanceDimension2
			Instance Selection
				where (CodeBlockDimensionType.Dimension2)
		ByFinanceDimension3
			Sort Order
				FinanceEnterpriseGroup
				Scenario
				BudgetTemplate
				FinanceDimension3
			Instance Selection
				where (CodeBlockDimensionType.Dimension3)
		ByFinanceDimension4
			Sort Order
				FinanceEnterpriseGroup
				Scenario
				BudgetTemplate
				FinanceDimension4
			Instance Selection
				where (CodeBlockDimensionType.Dimension4)
		ByFinanceDimension5
			Sort Order
				FinanceEnterpriseGroup
				Scenario
				BudgetTemplate
				FinanceDimension5
			Instance Selection
				where (CodeBlockDimensionType.Dimension5)
		ByFinanceDimension6
			Sort Order
				FinanceEnterpriseGroup
				Scenario
				BudgetTemplate
				FinanceDimension6
			Instance Selection
				where (CodeBlockDimensionType.Dimension6)
		ByFinanceDimension7
			Sort Order
				FinanceEnterpriseGroup
				Scenario
				BudgetTemplate
				FinanceDimension7
			Instance Selection
				where (CodeBlockDimensionType.Dimension7)
		ByFinanceDimension8
			Sort Order
				FinanceEnterpriseGroup
				Scenario
				BudgetTemplate
				FinanceDimension8
			Instance Selection
				where (CodeBlockDimensionType.Dimension8)
		ByFinanceDimension9
			Sort Order
				FinanceEnterpriseGroup
				Scenario
				BudgetTemplate
				FinanceDimension9
			Instance Selection
				where (CodeBlockDimensionType.Dimension9)
		ByFinanceDimension10
			Sort Order
				FinanceEnterpriseGroup
				Scenario
				BudgetTemplate
				FinanceDimension10
			Instance Selection
				where (CodeBlockDimensionType.Dimension10)

	Field Rules

	Attach Rules
		
	Rule Blocks
		SetDimensionType
            if (AccountingUnit entered)
                	CodeBlockDimensionType	= CodeBlockDimensionType.AccountingUnit
            else
            if (GeneralLedgerChartAccount entered)
                CodeBlockDimensionType	= CodeBlockDimensionType.Account
            else
            if (Project entered)
                CodeBlockDimensionType	= CodeBlockDimensionType.Project
            else
            if (FinanceDimension1 entered)
                CodeBlockDimensionType	= CodeBlockDimensionType.Dimension1
            else
            if (FinanceDimension2 entered)
                CodeBlockDimensionType	= CodeBlockDimensionType.Dimension2
            else
            if (FinanceDimension3 entered)
                CodeBlockDimensionType	= CodeBlockDimensionType.Dimension3
            else
            if (FinanceDimension4 entered)
                CodeBlockDimensionType	= CodeBlockDimensionType.Dimension4
            else
            if (FinanceDimension5 entered)
                CodeBlockDimensionType	= CodeBlockDimensionType.Dimension5
            else
            if (FinanceDimension6 entered)
                CodeBlockDimensionType	= CodeBlockDimensionType.Dimension6
            else
            if (FinanceDimension7 entered)
                CodeBlockDimensionType	= CodeBlockDimensionType.Dimension7
            else
            if (FinanceDimension8 entered)
                CodeBlockDimensionType	= CodeBlockDimensionType.Dimension8
            else
            if (FinanceDimension9 entered)
                CodeBlockDimensionType	= CodeBlockDimensionType.Dimension9
            else
            if (FinanceDimension10 entered)
                CodeBlockDimensionType	= CodeBlockDimensionType.Dimension10


    Actions
	
    	Create is a Create Action
    		restricted
            Entrance Rules
                BudgetTemplateRecalculate  		= DimensionCode
                include SetDimensionType
            Exit Rules

		Update is an Update Action
			restricted

		Delete is a Delete Action
			restricted
			
		Purge is a Purge Action
			restricted
			bypass relational integrity rules
			
		DeleteAllForTemplate is a Set Action
			restricted
			Parameters
				PrmFinanceEnterpriseGroup		is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
				PrmScenario						is a Scenario
					default label is "Scenario"
				PrmTemplate						is a BudgetTemplate
					default label is "Template"
			Instance Selection
				where (FinanceEnterpriseGroup	= PrmFinanceEnterpriseGroup
				and Scenario					= PrmScenario
				and BudgetTemplate				= PrmTemplate)
			Action Rules
				Instance Rules
					invoke Delete
