AllocationDetailByStepHeader is a BusinessClass
    owned by Allocations
    prefix is ALTDR

    Ontology
        symbolic key is AllocationDetailByStepHeader

    Patterns
        disable Auditing
        disable EffectiveDated        

    Persistent Fields

    Derived Fields 
        DerivedAllocationStep is a DerivedField
            type is like AllocationStepNumber
            restricted
            return AllocationDetailByStepHeader.AllocationStep * -1


    Sets
        ByAllocationRunAllocationAndStep
            Sort Order
                FinanceEnterpriseGroup
                AllocationDetailByStepHeader.AllocationRun
                AllocationDetailByStepHeader.Allocation  
                AllocationDetailByStepHeader.AllocationStep 
    
    Relations
        AllocationRunRel
            one-to-one relation to AllocationRun
            Field Mapping uses symbolic key
                related.FinanceEnterpriseGroup  = FinanceEnterpriseGroup
                related.AllocationRun           = AllocationDetailByStepHeader.AllocationRun

		AllocationTransactionDetailsGroupByAllocationAndStep
			one-to-many relation to AllocationTransactionDetail			
			Field Mapping uses ByAllocationAndStep
                related.FinanceEnterpriseGroup  = FinanceEnterpriseGroup			
                related.AllocationRun			= AllocationDetailByStepHeader.AllocationRun
            Instance Selection
                where (related.Allocation		= AllocationDetailByStepHeader.Allocation
                and    related.AllocationStep	= DerivedAllocationStep)

        AllocationDetailGroupByCurrencyDisplayHeaderRel
            one-to-many relation to AllocationDetailByCurrency
            Field Mapping uses ByAllocationStepAndCurrency
                related.FinanceEnterpriseGroup                     = FinanceEnterpriseGroup
                related.AllocationDetailByCurrency.AllocationRun   = AllocationDetailByStepHeader.AllocationRun
                related.AllocationDetailByCurrency.Allocation      = AllocationDetailByStepHeader.Allocation
                related.AllocationDetailByCurrency.AllocationStep  = AllocationDetailByStepHeader.AllocationStep
            
    Actions

        Create is an Action
            restricted
        Update is an Action
            restricted
        Delete is an Action
            restricted
