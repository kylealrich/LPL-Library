FinanceDimension2 is a BusinessClass
	owned by GeneralLedger
	prefix is FDIM2
	representative text is "<DerivedRepresentativeText>"   

    
    Ontology
    	symbolic key is FinanceDimension2

    Patterns
        implements BODId    
		implements ChildHierarchy
			children are DimensionChildrenRel
			child set is DimensionHierarchyRel
				child is FinanceDimension2
			top node when (DimensionType.Node)
			descendants are DescendantsRel
		implements InlineUserFields
			size is 3000
			
   	Context Fields
		ContextDimension			is a FinanceDimension2ContextValue
		FinanceDimension2Structure
		InvokedByUnusedStructure
		AllocationContext
		ContextProjectContract		is a ProjectContract		
		BypassActiveCodeBlockEdit
		ProjectIndirectBurdenCode
#ifdef module integration
		FSMInboundBODTracker
#endif
		
    Persistent Fields
		Description
		DimensionType
		DisplayDimension			is like FinanceDimension2
			translatable			
		Active
		SequenceNumber				is Numeric 7
    	OldSystemDimension			is Boolean
    	BudgetIdentifier
    	IsTopNode					is Boolean    	
    	Level						is Numeric 3						
		ParentFinanceDimension2		is like FinanceDimension2           
		DimensionStructure			is like FinanceDimension2Structure  
		FundingType					is a ProjectFundingType				
		Department					is a FinanceDimension2Department	
		Division					is a FinanceDimension2Division		
 		DateRange														
        Amount						is a CurrencyAmount 				
			precision is Currency.NumberOfDecimals	
		RevenueCodeBlockOption		is Numeric size 1					
			default label is "RevenueStructureOption"
			States
				FullStructure		value is 1
				PartialStructure	value is 2
				None				value is 3
		RevenueFullAccount			is a FinanceCodeBlockFullNoProjectFD2
			default label is "FullRevenueFinanceStructure"		
		RevenuePartialAccount		is a FinanceCodeBlockNoProjectFD2	
			default label is "PartialRevenueFinanceStructure"
		RevenueAccountOnly			is a GeneralLedgerChartAccount		
		RevenueDimension			is a ProjectCodeBlock				
		RevenueRecognitionOption	is Numeric 1						
			States
				Detail				value is 0
				Summary				value is 1
 		Currency					is a FromCurrency					
		PersonResponsible			is an Employee						
 		EstimateCloseDate			is Date								
 		ActualDate					is Date								
 		SubmitDate					is Date								
 		NoticeDate					is Date								
 		ReceiveDate					is Date								
 		ProposalDate				is Date								
 		MatchRequired				is Boolean							
 		MatchPercent				is Percent size 7.3					
		CFDANumber					is a FinanceDimension2ALNCode		
			default label is "A\L\N"
		MajorCategory				is a ProjectMajorCategory
		CustomerPoNumber 			is Alpha 22							
		DocumentNumber 				is Alpha 50 						
		ProgramTitle 				is a FinanceDimension2ProgramTitle  
		OffsetAccount				is a FinanceCodeBlockFullOffset		
			default label is "OffsetFinanceStructure"		
		InvoiceFinanceCodeBlock		is a FinanceCodeBlockFull
			default label is "ReceivableFinanceStructure"
#ifdef module ar 		
		PerformFundEdits 			is a PerformExternalFundEdits		
		CompanyCustomerGroup											
#endif
#ifndef module ar
		PerformFundEdits			is Boolean							
		CompanyCustomerGroup		is a GlonlyCompanyCustomerGroup		
#endif					
		ARInterfaceOption			is Numeric 1						
			States
				Summary					    value is 1
				Detail						value is 2
				SummarizeByPostingProject	value is 3 		
		LetterOfCredit 				is Alpha 20							
		InvoiceFormat													
		AddressCode
		ProjectJurisdictionCode											
		PrimeFlag          			is Numeric 1						
			default label is "DirectOrPassThru"
			States
				Direct					value is 1
				PassThru				value is 2
#ifdef module ar		
		PrimeSponsor                is a CompanyAndCustomer				
#endif        
#ifndef module ar		
		PrimeSponsor                is a GlonlyCompanyAndCustomer		
#endif        
		PrimeSponsorAwardNumber		is Alpha 30							
		GrantID						is Alpha 30							
		SEFAFlag                    is Boolean  						

		IndirectExpenseAccount	is a GeneralLedgerChartAccount			
			delete ignored			
		ProgramIncomeEarned     is a GeneralLedgerChartAccount			
			delete ignored		
		ProjectTeam
        RequiredRecipientShare						is a CurrencyAmount	
			precision is Currency.NumberOfDecimals	
        RecipientShareOfExpenditures				is a CurrencyAmount	
			precision is Currency.NumberOfDecimals	
        FederalProgramIncome						is a CurrencyAmount 
			precision is Currency.NumberOfDecimals	
        ProgramIncomeExpendedDeductionAlternative 	is a CurrencyAmount 
			precision is Currency.NumberOfDecimals	
        ProgramIncomeExpendedAdditionAlternative	is a CurrencyAmount	
			precision is Currency.NumberOfDecimals	
        IndirectExpenseType 	is Numeric 1		
        	States
        		Provisional		value is 1
        		Predetermined	value is 2
        		Final			value is 3
        		Fixed  			value is 4	
       	IndirectExpenseRate	is Percent size 5.2							
       	IndirectExpenseBaseAmount 					is a CurrencyAmount 
			precision is Currency.NumberOfDecimals	
        IndirectExpenseAmountCharged				is a CurrencyAmount 
			precision is Currency.NumberOfDecimals	
        IndirectExpenseFederalShare					is a CurrencyAmount 
			precision is Currency.NumberOfDecimals	
    	PreAwardID 				is Alpha size 25 
    		default label is "Pre-AwardID"

	Transient Fields
		TransientContextDimension	is a FinanceDimension2ContextValue
			derive value from FinanceDimension2
		ParentDimension				is a FinanceDimension2
			derive value from DimensionInContextStructureRel.ParentDimension
    	SystemDimension				is Boolean
    		derive value from DerivedSystemDimension
    	IncludeInBudgetEdit			is Boolean
    		derive value from DerivedIncludeInBudgetEdit      		
 		SkipHierarchy				is Boolean
		InvokedByCreateWithin		is Boolean
		SkipPropagate				is Boolean
		NewDimension		 		is like FinanceDimension2
		BypassNewStructureNotification is Boolean
		BypassUpdateStructure		is Boolean
		CreateDimensionType			is Numeric 2
			States
	    		Summary	value is 2
	    		Posting	value is 1
	    	derive value from DimensionType
		CreateFundingType			is a ProjectFundingType				
		BypassStructureRelationEdit
		LocalContextStructure		is like FinanceDimension2Structure		

	Conditions
		PostingDimension
			restricted
			when (DimensionType.Posting)
		SummaryDimension
			restricted
			when (DimensionType.Summary)
		SummaryOrPostingDimension
			restricted
			when (!DimensionType.Node)
		SummaryOrPostingInStructure
			restricted
			when (SummaryOrPostingDimension
			and   DimensionInContextStructureRel exists)
		IsAchild
			restricted
			when (DimensionInContextStructureRel exists)
		EligibleParent
			restricted
			when (DimensionType.Summary
			and   DimensionStructure = FinanceDimension2Structure
			and   FinanceDimension2 != ContextDimension
			and   FinanceDimension2 != ContextDimensionRel.ParentDimension
			and   !DescendantOfContextDimension)
		RecordExists
			restricted
			when (FinanceDimension2 exists)
		HasChildren
			restricted
			when (DimensionHierarchyRel exists)
		IsASystemDimension
			restricted
			when (SystemDimension)
		NodeDimension
			restricted
			when (DimensionType.Node)
		SummaryDimensionOrNodeInFinanceDimension2Structure
			restricted
			when ((FinanceDimension2 != ContextDimension)
			and   (DimensionStructure = FinanceDimension2Structure
			and   (DimensionType.Node)
			or    (DimensionType.Summary
			and    HelperListDimensionRel exists)))
		SummaryInStructure
			restricted
			when (FinanceDimension2 != ContextDimension
			and   DimensionType.Summary			
			and   DimensionInContextStructureRel exists
			and   HelperListDimensionRel exists)
		HelperListDimension
			restricted
			when (DimensionType.Posting
			and  !HelperListDimensionRel exists)
		NotUsedInHierarchy
			restricted
			when (DimensionType.Posting
			and   !DimensionInContextStructureRel exists)
		NotUsedInAStructure
			restricted
			when (DimensionType.Posting
			and   !FinanceDimension2Hierarchy(FinanceDimension2) set exists)
		SummaryWithinTopNode
			restricted
			when (!DimensionType.Posting
			and   DimensionStructure = FinanceDimension2Structure)	
		SummaryInEnterpriseStructure
			restricted
			when (DimensionType.Summary
			and   DimensionStructure = FinanceEnterpriseGroup.EnterpriseDim2Structure)
		InEnterpriseStructure
			restricted
			when (FinanceDimension2Structure = FinanceEnterpriseGroup.EnterpriseDim2Structure)
		FutureChanges
			restricted
			when (this instance.has future changes)
		EligibleToRemove
			restricted
			when (!DimensionChildrenRel exists)
		EligibleToDelete
			restricted
			when (DimensionType.Posting
			and  !UsedByATransaction)
		IsProjectInvoicing
			restricted
			when (FinanceEnterpriseGroup.ProjectInvoicing
			and   DimensionType.Posting
			and   !IsASystemDimension)
		IsProjectInvoicingExpenditures
			restricted
			when (IsProjectInvoicing
			and   CFDANumber entered
			and   (FinanceDimension2.FundingType.ExternalGrant
			or    FundingType.IntercompanyBilling)						
			and   FinanceDimension2.SEFAFlag = true)  
		IsProjectInvoicingSummary
			restricted
			when (FinanceEnterpriseGroup.ProjectInvoicing
			and   DimensionType.Summary
			and   !IsASystemDimension)
		FEGHasProjectInvoicing
			restricted
			when (FinanceEnterpriseGroup.ProjectInvoicing
			and   !IsASystemDimension)
		IsSummaryProjectInvoicing
			restricted
			when (FinanceEnterpriseGroup.ProjectInvoicing
			and   DimensionType.Summary)
		IsSummaryNotProjectInvoicing
			restricted
			when (!FinanceEnterpriseGroup.ProjectInvoicing
			and   DimensionType.Summary)
		IsExternalGrant
			restricted
			when (FinanceEnterpriseGroup.ProjectInvoicing
			and   FundingType.ExternalGrant
			and   DimensionType.Posting)
		IsExternalGrantOrIntercompanyBilling			
			restricted
			when (FinanceEnterpriseGroup.ProjectInvoicing
			and  (FundingType.ExternalGrant
			or    FundingType.IntercompanyBilling)			
			and   DimensionType.Posting)
		IsExternalOrIntercompanyBilling
			restricted
			when (FundingType.ExternalGrant
			or    FundingType.IntercompanyBilling)
		IsExternalCustomer
			restricted
			when (FinanceEnterpriseGroup.ProjectInvoicing
			and   FundingType.ExternalCustomer
			and   DimensionType.Posting)
		IsExternalGrantOrCustomer
			restricted		
			when (IsExternalGrant
			or    IsExternalCustomer)
		IsIntercompanyBilling
			restricted
			when (FinanceEnterpriseGroup.ProjectInvoicing
			and   FundingType.IntercompanyBilling
			and   DimensionType.Posting)
		IsInternalFund
			restricted
			when (FinanceEnterpriseGroup.ProjectInvoicing
			and   FundingType.InternalFund
			and   DimensionType.Posting)
		ValidForProjectContracts
			restricted
			when (FinanceEnterpriseGroup.ProjectInvoicing
			and   FundingType entered
			and   DimensionType.Posting
			and   DimensionInEnterpriseStructureRel exists)		
		HasPersonResponsible
			restricted
			when (PersonResponsible entered)
		HasFinanceDimension2Comments
			restricted
			when (FinanceDimension2Comment set exists)
		ProjectInvoicingNotInEnterpriseStructure
			restricted
			when (!InEnterpriseStructure
			and   FinanceEnterpriseGroup.ProjectInvoicing)
		YellowDueDateAlertCond
			restricted
			when (DateRange.End entered
			and   current corporate date >= RedDueDateAlert
			and   current corporate date <= DateRange.End)
		RedDueDateAlertCond
			restricted
			when (DateRange.End entered
			and   current corporate date >= RedDueDateAlert)
		FundingSourceToExpire
			restricted

			when (YellowDueDateAlertCond)
		FundingSourceHasExpired
			restricted
			when (DateRange.End  entered
			and   current corporate date > DateRange.End)
		SystemDimension2
			when (DimensionType.Posting
			and   SystemDimension)	
		IsPostingNonProjectInvoicing
			restricted
			when (!FinanceEnterpriseGroup.ProjectInvoicing
			and   DimensionType.Posting)
		ProjectIndirectBurdenCodeInContext
			restricted
			when (ProjectIndirectBurdenCode in context
			and   ProjectIndirectBurdenCode entered)
#ifdef module ar
		IsInforTax
			restricted
			when (TaxEntityRel.ThirdParty.InforTax
			and  !FundingType.IntercompanyBilling)
		IsVertex
			restricted
			when (TaxEntityRel.ThirdParty.VertexOSeries
			and  !FundingType.IntercompanyBilling)
		IsOneSource
			restricted
			when (TaxEntityRel.ThirdParty.Sabrix
			and  !FundingType.IntercompanyBilling)
		RelatedCompanyCustomerExists
			restricted		
      		when (CompanyCustomerRel exists)
		RelatedCustomerGroupExists
			restricted
			when (CustomerGroupRel exists)
		RelatedPrimeSponsorCompanyCustomerExists
			restricted		
      		when (CompanyCustomerPrimeSponsorRel exists)
		HasReceivablePrepayments    
			restricted		            
			when (ReceivablePrepaymentRel exists)
#endif				

		ActionCreate
			when (action = "create")
		ActionUpdate
			when (!action = "create"
			and	!action = "Delete")
		ActionDelete
			when (action = "Delete")
		FinanceEnterpriseGroupUpdate
			when (!FinanceEnterpriseGroup = old FinanceEnterpriseGroup)
		DimensionTypeUpdate
			when (!DimensionType = old DimensionType)
		DisplayDimensionUpdate
			when (!DisplayDimension = old DisplayDimension)
		DescriptionUpdate
			when (!Description = old Description)
		ActiveUpdate
			when (!Active = old Active)
		BudgetIdentifierUpdate
			when (!BudgetIdentifier = old BudgetIdentifier)
		AddressCodeUpdate
			when (!AddressCode = old AddressCode)
		SequenceNumberUpdate
			when (!SequenceNumber = old SequenceNumber)
		LevelUpdate
			when (!Level = old Level)
		IsTopNodeUpdate
			when (!IsTopNode = old IsTopNode)
		ParentFinanceDimension2Update
			when (!ParentFinanceDimension2 = old ParentFinanceDimension2)
		DimensionStructureUpdate
			when (!DimensionStructure = old DimensionStructure)
#ifdef module ar
		PerformFundEditsUpdate
			when (!PerformFundEdits = old PerformFundEdits)
		CompanyCustomerGroupUpdate
			when (!CompanyCustomerGroup = old CompanyCustomerGroup)
#endif
		SecurityGroupAllowsAccess
			when ((FinanceEnterpriseGroup.FinanceDimension2Entry = false)
			or    (actor.context.FinanceDimension2SecurityGroup = "")      
			or    (actor.context.FinanceDimension2SecurityGroup != ""
			and   (DimensionType.Node
			or     BypassActiveCodeBlockEdit
			or    (SecurityGroupDetailRel exists
			and   !SecurityGroupDetailRel.CreatedForHierarchyAccess))))

		SecurityGroupAllowsMaintenance
			when (LocalSecurityGroupAllowsMaintenance)
				
	Local Fields
		LocalSecurityGroupAllowsMaintenance is Boolean
		UseInputValue					is Boolean
		RecordAdded						is Boolean
		BudgetIdentifierArray
		I1								is Numeric 2
		I2								is Numeric 2
		BusinessClass					is Alpha size 60
		System							is a GeneralLedgerSystemCode
		Service							is Alpha size 30	
		LocalFinanceDimension2			is a FinanceDimension2
		LocalParentFinanceDimension2	is a FinanceDimension2
		LocalReportDimension			is a FinanceDimension2
		LocalUpdateDimension			is a FinanceDimension2
		LocalChildDimension				is a FinanceDimension2
		TopNodeFound					is Boolean
		LevelCalcDimension				is a FinanceDimension2
		LocalLevel						is Numeric 3
		LocalStructure					is like FinanceDimension2Structure
		LocalUpdateFinanceDimension2	is a FinanceDimension2
		SystemDimDefined				is Boolean
		LocalInvokedByUnusedStructure	is Boolean
		ActionCode
		LocalBODCurrentTimeStamp		is a BODCurrentTimeStamp
	    TotalsAccumulated    			is Boolean
	    LocalTotalFundedAmount          is like InternationalAmount
	    LocalTotalBilledAmount          is like InternationalAmount
	    LocalTotalRecognizedAmount      is like InternationalAmount
		TriggeredAlert					is Boolean

		CompletionMessage			    is Alpha size 100
		LocalNativeLPLBODTrigger		is Boolean				
		LocalNativeLPLBODTriggerExclude is Boolean				

		LocalPulseAlertFrom				is Alpha size 100

		LocalBodAccountingEntity		is AlphaUpper size 12
		LocalCrossAccountingEntity 		is Alpha 40
		LocalCleanDocIDAccountingentity 	is Alpha 40
		LocalBODFormattedID				is Alpha 100
		FinanceDimensionCleanDocIDXMLBOD	is XMLDocument
		LocalCodeBlockRelation			is a CodeBlockRelation
		LocalKeyFromValue				is Alpha 200
		LocalKeyToValue					is Alpha 200
		TemplatesWithIdentifierCount	is Numeric size 6
#ifdef module integration
		NewBODTracker  				is a FSMInboundBODTracker view
#endif
		LocalFSMInboundBODTracker	is Numeric 15
		Error            			is Boolean
	    ErrorMessage     			is Alpha 300
	    LocalBODTrigger				is Boolean
	    LocalConfigurationParameter	is Alpha size up to 200
		LocalSourceValue			is Alpha 30
	
	Rule Blocks


		TriggerFinanceDimension2BOD
			trigger Service PA service
				resume on error
				title is "EG:<FinanceEnterpriseGroup>DIM2:<FinanceDimension2>"
				Criteria
					FinanceEnterpriseGroup
					FinanceDimension2
				Variables
					ActionCode
					include persistent fields from FinanceEnterpriseGroup
					include persistent fields from FinanceDimension2
					include user fields from FinanceDimension2
					DerivedParentDisplayDimension
					DerivedParentDescription
					DerivedParentDimension
					LocalBODCurrentTimeStamp.OutputBODCurrentTimeStamp
						variable name is CurrentTimeStamp
		TriggerBODForCreateOrUpdate
			if (FinanceEnterpriseGroup.BODTrigger and !LocalBODTrigger)
				Service		= "FinanceDimension2Service"
				if (action type.Create)
					ActionCode	= ActionCode.Create
				else
					ActionCode	= ActionCode.Update				
				increment bod id.VariationID






				LocalBODCurrentTimeStamp.CurrentTimeStamp = current timestamp
				include TriggerFinanceDimension2BOD



		CheckValidContext	
			if (FinanceDimension2Structure.UnusedDimensionStructure)
				constraint (InvokedByUnusedStructure
				or			LocalInvokedByUnusedStructure)
					"ActionNotValidForThisStructure"
						
		CreateShadowForDimension
			LocalChildDimension = LocalFinanceDimension2
			TopNodeFound  	 	= false
			invoke Delete DimensionShadowRel
			while (!TopNodeFound)
				invoke Create FinanceDimension2Shadow
					invoked.FinanceEnterpriseGroup 	   = FinanceEnterpriseGroup
					invoked.FinanceDimension2Structure = FinanceDimension2Structure
					invoked.FinanceDimension2		   = LocalChildDimension
					invoked.DimensionType			   = LocalChildDimension.DimensionType
					invoked.SummaryFinanceDimension2   = LocalFinanceDimension2.DimensionInContextStructureRel.ParentDimension

				if (LocalFinanceDimension2.DimensionType.Summary)
					invoke SetLevel LocalFinanceDimension2
				if (LocalFinanceDimension2.DimensionInContextStructureRel.ParentDimension.DimensionType.Node
				or  LocalFinanceDimension2 not entered)
					TopNodeFound = true
				else
					LocalFinanceDimension2 = LocalFinanceDimension2.DimensionInContextStructureRel.ParentDimension			

		CheckSystemDimensions
			if (FinanceDimension2Structure = FinanceEnterpriseGroup.EnterpriseDim2Structure)
				if (EnterpriseSystemDim2Rel exists)
					SystemDimDefined	     = true
				
				invoke SetSystemDimensionFlags FinanceEnterpriseGroup
					invoked.PrmDimension			    = 2
					invoked.PrmSystemDimDefined	        = SystemDimDefined
				
		DeleteRules
			if (FinanceEnterpriseGroup.BODTrigger)
				Service			= "FinanceDimension2Service"
				ActionCode		= ActionCode.Delete
				increment bod id.VariationID






				LocalBODCurrentTimeStamp.CurrentTimeStamp = current timestamp
				include TriggerFinanceDimension2BOD



											
	    AccumulateTotals
	        if (!TotalsAccumulated)
		    	for each ProjectFundingSourceRel
		        	LocalTotalFundedAmount		+= each.FundedAmount
		            LocalTotalBilledAmount		+= each.TotalBilledAmount
		            LocalTotalRecognizedAmount	+= each.TotalRecognizedAmount
		       	TotalsAccumulated = true
		
	Apply Pending Effective Rules
		if (FinanceEnterpriseGroup.BODTrigger and !LocalBODTrigger)
			Service			= "FinanceDimension2Service"
			if (action != "UpdateBODIdFields") 
				ActionCode = ActionCode.Update
				if (action type.Create)
					ActionCode = ActionCode.Create
				else
					if (action type.Delete)
						ActionCode = ActionCode.Delete
				LocalBODCurrentTimeStamp.CurrentTimeStamp = current timestamp
				increment bod id.VariationID






				include TriggerFinanceDimension2BOD



				
	Audit Entry Rules
		if(not audit period.Future)
			if (FinanceEnterpriseGroup.BODTrigger and !LocalBODTrigger)
				Service			= "FinanceDimension2Service"
				if (!action type.Delete)
					LocalBODCurrentTimeStamp.CurrentTimeStamp = current timestamp
					include TriggerFinanceDimension2BOD



						
	Derived Fields
		DerivedSecurityGroupAllowsAccess is a DerivedField
			type is Boolean
			if (DimensionType.Node)
				LocalSecurityGroupAllowsMaintenance = true
				return true
			if (ActorSecurityGroup not entered)
				LocalSecurityGroupAllowsMaintenance = true
				return true
			if (SecurityGroupDetailRel exists)
				if (parentcontext.name != "AccountAnalysisSettings")
					if (!SecurityGroupDetailRel.CreatedForHierarchyAccess)
						LocalSecurityGroupAllowsMaintenance = true
					return true
				else
					if (!SecurityGroupDetailRel.CreatedForHierarchyAccess)
						return true	
			return false	
		ContextMessageEntityType1 is a StringField
			type is Alpha 30
			restricted
			"InforProjectFundingSource"
			
		ContextMessageEntityType2 is a StringField
			type is Alpha 30
			restricted
			"InforProjectBillingCustomer"
				
		ContextMessageText is a StringField
			type is Alpha 30
			restricted
			"FinanceDimension2<FinanceDimension2>"
 		DerivedRepresentativeText	is a DerivedField
			type is Alpha 120
			restricted
			if (IsTopNode)
				return Description
			else				
				return DerivedRepresentativeTextString
		DerivedRepresentativeTextString is a StringField	
			type is Alpha 120
			restricted
			DisplayDimension
			" - "
			Description
		DerivedShadowCount 				is a DerivedField
			type is Numeric 8
			restricted
			return (instance count of FinanceDimension2Shadow(SummaryFinanceDimension2) set)
    	DerivedSystemDimension			is a DerivedField
    		type is Boolean
    		restricted
    		if (UseInputValue)
    			return false
   			else
   				return DimensionInContextStructureRel.SystemDimension
		DerivedIncludeInBudgetEdit is a DerivedField
			type is Boolean
			restricted
    		if (UseInputValue)
    			return false
    		else
    			return DimensionInContextStructureRel.IncludeInBudgetEdit	   				
		DerivedParentDimension  is a DerivedField
			type is like FinanceDimension2
			restricted
			return DimensionInContextStructureRel.ParentDimension	
		DerivedSequenceNumber	is a DerivedField
			type is AlphaRight 7
			restricted
			return DerivedAlphaSequence[2:8]
		DerivedAlphaSequence	is a DerivedField
			type is AlphaRight 8
			restricted
			return (10000000 + SequenceNumber)
		StructureDimensionExists 	 is a DerivedField
			type is Boolean
			restricted
			if (DimensionInContextStructureRel exists)
				return true
		DerivedTopNode	is a DerivedField
			type is like FinanceDimension2
			restricted
			return FinanceDimension2Structure.DimensionNode				
		SummaryNodeString	    is a StringField
			type is AlphaUpper 15
			restricted
			FinanceDimension2Structure.StructureSequence
			"_"
			NewDimension
		ParentNodeString	    is a StringField
			type is AlphaUpper 15
			restricted
			FinanceDimension2Structure.StructureSequence
			"_"
			NewDimension			
		LikeSummaryPrefix		is a StringField
			type is AlphaUpper 15
			restricted
			FinanceDimension2Structure.StructureSequence
			"_*"
		DerivedParentDisplayDimension is a DerivedField
			type is like FinanceDimension2
			LocalParentFinanceDimension2 = DimensionInContextStructureRel.ParentDimension
			if (LocalParentFinanceDimension2 != DerivedTopNode)
				return LocalParentFinanceDimension2.DisplayDimension
		DerivedParentDescription is a DerivedField
			type is Alpha 60
			LocalParentFinanceDimension2 = DimensionInContextStructureRel.ParentDimension
			if (LocalParentFinanceDimension2 != DerivedTopNode)
				return LocalParentFinanceDimension2.Description				
						
		TotalProjectFundedAmount  is a DerivedField
			type is like InternationalAmount
				precision is Currency.NumberOfDecimals
       		include AccumulateTotals				
		    return LocalTotalFundedAmount

   		TotalProjectBilledAmount  is a DerivedField
       		type is like InternationalAmount
				precision is Currency.NumberOfDecimals       		
       		include AccumulateTotals           		
       		return LocalTotalBilledAmount

   		TotalProjectRecognizedAmount  is a DerivedField
       		type is like InternationalAmount
				precision is Currency.NumberOfDecimals       		
       		include AccumulateTotals           		
       		return LocalTotalRecognizedAmount

		TotalRemainingFundedBalance  is a DerivedField
       		type is like InternationalAmount
				precision is Currency.NumberOfDecimals
			return (TotalProjectFundedAmount - TotalProjectBilledAmount)
			
		TotalRemainingRevenueBalance  is a DerivedField
       		type is like InternationalAmount
				precision is Currency.NumberOfDecimals
			return (TotalProjectFundedAmount - TotalProjectRecognizedAmount)
			
		MainTabMF is a MessageField
			restricted
			"Main"

		LocationTabMF is a MessageField
			restricted
			"Location"

		MainLocationTabMessage is a ConditionalField
			type is Alpha size 20
			restricted
			if (FEGHasProjectInvoicing)
				LocationTabMF
			else
				MainTabMF

		FundingSourceToExpireMessage is a ConditionalField
			type is Alpha size 30
			if (FundingSourceToExpire)
				FundingSourceToExpireMessageMF
			else
				blank			

		FundingSourceToExpireMessageMF is a MessageField
			restricted
			"FundingSourceAboutToExpire"

		FundingSourceHasExpiredMessage is a ConditionalField
			type is Alpha size 30
			if (FundingSourceHasExpired)
				FundingSourceHasExpiredMessageMF
			else
				blank			

		FundingSourceHasExpiredMessageMF is a MessageField
			restricted
			"FundingSourceHasExpired"

		DerivedRevenueAccount is a DerivedField
			type is like GeneralLedgerChartAccount
			if (RevenueCodeBlockOption.PartialStructure)
				return RevenuePartialAccount.GeneralLedgerChartAccount
			else
				return RevenueFullAccount.GeneralLedgerChartAccount
		DerivedRedDueDateAlertOffset is a DerivedField
			type is Numeric 6
			restricted
			return 30
		RedDueDateAlert is a ComputeField
			type is Date
			restricted
			(DateRange.End - DerivedRedDueDateAlertOffset as days)

		DescendantOfContextDimension is a DerivedField
			type is Boolean
			if (DescendantOfContextDimensionRel exists)
				return true
					
		GrantReportingSettingsCreatedMF is a MessageField
			restricted
			"GrantReportingSettingsHaveBeenCreated"

		ActorSecurityGroup is a DerivedField
			type is like FinanceDimension2SecurityGroup
			return actor.context.FinanceDimension2SecurityGroup
						
		DerivedRemainingRecipientShare  is a DerivedField
			type is like CurrencyAmount
			return RequiredRecipientShare - RecipientShareOfExpenditures


		DerivedUnexpendedProgramIncome is a DerivedField
			type is like CurrencyAmount
			if (ProgramIncomeExpendedAdditionAlternative entered)
				return FederalProgramIncome - ProgramIncomeExpendedAdditionAlternative			
			else
				return FederalProgramIncome - ProgramIncomeExpendedDeductionAlternative	
			
		AncestorPersonResponsible is a DerivedField
			type is like Employee

			LocalFinanceDimension2 	   		= FinanceDimension2
			LocalContextStructure	        = FinanceEnterpriseGroup.EnterpriseDim2Structure			
			LocalParentFinanceDimension2	= FinanceDimension2ContextStructureRel.ParentDimension
			TopNodeFound = false
			while (!TopNodeFound)
				if (LocalParentFinanceDimension2.PersonResponsible entered
				or  LocalParentFinanceDimension2.DimensionType.Node
				or  LocalParentFinanceDimension2 not entered)
					TopNodeFound	   = true
				else
					LocalFinanceDimension2 	     = LocalParentFinanceDimension2
					LocalParentFinanceDimension2 = LocalFinanceDimension2.FinanceDimension2ContextStructureRel.ParentDimension
			if (LocalParentFinanceDimension2.PersonResponsible entered)
				return LocalParentFinanceDimension2.PersonResponsible

		AncestorPersonResponsibleName is a DerivedField
			type is Alpha size 230

			LocalFinanceDimension2 	   		= FinanceDimension2
			LocalContextStructure           = FinanceEnterpriseGroup.EnterpriseDim2Structure			
			LocalParentFinanceDimension2	= FinanceDimension2ContextStructureRel.ParentDimension
			TopNodeFound = false
			while (!TopNodeFound)
				if (LocalParentFinanceDimension2.PersonResponsible entered
				or  LocalParentFinanceDimension2.DimensionType.Node
				or  LocalParentFinanceDimension2 not entered)
					TopNodeFound	   = true
				else
					LocalFinanceDimension2 	     = LocalParentFinanceDimension2
					LocalParentFinanceDimension2 = LocalFinanceDimension2.FinanceDimension2ContextStructureRel.ParentDimension
			if (LocalParentFinanceDimension2.PersonResponsible entered)
				return LocalParentFinanceDimension2.PersonResponsible.PresentationNameSnapshot

		AncestorTeamResponsible is a DerivedField
			type is like ProjectTeam

			LocalFinanceDimension2 	   		= FinanceDimension2
			LocalContextStructure	        = FinanceEnterpriseGroup.EnterpriseDim2Structure			
			LocalParentFinanceDimension2	= FinanceDimension2ContextStructureRel.ParentDimension
			TopNodeFound = false
			while (!TopNodeFound)
				if (LocalParentFinanceDimension2.ProjectTeam entered
				or  LocalParentFinanceDimension2.DimensionType.Node
				or  LocalParentFinanceDimension2 not entered)
					TopNodeFound	   = true
				else
					LocalFinanceDimension2 	     = LocalParentFinanceDimension2
					LocalParentFinanceDimension2 = LocalFinanceDimension2.FinanceDimension2ContextStructureRel.ParentDimension
			if (LocalParentFinanceDimension2.ProjectTeam entered)
				return LocalParentFinanceDimension2.ProjectTeam

		InactiveMF is a MessageField
			restricted
			"INACTIVE"

		ActiveMF is a MessageField
			restricted
			"ACTIVE"
						
		StatusMessage is a ConditionalField
			type is Alpha size 20
			if (Active)
				ActiveMF//""
			else
				InactiveMF
														
#ifdef module integration


		DerivedDelimiter is a DerivedField
			type is Alpha size 5
			restricted
			LocalConfigurationParameter = "Generic_Delimiter"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
					
		DerivedTenantID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "tenantID"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedReleaseID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "releaseID"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedLogicalID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "logicalID"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedVersionID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "VersionID"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedappProdline is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "appProdline"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		BODVariationID is a DerivedField
			type is Alpha 25
			restricted
			return bod id.VariationID
			
		DerivedBODCurrentTimeStamp is a DerivedField
			type is Alpha size 20
			restricted
			DerivedBODCurrentTimeStamp = system current timestamp
			return DerivedBODCurrentTimeStamp
			
		DerivedBODFormattedCurrentTimeStamp is a DerivedField
			type is Alpha size 30
			restricted
			return DerivedBODCurrentTimeStamp[1:4] + "-" + DerivedBODCurrentTimeStamp[5:6] + "-" + DerivedBODCurrentTimeStamp[7:8] + "T" + DerivedBODCurrentTimeStamp[9:10] + ":" + DerivedBODCurrentTimeStamp[11:12] + ":" + DerivedBODCurrentTimeStamp[13:14] + "Z"
		
		DerivedConfigAccountingEntity is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "CodeDefinition_FinanceDimension_AccountingEntity"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
			
		DerivedMultipleFEG is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "IsMultipleFEG"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
					
		DerivedCleanDocumentID is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "RequiredCleanDocumentID"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedTriggerBODBasedOnCrossReference is a DerivedField
			type is Alpha size 60
			restricted
			LocalConfigurationParameter = "TriggerBODBasedOnCrossReference"
			if (FSMBODConfigurationParameterRel exists)
				return FSMBODConfigurationParameterRel.Value
		
		DerivedBODActionCode is a DerivedField
			type is Alpha 10
			restricted
			if (action type.Create or ActionCode.Create)
				return "Add"
			else
				return "Replace"
				
		DerivedBODStatusCode is a DerivedField
			type is Alpha 10
			restricted
			if (action type.Delete or ActionCode.Delete)
				return "Deleted"
			else 
			if (Active = "true")
				return "Open"
			else
				return "Closed"
		
		DerivedBODDocumentID is a DerivedField
			type is Alpha size 100
			restricted
			if (DerivedCleanDocumentID != "Y")
				return FinanceEnterpriseGroup + DerivedDelimiter + FinanceDimension2
			else
				return FinanceDimension2
		
		DerivedBODRevision is a DerivedField
			type is Alpha 25
			restricted
			return ""
			
		DerivedaccountingEntity is a DerivedField
			type is Alpha 25
			restricted
			return ""
					
		DerivedBODFormattedId is a DerivedField
			type is Alpha 100
			restricted
			return  "infor-nid:" + DerivedTenantID + ":" +DerivedaccountingEntity + ":"  + ":" + DerivedBODDocumentID+ ":" + DerivedBODRevision +"?CodeDefinition&verb=Sync&BODTrackerID=" +LocalFSMInboundBODTracker
		
		DerivedLastupdateBy is a DerivedField
			type is Alpha size 60
			restricted
			return update stamp.actor
			
		DerivedBODUpdateTimeStamp is a DerivedField
			type is Alpha size 25
			restricted
			DerivedBODUpdateTimeStamp = update stamp.timestamp
			return DerivedBODUpdateTimeStamp
			
		DerivedBODFormattedUpdateTimeStamp is a DerivedField
			type is Alpha size 30
			restricted
			return DerivedBODUpdateTimeStamp[1:4] + "-" + DerivedBODUpdateTimeStamp[5:6] + "-" + DerivedBODUpdateTimeStamp[7:8] + "T" + DerivedBODUpdateTimeStamp[9:10] + ":" + DerivedBODUpdateTimeStamp[11:12] + ":" + DerivedBODUpdateTimeStamp[13:14] + "Z"
		
		DerivedBODCostCenter is a DerivedField
			type is Numeric 2
			restricted
			return FinanceEnterpriseGroup.BODCostCenter
			
		DerivedCodeListID is a DerivedField
			type is Alpha 20
			restricted
			if (DerivedBODCostCenter = "2")
				return "Cost Centers"
			else
				return "Finance 2 Dimensions"
				
		DerivedPostingType is a DerivedField
			type is Alpha 10
			restricted
			if (DimensionType = "1")
   				return "true"
			else
   				return "false"	
   				
   		DerivedCodeLabel is a DerivedField
			type is Alpha 25
			restricted
			return FinanceEnterpriseGroup.FinanceDimension2Label
			
		DerivedDimensionRequired is a DerivedField
			type is Boolean
			restricted
			return FinanceEnterpriseGroup.FinanceDimension2Required
			
		FinanceDimension2XMLBOD is a DerivedField
			type is XMLDocument
	        restricted
	        FinanceDimension2XMLBOD = template.IONSyncCodeDefination_FinanceDimension2_ST document for this instance	
	        
	    DerivedSystemOfRecord is a DerivedField
	    	type is Alpha 10
	    	restricted
	    	return 0	


	
		DerivedFundingTypeLogic is a DerivedField
			type is Alpha size 60
			restricted
			if(FundingType.ExternalGrant)
				return "ExternalGrant"
			if(FundingType.ExternalCustomer)
				return "ExternalCustomer"
			if(FundingType.InternalFund)
				return "InternalFund"
			
		DerivedOldAmount is a DerivedField
			type is Alpha size 20
			restricted
			return old Amount
		
		ProjectFundingAmountChangedAlertXML is a DerivedField
			type is XMLDocument
			restricted
			ProjectFundingAmountChangedAlertXML = template.IONProjectFundingAmountChangedAlert_FinanceDimension2_ST document for this instance
			return ProjectFundingAmountChangedAlertXML
		
		ProjectFundingAmountChangedAlertDescription is a DerivedField
			type is Alpha size 100
			restricted
			return FinanceEnterpriseGroup.FinanceDimension2Label + " " + FinanceDimension2 + " amount has changed from " + DerivedOldAmount + " " +  Currency +" to " + Amount +" " + Currency + "."

		DerivedProjectFundingAmountChangedAlertBODID is a DerivedField
			type is Alpha size 100
			restricted
			return "infor-nid:" + DerivedTenantID +":"+ FinanceEnterpriseGroup +":"+ FinanceDimension2 +":"+ "?ProjectFundingAmountChangedAler&verb=Process"
			



		
		DerivedActiveLogic is a DerivedField	
			type is Alpha size 100
			restricted
			if (Active = "true")
				return "activated"
			else
			if (Active = "false")
				return "inactivated"
		
		DerivedOldBeginDate is a DerivedField
			type is Alpha size 20
			restricted
			return old DateRange.Begin
		
		DerivedBeginDate is a DerivedField
			type is Alpha size 20
			restricted
			return DateRange.Begin
			
		DerivedEndDate is a DerivedField
			type is Alpha size 20
			restricted
			return DateRange.End
			
		DerivedOldEndDate is a DerivedField
			type is Alpha size 20
			restricted
			return old DateRange.End
		
		ProjectFundingSourceActiveAndDateRangeAlertXML is a DerivedField
			type is XMLDocument
			restricted
			if (Active changed )
				ProjectFundingSourceActiveAndDateRangeAlertXML = template.IONProjectFundingSourceActiveAndDateRangeAlert_FinanceDimension2_Activechanged_ST document for this instance
				return ProjectFundingSourceActiveAndDateRangeAlertXML
			else
			if (DateRange.Begin changed 
			and DateRange.End changed )
				ProjectFundingSourceActiveAndDateRangeAlertXML = template.IONProjectFundingSourceActiveAndDateRangeAlert_FinanceDimension2_BeginAndEndDatechanged_ST document for this instance
				return ProjectFundingSourceActiveAndDateRangeAlertXML
			else
			if (DateRange.End changed 
			and DateRange.Begin not changed )
				ProjectFundingSourceActiveAndDateRangeAlertXML = template.IONProjectFundingSourceActiveAndDateRangeAlert_FinanceDimension2_EndDatechanged_ST document for this instance
				return ProjectFundingSourceActiveAndDateRangeAlertXML
			else
			if (DateRange.Begin changed 
			and DateRange.End not changed )
				ProjectFundingSourceActiveAndDateRangeAlertXML = template.IONProjectFundingSourceActiveAndDateRangeAlert_FinanceDimension2_BeginDatechanged_ST document for this instance
				return ProjectFundingSourceActiveAndDateRangeAlertXML
				
		ProjectFundingSourceActiveAndDateRangeAlertDescription is a DerivedField
			type is Alpha size 200
			restricted
			if (Active changed )
				return FinanceEnterpriseGroup.FinanceDimension2Label + " "  + DisplayDimension + " has been " + DerivedActiveLogic + "."
			else
			if (DateRange.Begin changed 
			and DateRange.End not changed )
				return FinanceEnterpriseGroup.FinanceDimension2Label + " " + DisplayDimension + " begin date has changed from " + DerivedOldBeginDate + " to " + DerivedBeginDate + "."			
			else
			if (DateRange.End changed 
			and DateRange.Begin not changed )
				return FinanceEnterpriseGroup.FinanceDimension2Label + " " + DisplayDimension + " end date has changed from " + DerivedOldEndDate + " to " + DerivedEndDate + "."
			else
			if (DateRange.Begin changed 
			and DateRange.End changed )
				return FinanceEnterpriseGroup.FinanceDimension2Label + " " + DisplayDimension + " begin date has changed from "  + DerivedOldBeginDate + " to " + DerivedBeginDate + " and end date has changed from " + DerivedOldEndDate + " to " + DerivedEndDate + "."
		
		DerivedProjectFundingSourceActiveAndDateRangeAlertBODID is a DerivedField
			type is Alpha size 100
			restricted
			return "infor-nid:" + DerivedTenantID +":"+ FinanceEnterpriseGroup +":"+ FinanceDimension2 +":"+ "?ProjectFundingSourceActiveAndDateRangeAler&verb=Process"

#endif
#ifdef module ar 	
		CompanyDescriptionMessage is a StringField
			type is Alpha up to 100
			CompanyCustomerGroup.ReceivableCompany 
			"-"
			CompanyCustomerGroup.ReceivableCompany.Name

		CustomerDescriptionMessage is a DerivedField
			type is Alpha up to 100
			default label is "ReceivableCustomer"
			return CompanyCustomerGroup.Customer + " -" + CompanyCustomerGroup.Customer.SearchName

		BillToDescriptionMessage is a DerivedField
			type is Alpha up to 100
			default label is "BillTo"
			return CompanyCustomerGroup.CustomerBillTo + " -" + CompanyCustomerGroup.CustomerBillTo.Name

		ReceivableProcessLevelDescriptionMessage is a DerivedField
			type is Alpha up to 100
			default label is "ReceivableProcessLevel"
			return CompanyCustomerGroup.ReceivableProcessLevel + " -" + CompanyCustomerGroup.ReceivableProcessLevel.Name

		AccountsReceivableCodeDescriptionMessage is a DerivedField
			type is Alpha up to 100
			default label is "AccountsReceivableCode"
			return CompanyCustomerGroup.ReceivableGeneralLedgerCode + " -" + CompanyCustomerGroup.ReceivableGeneralLedgerCode.Description

		InvoiceTypeCodeDescriptionMessage is a DerivedField
			type is Alpha up to 100
			default label is "InvoiceTypeCode"
			return CompanyCustomerGroup.InvoiceTypeCode + " -" + CompanyCustomerGroup.InvoiceTypeCode.Description
#endif
		DepartmentDescriptionMessage is a DerivedField
			type is Alpha up to 100
			default label is "Department"
			return Department + " -" + Department.Description

		DivisionDescriptionMessage is a DerivedField
			type is Alpha up to 100
			default label is "Division"
			return Division + " -" + Division.Description

		AmountDescriptionMessage is a DerivedField
			type is Alpha up to 100
			default label is "Amount"
			return Amount + " -" + Currency

		MajorCategoryDescriptionMessage is a DerivedField
			type is Alpha up to 100
			default label is "MajorCategory"
			return MajorCategory + " -" + MajorCategory.Description

		BlankField is a DerivedField
			type is Alpha 1
			return blank
		
		DerivedFinanceDimension2Label is a MessageField
			"<FinanceEnterpriseGroup.FinanceDimension2Label>"


	Relations
		ContextDimensionRel
			one-to-one relation to FinanceDimension2
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.FinanceDimension2			= ContextDimension
		PostingDimensionsRel
			one-to-many relation to FinanceDimension2
			Field Mapping uses LeafRecords
				related.FinanceEnterpriseGroup = FinanceEnterpriseGroup
			Instance Selection
				where (related.HelperListDimension)
		DimensionChildrenRel
			one-to-many relation to FinanceDimension2
			disable subset select on dependent relation			
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.FinanceDimension2 			= DimensionHierarchyRel.FinanceDimension2
		NotInDimensionStructureRel		
			one-to-many relation to FinanceDimension2
			Field Mapping uses LeafRecords
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
			Instance Selection
				where (related.NotUsedInHierarchy)
		DimensionHierarchyRel
			one-to-many relation to FinanceDimension2Hierarchy
			Field Mapping uses ByParentDimension
				related.FinanceEnterpriseGroup	    = FinanceEnterpriseGroup
				related.ParentDimension				= FinanceDimension2	
		DimensionInContextStructureRel
			one-to-one relation to FinanceDimension2Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 	   = FinanceEnterpriseGroup
				related.FinanceDimension2Structure = FinanceDimension2Structure
				related.FinanceDimension2		   = FinanceDimension2
			valid when (!NodeDimension)
		DimensionInEnterpriseStructureRel
			one-to-one relation to FinanceDimension2Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 	   = FinanceEnterpriseGroup
				related.FinanceDimension2Structure = FinanceEnterpriseGroup.EnterpriseDim2Structure
				related.FinanceDimension2		   = FinanceDimension2		
		FinanceDimension2InEnterpriseStructureRel
			one-to-one relation to FinanceDimension2Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 	   = FinanceEnterpriseGroup
				related.FinanceDimension2Structure = FinanceEnterpriseGroup.EnterpriseDim2Structure
				related.FinanceDimension2		   = FinanceDimension2
			valid when (!NodeDimension)
		SystemDimension2Rel
			one-to-many relation to FinanceDimension2Hierarchy
			Field Mapping uses BySystemDimensionInStructure
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.FinanceDimension2Structure  = FinanceDimension2Structure
			Instance Selection
				where (related.SystemDimension
				and    related.FinanceDimension2	!= FinanceDimension2)
		NotifyBudgetTemplateRel
			one-to-many relation to BudgetTemplate
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup         = FinanceEnterpriseGroup
			Instance Selection
				where (related.NotifyOnDimension2
				and    related.FinanceDimension2Structure = FinanceDimension2Structure)
		NotifyBudgetTemplateRemoveRel
			one-to-many relation to BudgetTemplate
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup         = FinanceEnterpriseGroup
			Instance Selection
				where (related.NotifyOnDimension2Remove
				and    related.FinanceDimension2Structure = FinanceDimension2Structure)
		TemplatesWithIdentifierRel
			one-to-many relation to BudgetTemplate
			Field Mapping uses ByStatus
				related.FinanceEnterpriseGroup    	= FinanceEnterpriseGroup
				related.Status 						= 2 
			Instance Selection
				where (related.FinanceDimension2Structure = FinanceDimension2Structure 
				and related.Dimension2Identifier	= old BudgetIdentifier)		
		DescendantOfContextDimensionRel
			one-to-one relation to FinanceDimension2Shadow
			Field Mapping uses BySummaryDimension
				related.FinanceEnterpriseGroup			= FinanceEnterpriseGroup

				related.SummaryFinanceDimension2		= ContextDimension
				related.FinanceDimension2				= FinanceDimension2
		HelperListDimensionRel
			one-to-many relation to FinanceDimension2Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup			= FinanceEnterpriseGroup
				related.FinanceDimension2Structure		= FinanceDimension2Structure
				related.FinanceDimension2				= FinanceDimension2 
		ParentRel
			one-to-one relation to FinanceDimension2Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup			= FinanceEnterpriseGroup
				related.FinanceDimension2Structure		= FinanceDimension2Structure
				related.FinanceDimension2 				= FinanceDimension2
		UnusedLeafRel
			one-to-many relation to FinanceDimension2
			Field Mapping uses LeafRecords
				related.FinanceEnterpriseGroup = FinanceEnterpriseGroup 
		SubordinateInLocalStructureRel
			one-to-one relation to FinanceDimension2Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.FinanceDimension2Structure	= LocalStructure
				related.FinanceDimension2			= FinanceDimension2										
		FinanceDimension2HierarchyDefaultRel
			one-to-one relation to FinanceDimension2Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup      = FinanceEnterpriseGroup
				related.FinanceDimension2Structure  = FinanceDimension2Structure
				related.FinanceDimension2 			= LocalFinanceDimension2 															
		NextLevelChildRecordsRel
			one-to-many relation to FinanceDimension2Hierarchy
			Field Mapping uses ChildrenInStructure
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.FinanceDimension2Structure	= FinanceDimension2Structure
				related.ParentDimension 			= LocalFinanceDimension2
		IncludedInStructuresRel 
			one-to-many relation to FinanceDimension2Structure
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.FinanceDimension2Structure	= FinanceDimension2Hierarchy(FinanceDimension2) set.FinanceDimension2Structure 								
		SiblingsRel
			one-to-many relation to FinanceDimension2Hierarchy
			Field Mapping uses ChildrenInStructure
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.FinanceDimension2Structure	= FinanceDimension2Structure
				related.ParentDimension				= DerivedParentDimension			
		DimensionShadowRel
			one-to-many relation to FinanceDimension2Shadow
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.FinanceDimension2Structure	= FinanceDimension2Structure				
				related.FinanceDimension2			= LocalFinanceDimension2				
		UpdateFinanceDimension2HierarchyRel
			one-to-one relation to FinanceDimension2Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 	   = FinanceEnterpriseGroup
				related.FinanceDimension2Structure = FinanceDimension2Structure
				related.FinanceDimension2		   = LocalUpdateFinanceDimension2

		EnterpriseSystemDim2Rel
			one-to-one relation to FinanceDimension2Hierarchy
			Field Mapping uses BySystemDimensionInStructure
				related.FinanceEnterpriseGroup     = FinanceEnterpriseGroup
				related.FinanceDimension2Structure = FinanceEnterpriseGroup.EnterpriseDim2Structure
						
		FinanceDimension2ShadowRel is a FinanceDimension2Shadow(FinanceDimension2) set
		
		DescendantsRel
			one-to-many relation to FinanceDimension2
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup = FinanceEnterpriseGroup
				related.FinanceDimension2	   = ShadowDescendantsRel.FinanceDimension2
		
		ShadowDescendantsRel
			one-to-many relation to FinanceDimension2Shadow
			delete cascades
			Field Mapping uses BySummaryDimension
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup

				related.SummaryFinanceDimension2    = FinanceDimension2	
				
		DescendantPersonResponsibleRel
			one-to-many relation using DescendantsRel
			Instance Selection
				where (related.PersonResponsible entered)
				
		DisplayDimensionRel
			one-to-many relation to FinanceDimension2
			Field Mapping uses ByDisplayDimension
				related.FinanceEnterpriseGroup 		= FinanceEnterpriseGroup
				related.DisplayDimension   			= DisplayDimension
			Instance Selection
				where ((related.DimensionStructure = LocalStructure
				or      related.DimensionStructure = blank)
				and    (related.UniqueID != UniqueID))

		NewDimensionRel
			one-to-one relation to FinanceDimension2
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.FinanceDimension2   		= LocalFinanceDimension2
				
		ProjectFundingSourceRel is a ProjectFundingSource(FinanceDimension2) set				
						
		PostingProjectsRel
			one-to-many relation to Project
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.Project					= ProjectShadowRel.Project
		
		ProjectShadowRel
			one-to-many relation to ProjectShadow
			Field Mapping uses BySummaryProject
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.SummaryProject			= ProjectFundingSourceRel.ProjectContract
			Instance Selection
				where (related.Project.Active
				and    related.Project.ProjectType.Posting
				and    related.Project.IsBillable)
				
		FundingSourcePostingProjectsRel
			one-to-many relation to Project
			Field Mapping uses LeafRecords
				related.FinanceEnterpriseGroup = FinanceEnterpriseGroup
			Instance Selection
				where (related.FundingSourceHelperListProject)
		GeneralLedgerTotalsRel
			one-to-many relation to GeneralLedgerTotal
			Field Mapping uses ByProjectAccount		
				related.FinanceEnterpriseGroup = FinanceEnterpriseGroup
			Instance Selection
				where (related.GeneralLedgerTotal.Project = any PostingProjectsRel.Project
				and    related.Scenario				      = FinanceEnterpriseGroup.ActualsScenario)				
						
		MyTeamRel
			one-to-one relation to ProjectTeamMember
			Field Mapping uses part of key
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.ProjectTeam				= ProjectTeam
				related.TeamMember				= actor.agent(Employee).Employee
				
#ifdef module ar
		TaxEntityRel
			one-to-one relation to TaxEntity
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.TaxEntity				= CompanyCustomerGroup.ReceivableCompany.GeneralLedgerCompany.AccountingEntity

        CompanyCustomerRel
            classic name is ARCUSTOMER
            one-to-one relation to CompanyCustomer
            required
            Field Mapping uses symbolic key
                related.Company  = CompanyCustomerGroup.ReceivableCompany
                related.Customer = CompanyCustomerGroup.Customer
		CustomerGroupRel
			one-to-one relation to CustomerGroup
			Field Mapping uses symbolic key
				related.CustomerGroup	= CompanyCustomerGroup.ReceivableCompany.CustomerGroupField.CustomerGroup
				
        CompanyCustomerPrimeSponsorRel
            classic name is ARCUSTOMER
            one-to-one relation to CompanyCustomer
            required
            Field Mapping uses symbolic key
                related.Company  = PrimeSponsor.Company
                related.Customer = PrimeSponsor.Customer
                
		ReceivablePrepaymentRel
		  	one-to-many relation to ReceivablePrepayment
		  	Field Mapping uses ByProjectContract
		  	Instance Selection
		    	where (related.Company.CustomerBusinessGroup.FinanceEnterpriseGroup = FinanceEnterpriseGroup
		    	and    related.FinanceDimension2									= FinanceDimension2
		    	and    related.ReceivablePayment.CancelDate not entered)
		    	
		CompanyCustomerInvoiceTypeCodesRel
			one-to-many relation to CustomerInvoiceTypeCode
			Field Mapping uses symbolic key
                related.Company  = CompanyCustomerGroup.ReceivableCompany
                related.Customer = CompanyCustomerGroup.Customer

		AnyCustomerInvoiceTypeCodeRel
			one-to-one relation to CustomerInvoiceTypeCode
			Field Mapping uses symbolic key
                related.Company  = CompanyCustomerGroup.ReceivableCompany
                related.Customer = CompanyCustomerGroup.Customer
				related.InvoiceTypeCode	 = CompanyCustomerGroup.InvoiceTypeCode

#endif				

		SecurityGroupDetailRel
			one-to-one relation to FinanceDimensionSecurityGroupDetail
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 		    	= FinanceEnterpriseGroup
				related.DimensionGroupType					= 4
				related.FinanceDimensionSecurityGroup   	= ActorSecurityGroup
				related.FinanceDimensionSecurityGroupDetail = FinanceDimension2

		DuplicateSequenceNumberRel
			one-to-many relation to FinanceDimension2
			Field Mapping uses LeafRecords
				related.FinanceEnterpriseGroup			= FinanceEnterpriseGroup
			Instance Selection
				where (related.SequenceNumber = SequenceNumber
				and    related.UniqueID      != UniqueID)

		EnterpriseStructuresRel 
			one-to-one relation to FinanceDimension2Structure
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.FinanceDimension2Structure	= DimensionStructure	
				
		FinanceDimension2ContextStructureRel
			one-to-one relation to FinanceDimension2Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup			     = FinanceEnterpriseGroup
				related.FinanceDimension2Structure			 = LocalContextStructure
				related.FinanceDimension2					 = FinanceDimension2
			valid when (!NodeDimension)	
								
		ProjectMajorCategoryRel
			one-to-one relation to ProjectMajorCategory
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup = FinanceEnterpriseGroup
				related.ProjectMajorCategory   = MajorCategory

		ProjectContracttRel
			one-to-many relation to ProjectContract
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
				related.ProjectContract			= any ProjectFundingSourceRel.ProjectContract

		FinanceDimension2ALNCodeRel
			one-to-one relation to FinanceDimension2ALNCode
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 	   = FinanceEnterpriseGroup
				related.FinanceDimension2ALNCode = CFDANumber

		FinanceDimension2ProgramTitleRel	
			one-to-one relation to FinanceDimension2ProgramTitle
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup 	   = FinanceEnterpriseGroup
				related.FinanceDimension2ProgramTitle = ProgramTitle
				
#ifdef module integration														

		FSMBODConfigurationParameterRel
        	one-to-one relation to FSMBODConfigurationParameter
			Field Mapping uses symbolic key
            	related.FSMBODConfigurationParameter 		= LocalConfigurationParameter
		
		BODAccountingEntityRel
			one-to-many relation to AccountingEntity
			Field Mapping uses symbolic key
			Instance Selection
				where (related.FinanceEnterpriseGroup = FinanceEnterpriseGroup)

		FSMCleanDocIDAccountingEntityRel
			one-to-one relation to AccountingEntity
			Field Mapping uses symbolic key
    			related.FinanceEnterpriseGroup 	= FinanceEnterpriseGroup
    			related.AccountingEntity		= LocalCleanDocIDAccountingentity
				
		FSMBODAECrossReferenceDetailRel
			one-to-many relation to FSMBODCrossReferenceDetail
			Field Mapping uses symbolic key
            	related.FSMBODCrossReference.SourceField 		= "CSFAE"
            	related.FSMBODCrossReference.DestinationField 	= "DESTAE"
            Instance Selection
				where (related.SourceValue	= LocalCleanDocIDAccountingentity )
				
		FSMCleanDocIDCrossReferenceDetailRel
			one-to-many relation to FSMBODCrossReferenceDetail
			Field Mapping uses symbolic key
            	related.FSMBODCrossReference.SourceField 		= "CSFAE"
            	related.FSMBODCrossReference.DestinationField 	= "DESTAE"
		
		FSMBODConfigurationRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 1
            	related.FSMBODConfiguration.Noun 		= "CodeDefinition"
            	related.FSMBODConfiguration.Direction 	= 1

		FSMInboundBODTrackerRel
            one-to-one relation to FSMInboundBODTracker
            Field Mapping uses symbolic key
                related.FSMInboundBODTracker	= LocalFSMInboundBODTracker



		FSMBODConfigurationPulseAlertRel
        	one-to-one relation to FSMBODConfiguration
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 		= 2
            	related.FSMBODConfiguration.Noun 		= "PulseAlert"
            	related.FSMBODConfiguration.Direction 	= 1
        
        FSMBODConfigurationDetailPulseAlertRel
        	one-to-many relation to FSMBODConfigurationDetail
			Field Mapping uses symbolic key
            	related.FSMBODConfiguration.Verb 			= 2	
            	related.FSMBODConfiguration.Noun 			= "PulseAlert"
            	related.FSMBODConfiguration.Direction 		= 1
            Instance Selection
				where (related.Alert						= LocalPulseAlertFrom
				and	   related.Enable)


#endif             															
		CodeBlockRelationDetailFromToRel
			one-to-one relation to CodeBlockRelationDetail
			Field Mapping uses ByKeyValues
				related.FinanceEnterpriseGroup				= FinanceEnterpriseGroup
				related.CodeBlockRelation					= LocalCodeBlockRelation
				related.KeyFromValue						= LocalKeyFromValue
				related.KeyToValue							= LocalKeyToValue
	Sets
		LeafRecords
			Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
			Instance Selection
				where (DimensionType.Posting)
		ByDimensionStructure
			Sort Order
				FinanceEnterpriseGroup
				DimensionStructure
				FinanceDimension2
		ByStructureAndPersonResponsible
			Sort Order
				FinanceEnterpriseGroup
				DimensionStructure
				PersonResponsible
				FinanceDimension2
		ByDisplayDimension
			Sort Order
				FinanceEnterpriseGroup
				DisplayDimension
				DimensionStructure	
		ByCFDANumber
			Sort Order
				FinanceEnterpriseGroup
				DisplayDimension
				DimensionStructure				
				CFDANumber				
			Instance Selection
				where (FundingType.ExternalGrant)
		ByStructureAndProjectTeam
			Sort Order
				FinanceEnterpriseGroup
				DimensionStructure
				ProjectTeam
				FinanceDimension2
				
	Field Rules
		FinanceDimension2
			if (action type.Create)
				if (FinanceEnterpriseGroup.FinanceDimension2RegularExpression entered
				and DimensionType.Posting)
					constraint (FinanceDimension2 matches FinanceEnterpriseGroup.FinanceDimension2RegularExpression)
						"InvalidFormatFor<FinanceEnterpriseGroup.FinanceDimension2Label>"		
		Description
			required
		DimensionType
	    	default to CreateDimensionType		
			cannot be changed
				"CannotChangeDimensionType"
			required
			if (DimensionType.Posting)			
				constraint (!ProjectInvoicingNotInEnterpriseStructure)
					"DimensionTypeMustBeSummaryForNonEnterpriseStructureUsing<FinanceEnterpriseGroup.ProjectLabel>Invoicing"			
		ParentDimension
			default to DerivedTopNode	
		Active
			initial value is true
			if (SystemDimension)
				Active = true




							
			if(Active changed)
				ActionCode = "S"
				trigger "ProjectFundingActiveService" PA service
                	resume on error
                    title is "FEG:<FinanceEnterpriseGroup>FDIM2:<FinanceDimension2>"
                    Criteria
                    	FinanceEnterpriseGroup
                        FinanceDimension2
                    Variables
                        FinanceEnterpriseGroup
                        	variable name is FinanceEnterpriseGroup
                        FinanceDimension2
                        	variable name is FinanceDimension2	
                        Active
                        	variable name is Active
                        ActionCode
                        	variable name is ActionCode
                        FinanceEnterpriseGroup.FinanceDimension2Label	
                     		variable name is FinanceDimension2Label
                     	DisplayDimension
                     		variable name is DisplayDimension



#ifdef module integration 	
				invoke 	TriggerProjectFundingSourceActiveAndDateRangeAlert
					invoked.PrmPulseAlert = "FSM_ION_ProjectFundingSourceActiveAndDateRangeAlert"	
#endif					
		SystemDimension
			constraint (DimensionType.Posting)
				"SystemDimensionMustBePostingType"		
			constraint (!SystemDimension2Rel exists)
				"<first SystemDimension2Rel.DisplayDimension>IsAlreadyDesignatedAsSystem<FinanceEnterpriseGroup.FinanceDimension2Label>"
		SequenceNumber
			autosequence using FinanceEnterpriseGroup.Dimension2LastSeq
			if (old SequenceNumber entered)
				cannot be changed
					"SequenceNumberCannotBeChanged"
		BudgetIdentifier
			constraint (DimensionType.Summary)
				"BudgetIdentifierOnlyValidForSummaryDimensions"
			if (BudgetIdentifier changed)
				if (BudgetIdentifier entered)
					LocalFinanceDimension2 = FinanceDimension2.DimensionInContextStructureRel.ParentDimension			
					TopNodeFound   				   = false
					while (!TopNodeFound)
						if (LocalFinanceDimension2.DimensionType.Node) 
							TopNodeFound = true
						else
							constraint (BudgetIdentifier != LocalFinanceDimension2.BudgetIdentifier) 
								"BudgetIdentifier<BudgetIdentifier>AlreadyInUseBy<LocalFinanceDimension2.DisplayDimension>"
							if (LocalFinanceDimension2.DimensionType.Node
							or  LocalFinanceDimension2.DimensionInContextStructureRel.ParentDimension.DimensionType.Node
							or !LocalFinanceDimension2.DimensionInContextStructureRel exists)
								TopNodeFound = true
							else								 
								LocalFinanceDimension2 = LocalFinanceDimension2.DimensionInContextStructureRel.ParentDimension	
					BudgetIdentifierArray.BudgetIdentifier[1] = BudgetIdentifier				
					invoke EditDescendantsBudgetIdentifier
						invoked.PrmBudgetIdentifierArray = BudgetIdentifierArray
						invoked.PrmBudgetIdentifierCount = 1					
				else
					TemplatesWithIdentifierCount		= instance count of TemplatesWithIdentifierRel
					if (TemplatesWithIdentifierCount	= 1)
						confirmation required
							"BudgetTemplate<first TemplatesWithIdentifierRel.BudgetTemplate>RefersToBudgetIdentifier<old BudgetIdentifier>.Proceed?"
					else
					if (TemplatesWithIdentifierCount > 1)
						TemplatesWithIdentifierCount -= 1
						if (TemplatesWithIdentifierCount = 1)
							confirmation required
								"BudgetTemplate<first TemplatesWithIdentifierRel.BudgetTemplate>And<last TemplatesWithIdentifierRel.BudgetTemplate>ReferToBudgetIdentifier<old BudgetIdentifier>.Proceed?"					
						else
							confirmation required
								"BudgetTemplate<first TemplatesWithIdentifierRel.BudgetTemplate>And<TemplatesWithIdentifierCount>OtherTemplatesReferToBudgetIdentifier<old BudgetIdentifier>.Proceed?"					

				invoke NotifyChangeIdentifierDimension2 NotifyBudgetTemplateRel
					invoked.PrmFinanceDimension2	= FinanceDimension2
					invoked.PrmOldIdentifier		= old BudgetIdentifier

		DisplayDimension
			default to FinanceDimension2
			LocalStructure = FinanceDimension2Structure
			constraint (!DisplayDimensionRel exists)
				"DisplayValueAlreadyExistsFor<first DisplayDimensionRel.FinanceDimension2>"

		IncludeInBudgetEdit
			constraint (DimensionType.Posting)
				"NotValidForSummaryDimension"
							
		FundingType
			if (IsProjectInvoicing)
				cannot be changed
					"CannotChangeFundingType"
				required
					"FundingTypeRequiredFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
			else
				cannot be entered
					"FundingTypeIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				

		Department
			if (!IsProjectInvoicing)		
				cannot be entered
					"DepartmentIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
							
		Division
			if (!IsProjectInvoicing)		
				cannot be entered
					"DivisionIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				

 		DateRange
			if (IsProjectInvoicing)		
				required
					"BeginDateRequiredFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"
				constraint (DateRange.Begin entered)
					"BeginDateRequiredFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
			else
				cannot be entered
					"DateRangeIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
			



			
			if(DateRange changed)
				if (DateRange.Begin changed 
				and DateRange.End changed )
					ActionCode = "Z"
				else
				if (DateRange.End changed 
				and DateRange.Begin not changed)
					ActionCode = "E"
				else
				if (DateRange.Begin changed 
				and DateRange.End not changed)
					ActionCode = "B"	
				trigger "ProjectFundingDateRangeService" PA service
					resume on error
					title is "FEG:<FinanceEnterpriseGroup>FDIM2:<FinanceDimension2>"
					Criteria
						FinanceEnterpriseGroup
						FinanceDimension2
					Variables
						FinanceEnterpriseGroup
							variable name is FinanceEnterpriseGroup	
						FinanceDimension2
                        	variable name is FinanceDimension2
                        DateRange.Begin				
							variable name is BeginDate
						DateRange.End
							variable name is EndDate
						ActionCode
							variable name is ActionCode
						FundingType
							variable name is FundingType
						old DateRange.Begin				
							variable name is OldBeginDate
						old DateRange.End
							variable name is OldEndDate
						FinanceEnterpriseGroup.FinanceDimension2Label	
                     		variable name is FinanceDimension2Label
                     	DisplayDimension
                     		variable name is DisplayDimension	



#ifdef module integration
				invoke 	TriggerProjectFundingSourceActiveAndDateRangeAlert
					invoked.PrmPulseAlert = "FSM_ION_ProjectFundingSourceActiveAndDateRangeAlert"	
#endif     
        Amount
			if (IsProjectInvoicing)		


				if (Amount changed
				and Amount entered)
					constraint (Amount >= TotalProjectFundedAmount)
						"AmountCannotBeLessThanTotalProjectFundedAmountOf<TotalProjectFundedAmount>"
			else
				cannot be entered
					"AmountIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
        
 		Currency
			if (IsProjectInvoicing)		
				if (Amount entered)
					required
						"CurrencyRequiredFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
				if (Currency changed
				and old Currency entered)
     	        	constraint (ProjectFundingSource (FinanceDimension2) set not exists)
	  					"CannotChangeCurrency;<FinanceEnterpriseGroup.FinanceDimension2Label>_<FinanceDimension2>IsAttachedToAContract"				
#ifdef module ar
				if (Currency entered
				and CompanyCustomerGroup.ReceivableCompany entered)
					if (!CompanyCustomerGroup.ReceivableCompany.TransactionCurrencyOverride
					or  !CompanyCustomerGroup.ReceivableCompany.MultiCurrencyProcessing)
						if (FundingType.IntercompanyBilling)
							constraint (Currency = CompanyCustomerGroup.ReceivableCompany.Currency)
								"CurrencyMustMatchPayablesCompanyBaseCurrency"
						else
							constraint (Currency = CompanyCustomerGroup.CompanyCustomer.Currency)
								"CurrencyMustMatchCustomerDefaultTransactionCurrency"
#endif												
			else
				cannot be entered
					"CurrencyIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				

		RevenueCodeBlockOption
			if (IsProjectInvoicing)
				required
					"RevenueStructureOptionRequiredFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"
					if (RevenueCodeBlockOption.None)
						constraint (FundingType.InternalFund)
							"RevenueStructureOptionOfNoneValidForInternalFundingTypeOnly"
			else
				cannot be entered
					"RevenueStructureOptionOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"

		RevenueFullAccount 		
			if (RevenueCodeBlockOption.FullStructure)
				required
					"FullRevenueFinanceStructureRequiredFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"
			else
				cannot be entered
					"CannotEnterFullRevenueFinanceStructureUnlessRevenueStructureOptionIs_Full"

		RevenuePartialAccount 		
			if (RevenueCodeBlockOption.PartialStructure)
				required
					"PartialRevenueFinanceStructureRequiredFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"
				constraint (RevenuePartialAccount.GeneralLedgerChartAccount entered)
					"Revenue<FinanceEnterpriseGroup.AccountLabel>Required"
			else
				cannot be entered
					"CannotEnterPartialRevenueFinanceStructureUnlessRevenueStructureOptionIs_Partial"

		RevenueRecognitionOption
			constraint (IsProjectInvoicing)
				"RevenueRecognitionOptionIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"
#ifdef module ar 
		InvoiceFinanceCodeBlock
			if (CompanyCustomerGroup.ReceivableCompany.DetailedInvoiceAccrualDistributions
			and IsExternalGrantOrCustomer)
				required
					"ReceivableFinanceStructureRequiredFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"
#endif
		OffsetAccount
			if  (IsInternalFund
			and !RevenueCodeBlockOption.None)
				required
					"OffsetAccountRequiredWhenFundTypeIsInternalFunding"
#ifdef module intercobilling
			if (IsIntercompanyBilling)		
				required
					"PayablesExpenseFinanceStructureRequiredWhenFundTypeIsIntercompanyBilling"
#endif					
			if (!IsInternalFund
			and !IsIntercompanyBilling)
				cannot be entered
					"OffsetAccountIsOnlyValidWhenFundTypeIsInternalFundingOrIntercompanyBilling"
						
		PersonResponsible
			constraint (IsProjectInvoicingSummary)
				"PersonResponsibleValidForFinanceEnterpriseGroupThatIsSetupFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"
			constraint (SummaryInEnterpriseStructure)
				"PersonResponsibleValidForSummaryWithinEnterpriseStructureOnly<FinanceEnterpriseGroup.FinanceDimension2Label>"




























		ProjectTeam
			constraint (IsProjectInvoicingSummary)
				"ResponsibleTeamValidForFinanceEnterpriseGroupThatIsSetupFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"
			constraint (SummaryInEnterpriseStructure)
				"ResponsibleTeamValidForSummaryWithinEnterpriseStructureOnly<FinanceEnterpriseGroup.FinanceDimension2Label>"

 		EstimateCloseDate
			if (!IsProjectInvoicing)		
				cannot be entered
					"EstimateCloseDateIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				




 		ActualDate
			if (!IsProjectInvoicing)		
				cannot be entered
					"ActualDateIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				




				
 		SubmitDate
			if (!IsProjectInvoicing)		
				cannot be entered
					"SubmitDateIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
 							
 		NoticeDate
			if (!IsProjectInvoicing)		
				cannot be entered
					"NoticeDateIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
 							
 		ReceiveDate
			if (!IsProjectInvoicing)		
				cannot be entered
					"ReceiveDateIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
 							
 		ProposalDate
			if (!IsProjectInvoicing)		
				cannot be entered
					"ProposalDateIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
		

















        
#ifdef module ar        
        CompanyCustomerGroup
			if (IsExternalGrantOrCustomer
			or  IsIntercompanyBilling)
				required
				if (ProjectFundingSource(FinanceDimension2) set exists
				and CompanyCustomerGroup changed)
					constraint (CompanyCustomerGroup.ReceivableCompany = old CompanyCustomerGroup.ReceivableCompany)
						"CannotChangeReceivableCompany;_<FinanceEnterpriseGroup.FinanceDimension2Label>AssignedTo<FinanceEnterpriseGroup.ProjectLabel>Contracts"
					if (IsExternalGrantOrCustomer)
						constraint (CompanyCustomerGroup.Customer = old CompanyCustomerGroup.Customer)
							"CannotChangeCustomer;_<FinanceEnterpriseGroup.FinanceDimension2Label>AssignedTo<FinanceEnterpriseGroup.ProjectLabel>Contracts"
			else
				cannot be entered
					"CompanyCustomerGroupIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>InvoicingAndExternalGrantOrExternalCustomer"				

			if (IsExternalGrantOrCustomer)
				if (CompanyCustomerGroup.InvoiceTypeCode not entered)
					if (CompanyCustomerInvoiceTypeCodesRel exists)
						constraint (AnyCustomerInvoiceTypeCodeRel exists)
							"InvoiceTypeCodeNotFoundInCustomer'sInvoiceTypeCodes"
				if (CompanyCustomerGroup.InvoiceTypeCode entered)
					if (CompanyCustomerInvoiceTypeCodesRel exists)
						constraint (AnyCustomerInvoiceTypeCodeRel exists)
							"InvoiceTypeCodeNotFoundInCustomer'sInvoiceTypeCodes"
#endif									
					
		CFDANumber
			if (!IsProjectInvoicing)		
				cannot be entered
					"A\L\NIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
							
		CustomerPoNumber
			if (!IsProjectInvoicing)		
				cannot be entered
					"CustomerPoNumberIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
		 			
		ProgramTitle 				
			if (!IsProjectInvoicing)		
				cannot be entered
					"ProgramTitleIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
						
		MajorCategory
			if (!IsProjectInvoicing)		
				cannot be entered
					"MajorCategoryIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
									
		ARInterfaceOption			
			if (!IsProjectInvoicing)		
				cannot be entered
					"ARInterfaceOptionIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
			else
				default to ARInterfaceOption.SummarizeByPostingProject							

		DocumentNumber
			if (!IsProjectInvoicing)

				cannot be entered
					"DocumentNumberIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"//AndARInterfaceOptionOfSummary"				

		LetterOfCredit
			if (!IsProjectInvoicing)

				cannot be entered
					"LetterOfCreditIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"//AndARInterfaceOptionOfSummary"
			else					
				if (DocumentNumber entered)
					required		
						"LetterOfCreditRequired;DocumentNumberIsEntered"								
					
		ProjectJurisdictionCode	
			if (!IsProjectInvoicing)		
				cannot be entered
					"JurisdictionCodeIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"
			else
				if (!IsExternalGrantOrCustomer)
					cannot be entered
						"JurisdictionCodeIsOnlyValidForExternalGrantOrExternalCustomer"
		
		PrimeFlag		
			if (!IsProjectInvoicing)		
				cannot be entered
					"PrimeFlagIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"
			else
				if (PrimeFlag.PassThru)
					constraint (PrimeSponsor.Company entered and PrimeSponsor.Customer entered)
						"PrimeSponsorCompanyAndPrimeSponsorCustomerRequiredForPassThru"
#ifdef module ar						
					constraint (RelatedPrimeSponsorCompanyCustomerExists)
						"PrimeSponsorCustomerInvalidForPrimeSponsorCompany"				
#endif
		PreAwardID
			if (!IsProjectInvoicing)		
				cannot be entered
					"Pre-AwardIDIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"

#ifdef module ar
        PrimeSponsor
			if (!IsProjectInvoicing)		
				cannot be entered
					"PrimeSponsorCompanyAndPrimeSponsorCustomerAreOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"




#endif        
		PrimeSponsorAwardNumber
			if (!IsProjectInvoicing)		
				cannot be entered
					"PrimeSponsorAwardNumberIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"
		
		SEFAFlag     
			if (!IsProjectInvoicing)		
				cannot be entered
					"SEFAFlagIsOnlyValidFor<FinanceEnterpriseGroup.ProjectLabel>Invoicing"
						













 		
		RequiredRecipientShare					
			if (!IsProjectInvoicing)		
				cannot be entered
					"RequiredRecipientShare<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
		        
        RecipientShareOfExpenditures
			if (!IsProjectInvoicing)		
				cannot be entered
					"RecipientShareOfExpenditures<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
        				
        FederalProgramIncome
			if (!IsProjectInvoicing)		
				cannot be entered
					"FederalProgramIncome<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
        						 
        ProgramIncomeExpendedDeductionAlternative
			if (!IsProjectInvoicing)		
				cannot be entered
					"ProgramIncomeExpendedDeductionAlternative<FinanceEnterpriseGroup.ProjectLabel>Invoicing"
			constraint (ProgramIncomeExpendedAdditionAlternative not entered)
				"CannotEnterProgramIncomeExpendedDeductionAlternativeAndProgramIncomeExpendedAdditionAlternative"						
         
        ProgramIncomeExpendedAdditionAlternative
			if (!IsProjectInvoicing)		
				cannot be entered
					"ProgramIncomeExpendedAdditionAlternative<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
			constraint (ProgramIncomeExpendedDeductionAlternative not entered)
				"CannotEnterProgramIncomeExpendedDeductionAlternativeAndProgramIncomeExpendedAdditionAlternative"						
        		
        IndirectExpenseType
			if (!IsProjectInvoicing)		
				cannot be entered
					"IndirectExpenseType<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
         			
       	IndirectExpenseRate
			if (!IsProjectInvoicing)		
				cannot be entered
					"IndirectExpenseRate<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
       								
       	IndirectExpenseBaseAmount
			if (!IsProjectInvoicing)		
				cannot be entered
					"IndirectExpenseBaseAmount<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
       	 			
        IndirectExpenseAmountCharged
			if (!IsProjectInvoicing)		
				cannot be entered
					"IndirectExpenseAmountCharged<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
        				 
        IndirectExpenseFederalShare			 
			if (!IsProjectInvoicing)		
				cannot be entered
					"IndirectExpenseFederalShare<FinanceEnterpriseGroup.ProjectLabel>Invoicing"				
 		
	Action Exit Rules
	
		if (FinanceEnterpriseGroup.BODTrigger and !LocalBODTrigger)
			Service		= "FinanceDimension2Service"
			if (action type.Create)
				ActionCode	= ActionCode.Create
			else
				ActionCode	= ActionCode.Update				
			increment bod id.VariationID








	Attach Rules
		if (DimensionType.Posting)
			if (!parentcontext.name = "GeneralLedgerTotal"
			and !parentcontext.name = "FinanceDimension2Hierarchy"
			and !parentcontext.name = "FinanceDimension2Structure"
			and !parentcontext.name = "FinanceDimension2"
			and !parentcontext.name = "FinanceDimension2Upload"
			and !parentcontext.name = "AccountAnalysisSettings"				
			and !parentcontext.name = "BudgetGroup"
			and !parentcontext.name = "BudgetTemplate"
			and !parentcontext.name = "BudgetTemplateMember"
			and !parentcontext.name = "BudgetTemplatePending"
			and !parentcontext.name = "BudgetTemplateRemove"
			and !parentcontext.name = "BudgetChange"
			and !parentcontext.name = "BudgetImport"
			and !parentcontext.name = "FinanceDimension2Shadow"
			and !parentcontext.name = "FinanceDimensionWithInvalidSequence"
			and !parentcontext.name = "ReconciliationAccount"
			and !parentcontext.name = "ContractLineDistribution"
			and !parentcontext.name = "AllocationLineSourceValue"
			and !parentcontext.name = "AllocationLineValue"			
			and !parentcontext.name = "AllocationLineSingleOverride"
			and !parentcontext.name = "AllocationLineTempOverride"
			and !parentcontext.name = "AllocationRunWeightDetail"
			and !parentcontext.name = "GLReport"
			and !parentcontext.name = "GLReportGrouping"
			and !parentcontext.name = "GLReportGroupingDetail"
			and !parentcontext.name = "GLReportFilterDimension"
			and !parentcontext.name = "GLColumnFilterDimension"
#ifdef module am
			and !parentcontext.name = "AssetTransactionSummary"
			and !parentcontext.name = "AssetTransactionBeginningBalance"
#endif
			and !BypassActiveCodeBlockEdit)
				constraint (Active)
					"CannotAttachAnInactive<FinanceDimension2>_<FinanceEnterpriseGroup.FinanceDimension2Label>"

    Actions
		Create is a Create Action
			valid when (!FinanceEnterpriseGroup.ProjectInvoicing)
		
			Entrance Rules
				if (!DimensionType.Node)
					include CheckValidContext
				if (!DimensionType entered)
					DimensionType = CreateDimensionType
					constraint (DimensionType entered)
						"DimensionTypeIsRequired"
					
				constraint (FinanceDimension2 entered)
					"DataIsRequiredFor<FinanceEnterpriseGroup.FinanceDimension2Label>"
														
				if (!IsTopNode)
					if (DimensionType.Summary)
						NewDimension 		= FinanceDimension2
						FinanceDimension2	= SummaryNodeString				
						DisplayDimension	= NewDimension

				BypassStructureRelationEdit = true

			Action Rules							 
				if (IsTopNode
				or  DimensionType.Summary)
					Active					= true
					DimensionStructure		= FinanceDimension2Structure


                										
			Exit Rules
	
				if (!SkipHierarchy)
					invoke Create FinanceDimension2Hierarchy
						invoked.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
						invoked.FinanceDimension2Structure	= FinanceDimension2Structure
						invoked.ParentDimension 			= ParentDimension 
						invoked.FinanceDimension2		    = FinanceDimension2
						invoked.DisplayDimension			= DisplayDimension
				    	invoked.SystemDimension				= SystemDimension
				    	invoked.IncludeInBudgetEdit			= IncludeInBudgetEdit 	
			
				if (!IsTopNode)
					if (DimensionType.Summary)
						invoke SetLevel
					LocalFinanceDimension2 = FinanceDimension2
					include CreateShadowForDimension
					if (DimensionType.Posting)					
						initialize ParentFinanceDimension2


						
				if (DimensionType.Posting)
					if (!BypassNewStructureNotification)
						invoke NotifyNewStructureComponent FinanceEnterpriseGroup
							invoked.PrmNewDimension2			= FinanceDimension2
				
                include CheckSystemDimensions























































		CreateFundingSource is a Create Action
			valid when (FinanceEnterpriseGroup.ProjectInvoicing)
		
			Entrance Rules
				if (!DimensionType.Node)
					include CheckValidContext
				if (!DimensionType entered)
					DimensionType = CreateDimensionType
					constraint (DimensionType entered)
						"DimensionTypeIsRequired"
					
				constraint (FinanceDimension2 entered)
					"Required<FinanceEnterpriseGroup.FinanceDimension2Label>"
														
				if (!IsTopNode)
					if (DimensionType.Summary)
						NewDimension 		= FinanceDimension2
						FinanceDimension2	= SummaryNodeString				
						DisplayDimension	= NewDimension

				BypassStructureRelationEdit = true

			Action Rules							 
				if (IsTopNode
				or  DimensionType.Summary)
					Active					= true
					DimensionStructure		= FinanceDimension2Structure

                include CheckSystemDimensions
                										
			Exit Rules
	
				if (!SkipHierarchy)
					invoke Create FinanceDimension2Hierarchy
						invoked.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
						invoked.FinanceDimension2Structure	= FinanceDimension2Structure
						invoked.ParentDimension 			= ParentDimension 
						invoked.FinanceDimension2		    = FinanceDimension2
						invoked.DisplayDimension			= DisplayDimension
				    	invoked.SystemDimension				= SystemDimension
				    	invoked.IncludeInBudgetEdit			= IncludeInBudgetEdit 	
			
				if (!IsTopNode)
					if (DimensionType.Summary)
						invoke SetLevel
					LocalFinanceDimension2 = FinanceDimension2
					include CreateShadowForDimension
					if (DimensionType.Posting)					
						initialize ParentFinanceDimension2
                															

						
				if (DimensionType.Posting)
					if (!BypassNewStructureNotification)
						invoke NotifyNewStructureComponent FinanceEnterpriseGroup
							invoked.PrmNewDimension2			= FinanceDimension2
                															
		CreateNoRules is a Create Action
			restricted
			bypass field rules
			
			Entrance Rules
				include CheckValidContext
			Exit Rules

				
		Update is an Update Action
		
			Action Rules
				UseInputValue = true
				
				if (!BypassUpdateStructure)
					invoke UpdateStructure
			Exit Rules
				include CheckSystemDimensions
				

				if(Amount changed)
					if(!TriggeredAlert)
						TriggeredAlert = true
						trigger "ProjectFundingAmountChangedService" PA service
							resume on error
	                   	 	title is "FEG:<FinanceEnterpriseGroup>PFS:<FinanceDimension2>"
	                    	Criteria
	                   			FinanceEnterpriseGroup
	                   			FinanceDimension2
	                   	 	Variables
	                   			FinanceEnterpriseGroup
	                    			variable name is FinanceEnterpriseGroup
	                      		FinanceDimension2
	                     			variable name is Project
	                      		FundingType
	                      			variable name is FundingType
	                      		old Amount
	                          		variable name is OldAmount
	                      		Amount
	                        		variable name is NewAmount
	                  			Currency
	                    			variable name is Currency
	                    		FinanceEnterpriseGroup.FinanceDimension2Label	
                     				variable name is FinanceDimension2Label
#ifdef module integration                     				
	                	invoke TriggerProjectFundingAmountChangedAlert
	                		invoked.PrmPulseAlert = "FSM_ION_ProjectFundingAmountChangedAlert"
#endif                	     	

	                 		
		UpdateStructure is an Instance Action
			restricted
			Action Rules
								
				invoke Update DimensionInContextStructureRel
					invoked.DisplayDimension		= DisplayDimension
			    	invoked.SystemDimension			= SystemDimension

			    	invoked.IncludeInBudgetEdit		= IncludeInBudgetEdit 	
#ifdef module integration
		SendFinanceDimension2BODNativeLPL is an Instance Action
			restricted
			Entrance Rules
			Parameters
			Action Rules
				if(DerivedCleanDocumentID = "Y")
					send ion bod
						bod is FinanceDimensionCleanDocIDXMLBOD
						bod type is "Sync.CodeDefinition"
						accounting entity is LocalCrossAccountingEntity
						document id is DerivedBODDocumentID
						variation id is	BODVariationID	
				else
					send ion bod
						bod is FinanceDimension2XMLBOD
						bod type is "Sync.CodeDefinition"
						accounting entity is DerivedaccountingEntity
						document id is DerivedBODDocumentID
						variation id is	BODVariationID
					
		TriggerFinanceDimension2NativeLPLBOD is an Instance Action
			restricted
			Entrance Rules
			Parameters
				RestartFlag is Boolean
			Action Rules
				invoke NativeLPLBODTriggerChecks FSMBODConfigurationRel
					invoked.PrmVerb 					= 1
					invoked.PrmNoun						= "CodeDefinition"
					invoked.PrmDirection				= 1
					invoked.PrmTriggerFrom				= "FinanceDimension2"
					invoked.PrmFinanceEnterpriseGroup	= FinanceEnterpriseGroup
					invoked.PrmMainUserTemplate			= "IONSyncCodeDefination_FinanceDimension2_ST"
				LocalNativeLPLBODTrigger = FSMBODConfigurationRel.NativeLPLBODTrigger
				LocalBODTrigger = true
				if(FinanceEnterpriseGroup.BODTrigger and LocalNativeLPLBODTrigger)
					if(DerivedCleanDocumentID = "Y")
						if(RestartFlag) 
							if (BODAccountingEntityRel exist)
								LocalBodAccountingEntity = FSMInboundBODTracker.Reference1
								if(DerivedMultipleFEG = "Y")	
									LocalCleanDocIDAccountingentity = FinanceEnterpriseGroup + DerivedDelimiter + LocalBodAccountingEntity	
								else	
									LocalCleanDocIDAccountingentity = LocalBodAccountingEntity	
								initialize LocalCrossAccountingEntity
								if(DerivedTriggerBODBasedOnCrossReference = "Y")
									if (FSMBODAECrossReferenceDetailRel.DestinationValue entered)	
										LocalCrossAccountingEntity = FSMBODAECrossReferenceDetailRel.DestinationValue
								else 
									LocalCrossAccountingEntity = LocalCleanDocIDAccountingentity
								
								if(LocalCrossAccountingEntity entered)
									LocalFSMInboundBODTracker		= FSMInboundBODTracker
									invoke Update FSMInboundBODTrackerRel
										invoked.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
										invoked.BODDocumentID			= DerivedBODDocumentID
										invoked.BODVariationID			= BODVariationID
										invoked.BODID					= LocalBODFormattedID
										invoked.Status					= 1
										invoked.StartDate				= system current timestamp
										invoked.Direction				= 1
										invoked.BODAccountingEntity		= LocalCrossAccountingEntity
										invoked.Reference1 				= LocalBodAccountingEntity
										invoked.Reference2				= "FinanceDimension2"
										invoked.Reference3				= FinanceDimension2
										initialize invoked.Error			
										initialize invoked.ErrorMessage
									LocalBODFormattedID = "infor-nid:" + DerivedTenantID + ":" + LocalCrossAccountingEntity + "::" + DerivedBODDocumentID + ":" + "?CodeDefinition&verb=Sync&BODTrackerID=" + LocalFSMInboundBODTracker
									FinanceDimensionCleanDocIDXMLBOD = template.IONSyncCodeDefination_FinanceDimension2CleanDocID_ST document for this instance
									invoke SendFinanceDimension2BODNativeLPL
										resume on error
											Error            							= true
											ErrorMessage     							= error message
									if(Error)
										invoke Update FSMInboundBODTrackerRel
											invoked.Error 								= Error
											invoked.ErrorMessage 						= ErrorMessage
											invoked.Status								= 2
											invoked.CloseDate							= system current timestamp
											invoked.BODXML								= FinanceDimensionCleanDocIDXMLBOD
											invoked.BODID								= LocalBODFormattedID
									else
										invoke Update FSMInboundBODTrackerRel
											invoked.Status									= 3
											invoked.CloseDate								= system current timestamp
											invoked.BODXML									= FinanceDimensionCleanDocIDXMLBOD
											invoked.BODID									= LocalBODFormattedID
						else
						if(DerivedTriggerBODBasedOnCrossReference = "Y")
							if(FSMCleanDocIDCrossReferenceDetailRel exists)
								for each FSMCleanDocIDCrossReferenceDetailRel
									initialize FinanceDimensionCleanDocIDXMLBOD
									initialize LocalSourceValue
									LocalSourceValue = each.SourceValue
									if (LocalSourceValue entered)
										for each LocalSourceValue split on "<DerivedDelimiter>"
											initialize LocalCleanDocIDAccountingentity
											LocalCleanDocIDAccountingentity = each
									initialize LocalCrossAccountingEntity
									initialize LocalBODFormattedID
									if(FSMCleanDocIDAccountingEntityRel exists)
										LocalCrossAccountingEntity = each.DestinationValue
										if(LocalCrossAccountingEntity entered)
											if(FSMInboundBODTracker not entered)
												invoke Create FSMInboundBODTracker
													assign result to NewBODTracker
													invoked.Verb 					= 1
													invoked.Noun 					= "CodeDefinition"					
													invoked.BODDocumentID			= DerivedBODDocumentID
													invoked.BODVariationID			= BODVariationID
													invoked.Status					= 1
													invoked.StartDate				= system current timestamp
													invoked.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
													invoked.Direction				= 1
													invoked.BODAccountingEntity		= LocalCrossAccountingEntity
													invoked.Reference1 				= LocalCleanDocIDAccountingentity
													invoked.Reference2				= "FinanceDimension2"
													invoked.Reference3				= FinanceDimension2
													initialize invoked.Error			
													initialize invoked.ErrorMessage
												LocalFSMInboundBODTracker	= NewBODTracker.FSMInboundBODTracker
												LocalBODFormattedID			= "infor-nid:" + DerivedTenantID + ":" + LocalCrossAccountingEntity + "::" + DerivedBODDocumentID + ":" + "?CodeDefinition&verb=Sync&TrackerID=" + LocalFSMInboundBODTracker
												FinanceDimensionCleanDocIDXMLBOD = template.IONSyncCodeDefination_FinanceDimension2CleanDocID_ST document for this instance				
											invoke SendFinanceDimension2BODNativeLPL
												resume on error
													Error            							= true
													ErrorMessage     							= error message
											if(Error)
												invoke Update FSMInboundBODTrackerRel
													invoked.Error 								= Error
													invoked.ErrorMessage 						= ErrorMessage
													invoked.Status								= 2
													invoked.CloseDate							= system current timestamp
													invoked.BODXML								= FinanceDimensionCleanDocIDXMLBOD
													invoked.BODID								= LocalBODFormattedID	
											else
												invoke Update FSMInboundBODTrackerRel
													invoked.Status									= 3
													invoked.CloseDate								= system current timestamp
													invoked.BODXML									= FinanceDimensionCleanDocIDXMLBOD
													invoked.BODID									= LocalBODFormattedID
						else
						if(DerivedTriggerBODBasedOnCrossReference = "N")
							if (BODAccountingEntityRel exist)
								for each BODAccountingEntityRel
									initialize LocalBodAccountingEntity
									initialize LocalCrossAccountingEntity
									initialize FinanceDimensionCleanDocIDXMLBOD
									initialize LocalBODFormattedID
									LocalBodAccountingEntity = each.AccountingEntity
									if(DerivedMultipleFEG = "Y")
										LocalCrossAccountingEntity = FinanceEnterpriseGroup + DerivedDelimiter + LocalBodAccountingEntity
									else
										LocalCrossAccountingEntity = LocalBodAccountingEntity
									
									if(LocalCrossAccountingEntity entered)
										if(FSMInboundBODTracker not entered)
											invoke Create FSMInboundBODTracker
												assign result to NewBODTracker
												invoked.Verb 					= 1
												invoked.Noun 					= "CodeDefinition"					
												invoked.BODDocumentID			= DerivedBODDocumentID
												invoked.BODVariationID			= BODVariationID
												invoked.Status					= 1
												invoked.StartDate				= system current timestamp
												invoked.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
												invoked.Direction				= 1
												invoked.BODAccountingEntity		= LocalCrossAccountingEntity
												invoked.Reference1 				= LocalBodAccountingEntity
												invoked.Reference2				= "FinanceDimension2"
												invoked.Reference3				= FinanceDimension2
												initialize invoked.Error			
												initialize invoked.ErrorMessage
											LocalFSMInboundBODTracker	= NewBODTracker.FSMInboundBODTracker
											LocalBODFormattedID = "infor-nid:" + DerivedTenantID + ":" + LocalCrossAccountingEntity + "::" + DerivedBODDocumentID + ":" + "?CodeDefinition&verb=Sync&BODTrackerID=" + LocalFSMInboundBODTracker
											FinanceDimensionCleanDocIDXMLBOD = template.IONSyncCodeDefination_FinanceDimension2CleanDocID_ST document for this instance				
										invoke SendFinanceDimension2BODNativeLPL
											resume on error
												Error            							= true
												ErrorMessage     							= error message
										if(Error)
											invoke Update FSMInboundBODTrackerRel
												invoked.Error 								= Error
												invoked.ErrorMessage 						= ErrorMessage
												invoked.Status								= 2
												invoked.CloseDate							= system current timestamp
												invoked.BODID								= LocalBODFormattedID
												invoked.BODXML								= FinanceDimensionCleanDocIDXMLBOD
										else
											invoke Update FSMInboundBODTrackerRel
												invoked.Status									= 3
												invoked.CloseDate								= system current timestamp
												invoked.BODID									= LocalBODFormattedID
												invoked.BODXML									= FinanceDimensionCleanDocIDXMLBOD
					else
						if(FSMInboundBODTracker not entered)
							invoke Create FSMInboundBODTracker
								assign result to NewBODTracker
								invoked.Verb 					= 1
								invoked.Noun 					= "CodeDefinition"					
								invoked.BODDocumentID			= DerivedBODDocumentID
								invoked.BODVariationID			= BODVariationID
								invoked.Status					= 1
								invoked.StartDate				= system current timestamp
								invoked.FinanceEnterpriseGroup	= FinanceEnterpriseGroup								
								invoked.Direction				= 1
								invoked.BODAccountingEntity		= DerivedaccountingEntity
								invoked.Reference2				= "FinanceDimension2"
								invoked.Reference3				= FinanceDimension2
								initialize invoked.Error						
								initialize invoked.ErrorMessage					
							LocalFSMInboundBODTracker	= NewBODTracker.FSMInboundBODTracker
						else 
							LocalFSMInboundBODTracker		= FSMInboundBODTracker
							invoke Update FSMInboundBODTrackerRel
								invoked.FinanceEnterpriseGroup	= FinanceEnterpriseGroup
								invoked.BODDocumentID			= DerivedBODDocumentID
								invoked.BODVariationID			= BODVariationID
								invoked.BODID					= DerivedBODFormattedId
								invoked.Status					= 1
								invoked.StartDate				= system current timestamp
								invoked.Direction				= 1
								invoked.BODAccountingEntity		= DerivedaccountingEntity
								invoked.Reference2				= "FinanceDimension2"
								invoked.Reference3				= FinanceDimension2
								initialize invoked.Error			
								initialize invoked.ErrorMessage
						invoke SendFinanceDimension2BODNativeLPL
							resume on error
		                   		Error            							= true
		                        ErrorMessage     							= error message
		                if(Error)
							invoke Update FSMInboundBODTrackerRel
								invoked.Error 								= Error
								invoked.ErrorMessage 						= ErrorMessage
								invoked.Status								= 2
								invoked.CloseDate							= system current timestamp
								invoked.BODID								= DerivedBODFormattedId
								invoked.BODXML								= FinanceDimension2XMLBOD
								
						else
							invoke Update FSMInboundBODTrackerRel
								invoked.Status									= 3
								invoked.CloseDate								= system current timestamp
								invoked.BODID									= DerivedBODFormattedId
								invoked.BODXML									= FinanceDimension2XMLBOD
								
#endif
			
				
		Delete is a Delete Action
			valid when (EligibleToDelete)
			confirmation required
				"TheSelected_DimensionWillBeDeletedFromAllThe_<DerivedFinanceDimension2Label>_Structures"
			Entrance Rules
				ActionCode		= ActionCode.Delete
				constraint (!SystemDimension)
					"CannotDeleteSystemDimension"

				invoke Delete FinanceDimension2Hierarchy(FinanceDimension2) set
				invoke Delete FinanceDimension2Hierarchy(FinanceDimension2) set 
				include DeleteRules










































						
		DeleteAll is a Delete Action
			restricted
			Entrance Rules
				include DeleteRules

		AddPostingDimensionToStructure is an Instance Action
			valid when (DimensionType.Posting)
			Parameters
				PrmStructure				is a FinanceDimension2Structure
					default label is "Structure"
				PrmParentDimension			is a FinanceDimension2
					default label is "ParentDimension"

			Parameter Rules
				PrmStructure
					required
					if (PrmStructure = FinanceEnterpriseGroup.UnusedDim2Structure)
						constraint (InvokedByUnusedStructure)
							"ActionNotValidForThisStructure"						
				PrmParentDimension

					default to PrmStructure.DimensionNode
					constraint (PrmParentDimension != FinanceDimension2)
						"CannotCreateWithinSelf"
					constraint (!PrmParentDimension.DimensionType.Posting)	
						"CannotBePostingLevel"				

			Action Rules

				LocalStructure = PrmStructure
				constraint (!DisplayDimensionRel exists)
					"DisplayValueAlreadyExistsFor<first DisplayDimensionRel.FinanceDimension2>"
											
				ParentDimension = PrmParentDimension
				invoke Create FinanceDimension2Hierarchy
					invoked.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
					invoked.FinanceDimension2Structure  = PrmStructure
					invoked.ParentDimension			 	= PrmParentDimension
					invoked.FinanceDimension2			= FinanceDimension2
					invoked.DisplayDimension			= FinanceDimension2


				invoke BuildShadowFileForDimension PrmStructure
					invoked.PrmFinanceEnterpriseGroup = FinanceEnterpriseGroup
					invoked.PrmDimension			  = FinanceDimension2
					
		AddPostingToSummary is an Instance Action

			Action Rules
				include CheckValidContext

				LocalStructure = FinanceDimension2Structure
				constraint (!DisplayDimensionRel exists)
					"DisplayValueAlreadyExistsFor<first DisplayDimensionRel.FinanceDimension2>"
												
				ParentDimension = ContextDimension
				invoke Create FinanceDimension2Hierarchy
					invoked.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
					invoked.FinanceDimension2Structure  = FinanceDimension2Structure
					invoked.ParentDimension			 	= ContextDimension
					invoked.FinanceDimension2			= FinanceDimension2
					invoked.DisplayDimension			= FinanceDimension2
				LocalFinanceDimension2 = FinanceDimension2					
				include CreateShadowForDimension

		CreateChildWithin is an Instance Action
			default label is "CreateChildDimension"				
			valid when (IsSummaryNotProjectInvoicing)
			allow user fields as parameters
			Parameters
				NewDimensionType			is Numeric 1
					States
						Summary				value is 2
						Posting				value is 1
				NewDimension	 			is like FinanceDimension2 
				NewDisplayDimension	 		is like FinanceDimension2
				NewDescription 	 	 		is like Description
				NewBudgetIdentifier			is a BudgetIdentifier
				NewActive					is Boolean
				NewAddressCode				is a AddressCode
			Parameter Rules
				NewDimensionType
					required
				NewDimension
					required		
				NewDescription		
					required
				NewDisplayDimension
					default to NewDimension
				NewBudgetIdentifier
					if (NewDimensionType.Posting)
						cannot be entered
				NewActive
					initial value is true
					
			Action Rules
				include CheckValidContext
						
			Exit Rules
				invoke Create
					fill in user fields from parameters
					invoked.FinanceEnterpriseGroup			= FinanceEnterpriseGroup
					invoked.DimensionType					= NewDimensionType
					invoked.FinanceDimension2				= NewDimension
					invoked.Description   		  			= NewDescription
					invoked.DisplayDimension	  			= NewDisplayDimension
					invoked.ParentDimension					= FinanceDimension2
					invoked.BudgetIdentifier			    = NewBudgetIdentifier
					invoked.Active							= NewActive					
					invoked.SkipPropagate		  			= true
					invoked.InvokedByCreateWithin 			= true
					invoked.AddressCode						= NewAddressCode

		CreateChildFundingSourceWithin is an Instance Action
			default label is "CreateChildDimension"						
			valid when (IsSummaryProjectInvoicing)
			Parameters
				NewDimensionType			is Numeric 1
					States
						Summary				value is 2
						Posting				value is 1
				NewDimension	 			is like FinanceDimension2 
				NewDisplayDimension	 		is like FinanceDimension2
				NewDescription 	 	 		is like Description
				NewBudgetIdentifier			is a BudgetIdentifier
				NewAddressCode				is a AddressCode				
				NewActive					is Boolean
		    	NewSystemDimension			is Boolean
		    	NewIncludeInBudgetEdit	    is Boolean
				NewFundingType				is a ProjectFundingType
				NewDepartment					is a FinanceDimension2Department
				NewDivision						is a FinanceDimension2Division
		 		NewDateRange					is a DateRange										
		        NewAmount						is a CurrencyAmount 
				NewRevenueCodeBlockOption		is Numeric size 1
					States
						FullStructure			value is 1
						PartialStructure		value is 2
						None					value is 3
				NewRevenueFullAccount			is a FinanceCodeBlockFullNoProjectFD2
				NewRevenuePartialAccount		is a FinanceCodeBlockNoProjectFD2
				NewRevenueRecognitionOption		is Numeric 1
					States
						Detail					value is 0
						Summary					value is 1
				NewOffsetAccount		        is a FinanceCodeBlockFullOffset
				NewInvoiceFinanceCodeBlock		is a FinanceCodeBlockFull
				NewCFDANumber					is Alpha 30	
				NewProjectJurisdictionCode      is a ProjectJurisdictionCode					
				NewCustomerPoNumber 			is Alpha 22							
				NewDocumentNumber 				is Alpha 50							
				NewLetterOfCredit 				is Alpha 20							
				NewProgramTitle 				is Alpha 60   
				NewMajorCategory				is a ProjectMajorCategory
		 		NewCurrency						is a FromCurrency													
		 		NewEstimateCloseDate			is Date							
		 		NewActualDate					is Date								
		 		NewSubmitDate					is Date								
		 		NewNoticeDate					is Date								
		 		NewReceiveDate					is Date							
		 		NewProposalDate					is Date								


				NewPrimeFlag          			is Numeric 1						
					States
						Direct					value is 1
						PassThru				value is 2
		    	NewPreAwardID 				    is Alpha size 25
#ifdef module ar		
				NewPrimeSponsor                is a CompanyAndCustomer				
#endif        
				NewPrimeSponsorAwardNumber		is Alpha 30							
				NewGrantID						is Alpha 30									
				NewSEFAFlag                     is Boolean  


		        NewRequiredRecipientShare					is a CurrencyAmount	
		        NewRecipientShareOfExpenditures				is a CurrencyAmount
		        NewFederalProgramIncome						is a CurrencyAmount 
		        NewProgramIncomeExpendedDeductionAlternative	is a CurrencyAmount 
		        NewProgramIncomeExpendedAdditionAlternative	is a CurrencyAmount	
		        NewIndirectExpenseType 	is Numeric 1		
		        	States
		        		Provisional		value is 1
		        		Predetermined	value is 2
		        		Final			value is 3
		        		Fixed  			value is 4	
		       	NewIndirectExpenseRate	is Percent size 5.2						
		       	NewIndirectExpenseBaseAmount 				is a CurrencyAmount 
		        NewIndirectExpenseAmountCharged				is a CurrencyAmount 
		        NewIndirectExpenseFederalShare				is a CurrencyAmount 

#ifdef module ar 	
				NewCompanyCustomerGroup			is a CompanyCustomerGroup
#endif						
				NewARInterfaceOption			is Numeric 1
					States
						Summary						value is 1
						Detail						value is 2
						SummarizeByPostingProject	value is 3 				
				NewPersonResponsible			is an Employee
				NewProjectTeam					is a ProjectTeam				

			Parameter Rules
				NewDimensionType
					required
					if (NewDimensionType.Posting)			
						constraint (InEnterpriseStructure)
							"DimensionTypeMustBeSummaryForNonEnterpriseStructureUsingProjectInvocing"			
				NewDimension
					required		
				NewDescription		
					required
				NewDisplayDimension
					default to NewDimension
				NewBudgetIdentifier
					if (NewDimensionType.Posting)
						cannot be entered
				NewActive
					initial value is true				
#ifdef module ar				
				NewCompanyCustomerGroup
					if (NewDimensionType.Posting)
						if (NewFundingType.ExternalGrant
						or  NewFundingType.ExternalCustomer)

							required
						else
						if (NewFundingType.IntercompanyBilling)
							required
						else	
							cannot be entered
					else
						cannot be entered
#endif						
				NewProjectJurisdictionCode
					if (!NewDimensionType.Posting
					and (!NewFundingType.ExternalGrant
					or   !NewFundingType.ExternalCustomer))
						cannot be entered	
				
				NewCFDANumber
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
						
				NewMajorCategory
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
										
				NewProgramTitle
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
									
				NewARInterfaceOption
					if (NewDimensionType.Posting)
						default to NewARInterfaceOption.SummarizeByPostingProject
						required
					else	
						cannot be entered
						




											
				NewLetterOfCredit




					if (NewDocumentNumber entered)
						required		
							"LetterOfCreditRequired;DocumentNumberIsEntered"								
						
				NewPrimeFlag
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
						
		    	NewPreAwardID
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
#ifdef module ar
		        NewPrimeSponsor
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
					else
						if (NewPrimeFlag.PassThru)
							required
#endif        
				NewPrimeSponsorAwardNumber
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
			
				NewSEFAFlag
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered
							














		        NewRequiredRecipientShare					
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
		        
		        NewRecipientShareOfExpenditures
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
		        				
		        NewFederalProgramIncome
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
		        						 
		        NewProgramIncomeExpendedDeductionAlternative
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
					constraint (NewProgramIncomeExpendedAdditionAlternative not entered)
						"CannotEnterProgramIncomeExpendedDeductionAlternativeAndProgramIncomeExpendedAdditionAlternative"						
		         
		        NewProgramIncomeExpendedAdditionAlternative
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
					constraint (NewProgramIncomeExpendedDeductionAlternative not entered)
						"CannotEnterProgramIncomeExpendedDeductionAlternativeAndProgramIncomeExpendedAdditionAlternative"						
		        		
		        NewIndirectExpenseType
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
		         			
		       	NewIndirectExpenseRate
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
		       								
		       	NewIndirectExpenseBaseAmount
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
		       	 			
		        NewIndirectExpenseAmountCharged
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
		        				 
		        NewIndirectExpenseFederalShare			 
					if (!NewDimensionType.Posting
					and !NewFundingType.ExternalGrant)
						cannot be entered	
															
			Action Rules
				include CheckValidContext
						
			Exit Rules
				invoke Create
					invoked.FinanceEnterpriseGroup			= FinanceEnterpriseGroup
					invoked.DimensionType					= NewDimensionType
					invoked.FinanceDimension2				= NewDimension
					invoked.Description   		  			= NewDescription
					invoked.DisplayDimension	  			= NewDisplayDimension
					invoked.ParentDimension					= FinanceDimension2
					invoked.BudgetIdentifier			    = NewBudgetIdentifier
					invoked.AddressCode						= NewAddressCode					
					invoked.Active							= NewActive	
		    		invoked.SystemDimension					= NewSystemDimension
		    	    invoked.IncludeInBudgetEdit             = NewIncludeInBudgetEdit
					invoked.SkipPropagate		  			= true
					invoked.InvokedByCreateWithin 			= true
					invoked.FundingType						= NewFundingType	
					invoked.Department						= NewDepartment																	
					invoked.Division						= NewDivision				
			 		invoked.DateRange						= NewDateRange															
			        invoked.Amount							= NewAmount
			        invoked.RevenueCodeBlockOption			= NewRevenueCodeBlockOption
					invoked.RevenueFullAccount              = NewRevenueFullAccount
					invoked.RevenuePartialAccount			= NewRevenuePartialAccount
					invoked.RevenueRecognitionOption		= NewRevenueRecognitionOption
					invoked.OffsetAccount		       		= NewOffsetAccount							 		
					invoked.ARInterfaceOption				= NewARInterfaceOption			 		
					invoked.CFDANumber 						= NewCFDANumber
					invoked.MajorCategory                   = NewMajorCategory					
					invoked.ProgramTitle					= NewProgramTitle					
					invoked.CustomerPoNumber				= NewCustomerPoNumber 									
					invoked.DocumentNumber					= NewDocumentNumber 											
					invoked.LetterOfCredit					= NewLetterOfCredit 										
			 		invoked.Currency						= NewCurrency																		
			 		invoked.EstimateCloseDate				= NewEstimateCloseDate								
			 		invoked.ActualDate						= NewActualDate											
			 		invoked.SubmitDate						= NewSubmitDate												
			 		invoked.NoticeDate						= NewNoticeDate												
			 		invoked.ReceiveDate						= NewReceiveDate											
			 		invoked.ProposalDate					= NewProposalDate											


#ifdef module ar 		
					invoked.CompanyCustomerGroup.ReceivableCompany			 = NewCompanyCustomerGroup.ReceivableCompany									
					invoked.CompanyCustomerGroup.Customer		        	 = NewCompanyCustomerGroup.Customer
					invoked.CompanyCustomerGroup.InvoiceTypeCode             = NewCompanyCustomerGroup.InvoiceTypeCode			
					invoked.CompanyCustomerGroup.ReceivableProcessLevel 	 = NewCompanyCustomerGroup.ReceivableProcessLevel
					invoked.CompanyCustomerGroup.ReceivableGeneralLedgerCode = NewCompanyCustomerGroup.ReceivableGeneralLedgerCode
					invoked.CompanyCustomerGroup.CustomerBillTo				 = NewCompanyCustomerGroup.CustomerBillTo
					invoked.InvoiceFinanceCodeBlock							 = NewInvoiceFinanceCodeBlock
					invoked.PrimeSponsor.Company                             = NewPrimeSponsor.Company	
					invoked.PrimeSponsor.Customer                            = NewPrimeSponsor.Customer									
#endif		
					invoked.PrimeFlag                                        = NewPrimeFlag		
					invoked.PreAwardID										 = NewPreAwardID				
					invoked.PrimeSponsorAwardNumber                          = NewPrimeSponsorAwardNumber
					invoked.GrantID											 = NewGrantID
				    invoked.SEFAFlag										 = NewSEFAFlag  


					invoked.PersonResponsible				                 = NewPersonResponsible
					invoked.ProjectTeam										 = NewProjectTeam

			        invoked.RequiredRecipientShare							 = NewRequiredRecipientShare				
			        invoked.RecipientShareOfExpenditures					 = NewRecipientShareOfExpenditures			
			        invoked.FederalProgramIncome							 = NewFederalProgramIncome						 
			        invoked.ProgramIncomeExpendedDeductionAlternative		 = NewProgramIncomeExpendedDeductionAlternative	 
			        invoked.ProgramIncomeExpendedAdditionAlternative		 = NewProgramIncomeExpendedAdditionAlternative
			        invoked.IndirectExpenseType								 = NewIndirectExpenseType 			
			       	invoked.IndirectExpenseRate								 = NewIndirectExpenseRate						
			       	invoked.IndirectExpenseBaseAmount 						 = NewIndirectExpenseBaseAmount			 
			        invoked.IndirectExpenseAmountCharged					 = NewIndirectExpenseAmountCharged			 
			        invoked.IndirectExpenseFederalShare						 = NewIndirectExpenseFederalShare			 
					
		Move is an Instance Action
			valid when (SummaryOrPostingDimension)
			
			Parameters
				PrmContextDimension is a FinanceDimension2ContextValue
				NewParent 			is a FinanceDimension2
							
			Parameter Rules
				PrmContextDimension
					initial value is FinanceDimension2
				NewParent
					default to DerivedTopNode
					required
					constraint (NewParent != FinanceDimension2)
						"CannotMoveToSelf"
					constraint (NewParent.DimensionType.Summary
					or			NewParent.DimensionType.Node)
						"ParentMustBeASummaryNode"
					constraint (NewParent.DimensionStructure = FinanceDimension2Structure)
						"ParentDoesNotBelongToThisStructure"
					constraint (NewParent != DerivedParentDimension)
						"<FinanceDimension2.Description>IsAlreadyAParent<FinanceEnterpriseGroup.FinanceDimension2Label>"	
					TopNodeFound = false
					LocalFinanceDimension2 = NewParent
					if (!NewParent.DimensionType.Node)
						while (!TopNodeFound)
							constraint (FinanceDimension2 != LocalFinanceDimension2.DimensionInContextStructureRel.ParentDimension)
								"<NewParent>MayNotBeMovedToADescendantOfItsOwnBranch" 
							if (LocalFinanceDimension2.DimensionInContextStructureRel.ParentDimension.DimensionType.Node
							or  LocalFinanceDimension2 not entered)
								TopNodeFound = true
							else
								LocalFinanceDimension2 = LocalFinanceDimension2.DimensionInContextStructureRel.ParentDimension	
													
			Local Fields
				OldParent is like FinanceDimension2
																		
			Entrance Rules
				include CheckValidContext
							
				OldParent				 = DerivedParentDimension
				ParentDimension			 = NewParent

			Action Rules
				ParentDimension  	 = NewParent


















				
				invoke Update DimensionInContextStructureRel
					invoked.ParentDimension		 	= NewParent

			Exit Rules
 				LocalFinanceDimension2 = FinanceDimension2
 							

				include CreateShadowForDimension		

				if (DimensionType.Summary)
					TopNodeFound = false
					while (!TopNodeFound)
						if (LocalFinanceDimension2.DimensionInContextStructureRel.ParentDimension.DimensionType.Summary)
							if (BudgetIdentifier entered)	
								constraint (BudgetIdentifier != LocalFinanceDimension2.DimensionInContextStructureRel.ParentDimension.BudgetIdentifier)
									"BudgetIdentifier<BudgetIdentifier>AlreadyInUseBy<LocalFinanceDimension2.DimensionInContextStructureRel.ParentDimension.DisplayDimension>"  
							if (LocalFinanceDimension2.DimensionInContextStructureRel.ParentDimension.BudgetIdentifier entered)
								I1 += 1
								BudgetIdentifierArray.BudgetIdentifier[I1] = LocalFinanceDimension2.DimensionInContextStructureRel.ParentDimension.BudgetIdentifier				

						if (LocalFinanceDimension2.DimensionInContextStructureRel.ParentDimension.DimensionType.Node
						or  LocalFinanceDimension2 not entered)
							TopNodeFound = true
						else
							LocalFinanceDimension2 = LocalFinanceDimension2.DimensionInContextStructureRel.ParentDimension	
						
					invoke WalkDownHierarchy
						invoked.PrmBudgetIdentifierArray = BudgetIdentifierArray	
						invoked.PrmBudgetIdentifierCount = I1					
				
					invoke NotifyMoveDimension2 NotifyBudgetTemplateRel
						invoked.PrmFinanceDimension2 = FinanceDimension2
						invoked.PrmNewParent		 = NewParent
						invoked.PrmOldParent		 = OldParent
				include TriggerBODForCreateOrUpdate
		
		BODMove is an Instance Action
			restricted			
			Parameters
				PrmContextDimension is a FinanceDimension2ContextValue
				NewParent 			is a FinanceDimension2
				FinanceDimension2Structure
				
			Action Rules
				invoke Move
					invoked.PrmContextDimension = PrmContextDimension
					invoked.NewParent			= NewParent
									
		WalkDownHierarchy is an Instance Action
			restricted
			
			Parameters
				PrmBudgetIdentifierArray	is a BudgetIdentifierArray
					default label is "BudgetIdentifierArray"
				PrmBudgetIdentifierCount	is Numeric 3
					default label is "BudgetIdentifierCount"
							
			Action Rules
				invoke SetLevel
				
				for each DimensionChildrenRel

 					LocalFinanceDimension2 = each.FinanceDimension2
					include CreateShadowForDimension							

					if (each.DimensionType.Summary)
						if (PrmBudgetIdentifierArray entered)
							if (each.BudgetIdentifier entered)
								I2 = 1
								while (I2 <= PrmBudgetIdentifierCount)
									constraint (PrmBudgetIdentifierArray.BudgetIdentifier[I2] != each.BudgetIdentifier)
										"BudgetIdentifier<each.BudgetIdentifier>AlreadyInUseBy<each.DisplayDimension>" 
									I2 += 1 					
						invoke WalkDownHierarchy each.FinanceDimension2	
							invoked.PrmBudgetIdentifierArray = PrmBudgetIdentifierArray	
							invoked.PrmBudgetIdentifierCount = PrmBudgetIdentifierCount							
				
		EditDescendantsBudgetIdentifier is an Instance Action
			restricted
			
			Parameters
				PrmBudgetIdentifierArray	is a BudgetIdentifierArray
					default label is "BudgetIdentifierArray"
				PrmBudgetIdentifierCount	is Numeric 3
					default label is "BudgetIdentifierCount"
					
			Action Rules
				
				for each DimensionChildrenRel
					if (each.DimensionType.Summary)
						if (each.BudgetIdentifier entered)
							I2 = 1
							while (I2 <= PrmBudgetIdentifierCount)
								constraint (PrmBudgetIdentifierArray.BudgetIdentifier[I2] != each.BudgetIdentifier)
									"BudgetIdentifier<each.BudgetIdentifier>AlreadyInUseBy<each.DisplayDimension>" 
								I2 += 1 					
						invoke EditDescendantsBudgetIdentifier each.FinanceDimension2
							invoked.PrmBudgetIdentifierArray = PrmBudgetIdentifierArray	
							invoked.PrmBudgetIdentifierCount = PrmBudgetIdentifierCount	

		RemoveBranch	is an Instance Action
			valid when (DimensionType.Summary)
			disable multiple instance selection
			confirmation required
				"ThisWillRemoveTheEntireBranchOfTheHierarchy"			
			
			Action Rules
				constraint (DerivedShadowCount < 1000)
					"BranchIsTooLargeToRemove"
							
				invoke RecursiveRemove
				
		RecursiveRemove is an Instance Action
			restricted
			
			Action Rules
				if (DimensionType.Summary)
					for each DimensionChildrenRel
						invoke RecursiveRemove each
				
				invoke RemoveFromStructure	
													
		RemoveFromStructure is an Instance Action
			valid when (EligibleToRemove)
			
			Local Fields
				OldParent is like FinanceDimension2
																		
			Entrance Rules
				include CheckValidContext
				
				constraint (!DimensionHierarchyRel exists)
					"CannotRemove,ChildrenExist"
				OldParent = DerivedParentDimension
				invoke NotifyRemoveDimension2 NotifyBudgetTemplateRemoveRel
					invoked.PrmFinanceDimension2 = FinanceDimension2
					invoked.PrmOldParent 		 = OldParent
				LocalFinanceDimension2 = FinanceDimension2
				invoke Delete DimensionShadowRel
									
			Action Rules
				invoke Delete DimensionInContextStructureRel
				if (DimensionType.Summary)
					invoke Delete
			Exit Rules

		AddDimensionToStructures is an Instance Action
			valid when (DimensionType.Posting)
			
			Parameters
				LikeDimension is a FinanceDimension2
				
			Parameter Rules
				LikeDimension
					required
					constraint (LikeDimension.DimensionType.Posting)
						"MustBePostingType"
						
			Action Rules
				for each LikeDimension.FinanceDimension2Hierarchy(FinanceDimension2) set
					LocalStructure = each.FinanceDimension2Structure
					if (!each.FinanceDimension2Structure.UnusedDimensionStructure)
						if (!SubordinateInLocalStructureRel exists)
							constraint (!DisplayDimensionRel exists)
								"DisplayValueAlreadyExistsFor<first DisplayDimensionRel.FinanceDimension2>"												
							invoke Create FinanceDimension2Hierarchy
								invoked.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
								invoked.FinanceDimension2Structure	= each.FinanceDimension2Structure
								invoked.FinanceDimension2 			= FinanceDimension2
								invoked.ParentDimension 			= each.ParentDimension							
								invoked.DisplayDimension			= FinanceDimension2
								invoked.DimensionType				= DimensionType
						invoke BuildShadowFileForDimension each.FinanceDimension2Structure
							invoked.PrmFinanceEnterpriseGroup = FinanceEnterpriseGroup
							invoked.PrmDimension			  = FinanceDimension2		
									
        FixupSequenceNumbers is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup              is a FinanceEnterpriseGroup
                	default label is "FinanceEnterpriseGroup"
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup)
            Action Rules
                Instance Rules
                    if (SequenceNumber = 0 )
                        increment FinanceEnterpriseGroup.Dimension2LastSeq                    
                        SequenceNumber = FinanceEnterpriseGroup.Dimension2LastSeq
                         					
		SetLevel is an Instance Action
			restricted
			
			Action Rules	
				if (!DimensionType.Posting)
					LevelCalcDimension = FinanceDimension2
					LocalLevel		   = 0
					while (!LevelCalcDimension = DerivedTopNode) 
						LevelCalcDimension	   = LevelCalcDimension.DimensionInContextStructureRel.ParentDimension
						LocalLevel			   += 1
						if (LevelCalcDimension.DimensionInContextStructureRel not exists)
							end while
					Level 					   = LocalLevel
					ParentFinanceDimension2    = DerivedParentDimension	

		UpdateLevel is an Instance Action
			restricted
			
			Parameters
				PrmLevel				  is Numeric 3
					default label is "Level"
				PrmParentDimension		  is like FinanceDimension2
					default label is "ParentDimension"
				
			Action Rules
				if (!DimensionType.Posting)	
					Level				 	 = PrmLevel
					ParentFinanceDimension2 = PrmParentDimension	
										
		SetIncludeBudgetEditOnPostingDimensions is an Instance Action
			valid when (SummaryDimension)
			
			Parameters
				IncludeOrExclude	is Numeric 1
					States
						Include		value is 1
						Exclude		value is 2
			
			Parameter Rules
				IncludeOrExclude
					required
					
			Action Rules
			
				for each FinanceDimension2Shadow(SummaryFinanceDimension2) set
					if (each.DimensionType.Posting)
						invoke Update each.FinanceDimension2
							if (IncludeOrExclude.Include)
								invoked.IncludeInBudgetEdit = true
							else
								invoked.IncludeInBudgetEdit = false
							 
		RenameSummaryNodes is a Set Action
			restricted
			
			Parameters	
				PrmFinanceEnterpriseGroup is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
				PrmDimensionStructure	  is a FinanceDimension2Structure
					default label is "DimensionStructure"
				
			Instance Selection
				where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and    DimensionType.Summary)
			
			Local Fields
				NewDimensionValue			is like FinanceDimension2
				NewParentValue				is like FinanceDimension2
				NewDisplayDimension			is like FinanceDimension2
				
			Action Rules
				
				Instance Rules
					if (!FinanceDimension2 like LikeSummaryPrefix)
						NewDimension 	   	= FinanceDimension2	
						NewDisplayDimension = FinanceDimension2				
						NewDimensionValue  	= SummaryNodeString
						if (ParentFinanceDimension2 entered)
							NewDimension   	= ParentFinanceDimension2
							NewParentValue 	= ParentNodeString
						else
							initialize NewParentValue
						invoke Delete
						invoke CreateNoRules
							fill in fields from this instance
							invoked.FinanceDimension2		= NewDimensionValue
							invoked.ParentFinanceDimension2 = NewParentValue
							invoked.DisplayDimension		= NewDisplayDimension
							invoked.DimensionStructure	    = PrmDimensionStructure
					
		ConvertToChildHierarchy is a Set Action
			restricted
			
			Parameters
				PrmFinanceEnterpriseGroup is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
				PrmDimensionStructure	  is a FinanceDimension2Structure
					default label is "DimensionStructure"
				
			Instance Selection
				where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup)
			
			Action Rules
				Instance Rules
					if (DimensionType.Summary)
						if (!ParentFinanceDimension2 entered)
							ParentFinanceDimension2 = PrmDimensionStructure.DimensionNode
						DimensionStructure = PrmDimensionStructure
					else
						if (DimensionType.Posting)
							if (!ParentFinanceDimension2 entered)
								ParentFinanceDimension2 = PrmDimensionStructure.DimensionNode 
							else
								NewDimension 			= ParentFinanceDimension2
								ParentFinanceDimension2 = SummaryNodeString	
							DisplayDimension	    	= FinanceDimension2
					if (!DimensionType.Node)				
						invoke Create FinanceDimension2Hierarchy
							invoked.FinanceEnterpriseGroup 	   = FinanceEnterpriseGroup
							invoked.FinanceDimension2Structure = PrmDimensionStructure
							invoked.FinanceDimension2		   = FinanceDimension2
							invoked.DisplayDimension		   = DisplayDimension
							invoked.ParentDimension			   = ParentFinanceDimension2
							invoked.DimensionType			   = DimensionType
							invoked.SystemDimension			   = OldSystemDimension
						if (DimensionType.Posting)
							initialize ParentFinanceDimension2
							initialize Level
							initialize DimensionStructure

		ExportToUpload is an Instance Action
			restricted

			Parameters
				PrmFinanceEnterpriseGroup  	  is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
				PrmFinanceDimension2Structure is a FinanceDimension2Structure
					default label is "<FinanceEnterpriseGroup.FinanceDimension2Label>Structure"
				PrmRunGroup				   is AlphaUpper 30
					default label is "RunGroup"
				PrmSingleRecordOnly		   is Boolean
				PrmBypassEdits	  is Boolean
					default label is "BypassEdits"					
			Local Fields
				RecordCount			is Numeric 4								

			Action Rules
				if (!DimensionType.Node)
					invoke Create FinanceDimension2Upload
						fill in fields from this instance
						fill in fields from DimensionInContextStructureRel
						invoked.FinanceDimension2Structure 	     = FinanceDimension2Structure
						invoked.FinanceDimension2Upload.RunGroup = PrmRunGroup
						invoked.RecordType				 	     = DimensionType
						invoked.BypassEdits				         = PrmBypassEdits
						if (ParentDimension = DerivedTopNode)
							invoked.ParentFinanceDimension2 = blank
							invoked.SequenceDimension2		= FinanceDimension2
						else
							invoked.ParentFinanceDimension2 = DerivedParentDisplayDimension
							invoked.ParentSequenceDimension2 = DerivedParentDimension
							invoked.SequenceDimension2		= FinanceDimension2
						if (DimensionType.Summary)
							invoked.FinanceDimension2       = DisplayDimension

				if ((!PrmSingleRecordOnly)
				and (!DimensionType.Posting))
					for each DimensionChildrenRel
						invoke ExportToUpload each in foreground
							invoked.PrmFinanceEnterpriseGroup		 = PrmFinanceEnterpriseGroup
							invoked.PrmFinanceDimension2Structure	 = PrmFinanceDimension2Structure
							invoked.PrmRunGroup						 = PrmRunGroup
							invoked.PrmBypassEdits				     = PrmBypassEdits							
						RecordCount += 1
						if (RecordCount = 100)
							commit transaction
							RecordCount = 0				
					commit transaction
						
		CleanupUnusedDimensions is a Set Action
			restricted
			
			Instance Selection
				where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and    NotUsedInAStructure)

			Parameters
				PrmFinanceEnterpriseGroup 	   is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
				PrmFinanceDimension2Structure is a FinanceDimension2Structure
					default label is "Structure"
									
			Parameter Rules
				PrmFinanceEnterpriseGroup
					required
				PrmFinanceDimension2Structure
					required
					constraint (PrmFinanceDimension2Structure.UnusedDimensionStructure)
						"ActionNotValidForStructure<PrmFinanceDimension2Structure>"
						
			Action Rules
				Instance Rules
					LocalInvokedByUnusedStructure = true
					invoke AddPostingDimensionToStructure
						invoked.PrmStructure 	   = PrmFinanceDimension2Structure
						invoked.PrmParentDimension = PrmFinanceDimension2Structure.DimensionNode			
									
		UpdateBODIdFields is an Instance Action
			restricted
			Parameters
				PrmAccountingEntity  is Alpha size 22
					default label is "AccountingEntity"
				PrmLocation          is Alpha size 22
					default label is "Location"
				PrmDocumentID        is Alpha size 100
					default label is "DocumentID"
				PrmRevision          is Alpha size 22
					default label is "Revision"
				PrmSystemOfRecord    is Alpha size 1
					default label is "SystemOfRecord"
			Action Rules	
				if (bod id.AccountingEntity != PrmAccountingEntity)
					bod id.AccountingEntity 	= PrmAccountingEntity
				if (bod id.Location != PrmLocation)
					bod id.Location				= PrmLocation
				if (bod id.DocumentID != PrmDocumentID)
					bod id.DocumentID			= PrmDocumentID
				if (bod id.Revision != PrmRevision)
					bod id.Revision				= PrmRevision
				if (bod id.SystemOfRecord != PrmSystemOfRecord)
					bod id.SystemOfRecord		= PrmSystemOfRecord

		CreateComments is an Instance Action
			Parameters
				PrmSubject	 			is a CommentName
		    	PrmComment				is Text
				PrmFrom					is Alpha size 230
				PrmCommentDate			is TimeStamp
				PrmAttachment			is an Attachment
				PrmDocumentURL			is URL		    	
			Parameter Rules
				PrmSubject
					required
		    	PrmComment
		    		required
				PrmFrom	
					initial value is actor
					required
				PrmCommentDate
		    		default to current timestamp
			Action Rules
				invoke Create FinanceDimension2Comment
					invoked.FinanceEnterpriseGroup = FinanceEnterpriseGroup
					invoked.FinanceDimension2	   = FinanceDimension2
					invoked.Subject				   = PrmSubject
			    	invoked.Comment                = PrmComment
					invoked.From                   = PrmFrom	
					invoked.CommentDate            = PrmCommentDate
			    	invoked.Attachment             = PrmAttachment
					invoked.DocumentURL			   = PrmDocumentURL			    	
			    	
		BODDataInitialLoadCodeDefFinanceDimension2Criteria1 is a Set Action
			restricted
			Parameters
				PrmFEG						is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
				PrmFromFinanceDimension2	is a FinanceDimension2
				PrmToFinanceDimension2		is a FinanceDimension2
			Parameter Rules
						
			Instance Selection			
				where  (((PrmFEG entered
				and		 PrmFEG = FinanceEnterpriseGroup)
				or		 PrmFEG not entered)
				and		((PrmFromFinanceDimension2 entered
				and		  PrmFromFinanceDimension2 <= FinanceDimension2)
				or		  PrmFromFinanceDimension2 not entered)				
				and    ((PrmToFinanceDimension2 entered
				and		 PrmToFinanceDimension2 >= FinanceDimension2)
				or		 PrmToFinanceDimension2 not entered)
				and		(Active = true))
		
			Sort Order
				FinanceEnterpriseGroup
			Action Rules								

				FinanceEnterpriseGroup Set Rules
					Entrance Rules		
						
				Instance Rules	
					if (FinanceEnterpriseGroup.BODTrigger)
						ActionCode	= ActionCode.Create		
						increment bod id.VariationID






						Service		= "FinanceDimension2Service"
						LocalBODCurrentTimeStamp.CurrentTimeStamp = current timestamp
						include TriggerFinanceDimension2BOD



		GenerateReportingSettings is an Instance Action
			default label is "GenerateFederalFinancialReport"
			valid when (IsExternalGrantOrIntercompanyBilling)
			completion message is "<CompletionMessage>"			
			run in background
			Parameters
		    	PrmDescription					is a Description
		    	PrmReportType					is Numeric size 1
		    		States
		    			Quarterly		value is 1
		    			SemiAnnual      value is 2
		    			Annual			value is 3
		    			Final			value is 4
		    	PrmBasis						is Numeric size 1
		    		States
		    			Cash			value is 1
		    			Accrual			value is 2	
    			PrmReportingThruDate			is Date	
    			PrmUseIDM						is Boolean
    				default label is "UseIDMTemplate"
#ifdef module idm   			
    			PrmIDMTemplate					is an IDMTemplate	
    				default label is "GrantFederalReportingFormat"
#endif    			
				PrmGrantFederalReportFormat     is a GrantFederalReportFormat
					default label is "GrantFederalReportingFormat"		
							
			Parameter Rules
				PrmDescription
					required
				PrmReportType
					required
				PrmBasis
					required					
    			PrmReportingThruDate
    				required
#ifdef module idm     		
				PrmUseIDM
					initial value is true		
				PrmIDMTemplate    				
    				if (PrmUseIDM)
    					required
#endif
    				
			Local Fields
			Action Rules
				CompletionMessage = GrantReportingSettingsCreatedMF
				for each GrantReportingSettings set
					if (each.FinalReport.Draft)	
						invoke Delete each 
				for each ProjectFundingSourceRel	
					invoke Create GrantReportingSettings
						invoked.FinanceEnterpriseGroup      = FinanceEnterpriseGroup	
						invoked.FinanceDimension2           = FinanceDimension2				
						invoked.ProjectContract             = each.ProjectContract	
						invoked.Description		            = PrmDescription 
						invoked.ReportType		            = PrmReportType	
						invoked.Basis                       = PrmBasis
						invoked.ReportingThruDate	        = PrmReportingThruDate
						invoked.FinalReport                 = 1
#ifdef module idm						
						invoked.UseIDM						= PrmUseIDM
						invoked.GrantFederalReportIDMTemplate = PrmIDMTemplate	
#endif
						invoked.GrantFederalReportFormat	= PrmGrantFederalReportFormat

		CopyPostingDimension is an Instance Action
			valid when (IsProjectInvoicing)
			Parameters
				NewDimension		is like FinanceDimension2
				NewDescription		is like Description
				NewDateRange		is a DateRange		
		        NewAmount			is a CurrencyAmount						
				CopyDeliverables	is Boolean
			Parameter Rules
				NewDimension
					required
					LocalFinanceDimension2	= NewDimension
					constraint (NewDimensionRel not exists)
						"<FinanceEnterpriseGroup.FinanceDimension2Label>AlreadyExists"
				NewDescription
					required
						"DescriptionIsRequired"					
					initial value is Description + "_Copy"
				NewDateRange
					initial value is DateRange
					default to DateRange



			Action Rules
				invoke CreateFundingSource
					fill in fields from this instance
						except invoked.DisplayDimension
					invoked.FinanceDimension2	= NewDimension
					invoked.Description			= NewDescription
					invoked.DateRange			= NewDateRange
					invoked.Amount				= NewAmount
			Exit Rules
				if (CopyDeliverables)	
					for each ProjectFundingSourceDeliverable set
						invoke Create ProjectFundingSourceDeliverable
							fill in fields from each
							invoked.FinanceDimension2	= NewDimension							
							invoked.InvoiceDate			= NewDateRange.End

		FindInvalidSequenceNumbers is a Set Action
		    restricted
		    Parameters
		        PrmFinanceEnterpriseGroup is a FinanceEnterpriseGroup
		            default label is "FinanceEnterpriseGroup"
		    Parameter Rules
		        PrmFinanceEnterpriseGroup
		            required
		    Instance Selection
		        where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
		        and   DimensionType.Posting)
		    Action Rules
		        Instance Rules
		            if (SequenceNumber not entered
		            or DuplicateSequenceNumberRel exists)
		                if (!FinanceDimensionWithInvalidSequence set exists)
		                    invoke Create FinanceDimensionWithInvalidSequence
		                        invoked.FinanceEnterpriseGroup = FinanceEnterpriseGroup
		                        invoked.FinanceDimensionWithInvalidSequence = FinanceDimension2
		                        invoked.FinanceDimensionType   = 2
		                        invoked.Dimension 			   = FinanceDimension2
		                        invoked.FinanceDimension2 	   = FinanceDimension2						
		                     	if (SequenceNumber not entered)
		                     		invoked.SequenceProblem    = 1
		                     	else
		                     		invoked.SequenceProblem    = 2
		                     							
		AssignNewSequence is an Instance Action
		    restricted
		    Action Rules
		        increment FinanceEnterpriseGroup.Dimension2LastSeq
		        SequenceNumber = FinanceEnterpriseGroup.Dimension2LastSeq	

		IncludeSelectedFundingSource is an Instance Action
			valid when (ProjectIndirectBurdenCodeInContext)
			Parameters
				PrmProject					 is a Project
					default label is "Project"
			Action Rules
				invoke Create ProjectIndirectBurdenSelectedSource
					invoked.FinanceEnterpriseGroup  = FinanceEnterpriseGroup
					invoked.Project					= PrmProject
					invoked.ProjectIndirectBurdenSelectedSource.ProjectIndirectBurdenCode = ProjectIndirectBurdenCode
					invoked.ProjectIndirectBurdenSelectedSource.FinanceDimension2		  = FinanceDimension2

		SetRevenueFields is a Set Action
			restricted
			Parameters
				PrmFinanceEnterpriseGroup     is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
			Instance Selection
				where ((FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				or      PrmFinanceEnterpriseGroup not entered)
				and     DimensionType.Posting
				and     RevenueCodeBlockOption not entered)
			Action Rules
				Instance Rules
					if (RevenueAccountOnly entered)
						RevenueCodeBlockOption = 2
						RevenuePartialAccount.GeneralLedgerChartAccount = RevenueAccountOnly
						RevenuePartialAccount.FinanceDimension1 = RevenueDimension.FinanceDimension1
						RevenuePartialAccount.FinanceDimension3 = RevenueDimension.FinanceDimension3
						RevenuePartialAccount.FinanceDimension4 = RevenueDimension.FinanceDimension4
						RevenuePartialAccount.FinanceDimension5 = RevenueDimension.FinanceDimension5
						RevenuePartialAccount.FinanceDimension6 = RevenueDimension.FinanceDimension6
						RevenuePartialAccount.FinanceDimension7 = RevenueDimension.FinanceDimension7
						RevenuePartialAccount.FinanceDimension8 = RevenueDimension.FinanceDimension8
						RevenuePartialAccount.FinanceDimension9 = RevenueDimension.FinanceDimension9
						RevenuePartialAccount.FinanceDimension10 = RevenueDimension.FinanceDimension10
					else
					if (RevenueFullAccount entered)
						RevenueCodeBlockOption = 1

		LoadProjectMajorCategory is a Set Action
			restricted
			Parameters
				PrmFinanceEnterpriseGroup     is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
			Instance Selection
				where ((FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				or      PrmFinanceEnterpriseGroup not entered)
				and     IsProjectInvoicing
				and     MajorCategory entered)
			Action Rules
				Instance Rules
					if (ProjectMajorCategoryRel not exists)
						invoke Create ProjectMajorCategory 
	                        invoked.FinanceEnterpriseGroup = FinanceEnterpriseGroup
	                        invoked.ProjectMajorCategory   = MajorCategory
	                        invoked.Description  		   = MajorCategory

#ifdef module integration						

		TriggerProjectFundingAmountChangedAlert is an Instance Action
			restricted
			Parameters
				PrmPulseAlert is Alpha size 100
			Action Rules
				LocalPulseAlertFrom = PrmPulseAlert
				if (FinanceEnterpriseGroup.BODTrigger and FSMBODConfigurationPulseAlertRel.Enable)
		          	if(FSMBODConfigurationDetailPulseAlertRel.Enable)
						invoke TriggerPulseAlert FSMBODConfigurationPulseAlertRel
							invoked.PrmActorGroup 	= "FINANCEDIMENSION2" 
							invoked.PrmMainXML 		= ProjectFundingAmountChangedAlertXML	
							invoked.PrmDescription	= ProjectFundingAmountChangedAlertDescription
							invoked.PrmBODID		= DerivedProjectFundingAmountChangedAlertBODID
	



		TriggerProjectFundingSourceActiveAndDateRangeAlert is an Instance Action
			restricted
			Parameters
				PrmPulseAlert is Alpha size 100
			Action Rules
				LocalPulseAlertFrom = PrmPulseAlert
				if (FinanceEnterpriseGroup.BODTrigger and FSMBODConfigurationPulseAlertRel.Enable)
		          	if(FSMBODConfigurationDetailPulseAlertRel.Enable)
						invoke TriggerPulseAlert FSMBODConfigurationPulseAlertRel
							invoked.PrmActorGroup 	= "FINANCEDIMENSION2" 
							invoked.PrmMainXML 		= ProjectFundingSourceActiveAndDateRangeAlertXML	
							invoked.PrmDescription	= ProjectFundingSourceActiveAndDateRangeAlertDescription
							invoked.PrmBODID		= DerivedProjectFundingSourceActiveAndDateRangeAlertBODID

#endif




		CreateOrDeleteDim2ByGrpRelFromDimension2ToBlank is a Set Action
            restricted
			Parameters
				PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension2Rule    			is a FinanceDimension2 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
            Set Is
                PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
				PrmDeleteFlag
                PrmUniqueID
            Local Fields
            	LocalCommitCounter				is Numeric 3
			Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
                and	FinanceDimension2 within PrmDimension2Rule
                and DimensionType.Posting)
            Sort Order
                FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyFromValue			= FinanceDimension2
					LocalKeyToValue				= blank
					if(PrmDeleteFlag)
						invoke Delete CodeBlockRelationDetailFromToRel
					else
						invoke Update CodeBlockRelationDetailFromToRel
							invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
							invoked.CodeBlockRelation                   = PrmCodeBlockRelation
							invoked.Dimension2							= FinanceDimension2
							invoked.DefaultToValue                      = PrmDefaultToValue
					increment LocalCommitCounter
					if (LocalCommitCounter > 50)
						commit transaction
						initialize LocalCommitCounter

        CreateOrDeleteDim2ByGrpRelFromDimension2ToEntity is a Set Action
        	restricted
        	Parameters
        		PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
        		PrmCodeBlockRelation			is a CodeBlockRelation
        		PrmDimension2Rule               is a FinanceDimension2 group
        		PrmAccountingEntityRule         is an AccountingEntity group
        		PrmDefaultToValue               is Alpha 200
        		PrmDeleteFlag					is Boolean
        		PrmUniqueID						is a UniqueID
        	Set Is
        		PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
                PrmAccountingEntityRule
				PrmDeleteFlag
                PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalDimension2Array			is a FinanceDimension2Array
			Instance Selection
				where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
                and	FinanceDimension2 within PrmDimension2Rule
                and DimensionType.Posting)
			Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
			Action Rules
				Set Rules
					Exit Rules
						if (LocalArrayCounter > 0)
							invoke CreateOrDeleteEntityByGrpRelFromDimension2ToEntity AccountingEntity
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
								invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
								invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[1]
								invoked.PrmDimension2Array    			= LocalDimension2Array
								invoked.PrmAccountingEntityRule        	= PrmAccountingEntityRule
								invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
								invoked.PrmUniqueID						= PrmUniqueID
				Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2
					else
						invoke CreateOrDeleteEntityByGrpRelFromDimension2ToEntity AccountingEntity
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[LocalArrayCounter-1]
							invoked.PrmDimension2Array    			= LocalDimension2Array
                            invoked.PrmAccountingEntityRule        	= PrmAccountingEntityRule
                            invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
                            invoked.PrmUniqueID						= PrmUniqueID
						initialize LocalDimension2Array
						initialize LocalArrayCounter
						LocalArrayCounter = 1
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2
        
        CreateOrDeleteDim2ByGrpRelFromDimension2ToUnit is a Set Action
        	restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
				PrmDimension2Rule               is a FinanceDimension2 group
                PrmAccountingUnitRule    		is an AccountingUnit group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
            Set Is
                PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
                PrmAccountingUnitRule
				PrmDeleteFlag
                PrmUniqueID
            Local Fields
            	LocalArrayCounter				is Numeric 5
				LocalDimension2Array			is a FinanceDimension2Array
			Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
                and	FinanceDimension2 within PrmDimension2Rule
                and DimensionType.Posting)
            Sort Order
                FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
					Exit Rules
						if (LocalArrayCounter > 0)
							invoke CreateOrDeleteUnitByGrpRelFromDimension2ToUnit AccountingUnit
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
                            	invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[1]
								invoked.PrmDimension2Array 				= LocalDimension2Array
                            	invoked.PrmAccountingUnitRule	        = PrmAccountingUnitRule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID	
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2
					else
						invoke CreateOrDeleteUnitByGrpRelFromDimension2ToUnit AccountingUnit
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[LocalArrayCounter-1]
							invoked.PrmDimension2Array 				= LocalDimension2Array
                            invoked.PrmAccountingUnitRule	        = PrmAccountingUnitRule
                            invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
                            invoked.PrmUniqueID						= PrmUniqueID	
						initialize LocalDimension2Array
						initialize LocalArrayCounter
						LocalArrayCounter = 1
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2
        
        CreateOrDeleteDim2ByGrpRelFromDimension2ToAccount is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
				PrmDimension2Rule               is a FinanceDimension2 group
                PrmAccountRule    				is a GeneralLedgerChartAccount group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
            Set Is
                PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
                PrmAccountRule
				PrmDeleteFlag
                PrmUniqueID
            Local Fields
            	LocalArrayCounter				is Numeric 5
				LocalDimension2Array			is a FinanceDimension2Array
			Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
                and	FinanceDimension2 within PrmDimension2Rule
                and DimensionType.Posting)
            Sort Order
                FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
					Exit Rules
						if (LocalArrayCounter > 0)
							invoke CreateOrDeleteAccByGrpRelFromDimension2ToAccount GeneralLedgerChartAccount
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
                            	invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[1]
								invoked.PrmDimension2Array    			= LocalDimension2Array
                            	invoked.PrmAccountRule	            	= PrmAccountRule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID	
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2
					else
						invoke CreateOrDeleteAccByGrpRelFromDimension2ToAccount GeneralLedgerChartAccount
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[LocalArrayCounter-1]
							invoked.PrmDimension2Array    			= LocalDimension2Array
                            invoked.PrmAccountRule	           		= PrmAccountRule
                            invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
                            invoked.PrmUniqueID						= PrmUniqueID	
						initialize LocalDimension2Array
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2

        CreateOrDeleteDim2ByGrpRelFromDimension2ToProject is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
				PrmDimension2Rule               is a FinanceDimension2 group
                PrmProjectRule    				is a Project group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
            Set Is
                PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
                PrmProjectRule
				PrmDeleteFlag
                PrmUniqueID
            Local Fields
            	LocalArrayCounter				is Numeric 5
				LocalDimension2Array			is a FinanceDimension2Array
			Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
                and	FinanceDimension2 within PrmDimension2Rule
                and DimensionType.Posting)
            Sort Order
                FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
					Exit Rules
						if (LocalArrayCounter > 0)
							invoke CreateOrDeleteProjByGrpRelFromDimension2ToProject Project
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
                            	invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[1]
								invoked.PrmDimension2Array    			= LocalDimension2Array
                            	invoked.PrmProjectRule	            	= PrmProjectRule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID	
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2
					else
						invoke CreateOrDeleteProjByGrpRelFromDimension2ToProject Project
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[LocalArrayCounter-1]
							invoked.PrmDimension2Array    			= LocalDimension2Array
                            invoked.PrmProjectRule	           		= PrmProjectRule
                            invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
                            invoked.PrmUniqueID						= PrmUniqueID	
						initialize LocalDimension2Array
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2

        CreateOrDeleteDim2ByGrpRelFromDimension2ToDimension1 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
				PrmDimension2Rule               is a FinanceDimension2 group
                PrmDimension1Rule    			is a FinanceDimension1 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
            Set Is
                PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
                PrmDimension1Rule
				PrmDeleteFlag
                PrmUniqueID
            Local Fields
            	LocalArrayCounter				is Numeric 5
				LocalDimension2Array			is a FinanceDimension2Array
			Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
                and	FinanceDimension2 within PrmDimension2Rule
                and DimensionType.Posting)
            Sort Order
                FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
					Exit Rules
						if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim1ByGrpRelFromDimension2ToDimension1 FinanceDimension1
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
                            	invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[1]
								invoked.PrmDimension2Array    			= LocalDimension2Array
                            	invoked.PrmDimension1Rule	            = PrmDimension1Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID	
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2
					else
						invoke CreateOrDeleteDim1ByGrpRelFromDimension2ToDimension1 FinanceDimension1
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[LocalArrayCounter-1]
							invoked.PrmDimension2Array    			= LocalDimension2Array
                            invoked.PrmDimension1Rule	           	= PrmDimension1Rule
                            invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
                            invoked.PrmUniqueID						= PrmUniqueID	
						initialize LocalDimension2Array
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2

		CreateOrDeleteDim2ByGrpRelFromDimension2ToDimension3 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
				PrmDimension2Rule               is a FinanceDimension2 group
                PrmDimension3Rule    			is a FinanceDimension3 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
            Set Is
                PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
                PrmDimension3Rule
				PrmDeleteFlag
                PrmUniqueID
            Local Fields
            	LocalArrayCounter				is Numeric 5
				LocalDimension2Array			is a FinanceDimension2Array
			Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
                and	FinanceDimension2 within PrmDimension2Rule
                and DimensionType.Posting)
            Sort Order
                FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
					Exit Rules
						if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim3ByGrpRelFromDimension2ToDimension3 FinanceDimension3
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
                            	invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[1]
								invoked.PrmDimension2Array    			= LocalDimension2Array
                            	invoked.PrmDimension3Rule	            = PrmDimension3Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID	
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2
					else
						invoke CreateOrDeleteDim3ByGrpRelFromDimension2ToDimension3 FinanceDimension3
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[LocalArrayCounter-1]
							invoked.PrmDimension2Array    			= LocalDimension2Array
                            invoked.PrmDimension3Rule	           	= PrmDimension3Rule
                            invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
                            invoked.PrmUniqueID						= PrmUniqueID	
						initialize LocalDimension2Array
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2

        CreateOrDeleteDim2ByGrpRelFromDimension2ToDimension4 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
				PrmDimension2Rule               is a FinanceDimension2 group
                PrmDimension4Rule    			is a FinanceDimension4 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
            Set Is
                PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
                PrmDimension4Rule
				PrmDeleteFlag
                PrmUniqueID
            Local Fields
            	LocalArrayCounter				is Numeric 5
				LocalDimension2Array			is a FinanceDimension2Array
			Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
                and	FinanceDimension2 within PrmDimension2Rule
                and DimensionType.Posting)
            Sort Order
                FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
					Exit Rules
						if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim4ByGrpRelFromDimension2ToDimension4 FinanceDimension4
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
                            	invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[1]
								invoked.PrmDimension2Array    			= LocalDimension2Array
                            	invoked.PrmDimension4Rule	            = PrmDimension4Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID	
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2
					else
						invoke CreateOrDeleteDim4ByGrpRelFromDimension2ToDimension4 FinanceDimension4
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[LocalArrayCounter-1]
							invoked.PrmDimension2Array    			= LocalDimension2Array
                            invoked.PrmDimension4Rule	           	= PrmDimension4Rule
                            invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
                            invoked.PrmUniqueID						= PrmUniqueID	
						initialize LocalDimension2Array
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2

        CreateOrDeleteDim2ByGrpRelFromDimension2ToDimension5 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
				PrmDimension2Rule               is a FinanceDimension2 group
                PrmDimension5Rule    			is a FinanceDimension5 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
            Set Is
                PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
                PrmDimension5Rule
				PrmDeleteFlag
                PrmUniqueID
            Local Fields
            	LocalArrayCounter				is Numeric 5
				LocalDimension2Array			is a FinanceDimension2Array
			Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
                and	FinanceDimension2 within PrmDimension2Rule
                and DimensionType.Posting)
            Sort Order
                FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
					Exit Rules
						if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim5ByGrpRelFromDimension2ToDimension5 FinanceDimension5
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
                            	invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[1]
								invoked.PrmDimension2Array    			= LocalDimension2Array
                            	invoked.PrmDimension5Rule	            = PrmDimension5Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID	
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2
					else
						invoke CreateOrDeleteDim5ByGrpRelFromDimension2ToDimension5 FinanceDimension5
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[LocalArrayCounter-1]
							invoked.PrmDimension2Array    			= LocalDimension2Array
                            invoked.PrmDimension5Rule	           	= PrmDimension5Rule
                            invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
                            invoked.PrmUniqueID						= PrmUniqueID	
						initialize LocalDimension2Array
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2

        CreateOrDeleteDim2ByGrpRelFromDimension2ToDimension6 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
				PrmDimension2Rule               is a FinanceDimension2 group
                PrmDimension6Rule    			is a FinanceDimension6 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
            Set Is
                PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
                PrmDimension6Rule
				PrmDeleteFlag
                PrmUniqueID
            Local Fields
            	LocalArrayCounter				is Numeric 5
				LocalDimension2Array			is a FinanceDimension2Array
			Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
                and	FinanceDimension2 within PrmDimension2Rule
                and DimensionType.Posting)
            Sort Order
                FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
					Exit Rules
						if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim6ByGrpRelFromDimension2ToDimension6 FinanceDimension6
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
                            	invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[1]
								invoked.PrmDimension2Array    			= LocalDimension2Array
                            	invoked.PrmDimension6Rule	            = PrmDimension6Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID	
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2
					else
						invoke CreateOrDeleteDim6ByGrpRelFromDimension2ToDimension6 FinanceDimension6
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[LocalArrayCounter-1]
							invoked.PrmDimension2Array    			= LocalDimension2Array
                            invoked.PrmDimension6Rule	           	= PrmDimension6Rule
                            invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
                            invoked.PrmUniqueID						= PrmUniqueID	
						initialize LocalDimension2Array
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2

        CreateOrDeleteDim2ByGrpRelFromDimension2ToDimension7 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
				PrmDimension2Rule               is a FinanceDimension2 group
                PrmDimension7Rule    			is a FinanceDimension7 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
            Set Is
                PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
                PrmDimension7Rule
				PrmDeleteFlag
                PrmUniqueID
            Local Fields
            	LocalArrayCounter				is Numeric 5
				LocalDimension2Array			is a FinanceDimension2Array
			Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
                and	FinanceDimension2 within PrmDimension2Rule
                and DimensionType.Posting)
            Sort Order
                FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
					Exit Rules
						if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim7ByGrpRelFromDimension2ToDimension7 FinanceDimension7
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
                            	invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[1]
								invoked.PrmDimension2Array    			= LocalDimension2Array
                            	invoked.PrmDimension7Rule	            = PrmDimension7Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID	
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2
					else
						invoke CreateOrDeleteDim7ByGrpRelFromDimension2ToDimension7 FinanceDimension7
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[LocalArrayCounter-1]
							invoked.PrmDimension2Array    			= LocalDimension2Array
                            invoked.PrmDimension7Rule	           	= PrmDimension7Rule
                            invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
                            invoked.PrmUniqueID						= PrmUniqueID	
						initialize LocalDimension2Array
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2

        CreateOrDeleteDim2ByGrpRelFromDimension2ToDimension8 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
				PrmDimension2Rule               is a FinanceDimension2 group
                PrmDimension8Rule    			is a FinanceDimension8 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
            Set Is
                PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
                PrmDimension8Rule
				PrmDeleteFlag
                PrmUniqueID
            Local Fields
            	LocalArrayCounter				is Numeric 5
				LocalDimension2Array			is a FinanceDimension2Array
			Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
                and	FinanceDimension2 within PrmDimension2Rule
                and DimensionType.Posting)
            Sort Order
                FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
					Exit Rules
						if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim8ByGrpRelFromDimension2ToDimension8 FinanceDimension8
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
                            	invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[1]
								invoked.PrmDimension2Array    			= LocalDimension2Array
                            	invoked.PrmDimension8Rule	            = PrmDimension8Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID	
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2
					else
						invoke CreateOrDeleteDim8ByGrpRelFromDimension2ToDimension8 FinanceDimension8
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[LocalArrayCounter-1]
							invoked.PrmDimension2Array    			= LocalDimension2Array
                            invoked.PrmDimension8Rule	           	= PrmDimension8Rule
                            invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
                            invoked.PrmUniqueID						= PrmUniqueID	
						initialize LocalDimension2Array
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2

        CreateOrDeleteDim2ByGrpRelFromDimension2ToDimension9 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
				PrmDimension2Rule               is a FinanceDimension2 group
                PrmDimension9Rule    			is a FinanceDimension9 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
            Set Is
                PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
                PrmDimension9Rule
				PrmDeleteFlag
                PrmUniqueID
            Local Fields
            	LocalArrayCounter				is Numeric 5
				LocalDimension2Array			is a FinanceDimension2Array
			Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
                and	FinanceDimension2 within PrmDimension2Rule
                and DimensionType.Posting)
            Sort Order
                FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
					Exit Rules
						if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim9ByGrpRelFromDimension2ToDimension9 FinanceDimension9
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
                            	invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[1]
								invoked.PrmDimension2Array    			= LocalDimension2Array
                            	invoked.PrmDimension9Rule	            = PrmDimension9Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID	
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2
					else
						invoke CreateOrDeleteDim9ByGrpRelFromDimension2ToDimension9 FinanceDimension9
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[LocalArrayCounter-1]
							invoked.PrmDimension2Array    			= LocalDimension2Array
                            invoked.PrmDimension9Rule	           	= PrmDimension9Rule
                            invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
                            invoked.PrmUniqueID						= PrmUniqueID	
						initialize LocalDimension2Array
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2

        CreateOrDeleteDim2ByGrpRelFromDimension2ToDimension10 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
				PrmDimension2Rule               is a FinanceDimension2 group
                PrmDimension10Rule    			is a FinanceDimension10 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
            Set Is
                PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
                PrmDimension10Rule
				PrmDeleteFlag
                PrmUniqueID
            Local Fields
            	LocalArrayCounter				is Numeric 5
				LocalDimension2Array			is a FinanceDimension2Array
			Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
                and	FinanceDimension2 within PrmDimension2Rule
                and DimensionType.Posting)
            Sort Order
                FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
					Exit Rules
						if (LocalArrayCounter > 0)
							invoke CreateOrDeleteDim10ByGrpRelFromDimension2ToDimension10 FinanceDimension10
								invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            	invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
                            	invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[1]
								invoked.PrmDimension2Array    			= LocalDimension2Array
                            	invoked.PrmDimension10Rule	            = PrmDimension10Rule
                            	invoked.PrmDefaultToValue               = PrmDefaultToValue
								invoked.PrmDeleteFlag					= PrmDeleteFlag
                            	invoked.PrmUniqueID						= PrmUniqueID	
                Instance Rules
					LocalArrayCounter += 1
					if (LocalArrayCounter < FinanceEnterpriseGroup.StructureRelationArraySize)
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2
					else
						invoke CreateOrDeleteDim10ByGrpRelFromDimension2ToDimension10 FinanceDimension10
							invoked.PrmFinanceEnterpriseGroup       = PrmFinanceEnterpriseGroup
                            invoked.PrmCodeBlockRelation            = PrmCodeBlockRelation
							invoked.PrmDimension2					= LocalDimension2Array.FinanceDimension2[LocalArrayCounter-1]
							invoked.PrmDimension2Array    			= LocalDimension2Array
                            invoked.PrmDimension10Rule	           	= PrmDimension10Rule
                            invoked.PrmDefaultToValue               = PrmDefaultToValue
							invoked.PrmDeleteFlag					= PrmDeleteFlag
                            invoked.PrmUniqueID						= PrmUniqueID	
						initialize LocalDimension2Array
						initialize LocalArrayCounter

						LocalArrayCounter = 1
						LocalDimension2Array.FinanceDimension2[LocalArrayCounter] = FinanceDimension2

		CreateOrDeleteDim2ByGrpRelFromDimension2ToNew is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
				PrmDimension2Rule               is a FinanceDimension2 group
				PrmDimension					is Numeric 2
				PrmAccountingEntity				is like AccountingEntity
                PrmAccountingUnit				is like AccountingUnit
                PrmKeyToValue	    			is Alpha 200
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
            Set Is
                PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
				PrmDimension
                PrmKeyToValue
				PrmDeleteFlag
                PrmUniqueID
			Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	FinanceDimension2 within PrmDimension2Rule
                and DimensionType.Posting)
            Sort Order
                FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
					Entrance Rules
						LocalCodeBlockRelation 		= PrmCodeBlockRelation
						LocalKeyToValue				= PrmKeyToValue
					Exit Rules

                Instance Rules
					LocalKeyFromValue			= FinanceDimension2
					if(PrmDeleteFlag)
						invoke Delete CodeBlockRelationDetailFromToRel
					else
						invoke Update CodeBlockRelationDetailFromToRel
							invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
							invoked.CodeBlockRelation                   = PrmCodeBlockRelation
							invoked.Dimension2           				= FinanceDimension2
							if(PrmDimension = 1)
								invoked.AccountingEntity				= PrmKeyToValue
							else
								if(PrmDimension = 2)
									invoked.AccountingEntity           		= PrmAccountingEntity
									invoked.AccountingUnit					= PrmAccountingUnit
								else
									if(PrmDimension = 3)
										invoked.GeneralLedgerChartAccount		= PrmKeyToValue
									else
										if(PrmDimension = 4)
											invoked.Project							= PrmKeyToValue
										else
											if(PrmDimension = 6)
												invoked.Dimension1						= PrmKeyToValue
											else
												if(PrmDimension = 8)
													invoked.Dimension3						= PrmKeyToValue
												else
													if(PrmDimension = 9)
														invoked.Dimension4						= PrmKeyToValue
													else
														if(PrmDimension = 10)
															invoked.Dimension5						= PrmKeyToValue
														else
															if(PrmDimension = 11)
																invoked.Dimension6						= PrmKeyToValue
															else
																if(PrmDimension = 12)
																	invoked.Dimension7						= PrmKeyToValue
																else
																	if(PrmDimension = 13)
																		invoked.Dimension8						= PrmKeyToValue
																	else
																		if(PrmDimension = 14)
																			invoked.Dimension9						= PrmKeyToValue
																		else
																			if(PrmDimension = 15)
																				invoked.Dimension10						= PrmKeyToValue
								invoked.DefaultToValue		= PrmDefaultToValue

		CreateOrDeleteDim2ByGrpRelFromBlankToDimension2 is a Set Action
            restricted
			Parameters
				PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension2Rule    			is a FinanceDimension2 group
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
            Set Is
                PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
                PrmDimension2Rule
				PrmDeleteFlag
                PrmUniqueID
            Local Fields
            	LocalCommitCounter				is Numeric 3
        	Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	FinanceDimension2 within PrmDimension2Rule
                and	DimensionType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					LocalKeyFromValue			= blank
					LocalKeyToValue				= FinanceDimension2
					if(PrmDeleteFlag)
						invoke Delete CodeBlockRelationDetailFromToRel
					else
						invoke Update CodeBlockRelationDetailFromToRel
							invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
							invoked.CodeBlockRelation                   = PrmCodeBlockRelation
							invoked.Dimension2          				= FinanceDimension2
							invoked.DefaultToValue                      = PrmDefaultToValue
					increment LocalCommitCounter
					if (LocalCommitCounter > 50)
						commit transaction
						initialize LocalCommitCounter

		CreateOrDeleteDim2ByGrpRelFromEntityToDimension2 is a Set Action
			restricted
			Parameters
				PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
				PrmCodeBlockRelation			is a CodeBlockRelation
				PrmAccountingEntity    			is like AccountingEntity
				PrmAccountingEntityArray		is like AccountingEntityArray
				PrmDimension2Rule	            is a FinanceDimension2 group
				PrmReverseRel					is Boolean
				PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
				PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingEntity
				PrmDimension2Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
			Instance Selection
				where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and    FinanceDimension2 within PrmDimension2Rule
				and    DimensionType.Posting)
			Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
			Action Rules
				Set Rules
					Exit Rules
						if (LocalCommitCounter > 0)
							commit transaction
				Instance Rules
					LocalArrayCounter = 1
					initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					if(PrmReverseRel)
						LocalKeyFromValue			= FinanceDimension2
					else
						LocalKeyToValue				= FinanceDimension2
					if(PrmDeleteFlag)
						while (PrmAccountingEntityArray.AccountingEntity[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmAccountingEntityArray.AccountingEntity[LocalArrayCounter]
							else
								LocalKeyFromValue		= PrmAccountingEntityArray.AccountingEntity[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmAccountingEntityArray.AccountingEntity[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmAccountingEntityArray.AccountingEntity[LocalArrayCounter]
							else							
								LocalKeyFromValue		= PrmAccountingEntityArray.AccountingEntity[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.DefaultToValue                      = PrmDefaultToValue
								invoked.AccountingEntity		          	= PrmAccountingEntityArray.AccountingEntity[LocalArrayCounter]
								invoked.Dimension2							= FinanceDimension2
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteDim2ByGrpRelFromUnitToDimension2 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccountingEntity				is like AccountingEntity
                PrmAccountingUnit				is like AccountingUnit
                PrmAccountingUnitArray			is like AccountingUnitArray
                PrmDimension2Rule	            is a FinanceDimension2 group
				PrmReverseRel					is Boolean
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccountingEntity
				PrmAccountingUnit
				PrmDimension2Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
				where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and    FinanceDimension2 within PrmDimension2Rule
				and    DimensionType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					if(PrmReverseRel)
						LocalKeyFromValue			= FinanceDimension2
					else
						LocalKeyToValue				= FinanceDimension2
					if(PrmDeleteFlag)
						while (PrmAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit entered)
							if(PrmReverseRel)
								LocalKeyToValue		= PrmAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit
							else
								LocalKeyFromValue	= PrmAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit entered)
							if(PrmReverseRel)
								LocalKeyToValue		= PrmAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit
							else						
								LocalKeyFromValue	= PrmAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].DerivedEntityAccountingUnit
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.AccountingEntity           			= PrmAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingEntity
								invoked.AccountingUnit						= PrmAccountingUnitArray.AccountingEntityAndUnit[LocalArrayCounter].AccountingUnit
								invoked.Dimension2							= FinanceDimension2    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

        CreateOrDeleteDim2ByGrpRelFromAccountToDimension2 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmAccount					    is like GeneralLedgerChartAccount
                PrmAccountArray					is like AccountArray
                PrmDimension2Rule	            is a FinanceDimension2 group
				PrmReverseRel					is Boolean
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmAccount
				PrmDimension2Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and    FinanceDimension2 within PrmDimension2Rule
                and    DimensionType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					if(PrmReverseRel)
						LocalKeyFromValue			= FinanceDimension2
					else
						LocalKeyToValue				= FinanceDimension2
					if(PrmDeleteFlag)
						while (PrmAccountArray.GeneralLedgerChartAccount[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmAccountArray.GeneralLedgerChartAccount[LocalArrayCounter]
							else
								LocalKeyFromValue		= PrmAccountArray.GeneralLedgerChartAccount[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmAccountArray.GeneralLedgerChartAccount[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmAccountArray.GeneralLedgerChartAccount[LocalArrayCounter]
							else
								LocalKeyFromValue		= PrmAccountArray.GeneralLedgerChartAccount[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.GeneralLedgerChartAccount           = PrmAccountArray.GeneralLedgerChartAccount[LocalArrayCounter]
								invoked.Dimension2							= FinanceDimension2    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteDim2ByGrpRelFromProjectToDimension2 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmProject					    is like Project
                PrmProjectArray					is like ProjectArray
                PrmDimension2Rule	            is a FinanceDimension2 group
				PrmReverseRel					is Boolean
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmProject
				PrmDimension2Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	FinanceDimension2 within PrmDimension2Rule
                and	DimensionType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					if(PrmReverseRel)
						LocalKeyFromValue			= FinanceDimension2
					else
						LocalKeyToValue				= FinanceDimension2
					if(PrmDeleteFlag)
						while (PrmProjectArray.Project[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmProjectArray.Project[LocalArrayCounter]
							else
								LocalKeyFromValue		= PrmProjectArray.Project[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmProjectArray.Project[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmProjectArray.Project[LocalArrayCounter]
							else
								LocalKeyFromValue		= PrmProjectArray.Project[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Project           					= PrmProjectArray.Project[LocalArrayCounter]
								invoked.Dimension2							= FinanceDimension2    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteDim2ByGrpRelFromDimension1ToDimension2 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension1					is like FinanceDimension1
                PrmDimension1Array				is like FinanceDimension1Array
                PrmDimension2Rule	            is a FinanceDimension2 group
				PrmReverseRel					is Boolean
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension1
				PrmDimension2Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	FinanceDimension2 within PrmDimension2Rule
                and	DimensionType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					if(PrmReverseRel)
						LocalKeyFromValue			= FinanceDimension2
					else
						LocalKeyToValue				= FinanceDimension2
					if(PrmDeleteFlag)
						while (PrmDimension1Array.FinanceDimension1[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue		= PrmDimension1Array.FinanceDimension1[LocalArrayCounter]
							else
								LocalKeyFromValue	= PrmDimension1Array.FinanceDimension1[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension1Array.FinanceDimension1[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue		= PrmDimension1Array.FinanceDimension1[LocalArrayCounter]
							else
								LocalKeyFromValue	= PrmDimension1Array.FinanceDimension1[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension1           				= PrmDimension1Array.FinanceDimension1[LocalArrayCounter]
								invoked.Dimension2							= FinanceDimension2    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
								
		CreateOrDeleteDim2ByGrpRelFromDimension3ToDimension2 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension3					is like FinanceDimension3
                PrmDimension3Array				is like FinanceDimension3Array
                PrmDimension2Rule	            is a FinanceDimension2 group
				PrmReverseRel					is Boolean
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension3
				PrmDimension2Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	FinanceDimension2 within PrmDimension2Rule
                and	DimensionType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					if(PrmReverseRel)
						LocalKeyFromValue			= FinanceDimension2
					else
						LocalKeyToValue				= FinanceDimension2
					if(PrmDeleteFlag)
						while (PrmDimension3Array.FinanceDimension3[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue		= PrmDimension3Array.FinanceDimension3[LocalArrayCounter]
							else
								LocalKeyFromValue	= PrmDimension3Array.FinanceDimension3[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension3Array.FinanceDimension3[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue		= PrmDimension3Array.FinanceDimension3[LocalArrayCounter]
							else
								LocalKeyFromValue	= PrmDimension3Array.FinanceDimension3[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension3           				= PrmDimension3Array.FinanceDimension3[LocalArrayCounter]
								invoked.Dimension2							= FinanceDimension2    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteDim2ByGrpRelFromDimension4ToDimension2 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension4					is like FinanceDimension4
                PrmDimension4Array				is like FinanceDimension4Array
                PrmDimension2Rule	            is a FinanceDimension2 group
				PrmReverseRel					is Boolean
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension4
				PrmDimension2Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	FinanceDimension2 within PrmDimension2Rule
                and	DimensionType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					if(PrmReverseRel)
						LocalKeyFromValue			= FinanceDimension2
					else
						LocalKeyToValue				= FinanceDimension2
					if(PrmDeleteFlag)
						while (PrmDimension4Array.FinanceDimension4[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue		= PrmDimension4Array.FinanceDimension4[LocalArrayCounter]
							else
								LocalKeyFromValue	= PrmDimension4Array.FinanceDimension4[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension4Array.FinanceDimension4[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue		= PrmDimension4Array.FinanceDimension4[LocalArrayCounter]
							else
								LocalKeyFromValue	= PrmDimension4Array.FinanceDimension4[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension4           				= PrmDimension4Array.FinanceDimension4[LocalArrayCounter]
								invoked.Dimension2							= FinanceDimension2    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteDim2ByGrpRelFromDimension5ToDimension2 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension5					is like FinanceDimension5
                PrmDimension5Array				is like FinanceDimension5Array
                PrmDimension2Rule	            is a FinanceDimension2 group
				PrmReverseRel					is Boolean
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension5
				PrmDimension2Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	FinanceDimension2 within PrmDimension2Rule
                and	DimensionType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					if(PrmReverseRel)
						LocalKeyFromValue			= FinanceDimension2
					else
						LocalKeyToValue				= FinanceDimension2
					if(PrmDeleteFlag)
						while (PrmDimension5Array.FinanceDimension5[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmDimension5Array.FinanceDimension5[LocalArrayCounter]
							else
								LocalKeyFromValue		= PrmDimension5Array.FinanceDimension5[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension5Array.FinanceDimension5[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmDimension5Array.FinanceDimension5[LocalArrayCounter]
							else
								LocalKeyFromValue		= PrmDimension5Array.FinanceDimension5[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension5           				= PrmDimension5Array.FinanceDimension5[LocalArrayCounter]
								invoked.Dimension2							= FinanceDimension2    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
				
		CreateOrDeleteDim2ByGrpRelFromDimension6ToDimension2 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension6					is like FinanceDimension6
                PrmDimension6Array				is like FinanceDimension6Array
                PrmDimension2Rule	            is a FinanceDimension2 group
				PrmReverseRel					is Boolean
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension6
				PrmDimension2Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	FinanceDimension2 within PrmDimension2Rule
                and	DimensionType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					if(PrmReverseRel)
						LocalKeyFromValue			= FinanceDimension2
					else
						LocalKeyToValue				= FinanceDimension2
					if(PrmDeleteFlag)
						while (PrmDimension6Array.FinanceDimension6[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmDimension6Array.FinanceDimension6[LocalArrayCounter]
							else
								LocalKeyFromValue		= PrmDimension6Array.FinanceDimension6[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension6Array.FinanceDimension6[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmDimension6Array.FinanceDimension6[LocalArrayCounter]
							else
								LocalKeyFromValue		= PrmDimension6Array.FinanceDimension6[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension6          				= PrmDimension6Array.FinanceDimension6[LocalArrayCounter]
								invoked.Dimension2							= FinanceDimension2    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteDim2ByGrpRelFromDimension7ToDimension2 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension7					is like FinanceDimension7
                PrmDimension7Array				is like FinanceDimension7Array
                PrmDimension2Rule	            is a FinanceDimension2 group
				PrmReverseRel					is Boolean
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension7
				PrmDimension2Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	FinanceDimension2 within PrmDimension2Rule
                and	DimensionType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					if(PrmReverseRel)
						LocalKeyFromValue		= FinanceDimension2
					else
						LocalKeyToValue			= FinanceDimension2
					if(PrmDeleteFlag)
						while (PrmDimension7Array.FinanceDimension7[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmDimension7Array.FinanceDimension7[LocalArrayCounter]
							else
								LocalKeyFromValue		= PrmDimension7Array.FinanceDimension7[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension7Array.FinanceDimension7[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmDimension7Array.FinanceDimension7[LocalArrayCounter]
							else
								LocalKeyFromValue		= PrmDimension7Array.FinanceDimension7[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension7           				= PrmDimension7Array.FinanceDimension7[LocalArrayCounter]
								invoked.Dimension2							= FinanceDimension2    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteDim2ByGrpRelFromDimension8ToDimension2 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension8					is like FinanceDimension8
                PrmDimension8Array				is like FinanceDimension8Array
                PrmDimension2Rule	            is a FinanceDimension2 group
				PrmReverseRel					is Boolean
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension8
				PrmDimension2Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	FinanceDimension2 within PrmDimension2Rule
                and	DimensionType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					if(PrmReverseRel)
						LocalKeyFromValue			= FinanceDimension2
					else
						LocalKeyToValue				= FinanceDimension2
					if(PrmDeleteFlag)
						while (PrmDimension8Array.FinanceDimension8[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmDimension8Array.FinanceDimension8[LocalArrayCounter]
							else
								LocalKeyFromValue		= PrmDimension8Array.FinanceDimension8[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension8Array.FinanceDimension8[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmDimension8Array.FinanceDimension8[LocalArrayCounter]
							else
								LocalKeyFromValue		= PrmDimension8Array.FinanceDimension8[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension8           				= PrmDimension8Array.FinanceDimension8[LocalArrayCounter]
								invoked.Dimension2							= FinanceDimension2    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteDim2ByGrpRelFromDimension9ToDimension2 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension9					is like FinanceDimension9
                PrmDimension9Array				is like FinanceDimension9Array
                PrmDimension2Rule	            is a FinanceDimension2 group
				PrmReverseRel					is Boolean
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension9
				PrmDimension2Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	FinanceDimension2 within PrmDimension2Rule
                and	DimensionType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					if(PrmReverseRel)
						LocalKeyFromValue			= FinanceDimension2
					else
						LocalKeyToValue				= FinanceDimension2
					if(PrmDeleteFlag)
						while (PrmDimension9Array.FinanceDimension9[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmDimension9Array.FinanceDimension9[LocalArrayCounter]
							else
								LocalKeyFromValue		= PrmDimension9Array.FinanceDimension9[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension9Array.FinanceDimension9[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue			= PrmDimension9Array.FinanceDimension9[LocalArrayCounter]
							else
								LocalKeyFromValue		= PrmDimension9Array.FinanceDimension9[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension9           				= PrmDimension9Array.FinanceDimension9[LocalArrayCounter]
								invoked.Dimension2							= FinanceDimension2    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		CreateOrDeleteDim2ByGrpRelFromDimension10ToDimension2 is a Set Action
            restricted
            Parameters
                PrmFinanceEnterpriseGroup       is a FinanceEnterpriseGroup
                PrmCodeBlockRelation			is a CodeBlockRelation
                PrmDimension10					is like FinanceDimension10
                PrmDimension10Array				is like FinanceDimension10Array
                PrmDimension2Rule	            is a FinanceDimension2 group
				PrmReverseRel					is Boolean
                PrmDefaultToValue               is Alpha 200
				PrmDeleteFlag					is Boolean
                PrmUniqueID						is a UniqueID
			Set Is
				PrmFinanceEnterpriseGroup
				PrmCodeBlockRelation
				PrmDimension10
				PrmDimension2Rule
				PrmDeleteFlag
				PrmUniqueID
			Local Fields
				LocalArrayCounter				is Numeric 5
				LocalCommitCounter				is Numeric size 3
            Instance Selection
                where (FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				and	FinanceDimension2 within PrmDimension2Rule
                and	DimensionType.Posting)
            Sort Order
				FinanceEnterpriseGroup
				FinanceDimension2
            Action Rules
                Set Rules
                	Exit Rules
                		if (LocalCommitCounter > 0)
                			commit transaction
                Instance Rules
					LocalArrayCounter = 1
                    initialize LocalCommitCounter      
					LocalCodeBlockRelation 		= PrmCodeBlockRelation
					if(PrmReverseRel)
						LocalKeyFromValue		= FinanceDimension2
					else
						LocalKeyToValue			= FinanceDimension2
					if(PrmDeleteFlag)
						while (PrmDimension10Array.FinanceDimension10[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue		= PrmDimension10Array.FinanceDimension10[LocalArrayCounter]
							else
								LocalKeyFromValue	= PrmDimension10Array.FinanceDimension10[LocalArrayCounter]
							invoke Delete CodeBlockRelationDetailFromToRel 
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter
					else
						while (PrmDimension10Array.FinanceDimension10[LocalArrayCounter] entered)
							if(PrmReverseRel)
								LocalKeyToValue		= PrmDimension10Array.FinanceDimension10[LocalArrayCounter]
							else
								LocalKeyFromValue	= PrmDimension10Array.FinanceDimension10[LocalArrayCounter]
							invoke Update CodeBlockRelationDetailFromToRel
								invoked.FinanceEnterpriseGroup              = PrmFinanceEnterpriseGroup
								invoked.CodeBlockRelation                   = PrmCodeBlockRelation
								invoked.Dimension10           				= PrmDimension10Array.FinanceDimension10[LocalArrayCounter]
								invoked.Dimension2							= FinanceDimension2    
								invoked.DefaultToValue                      = PrmDefaultToValue
							LocalArrayCounter += 1
							increment LocalCommitCounter
							if (LocalCommitCounter > 50)
								commit transaction
								initialize LocalCommitCounter

		PopulateALNCode is a Set Action
			restricted
			Parameters
				PrmFinanceEnterpriseGroup is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
			Instance Selection
				where ((FinanceEnterpriseGroup = PrmFinanceEnterpriseGroup
				or PrmFinanceEnterpriseGroup not entered)
				and IsProjectInvoicing
				and	(CFDANumber entered
				or ProgramTitle entered))
			Action Rules
				Instance Rules
					if (CFDANumber entered and FinanceDimension2ALNCodeRel not exists)
						invoke Create FinanceDimension2ALNCode
							invoked.FinanceEnterpriseGroup = FinanceEnterpriseGroup
							invoked.FinanceDimension2ALNCode = CFDANumber
							invoked.Description = CFDANumber
			
					if (ProgramTitle entered and FinanceDimension2ProgramTitleRel not exists)
						invoke Create FinanceDimension2ProgramTitle
							invoked.FinanceEnterpriseGroup = FinanceEnterpriseGroup
							invoked.FinanceDimension2ProgramTitle = ProgramTitle
							invoked.Description = ProgramTitle		
