FinancialInstitution is a BusinessClass
	owned by cashmgmt
	prefix is CMFI
	representative text is "<FinancialInstitution>"
	representative image is Logo.File
		display as portrait image
		missing image is random background
			foreground text is "<XiFinancialInstitutionNameAbbreviation>"

	Ontology
		symbolic key is FinancialInstitution

	Patterns 
		implements StaticJava
		disable AuditIndex

	Persistent Fields
		Description					is Alpha up to 250




















		Logo						is a LogoAttachment
		Active
		FinancialInstitutionURL		is a URL
			default label is "Website"

	Local Fields
		MaxLogoSize

	Field Rules
		Description
			default to FinancialInstitution

		Active
			initial value is true

		Logo
			if (Logo changed
			or	FinancialInstitution not exists)
				MaxLogoSize = CashManagementGroup.LogoImageMaximumSizeBytes

	Attach Rules
		if (parentcontext.name != "BankStatementTotal")
			constraint (Active)
				"FinancialInstitutionIsInactive"

	Derived Fields
		ContextMessageEntityType is a StringField
			type is Alpha 30
			restricted
			"InforFinancialPartyMaster"

		ContextMessageText is a MessageField
			restricted
			"FinancialInstitution<FinancialInstitution>"

		XiFinancialInstitutionNameAbbreviation is a DerivedField
			type is AlphaUpper 3
			return FinancialInstitution

		ActiveMsgField is a DerivedField
			type is MessageField
			if (!Active)
				return InactiveMessage

		InactiveMessage is a MessageField
			restricted
			"Inactive"

		FinancialInstitutionAndDescription is a MessageField
			default label is "FinancialInstitution"
			"<FinancialInstitution>_-_<Description>"
		
	Conditions
		URLEntered
			restricted
			when (FinancialInstitutionURL entered)

		HasFinancialInstitutionBranch
			restricted
			when (FinancialInstitutionBranch set exists)





	Actions
		Create is a Create Action

		Update is an Update Action

		Delete is a Delete Action
