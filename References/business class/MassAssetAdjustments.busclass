MassAssetAdjustments is a BusinessTask
    owned by am

    Patterns
        implements ManualTransaction
        implements StaticJava
            Reports
                MassAssetAdjustmentsReport

    Parameters
		FinanceEnterpriseGroup
        SelName                 is a MassAdjustmentSelection
        AdjustDate              is Date
        DateType                is AlphaUpper size 1
            States
                InService value is "I"
                Purchase  value is "P"
        FromDate                is Date
        ToDate                  is Date
        Release                 is AlphaUpper size 1
            default label is "Update"
            States
                No     value is "N"
                Yes    value is "Y"
                Delete value is "D"
        Posting                 is AlphaUpper size 1
            States
                Yes value is "Y"
                No  value is "N"
        PostingDate             is Date
        WorkInProcFrom          is AlphaUpper size 1
            States
                No  value is "N"
                Yes value is "Y"
        WorkInProcTo            is AlphaUpper size 1
            States
                No  value is "N"
                Yes value is "Y"
        TaxExemptFrom           is AlphaUpper size 1
            States
                No  value is "N"
                Yes value is "Y"
        TaxExemptTo             is AlphaUpper size 1
            States
                No  value is "N"
                Yes value is "Y"
        SimulatedFrom           is AlphaUpper size 1
            States
                No  value is "N"
                Yes value is "Y"
        SimulatedTo             is AlphaUpper size 1
            States
                No  value is "N"
                Yes value is "Y"
        UsedFrom                is AlphaUpper size 1
            States
                No  value is "N"
                Yes value is "Y"
        UsedTo                  is AlphaUpper size 1
            States
                No  value is "N"
                Yes value is "Y"
        Classification          is AlphaUpper size 1
            States
                Operating value is "O"
                Finance   value is "C"
                Purchased value is "P"
        ClassTo                 is AlphaUpper size 1
            States
                Operating value is "O"
                Finance   value is "C"
                Purchased value is "P"
    	Company					is an AssetCompany
    		disable surrogates
        AssetTypeFrom           is an AssetType	
        AssetTypeTo             is an AssetType	
        AssetGrpFrom            is an AssetGroup
        AssetGrpTo              is an AssetGroup
        AcctGrpFrom             is an AssetAccountGroup	
        AcctGrpTo               is an AssetAccountGroup	
        AuGroupFrom             is an AssetAccountingUnitGroup	
        AuGroupTo               is an AssetAccountingUnitGroup	
        AcctUnitFrom            is a FinanceCodeBlockNoAccountFull 
        	default label is "FromTransactionDimensions"
        AcctUnitTo              is a FinanceCodeBlockNoAccountFull	
        	default label is "ToTransactionDimensions"
        AssetOwnerFrom			is an Employee
        AssetOwnerTo			is an Employee
        ActivityFrom            is a Project
        ActivityTo              is a Project
        Book
        Compute                 is AlphaUpper size 1
            States
                No          value is "N"
                Yes         value is "Y"
                Prospective value is "P"
        FullyDepr               is AlphaUpper size 1
            States
                No   value is "N"
                Yes  value is "Y"
                Only value is "O"
        MethodFrom              is a Method
        MethodTo                is a Method
        LifeFrom                is Numeric size 4
        LifeTo                  is Numeric size 4
        LifeRemFrom             is Decimal size 8.3
        LifeRemTo               is Decimal size 8.3
        InsrvDateFrom           is Date
        InsrvDateTo             is Date
        ConventionFrom          is AlphaUpper size 2
            States
                FullMonth         value is "FM"
                ModifiedHalfMonth value is "HM"
                MidMonth          value is "MM"
                NextMonth         value is "NM"
                HalfYear          value is "HY"
                ModifiedHalfYear  value is "MY"
                FullYear          value is "FY"
                ActualDays        value is "AD"
                MidQuarter        value is "MQ"
        ConventionTo            is AlphaUpper size 2
            States
                FullMonth         value is "FM"
                ModifiedHalfMonth value is "HM"
                MidMonth          value is "MM"
                NextMonth         value is "NM"
                HalfYear          value is "HY"
                ModifiedHalfYear  value is "MY"
                FullYear          value is "FY"
                ActualDays        value is "AD"
                MidQuarter        value is "MQ"
        BookStatusFrom          is AlphaUpper size 1
            States
                Active   value is "A"
                Inactive value is "I"
        BookStatusTo            is AlphaUpper size 1
            States
                Active   value is "A"
                Inactive value is "I"
        LifeYearsFrom           is Decimal size 5.2
        LifeYearsTo             is Decimal size 5.2
        LifeZero				is Boolean
        LifeRemZero				is Boolean
		LifeYearsZero			is Boolean
    Parameter Rules
        SelName
            required
        AdjustDate
            required
            
            constraint (AdjustDate >= FromDate)
            	"AdjustmentDateMustBeLaterThanFromDate"
            
            if (AdjustDate < ToDate)
				if (SelName.SelectAll)
	            	if (SelName.IsAdjustment)
						for each SelName.AssetsForAdjustmentRel
							for each each.AssetItem set
								if (each.PurchaseDate < ToDate)
									constraint (AdjustDate >= each.PurchaseDate)
										"AdjustmentDateMustBeGreaterThanPurchaseDate"
					else
						if (SelName.IsTransfer)
							for each SelName.AssetsForTransferRel
								for each each.AssetItem set
									if (each.PurchaseDate < ToDate)
										constraint (AdjustDate >= each.PurchaseDate)
											"AdjustmentDateMustBeGreaterThanPurchaseDate"
						else
							if (SelName.IsDisposal)
								for each SelName.AssetsForDisposalRel
									for each each.AssetItem set
										if (each.PurchaseDate < ToDate)
											constraint (AdjustDate >= each.PurchaseDate)
												"AdjustmentDateMustBeGreaterThanPurchaseDate"
							else
								for each SelName.AssetsForRevalueRel
									for each each.AssetItem set
										if (each.PurchaseDate < ToDate)
											constraint (AdjustDate >= each.PurchaseDate)
												"AdjustmentDateMustBeGreaterThanPurchaseDate"
				else
					for each SelName.MassSelectionDetailsRel
						for each each.Asset.AssetItem set
							if (each.PurchaseDate < ToDate)
								constraint (AdjustDate >= each.PurchaseDate)
									"AdjustmentDateMustBeGreaterThanPurchaseDate"
				
        DateType
            required
        Release
            initial value is "N"
            default to "N"
            required
        Posting
        	initial value is "Y"
            default to "Y"
        Compute
        	initial value is "N"
            default to "N"
        FullyDepr
        	initial value is "N"
            default to "N"
        Company
        	initial value is SelName.Company 
        	default to SelName.Company
        LifeFrom
        	constraint(not LifeZero)
        		"CannotEnterFromValueWhenIncludingAllAssetsFromMassSelection"
        LifeRemFrom
        	constraint(not LifeRemZero)
        		"CannotEnterFromValueWhenIncludingAllAssetsFromMassSelection"
        LifeYearsFrom	
        	constraint(not LifeYearsZero)
        		"CannotEnterFromValueWhenIncludingAllAssetsFromMassSelection"
    Actions
        MassAssetAdjustments is a Set Action
            allow unlimited concurrency
