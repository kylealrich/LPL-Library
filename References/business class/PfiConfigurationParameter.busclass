PfiConfigurationParameter is a BusinessClass
    owned by pfi
    prefix is PfiCV
    default label is "ConfigurationParameter"
    framework type is ConfigParam

    Ontology
        symbolic key is PfiConfigurationParameter

    Patterns
        implements CRUD
        disable Auditing
        disable EffectiveDated
        disable UniqueID
        implements AuditLogEntryActions 

    Persistent Fields

        ParameterValue is Alpha size up to 2000

    Derived Fields

        UpdateCache is a NativeField
            type is Boolean
        UpdateCacheWithDelete is a NativeField
            type is Boolean
        ValidateType is a NativeField
            type is Boolean
        ValidateNameAndCategory is a NativeField
            type is Boolean
        ValidateNameAndType is a NativeField
            type is Boolean
        ValidateTenantId is a NativeField
            type is Boolean
        ValidateDataArea is a NativeField
            type is Boolean
        ValidateConfigParameters is a NativeField
            type is Boolean

    Field Rules

        PfiTenant
            if (PfiParameterName = "Max Work Unit Threads")
                constraint (PfiTenant != "ALL")
                    "The_selected_parameter_name_requires_the_Tenant_Id_to_be_set_to_GEN_or_a_valid_Tenant_Id"

        ParameterValue
            required

    Actions

        Create is a Create Action

            Exit Rules
                constraint (ValidateTenantId)
                    "InvalidTenantId"
                constraint (ValidateDataArea)
                    "InvalidDataArea"
                constraint (ValidateNameAndCategory)
                    "InvalidParameterNameForSelectedCategory"
                constraint (ValidateNameAndType)
                    "InvalidType"
                constraint (ValidateType)
                    "IncorrectValue"
                constraint (ValidateConfigParameters)
                    "IncorrectValue"
                constraint (UpdateCache) 
                    "CacheNotUpdated"

        Update is an Update Action

            Exit Rules
                constraint (ValidateType)
                    "IncorrectValue"
                constraint (ValidateConfigParameters)
                    "IncorrectValue"
                constraint (UpdateCache) 
                    "CacheNotUpdated"

        Delete is a Delete Action

            Exit Rules
                constraint (UpdateCacheWithDelete)
                    "CacheNotUpdated"

        RefreshCache is an Instance Action

        CreateWithoutCacheUpdate is a Create Action

            Exit Rules
                constraint (ValidateTenantId)
                    "InvalidTenantId"
                constraint (ValidateDataArea)
                    "InvalidDataArea"
                constraint (ValidateNameAndCategory)
                    "InvalidParameterNameForSelectedCategory"
                constraint (ValidateNameAndType)
                    "InvalidType"
                constraint (ValidateType)
                    "IncorrectValue"
                constraint (ValidateConfigParameters)
                    "IncorrectValue"

        RestrictedCreate is a Create Action
            restricted

        RestrictedUpdate is an Update Action
            restricted
