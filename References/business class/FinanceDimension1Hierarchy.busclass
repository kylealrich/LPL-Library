FinanceDimension1Hierarchy is a BusinessClass
	owned by GeneralLedger
	
	prefix is FD1Hy
	
	Ontology
		symbolic key is FinanceDimension1Hierarchy
		
	Patterns
           	  
	Context Fields
		ReportingBasis

    Persistent Fields
    	ParentDimension 			is a FinanceDimension1
    	DisplayDimension			is Alpha 60 
		DimensionType
    	SystemDimension				is Boolean
    	IsAZoneDimension			is Boolean
    	ZoneDimension				is a FinanceDimension1
    	EnterpriseZoneDimension		is Boolean
    	DefaultZoneDimension		is Boolean
    	IncludeInBudgetEdit			is Boolean		

    Transient Fields

		StructureDimensionNew		is Numeric 1
			derive value from StructureDimensionExists
		RetainDefaultValues 		is Boolean

	Rule Blocks

		FindParent
			if (LocalFinanceDimension1.Level < LocalLevel)
				LocalFinanceDimension1 = FinanceDimension1
			else
				while (LocalFinanceDimension1.Level > LocalLevel)
					LocalFinanceDimension1			= LocalDimensionHierarchyRel.FinanceDimension1Hierarchy.ParentDimension

	Derived Fields
		StructureDimensionExists	is a DerivedField
			type is Boolean
			restricted
			if (this instance exists)
				return true

		DerivedOldPrefix	is a StringField
			type is AlphaUpper 15
			restricted
			LocalOldStructureSequence
			"_"
			
		DerivedNewPrefix    is a StringField
			type is AlphaUpper 15
			restricted
			LocalNewStructureSequence
			"_"
			
		DerivedNewDimension   is a DerivedField
			type is AlphaUpper 15
			restricted
			I1 = DerivedOldPrefix size
			I1 += 1
			DerivedNewDimension = DerivedNewPrefix + LocalCopyDimension[I1:15]
  		
		IsAPostingZoneDimension	is a DerivedField
			type is Boolean
			restricted
			if  (FinanceDimension1		= ZoneDimension
			and  DimensionType.Posting)
				return true

		DerivedLevel1Parent is a DerivedField
			type is like FinanceDimension1
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 1
			include FindParent
			return LocalFinanceDimension1
		
		DerivedLevel1ParentDescription is a DerivedField
			type is like Description
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 1
			include FindParent
			return LocalFinanceDimension1.Description
			
		DerivedLevel1ParentDimensionType is a DerivedField
			type is like DimensionType
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 1
			include FindParent
			return LocalFinanceDimension1.DimensionType

		DerivedLevel2Parent is a DerivedField
			type is like FinanceDimension1
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 2
			include FindParent
			return LocalFinanceDimension1

		DerivedLevel2ParentDescription is a DerivedField
			type is like Description
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 2
			include FindParent
			return LocalFinanceDimension1.Description
			
		DerivedLevel2ParentDimensionType is a DerivedField
			type is like DimensionType
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 2
			include FindParent
			return LocalFinanceDimension1.DimensionType
			
		DerivedLevel3Parent is a DerivedField
			type is like FinanceDimension1
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 3
			include FindParent
			return LocalFinanceDimension1

		DerivedLevel3ParentDescription is a DerivedField
			type is like Description
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 3
			include FindParent
			return LocalFinanceDimension1.Description
			
		DerivedLevel3ParentDimensionType is a DerivedField
			type is like DimensionType
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 3
			include FindParent
			return LocalFinanceDimension1.DimensionType
			
		DerivedLevel4Parent is a DerivedField
			type is like FinanceDimension1
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 4
			include FindParent
			return LocalFinanceDimension1

		DerivedLevel4ParentDescription is a DerivedField
			type is like Description
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 4
			include FindParent
			return LocalFinanceDimension1.Description
			
		DerivedLevel4ParentDimensionType is a DerivedField
			type is like DimensionType
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 4
			include FindParent
			return LocalFinanceDimension1.DimensionType

		DerivedLevel5Parent is a DerivedField
			type is like FinanceDimension1
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 5
			include FindParent
			return LocalFinanceDimension1

		DerivedLevel5ParentDescription is a DerivedField
			type is like Description
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 5
			include FindParent
			return LocalFinanceDimension1.Description
			
		DerivedLevel5ParentDimensionType is a DerivedField
			type is like DimensionType
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 5
			include FindParent
			return LocalFinanceDimension1.DimensionType

		DerivedLevel6Parent is a DerivedField
			type is like FinanceDimension1
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 6
			include FindParent
			return LocalFinanceDimension1

		DerivedLevel6ParentDescription is a DerivedField
			type is like Description
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 6
			include FindParent
			return LocalFinanceDimension1.Description
			
		DerivedLevel6ParentDimensionType is a DerivedField
			type is like DimensionType
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 6
			include FindParent
			return LocalFinanceDimension1.DimensionType

		DerivedLevel7Parent is a DerivedField
			type is like FinanceDimension1
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 7
			include FindParent
			return LocalFinanceDimension1

		DerivedLevel7ParentDescription is a DerivedField
			type is like Description
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 7
			include FindParent
			return LocalFinanceDimension1.Description
			
		DerivedLevel7ParentDimensionType is a DerivedField
			type is like DimensionType
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 7
			include FindParent
			return LocalFinanceDimension1.DimensionType

		DerivedLevel8Parent is a DerivedField
			type is like FinanceDimension1
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 8
			include FindParent
			return LocalFinanceDimension1

		DerivedLevel8ParentDescription is a DerivedField
			type is like Description
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 8
			include FindParent
			return LocalFinanceDimension1.Description
			
		DerivedLevel8ParentDimensionType is a DerivedField
			type is like DimensionType
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 8
			include FindParent
			return LocalFinanceDimension1.DimensionType

		DerivedLevel9Parent is a DerivedField
			type is like FinanceDimension1
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 9
			include FindParent
			return LocalFinanceDimension1

		DerivedLevel9ParentDescription is a DerivedField
			type is like Description
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 9
			include FindParent
			return LocalFinanceDimension1.Description
			
		DerivedLevel9ParentDimensionType is a DerivedField
			type is like DimensionType
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 9
			include FindParent
			return LocalFinanceDimension1.DimensionType

		DerivedLevel10Parent is a DerivedField
			type is like FinanceDimension1
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 10
			include FindParent
			return LocalFinanceDimension1

		DerivedLevel10ParentDescription is a DerivedField
			type is like Description
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 10
			include FindParent
			return LocalFinanceDimension1.Description
			
		DerivedLevel10ParentDimensionType is a DerivedField
			type is like DimensionType
			LocalFinanceDimension1	= ParentDimension
			LocalLevel				= 10
			include FindParent
			return LocalFinanceDimension1.DimensionType

	Local Fields
		TopNodeFound				is Boolean
		ZoneWithinNode				is Boolean	
		LocalReportingBasis			is a ReportingBasis
		LocalFinanceDimension1		is a FinanceDimension1
		LocalDimension				is a FinanceDimension1
		LocalCopyDimension        	is a FinanceDimension1
		LocalNewDimension         	is a FinanceDimension1
		LocalNewStructureSequence   is Numeric 4
		LocalOldStructureSequence   is Numeric 4		
		LocalParentDimension    	is a FinanceDimension1
		I1					    	is Numeric 2
		LocalLevel					is Numeric 3
		LocalSummaryFinanceDimension1 is like FinanceDimension1
		TemplatesWithIncludeInBudgetEditCount is Numeric size 6
						
	Conditions
		NotUsedInAStructure
			restricted
			when (FinanceDimension1.DimensionType.Posting
			and   !DimensionInOtherStructureRel exists)	


	Sets
		ByParentDimension
			Sort Order
				FinanceEnterpriseGroup
				ParentDimension
				FinanceDimension1
		BySubordinateDimension
			Sort Order
				FinanceEnterpriseGroup
				FinanceDimension1
				ParentDimension
		SubordinatesByStructure
			Sort Order
				FinanceEnterpriseGroup
				FinanceDimension1Structure
				FinanceDimension1
				ParentDimension
		ChildrenInStructure
			Sort Order
				FinanceEnterpriseGroup
				FinanceDimension1Structure
				ParentDimension
				FinanceDimension1
		BySystemDimensionInStructure
			Sort Order
				FinanceEnterpriseGroup
				FinanceDimension1Structure
			Instance Selection
				where (SystemDimension)
		ByDefaultZoneDimensionInStructure
			Sort Order
				FinanceEnterpriseGroup
				FinanceDimension1Structure
			Instance Selection
				where (DefaultZoneDimension)
		ByEnterpriseZoneDimensionInStructure
			Sort Order
				FinanceEnterpriseGroup
				FinanceDimension1Structure
			Instance Selection
				where (EnterpriseZoneDimension)

	Relations
		ParentStructureDimensionRel
			one-to-many relation to FinanceDimension1Hierarchy
			Field Mapping uses SubordinatesByStructure
				related.FinanceEnterpriseGroup			     = FinanceEnterpriseGroup
				related.FinanceDimension1Structure			 = FinanceDimension1Structure
				related.FinanceDimension1					 = ParentDimension
		SiblingsRel
			one-to-many relation to FinanceDimension1Hierarchy
			Field Mapping uses ByParentDimension
				related.FinanceEnterpriseGroup			    = FinanceEnterpriseGroup
				related.ParentDimension						= ParentDimension
			Instance Selection
				where (related.UniqueID != UniqueID)
		NotifyBudgetTemplateRel
			one-to-many relation to BudgetTemplate
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup         = FinanceEnterpriseGroup
			Instance Selection
				where (related.NotifyOnDimension1
				and    related.FinanceDimension1Structure = FinanceDimension1Structure)
		TemplatesWithIncludeInBudgetEditRel
			one-to-many relation to BudgetTemplate
			Field Mapping uses ByStatus
				related.FinanceEnterpriseGroup    	= FinanceEnterpriseGroup 
				related.Status 						= 2 
			Instance Selection
				where (related.PostingDimension1
				and related.FinanceDimension1Structure		= FinanceDimension1Structure)
		LocalDimensionHierarchyRel
			one-to-one relation to FinanceDimension1Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.FinanceDimension1Structure	= FinanceDimension1Structure
				related.FinanceDimension1			= LocalFinanceDimension1
		DimensionShadowRel
			one-to-many relation to FinanceDimension1Shadow
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.FinanceDimension1Structure	= FinanceDimension1Structure
				related.FinanceDimension1			= FinanceDimension1
		MemberOfUnusedStructureRel
			one-to-one relation to FinanceDimension1Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.FinanceDimension1Structure	= FinanceEnterpriseGroup.UnusedDim1Structure
				related.FinanceDimension1			= FinanceDimension1	
		FinanceDimension1ShadowOTORel
			one-to-one relation to FinanceDimension1Shadow
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup		= FinanceEnterpriseGroup
				related.FinanceDimension1Structure	= FinanceDimension1Structure
				related.FinanceDimension1			= FinanceDimension1
            	related.SummaryFinanceDimension1	= LocalSummaryFinanceDimension1	
		DimensionInOtherStructureRel
			one-to-many relation to FinanceDimension1Hierarchy
			Field Mapping uses BySubordinateDimension
				related.FinanceEnterpriseGroup 		= FinanceEnterpriseGroup
				related.FinanceDimension1			= FinanceDimension1
			Instance Selection
				where (related.FinanceDimension1Structure != FinanceDimension1Structure)


		NextParent1Rel
			one-to-one relation to FinanceDimension1Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup     = FinanceEnterpriseGroup
				related.FinanceDimension1Structure = FinanceDimension1Structure
				related.FinanceDimension1          = ParentDimension.ParentDimension
		NextParent2Rel
			one-to-one relation to FinanceDimension1Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup     = FinanceEnterpriseGroup
				related.FinanceDimension1Structure = FinanceDimension1Structure
				related.FinanceDimension1          = NextParent1Rel.ParentDimension
		NextParent3Rel
			one-to-one relation to FinanceDimension1Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup     = FinanceEnterpriseGroup
				related.FinanceDimension1Structure = FinanceDimension1Structure
				related.FinanceDimension1          = NextParent2Rel.ParentDimension				
		NextParent4Rel
			one-to-one relation to FinanceDimension1Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup     = FinanceEnterpriseGroup
				related.FinanceDimension1Structure = FinanceDimension1Structure
				related.FinanceDimension1          = NextParent3Rel.ParentDimension	
		NextParent5Rel
			one-to-one relation to FinanceDimension1Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup     = FinanceEnterpriseGroup
				related.FinanceDimension1Structure = FinanceDimension1Structure
				related.FinanceDimension1          = NextParent4Rel.ParentDimension
		NextParent6Rel
			one-to-one relation to FinanceDimension1Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup     = FinanceEnterpriseGroup
				related.FinanceDimension1Structure = FinanceDimension1Structure
				related.FinanceDimension1          = NextParent5Rel.ParentDimension
		NextParent7Rel
			one-to-one relation to FinanceDimension1Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup     = FinanceEnterpriseGroup
				related.FinanceDimension1Structure = FinanceDimension1Structure
				related.FinanceDimension1          = NextParent6Rel.ParentDimension
		NextParent8Rel
			one-to-one relation to FinanceDimension1Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup     = FinanceEnterpriseGroup
				related.FinanceDimension1Structure = FinanceDimension1Structure
				related.FinanceDimension1          = NextParent7Rel.ParentDimension
		NextParent9Rel
			one-to-one relation to FinanceDimension1Hierarchy
			Field Mapping uses symbolic key
				related.FinanceEnterpriseGroup     = FinanceEnterpriseGroup
				related.FinanceDimension1Structure = FinanceDimension1Structure
				related.FinanceDimension1          = NextParent8Rel.ParentDimension

	Field Rules
		DisplayDimension
			default to FinanceDimension1.DisplayDimension
 		DimensionType
 			DimensionType = FinanceDimension1.DimensionType
 		ParentDimension
 			default to FinanceDimension1.ParentFinanceDimension1
 		IncludeInBudgetEdit
 			if (IncludeInBudgetEdit changed)
 				invoke NotifyChangeIncludeDimension1 NotifyBudgetTemplateRel
					invoked.PrmFinanceDimension1		= FinanceDimension1
					invoked.PrmParentFinanceDimension1	= ParentDimension

 	Action Exit Rules
 		if ((action = "Create"
 		or   action = "CreateNoRules"
 		or   action = "Delete")
 		or  (action = "Update"
 		and  ParentDimension != old ParentDimension))
	 		if (FinanceDimension1Structure.SecurityGroupsNotRequiringRebuildRel exists)
 				invoke SetRequiresRebuild FinanceDimension1Structure.SecurityGroupsNotRequiringRebuildRel 

    Actions
		Create is a Create Action
			restricted
			Action Rules
			Exit Rules
				invoke NotifyCreateDimension1 NotifyBudgetTemplateRel
					invoked.PrmFinanceDimension1 	   = FinanceDimension1
					invoked.PrmParentFinanceDimension1 = ParentDimension
				if (!FinanceDimension1Structure.UnusedDimensionStructure)
					if (MemberOfUnusedStructureRel exists)
						invoke RemoveDimensionFromUnusedStructure FinanceEnterpriseGroup.UnusedDim1Structure
							invoked.FinanceDimension1 = FinanceDimension1								
			
		CreateNoRules is a Create Action
			restricted
			bypass field rules
			
		Update is an Update Action
			restricted
			Entrance Rules
				if (IncludeInBudgetEdit	changed)
					if (not IncludeInBudgetEdit
					and TemplatesWithIncludeInBudgetEditRel exists) 
						TemplatesWithIncludeInBudgetEditCount		= instance count of TemplatesWithIncludeInBudgetEditRel
						if (TemplatesWithIncludeInBudgetEditCount	= 1)
							confirmation required
								"BudgetTemplate<first TemplatesWithIncludeInBudgetEditRel.BudgetTemplate>UsesPosting<DisplayDimension>.Proceed?"
						else
						if (TemplatesWithIncludeInBudgetEditCount > 1)
							TemplatesWithIncludeInBudgetEditCount -= 1
							if (TemplatesWithIncludeInBudgetEditCount	= 1)
								confirmation required
									"BudgetTemplate<first TemplatesWithIncludeInBudgetEditRel.BudgetTemplate>And<last TemplatesWithIncludeInBudgetEditRel.BudgetTemplate>UsePosting<DisplayDimension>.Proceed?"			
							else
								confirmation required
									"BudgetTemplate<first TemplatesWithIncludeInBudgetEditRel.BudgetTemplate>And<TemplatesWithIncludeInBudgetEditCount>OtherTemplatesUsePosting<DisplayDimension>.Proceed?"			
			Exit Rules	
				if (FinanceDimension1.DimensionType.Summary
				and ZoneDimension changed)
					for each FinanceDimension1.NextLevelChildRecordsRel
						invoke UpdateFinanceDimension1Hierarchy each.FinanceDimension1.DimensionInContextStructureRel
							invoked.PrmZoneDimension		 = ZoneDimension
								
		UpdateFinanceDimension1Hierarchy is an Instance Action
			restricted
			Parameters
				PrmZoneDimension			is a FinanceDimension1
					default label is "ZoneDimension"

			Action Rules
				ZoneDimension				= PrmZoneDimension

			Exit Rules
				if (FinanceDimension1.DimensionType.Summary)
					invoke UpdateFinanceDimension1 FinanceDimension1
						invoked.PrmZoneDimension			= ZoneDimension


		Delete is a Delete Action
			restricted
			Exit Rules
				if (FinanceDimension1Structure != FinanceEnterpriseGroup.UnusedDim1Structure
				and NotUsedInAStructure)
					invoke AddDimensionToUnusedStructure FinanceEnterpriseGroup.UnusedDim1Structure
						invoked.FinanceDimension1 = FinanceDimension1
										
		CopyDimensions is a Set Action
			restricted
			Parameters
				PrmFinanceEnterpriseGroup		is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
				PrmStructure					is a FinanceDimension1Structure
					default label is "Structure"
				PrmNewStructure					is a FinanceDimension1Structure
					default label is "NewStructure"

			Instance Selection
				where (FinanceEnterpriseGroup	  = PrmFinanceEnterpriseGroup
				and    FinanceDimension1Structure = PrmStructure)

			Sort Order
				FinanceEnterpriseGroup
				FinanceDimension1Structure
				FinanceDimension1

			Local Fields
				LocalSequence					is Numeric 7
				
			Action Rules

				Instance Rules
					LocalOldStructureSequence = PrmStructure.StructureSequence
					LocalNewStructureSequence = PrmNewStructure.StructureSequence				
					LocalCopyDimension   	  = ParentDimension
					LocalParentDimension 	  = DerivedNewDimension
					if (!FinanceDimension1.DimensionType.Posting)
						LocalCopyDimension 		= FinanceDimension1
						LocalNewDimension  		= DerivedNewDimension
						if (!LocalNewDimension exists)
							increment FinanceEnterpriseGroup.Dimension1LastSeq
							LocalSequence		  = FinanceEnterpriseGroup.Dimension1LastSeq						
							invoke CreateNoRules FinanceDimension1
								fill in fields from LocalCopyDimension
								invoked.FinanceDimension1  		= LocalNewDimension
								invoked.DimensionStructure 		= PrmNewStructure
								invoked.ParentFinanceDimension1 = LocalParentDimension
								invoked.SequenceNumber	  		= LocalSequence
					else
						LocalNewDimension       = FinanceDimension1
							
					invoke CreateNoRules
						fill in fields from this instance
						invoked.FinanceDimension1Structure	= PrmNewStructure
						invoked.ParentDimension 			= LocalParentDimension
						invoked.FinanceDimension1		    = LocalNewDimension
						
		BuildShadowFile is a Set Action
			restricted
			
			Parameters
				PrmFinanceEnterpriseGroup		is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
				PrmDimensionStructure			is a FinanceDimension1Structure
					default label is "DimensionStructure"
				PrmDimension					is a FinanceDimension1
					default label is "Dimension"
				
			Instance Selection
				where (FinanceEnterpriseGroup 		= PrmFinanceEnterpriseGroup
				and    FinanceDimension1Structure	= PrmDimensionStructure
				and   ((PrmDimension entered
				and    FinanceDimension1 			= PrmDimension)
				or    (!PrmDimension entered
				and    !DimensionType.Node)))

			Action Rules
			
				Set Rules
						
				Instance Rules

					LocalFinanceDimension1 = FinanceDimension1
					TopNodeFound   		   = false
					if (PrmDimension entered)
						invoke Delete DimensionShadowRel
					while (!TopNodeFound)
						invoke Create FinanceDimension1Shadow
							invoked.FinanceEnterpriseGroup 	   = FinanceEnterpriseGroup
							invoked.FinanceDimension1Structure = FinanceDimension1Structure
							invoked.FinanceDimension1		   = FinanceDimension1
							invoked.DimensionType			   = DimensionType
							invoked.SummaryFinanceDimension1   = LocalDimensionHierarchyRel.ParentDimension
						if (!LocalDimensionHierarchyRel.ParentDimension.DimensionType.Summary)
							TopNodeFound = true
						else
							LocalFinanceDimension1 = LocalDimensionHierarchyRel.ParentDimension			
					if (DimensionType.Summary)
						invoke SetLevel
									
		SetLevel is an Instance Action
			restricted
			
			Action Rules	
			
				if (!DimensionType.Posting)
					LocalFinanceDimension1 = FinanceDimension1
					LocalLevel		   = 0
					while (LocalFinanceDimension1.DimensionType.Summary) 
						LocalFinanceDimension1	   = LocalDimensionHierarchyRel.ParentDimension
						LocalLevel			  	   += 1
					invoke UpdateLevel FinanceDimension1
						invoked.PrmLevel 		   = LocalLevel
						invoked.PrmParentDimension = LocalDimensionHierarchyRel.ParentDimension	
							
		ExportToUpload is a Set Action
			restricted
			
			Parameters
				PrmFinanceEnterpriseGroup     is a FinanceEnterpriseGroup
					default label is "FinanceEnterpriseGroup"
				PrmFinanceDimension1Structure is a FinanceDimension1Structure
					default label is "FinanceDimension1Structure"
				PrmRunGroup					  is AlphaUpper 30
					default label is "RunGroup"					
				PrmFinanceDimension1Group     is a FinanceDimension1 group
					default label is "CustomGroup"
	    				
	    	Instance Selection
	    		where (FinanceEnterpriseGroup     = PrmFinanceEnterpriseGroup
	    		and	   FinanceDimension1Structure = PrmFinanceDimension1Structure
	    		and	  (!DimensionType.Node)
	    		and	   FinanceDimension1 within PrmFinanceDimension1Group)
	    		
	    	Action Rules
	    	
	    		Instance Rules
	    		
    				invoke ExportToUpload FinanceDimension1
						invoked.PrmFinanceEnterpriseGroup		= PrmFinanceEnterpriseGroup
						invoked.PrmFinanceDimension1Structure	= PrmFinanceDimension1Structure
    					invoked.PrmRunGroup 	    			= PrmRunGroup
    					invoked.PrmSingleRecordOnly 			= true

#ifdef module reconciliation    					
    	CreateReconciliationAccounts is a Set Action
			restricted
			Parameters
				PrmChartAccountRule		 		  is a GeneralLedgerChartAccount group
				PrmReconcileFrequency			  is a ReconcileFrequency
				PrmPeriodWithinQuarter			  is a PeriodWithinQuarter
				PrmAccountType					  is a ReconciliationAccountType
				PrmCashManagementAccount		  is a CashManagementAccount
				PrmReconciliationAccountGroup	  is a ReconciliationAccountGroup
				PrmRisk							  is Numeric 1
					States
						Low			value is 0
						Medium		value is 1
						High		value is 2
				PrmPriority						  is Numeric 1
					States
						Low			value is 0
						Medium		value is 1
						High		value is 2
				PrmCloseTask					  is a CloseTask
				PrmFinanceTeam					  is a FinanceTeam
				PrmFinanceTeamMember			  is a FinanceTeamMember
				PrmRequiresApproval				  is Boolean
				PrmApprovalCode					  is an ApprovalCode
				PrmRequireSupportingDoco		  is Boolean
				PrmReconciliationPolicy			  is a ReconciliationPolicy
				PrmReconciliationManagementGroup  is a ReconciliationManagementGroup
				PrmReportingChart 				  is a ReportingChart
	    		PrmReconciliationAccountStructure is a ReconciliationAccountStructure
	    		PrmAccountingEntity				  is a AccountingEntity
	    		PrmCloseConfiguration             is a GeneralLedgerCloseConfiguration
	    		PrmReconciliationLevel            is a StructureRow
	    		PrmFinanceDimension1Structure	  is a FinanceDimension1Structure
				BypassActiveCodeBlockEdit
									
	    	Instance Selection
	    		where (FinanceEnterpriseGroup      = PrmReconciliationManagementGroup.FinanceEnterpriseGroup
	    		and	   FinanceDimension1Structure = PrmFinanceDimension1Structure
	    		and    DimensionType.Posting
	    		and    PrmAccountingEntity        = PrmAccountingEntity)
			
			Sort Order is primary
								    		
	    	Action Rules
	    	
	    		Instance Rules
					invoke CreateReconciliationAccounts ReportingChartAccount
						invoked.PrmChartAccountRule	              = PrmChartAccountRule	 		
						invoked.PrmReconcileFrequency             = PrmReconcileFrequency
						invoked.PrmPeriodWithinQuarter            = PrmPeriodWithinQuarter
						invoked.PrmAccountType	                  = PrmAccountType
						invoked.PrmCashManagementAccount          = PrmCashManagementAccount		
						invoked.PrmReconciliationAccountGroup     = PrmReconciliationAccountGroup
						invoked.PrmRisk		                      = PrmRisk				
						invoked.PrmPriority		                  = PrmPriority				
						invoked.PrmCloseTask                      = PrmCloseTask
						invoked.PrmFinanceTeam                    = PrmFinanceTeam
						invoked.PrmFinanceTeamMember              = PrmFinanceTeamMember
						invoked.PrmRequiresApproval	              = PrmRequiresApproval		
						invoked.PrmApprovalCode			          = PrmApprovalCode
						invoked.PrmRequireSupportingDoco          = PrmRequireSupportingDoco	
						invoked.PrmReconciliationPolicy           = PrmReconciliationPolicy
						invoked.PrmReconciliationManagementGroup  = PrmReconciliationManagementGroup
						invoked.PrmReportingChart 				  = PrmReportingChart
			    		invoked.PrmReconciliationAccountStructure = PrmReconciliationAccountStructure
			    		invoked.PrmAccountingEntity				  = PrmAccountingEntity
			    		invoked.PrmCloseConfiguration             = PrmCloseConfiguration
			    		invoked.PrmFinanceDimension1			  = FinanceDimension1
			    		invoked.PrmReconciliationLevel	          = PrmReconciliationLevel
			    		invoked.BypassActiveCodeBlockEdit		  = BypassActiveCodeBlockEdit
#endif    						
