RequesterFinanceStructure is a BusinessClass
    owned by rq
    prefix is RQU


    Ontology
        symbolic key is RequesterFinanceStructure




    Patterns
        implements StaticJava
        disable AuditIndex
        
   	Persistent Fields
   		DistributionAccount 		is a FinanceCodeBlock

	Derived Fields
		DerivedRestrictedByLabelLedger		is a DerivedField
			type is MessageField
			if (Requester.Company.ItemGroup.StructureRow.Type.Ledger)
				return Requester.Company.ItemGroup.StructureRow.DisplayLabel
				
		DerivedRestrictedByLabelEntity		is a DerivedField
			type is MessageField
			if	(Requester.Company.ItemGroup.StructureRow.Type.AccountingEntity
			or	 Requester.Company.ItemGroup.StructureRow.Type.AccountingUnit)
				return Requester.Company.GeneralLedgerCompany.FinanceEnterpriseGroup.AccountingEntityLabel
				
		DerivedRestrictedByLabelAcctUnit	is a DerivedField
			type is MessageField
			if (Requester.Company.ItemGroup.StructureRow.Type.AccountingUnit)
				return Requester.Company.ItemGroup.StructureRow.DisplayLabel

		DerivedRestrictedByLabelAccount		is a DerivedField
			type is MessageField
			if (Requester.Company.ItemGroup.StructureRow.Type.Account)
				return Requester.Company.ItemGroup.StructureRow.DisplayLabel
							
		DerivedRestrictedByLabelProject		is a DerivedField
			type is MessageField
			if (Requester.Company.ItemGroup.StructureRow.Type.Project)
				return Requester.Company.ItemGroup.StructureRow.DisplayLabel
				
		DerivedRestrictedByLabelDimension1	is a DerivedField
			type is MessageField
			if (Requester.Company.ItemGroup.StructureRow.Type.Dimension1)
				return Requester.Company.ItemGroup.StructureRow.DisplayLabel
				
		DerivedRestrictedByLabelDimension2	is a DerivedField
			type is MessageField
			if (Requester.Company.ItemGroup.StructureRow.Type.Dimension2)
				return Requester.Company.ItemGroup.StructureRow.DisplayLabel
				
		DerivedRestrictedByLabelDimension3	is a DerivedField
			type is MessageField
			if (Requester.Company.ItemGroup.StructureRow.Type.Dimension3)
				return Requester.Company.ItemGroup.StructureRow.DisplayLabel
				
		DerivedRestrictedByLabelDimension4	is a DerivedField
			type is MessageField
			if (Requester.Company.ItemGroup.StructureRow.Type.Dimension4)
				return Requester.Company.ItemGroup.StructureRow.DisplayLabel
				
		DerivedRestrictedByLabelDimension5	is a DerivedField
			type is MessageField
			if (Requester.Company.ItemGroup.StructureRow.Type.Dimension5)
				return Requester.Company.ItemGroup.StructureRow.DisplayLabel
				
		DerivedRestrictedByLabelDimension6	is a DerivedField
			type is MessageField
			if (Requester.Company.ItemGroup.StructureRow.Type.Dimension6)
				return Requester.Company.ItemGroup.StructureRow.DisplayLabel
				
		DerivedRestrictedByLabelDimension7	is a DerivedField
			type is MessageField
			if (Requester.Company.ItemGroup.StructureRow.Type.Dimension7)
				return Requester.Company.ItemGroup.StructureRow.DisplayLabel
				
		DerivedRestrictedByLabelDimension8	is a DerivedField
			type is MessageField
			if (Requester.Company.ItemGroup.StructureRow.Type.Dimension8)
				return Requester.Company.ItemGroup.StructureRow.DisplayLabel
				
		DerivedRestrictedByLabelDimension9	is a DerivedField
			type is MessageField
			if (Requester.Company.ItemGroup.StructureRow.Type.Dimension9)
				return Requester.Company.ItemGroup.StructureRow.DisplayLabel
				
		DerivedRestrictedByLabelDimension10	is a DerivedField
			type is MessageField
			if (Requester.Company.ItemGroup.StructureRow.Type.Dimension10)
				return Requester.Company.ItemGroup.StructureRow.DisplayLabel
												
		DerivedRestrictedByLabel			is a DerivedField
			type is MessageField
			return Requester.Company.ItemGroup.StructureRow.DisplayLabel
												
	Conditions
	
		ForAccountingEntityOrAccountingUnit
			restricted
			when (Requester.Company.ItemGroup.StructureRow.Type.AccountingEntity
			or	 Requester.Company.ItemGroup.StructureRow.Type.AccountingUnit)

		HasAccountingEntity
			restricted
			when (Requester.Company.ItemGroup.StructureRow.Type.AccountingUnit
			and	DistributionAccount.ToAccountingEntity entered
			and DistributionAccount.AccountingUnit not entered)
						
		HasRequesterRestrictions
			restricted
			when (Requester.Company.ItemGroup.StructureRow entered)
									
	Relations
		DuplicateRequesterFinanceStructureRel
			one-to-many relation to RequesterFinanceStructure
			Field Mapping uses symbolic key
				related.HROrganization	= HROrganization
				related.Requester		= Requester
			Instance Selection
				where (related.DistributionAccount = DistributionAccount)
				
	Field Rules
		DistributionAccount.Ledger
			if (Requester.Company.GeneralLedgerCompany.FinanceEnterpriseGroup exists
			and DistributionAccount.ToAccountingEntity entered)
				default to Requester.Company.GeneralLedgerCompany.FinanceEnterpriseGroup.CoreLedger

		DistributionAccount.ToAccountingEntity
			if (Requester.Company.GeneralLedgerCompany.FinanceEnterpriseGroup exists
			and !DistributionAccount.ToAccountingEntity entered)
				initialize DistributionAccount.Ledger  
			
		DistributionAccount
			required
				"<DerivedRestrictedByLabel>IsARequiredField"
			constraint (!HasAccountingEntity)
				"A<DerivedRestrictedByLabelAcctUnit>MustBeEntered"
			constraint (DuplicateRequesterFinanceStructureRel not exists)
				"A_\Requster_\Finance_\StructureWith_\Account<DistributionAccount>And_\Requester<Requester>AlreadyExists"
				
	Actions
		Create is a Create Action
			valid when (HasRequesterRestrictions)
				
		Update is an Update Action
			
		Delete is a Delete Action
