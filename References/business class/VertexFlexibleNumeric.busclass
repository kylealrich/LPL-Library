VertexFlexibleNumeric is a BusinessClass	 	
    owned by tx
	prefix is FlexN	

    Ontology
        symbolic key is VertexFlexibleNumeric

    Patterns
        disable Auditing
        disable EffectiveDated
        disable UniqueID

	Persistent Fields
		NumericValue 		is an InternationalAmount	
			precision is NumberOfDecimals
		NumberOfDecimals 	is Numeric 1 
			States
				Zero	  	value is 0
				Two			value is 2
				Three       value is 3
				Four	  	value is 4
				Six			value is 6 					
		ExternalValue	is a DynamicField	
		Description		is Alpha 30

	Transient Fields
		ConvertNumericValue is Decimal 18.8
			precision is ConvertNumberOfDecimals
		
		ConvertNumberOfDecimals is Numeric 1 
			States
				Zero	  	value is 0
				Two			value is 2
				Three       value is 3
				Four	  	value is 4
				Six			value is 6 		
				
	Local Fields
		EightDecimals		is Decimal 18.8	
		SixDecimals			is Decimal 18.6	

		FourDecimals		is Decimal 18.4
		ThreeDecimals		is Decimal 18.3
		TwoDecimals         is Decimal 18.2

		NoDecimal			is Decimal 18

	Derived Fields
		DerivedDecimalValue		is a StringField	 
			type is Text
			OutputNumericValue
			
		DerivedDecimalValue2	is a DerivedField
			type is Alpha 25
			return NumericValue
 	  
		OutputNumericValue		is a DerivedField
			type is Alpha 25	 
			if (NumberOfDecimals = 8)
				EightDecimals = NumericValue
				return EightDecimals
			else			
			if (NumberOfDecimals = 6)
				SixDecimals = NumericValue
				return SixDecimals
			else			
			if (NumberOfDecimals.Four)
				FourDecimals = NumericValue
				return FourDecimals
			else
			if (NumberOfDecimals.Three)
				ThreeDecimals = NumericValue
				return ThreeDecimals
			else			
			if (NumberOfDecimals = 2)
				TwoDecimals = NumericValue
				return TwoDecimals
			else
			if (NumberOfDecimals = 0)			
				NoDecimal = NumericValue
				return NoDecimal				
 
			return NumericValue

		ConvertNumericsDerivedField is a DerivedField			 				 
			type is Alpha 25	 
			if (ConvertNumberOfDecimals = 8)
				EightDecimals = ConvertNumericValue
				return EightDecimals
			else			
			if (ConvertNumberOfDecimals = 6)
				SixDecimals = ConvertNumericValue
				return SixDecimals
			else			
			if (ConvertNumberOfDecimals.Four)
				FourDecimals = ConvertNumericValue
				return FourDecimals
			else
			if (ConvertNumberOfDecimals.Three)
				ThreeDecimals = ConvertNumericValue
				return ThreeDecimals
			else			
			if (ConvertNumberOfDecimals = 2)
				TwoDecimals = ConvertNumericValue
				return TwoDecimals
			else
			if (ConvertNumberOfDecimals = 0)			
				NoDecimal = ConvertNumericValue
				return NoDecimal				
 
			return ConvertNumericValue
			
   	Field Rules
 		ExternalValue
			if (ExternalValue.ValueIs entered)
				Description = ExternalValue.Description

	Rule Blocks				
		EditFields
			constraint (ExternalValue > 0				 
			or          NumericValue entered)
				"EitherNumericValueOrExternalValueRequired"			
				
    Actions
        Create is a Create Action
			Action Rules
				include EditFields

        Update is an Update Action
			Action Rules
				include EditFields
				
        Delete is a Delete Action
