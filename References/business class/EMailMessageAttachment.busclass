EMailMessageAttachment is a BusinessClass
    owned by la
    prefix is EMMA

    Ontology
		part of EMailMessageQueue
    		relative key is Sequence is Numeric size 6

	Patterns
    	implements CRUD
		implements CreateStamp
		disable Auditing
		disable EffectiveDated

    Persistent Fields
		AttachmentData

	Field Rules
		AttachmentData
			if (!EMailMessageQueue.Status.Failed)
				cannot be changed 	

	Conditions
    	CanUpdate
    		default label is untranslatable
    		when (EMailMessageQueue.Status.Hold
    		or    EMailMessageQueue.Status.Failed) 

		CanDelete
			default label is untranslatable
    		when (EMailMessageQueue.Status.Hold
    		or 	  EMailMessageQueue.Status.Complete	
    		or    EMailMessageQueue.Status.Failed)     		
    													
	Actions
		Create is a Create Action			
			allow anonymous access			
			restricted
			bypass field rules
			Action Rules
				autosequence Sequence
					minimize contention
			
		Update is an Update Action
			valid when (CanUpdate)
		
		Delete is a Delete Action
			valid when (CanDelete)
			
		PurgeRecord is a Purge Action
			valid when (CanDelete)
			confirmation required
				"ThisWillPhysicallyDeleteTheRecord.AreYouSureYouWantToPurge?"
