PurchasingSystemClose is a BusinessTask
    owned by po

	Parameters
		FinanceEnterpriseGroup
		PrmCompany							is a PurchasingCompany
			default label is "Company"
		PrmCompanyGroup						is a GeneralLedgerCompanyGroup		
			default label is "CompanyGroup"
		AllowUnreleasedReceipts				is Boolean
		RequireReceivedNotInvoicedReport	is Boolean
	
	Parameter Rules
		FinanceEnterpriseGroup
			initial value is actor.context.FinanceEnterpriseGroup
		PrmCompany
			if (PrmCompany entered)
				constraint (PrmCompanyGroup not entered)
					"CannotEnterBoth_CompanyAnd_Company_Group"
				constraint (PrmCompany.POSystemClosingControlRel.Control)
					"CompanyIsNotSetUpFor_Close_Control"
				constraint (PrmCompany.POSystemClosingControlRel.CurrentPeriodNotClosed)
					"PeriodIsAlreadyClosedFor_Purchasing_System.ClosePeriodFor_Global_LedgerToRunAgain."
			if (PrmCompany not entered)
				constraint (PrmCompanyGroup entered)
					"The_Company_GroupOr_CompanyParameterIsRequired"
		PrmCompanyGroup
			if (PrmCompanyGroup entered)
				constraint (PrmCompanyGroup.POSystemClosingControlCompaniesWithControlRel exists)
					"NoCompanyInThe_Company_GroupIsSetUpFor_Purchasing_System_Close_Control"
				constraint (PrmCompanyGroup.POSystemClosingControlCompaniesWithOpenPeriodRel exists)
					"PeriodIsAlreadyClosedForThe_Purchasing_SystemForAllCompaniesWith_Purchasing_System_Closing_ControlInThe_Company_Group"

	Actions
		PurchasingSystemClose is an Instance Action
			Action Rules
				if (PrmCompany entered)
					invoke PurchasingSystemClose PrmCompany
						invoked.FinanceEnterpriseGroup				= FinanceEnterpriseGroup
						invoked.AllowUnreleasedReceipts				= AllowUnreleasedReceipts
						invoked.RequireReceivedNotInvoicedReport 	= RequireReceivedNotInvoicedReport
				else
					invoke BatchPurchasingSystemClose PrmCompany
						invoked.FinanceEnterpriseGroup				= FinanceEnterpriseGroup
						invoked.AllowUnreleasedReceipts				= AllowUnreleasedReceipts
						invoked.RequireReceivedNotInvoicedReport 	= RequireReceivedNotInvoicedReport
						invoked.PrmCompanyGroup						= PrmCompanyGroup
						
